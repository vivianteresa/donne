import{r as B,O as xt,a as rr,R as Ga}from"./index.D5YfQ7aw.js";(function(){try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode('@charset "UTF-8";@import"https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap";@import"https://cdnjs.cloudflare.com/ajax/libs/normalize/7.0.0/normalize.min.css";@import"https://fonts.googleapis.com/css2?family=Lato:wght@400;700&family=Martel+Sans:wght@200&family=Martel:wght@400;700&family=Taviraj:wght@300;500&family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap";@import"https://fonts.googleapis.com/icon?family=Material+Icons";@import"https://use.fontawesome.com/releases/v5.0.8/css/all.css";.r6o-editor{top:0;left:0;margin-left:-19px}.a9s-annotationlayer{position:absolute;top:0;left:0;width:100%;height:100%;outline:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none}.a9s-annotationlayer.no-cursor,.a9s-annotationlayer.no-cursor *{cursor:none!important}.a9s-crosshair line{stroke-width:1px;stroke:#00000080;pointer-events:none;vector-effect:non-scaling-stroke;shape-rendering:crispEdges}.a9s-selection-mask{stroke:none;fill:transparent;pointer-events:none}.a9s-annotation rect,.a9s-annotation circle,.a9s-annotation ellipse,.a9s-annotation path,.a9s-annotation polygon,.a9s-annotation line,.a9s-selection rect,.a9s-selection circle,.a9s-selection ellipse,.a9s-selection path,.a9s-selection polygon,.a9s-selection line{fill:transparent;cursor:pointer;vector-effect:non-scaling-stroke}.a9s-annotation .a9s-inner,.a9s-selection .a9s-inner{stroke:#fff;stroke-width:1px;fill:transparent}.a9s-annotation .a9s-inner:hover,.a9s-selection .a9s-inner:hover{stroke:#fff000}.a9s-annotation .a9s-outer,.a9s-selection .a9s-outer{stroke:#000000b3;stroke-width:3px;fill:none}.a9s-annotation .a9s-formatter-el,.a9s-selection .a9s-formatter-el{overflow:visible}.a9s-annotation.a9s-point .a9s-inner{display:none}.a9s-annotation.a9s-point .a9s-outer{stroke:#5a5a5a;stroke-width:1.5px;fill:#ffffff80}.a9s-annotation.a9s-point .a9s-outer:hover{fill:#fff000}.a9s-annotation.selected .a9s-inner,.a9s-selection .a9s-inner{stroke:#fff000}.a9s-annotation.editable .a9s-inner{stroke:#fff000;cursor:move!important}.a9s-annotation.editable .a9s-inner:hover{fill:#fff0001a}.a9s-handle{cursor:move}.a9s-handle .a9s-handle-inner{stroke:#fff000;fill:#000}.a9s-handle .a9s-handle-outer{stroke:#000;fill:#fff}.a9s-handle:hover .a9s-handle-inner{fill:#fff000}.r6o-btn{background-color:#4483c4;border:1px solid #4483c4;box-sizing:border-box;color:#fff;cursor:pointer;display:inline-block;font-size:14px;margin:0;outline:none;text-decoration:none;white-space:nowrap;padding:6px 18px;min-width:70px;vertical-align:middle;-webkit-border-radius:2px;-khtml-border-radius:2px;-moz-border-radius:2px;border-radius:2px}.r6o-btn *{vertical-align:middle;cursor:pointer}.r6o-btn .r6o-icon{margin-right:4px}.r6o-btn:disabled{border-color:#a3c2e2!important;background-color:#a3c2e2!important}.r6o-btn:hover{background-color:#4f92d7;border-color:#4f92d7}.r6o-btn.outline{border:1px solid #4483c4;color:#4483c4;background-color:transparent;text-shadow:none}.r6o-autocomplete{display:inline;position:relative}.r6o-autocomplete div[role=combobox]{display:inline}.r6o-autocomplete input{outline:none;border:none;width:80px;height:100%;line-height:14px;white-space:pre;box-sizing:border-box;background-color:transparent;font-size:14px;color:#3f3f3f}.r6o-autocomplete ul{position:absolute;margin:0;padding:0;list-style-type:none;background-color:#fff;border-radius:3px;border:1px solid #d6d7d9;box-sizing:border-box;box-shadow:0 0 20px #00000040}.r6o-autocomplete ul:empty{display:none}.r6o-autocomplete li{box-sizing:border-box;padding:2px 12px;width:100%;cursor:pointer}.r6o-editable-text{max-height:120px;overflow:auto;outline:none;min-height:2em;font-size:14px;font-family:Lato,sans-serif}.r6o-editable-text:empty:not(:focus):before{content:attr(data-placeholder);color:#c2c2c2}.r6o-widget.comment{font-size:14px;min-height:3em;background-color:#fff;position:relative}.r6o-widget.comment .r6o-editable-text,.r6o-widget.comment .r6o-readonly-comment{padding:10px;width:100%;box-sizing:border-box;outline:none;border:none;background-color:transparent;resize:none}.r6o-widget.comment .r6o-readonly-comment{white-space:pre-line}.r6o-widget.comment .r6o-editable-text::-webkit-input-placeholder{color:#c2c2c2}.r6o-widget.comment .r6o-editable-text::-moz-placeholder{color:#c2c2c2}.r6o-widget.comment .r6o-editable-text:-moz-placeholder{color:#c2c2c2}.r6o-widget.comment .r6o-editable-text:-ms-input-placeholder{color:#c2c2c2}.r6o-widget.comment .r6o-lastmodified{border:1px solid #e5e5e5;display:inline-block;border-radius:2px;margin:0 10px 8px;padding:4px 5px;line-height:100%;font-size:12px}.r6o-widget.comment .r6o-lastmodified .r6o-lastmodified-at{color:#757575;padding-left:3px}.r6o-widget.comment .r6o-arrow-down{position:absolute;height:20px;width:20px;top:9px;right:9px;line-height:22px;background-color:#fff;text-align:center;-webkit-font-smoothing:antialiased;border:1px solid #e5e5e5;cursor:pointer;-webkit-border-radius:1px;-khtml-border-radius:1px;-moz-border-radius:1px;border-radius:1px}.r6o-widget.comment .r6o-arrow-down.r6o-menu-open{border-color:#4483c4}.r6o-widget.comment .r6o-comment-dropdown-menu{position:absolute;top:32px;right:8px;background-color:#fff;border:1px solid #e5e5e5;list-style-type:none;margin:0;padding:5px 0;z-index:9999;-webkit-box-shadow:0 2px 4px rgba(0,0,0,.2);-moz-box-shadow:0 2px 4px rgba(0,0,0,.2);box-shadow:0 2px 4px #0003}.r6o-widget.comment .r6o-comment-dropdown-menu li{padding:0 15px;cursor:pointer}.r6o-widget.comment .r6o-comment-dropdown-menu li:hover{background-color:#ecf0f1}.r6o-widget.comment .r6o-purposedropdown{position:relative;z-index:2}.r6o-widget.comment.editable{background-color:#ecf0f1}.r6o-widget.r6o-tag:empty{display:none}@media all and (-ms-high-contrast: none),(-ms-high-contrast: active){.r6o-widget.tag .r6o-taglist li{height:27px}.r6o-widget.tag .r6o-taglist li .r6o-delete-wrapper .r6o-delete{position:relative;top:-4px}}.r6o-widget.r6o-tag{background-color:#ecf0f1;border-bottom:1px solid #e5e5e5;padding:1px 3px;display:flex}.r6o-widget.r6o-tag ul{margin:0;padding:0;list-style-type:none;z-index:1}.r6o-widget.r6o-tag ul.r6o-taglist{flex:0;white-space:nowrap}.r6o-widget.r6o-tag ul.r6o-taglist li{display:inline-block;margin:1px 1px 1px 0;padding:0;vertical-align:middle;overflow:hidden;font-size:12px;background-color:#fff;border:1px solid #d6d7d9;cursor:pointer;position:relative;line-height:180%;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-border-radius:2px;-khtml-border-radius:2px;-moz-border-radius:2px;border-radius:2px;-webkit-box-shadow:0 0 4px rgba(0,0,0,.1);-moz-box-shadow:0 0 4px rgba(0,0,0,.1);box-shadow:0 0 4px #0000001a}.r6o-widget.r6o-tag ul.r6o-taglist li .r6o-label{padding:2px 8px;display:inline-block}.r6o-widget.r6o-tag ul.r6o-taglist li .r6o-delete-wrapper{display:inline-block;padding:2px 0;color:#fff;width:0;height:100%;background-color:#4483c4;-webkit-border-top-right-radius:2px;-webkit-border-bottom-right-radius:2px;-khtml-border-radius-topright:2px;-khtml-border-radius-bottomright:2px;-moz-border-radius-topright:2px;-moz-border-radius-bottomright:2px;border-top-right-radius:2px;border-bottom-right-radius:2px}.r6o-widget.r6o-tag ul.r6o-taglist li .r6o-delete-wrapper .r6o-delete{padding:2px 6px}.r6o-widget.r6o-tag ul.r6o-taglist li .r6o-delete-wrapper svg{vertical-align:text-top}.r6o-widget.r6o-tag ul.r6o-taglist li .r6o-delete-enter-active{width:24px;transition:width .2s}.r6o-widget.r6o-tag ul.r6o-taglist li .r6o-delete-enter-done,.r6o-widget.r6o-tag ul.r6o-taglist li .r6o-delete-exit{width:24px}.r6o-widget.r6o-tag ul.r6o-taglist li .r6o-delete-exit-active{width:0;transition:width .2s}.r6o-widget.r6o-tag .r6o-autocomplete{flex:1;position:relative}.r6o-widget.r6o-tag .r6o-autocomplete li{font-size:14px}.r6o-widget.r6o-tag input{width:100%;padding:0 3px;min-width:80px;outline:none;border:none;line-height:170%;background-color:transparent;color:#3f3f3f}.r6o-widget.r6o-tag input::-webkit-input-placeholder{color:#c2c2c2}.r6o-widget.r6o-tag input::-moz-placeholder{color:#c2c2c2}.r6o-widget.r6o-tag input:-moz-placeholder{color:#c2c2c2}.r6o-widget.r6o-tag input:-ms-input-placeholder{color:#c2c2c2}.r6o-editor{position:absolute;z-index:99999;width:400px;color:#3f3f3f;opacity:0;font-family:Lato,sans-serif;font-size:17px;line-height:27px;-webkit-transition:opacity .2s ease-in;-moz-transition:opacity .2s ease-in;transition:opacity .2s ease-in}.r6o-editor .r6o-arrow{position:absolute;overflow:hidden;top:-12px;left:12px;width:28px;height:12px;display:none}.r6o-editor .r6o-arrow:after{content:"";position:absolute;top:5px;left:5px;width:18px;height:18px;background-color:#fff;-webkit-backface-visibility:hidden;-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);-o-transform:rotate(45deg);transform:rotate(45deg)}.r6o-editor .r6o-editor-inner{background-color:#fff;-webkit-border-radius:2px;-khtml-border-radius:2px;-moz-border-radius:2px;border-radius:2px;-webkit-box-shadow:2px 2px 42px rgba(0,0,0,.4);-moz-box-shadow:2px 2px 42px rgba(0,0,0,.4);box-shadow:2px 2px 42px #0006}.r6o-editor .r6o-editor-inner .r6o-widget:first-child{-webkit-border-top-left-radius:2px;-webkit-border-top-right-radius:2px;-khtml-border-radius-topleft:2px;-khtml-border-radius-topright:2px;-moz-border-radius-topleft:2px;-moz-border-radius-topright:2px;border-top-left-radius:2px;border-top-right-radius:2px}.r6o-editor .r6o-editor-inner .r6o-widget{border-bottom:1px solid #e5e5e5}.r6o-editor .r6o-footer{position:relative;text-align:right;padding:8px 0}.r6o-editor .r6o-footer .r6o-btn{margin-right:8px}.r6o-editor .r6o-footer .r6o-btn.delete-annotation{position:absolute;top:7px;left:7px;background-color:transparent;border:none;color:#4483c4;width:32px;height:32px;min-width:0;border-radius:100%;padding:0;display:flex;justify-content:center;align-items:center;-webkit-transition:all .1s ease-in;-moz-transition:all .1s ease-in;-o-transition:all .1s ease-in;transition:all .1s ease-in}.r6o-editor .r6o-footer .r6o-btn.delete-annotation:hover{color:#fff;background-color:#ef352c}@media (max-width: 640px){.r6o-editor{width:260px}}.r6o-editor.r6o-arrow-top .r6o-arrow{display:block}.r6o-editor.r6o-arrow-right{margin-left:8px}.r6o-editor.r6o-arrow-right .r6o-arrow{left:auto;right:12px}.r6o-editor.r6o-arrow-bottom .r6o-arrow{display:block;top:auto;bottom:-12px}.r6o-editor.r6o-arrow-bottom .r6o-arrow:after{top:-11px;box-shadow:none}.r6o-editor.pushed .r6o-arrow,.r6o-editor.dragged .r6o-arrow{display:none}.r6o-editor .r6o-draggable{cursor:move}.r6o-purposedropdown{width:150px;display:inline-block}.r6o-noselect{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.a9s-annotation.hover .a9s-inner{stroke:#fff000}.a9s-annotation:not(.hover):hover .a9s-inner{stroke:#fff}.a9s-osd-crosshair-container{position:absolute;top:0;left:0;width:100%;height:100%;z-index:1;pointer-events:none}.editioncrafter-record-list{width:100%;height:100%;display:flex;gap:20px;font-family:Inter,sans-serif;margin:0;padding:0}.editioncrafter-record-list h1,h2,h3,h4,p{margin:0;padding:0}.editioncrafter-record-list h1{font-size:32px;font-style:normal;font-weight:600}.editioncrafter-record-list h2{font-size:24px;font-style:normal;font-weight:600}.editioncrafter-record-list div.h-separator{border-top:1px solid #E1E3E6;width:100%}.editioncrafter-record-list *{box-sizing:border-box}.editioncrafter-record-list a{color:#07529a;font-family:Inter;font-size:18px;font-style:normal;font-weight:700;text-decoration:none}.editioncrafter-record-list button:hover{cursor:pointer}.editioncrafter-record-list .loading{height:100%;width:100%;display:flex;flex-flow:column;align-items:center;justify-content:center;gap:20px;background-color:#fff}.editioncrafter-record-list .pill{-webkit-appearance:none;-moz-appearance:none;appearance:none;display:flex;height:32px;padding:4px 12px;justify-content:center;align-items:center;gap:4px;border-radius:50px;border:1px solid #CEDAE7;background:#cedae7;color:#0a0a0a;font-family:Inter;font-size:14px;font-weight:500}.editioncrafter-record-list .record-list-view{flex-grow:1;display:flex;flex-flow:column;gap:16px}.editioncrafter-record-list .record-list-view .entries-header{padding:10px 0}.editioncrafter-record-list .record-list-view .record-box{width:100%;border-radius:5px;border:1px solid #E1E3E6;display:flex;flex-flow:column;gap:8px;padding:16px;transition:.3s}.editioncrafter-record-list .record-list-view .record-box:hover{box-shadow:1px 1px 6px #00000040}.editioncrafter-record-list .record-list-view .record-box .category-list{display:flex;gap:6px}.editioncrafter-record-list .record-list-view .record-box .tag-list{display:flex;flex-wrap:wrap;gap:8px;align-items:center;font-size:14px;font-weight:500}.editioncrafter-record-list .record-list-view .record-box .tag-list .tag-list-label{font-weight:600}.editioncrafter-record-list .record-list-view .record-box .tag-list .pill{background:#fff;display:flex;height:32px;padding:4px 12px 4px 4px;justify-content:center;align-items:center;gap:8px;border-radius:50px;border:1px solid #E1E3E6}.editioncrafter-record-list .record-list-view .record-box .category-list .pill.active{background:#07529a;color:#fff}.editioncrafter-record-list .record-list-view .record-box .tag-list .pill .tag-count{display:inline-flex;height:24px;min-width:24px;padding:4px;flex-direction:column;justify-content:center;align-items:center;gap:10px;flex-shrink:0;border-radius:50px;background:#b5c8dc99}.editioncrafter-record-list .record-list-view .record-box .tag-list .pill.active{border:1px solid #07529A;color:#07529a}.editioncrafter-record-list .record-list-view .record-box .tag-list .pill.active .tag-count{background:#07529a;color:#fff}.editioncrafter-record-list .ec-sidebar{background-color:#f3f4f7;padding:32px 24px;display:flex;flex-direction:column;gap:20px;width:380px;flex-grow:0}.editioncrafter-record-list .collapsible-menu .collapsible-menu-toggle{display:flex;align-items:center;justify-content:space-between;-webkit-appearance:none;-moz-appearance:none;appearance:none;background:none;border:none;width:100%}.editioncrafter-record-list .collapsible-menu .collapsible-menu-title{font-size:16px;font-weight:700}.editioncrafter-record-list .sidebar-tag-list{display:flex;flex-wrap:wrap;gap:6px}.editioncrafter-record-list .sidebar-tag-list .pill.active{background:#07529a;color:#fff}.editioncrafter-record-list .sidebar-tag-list .hidden{visibility:hidden}.editioncrafter .MuiInputBase-root{font-family:Inter,sans-serif}.editioncrafter *{box-sizing:border-box}.editioncrafter div{width:auto}.editioncrafter body{padding:0;margin:0;box-sizing:border-box}.editioncrafter .warning{color:#ff0}.editioncrafter .fa{width:max(1.5rem,24px);padding:max(.2rem,3.2px) max(.1rem,1.6px) max(.1rem,1.6px);text-align:center}.editioncrafter .fa.active{background-color:#9e9e9e0a;border:max(.2rem,3.2px) solid #FF9800}.editioncrafter .fa-book.active{border-radius:0 max(2rem,32px) max(2rem,32px) 0}.editioncrafter .fa:not(.active){color:gray}.editioncrafter .fa.fa-lock,.editioncrafter .fa.fa-lock-open{border-radius:max(2rem,32px) 0 0 max(2rem,32px)}.editioncrafter .vertical-separator{height:100%;border-right:1px solid #6F747C;margin:10px 0}.editioncrafter .line-clamp{display:-webkit-box;-webkit-box-orient:vertical;overflow:hidden;-webkit-line-clamp:3}.editioncrafter .line-clamp.two-lines{-webkit-line-clamp:2}.editioncrafter .flex-parent{display:flex}.editioncrafter .flex-parent.half-width{width:50%}.editioncrafter .flex-parent.full-width{width:100%}.editioncrafter .flex-parent.column{flex-direction:column}.editioncrafter .flex-parent.jc-start{justify-content:flex-start}.editioncrafter .flex-parent.jc-center{justify-content:center}.editioncrafter .flex-parent.jc-end{justify-content:flex-end}.editioncrafter .flex-parent.jc-space-btw{justify-content:space-between}.editioncrafter .flex-parent.jc-space-around{justify-content:space-around}.editioncrafter .flex-parent.ai-start{align-items:flex-start}.editioncrafter .flex-parent.ai-center{align-items:center}.editioncrafter .flex-parent.ai-end{align-items:flex-end}.editioncrafter .flex-parent.wrap{flex-wrap:wrap}.editioncrafter .flex-parent.row-reverse{flex-direction:row-reverse}.editioncrafter .flex-parent.column-reverse{flex-direction:column-reverse}.editioncrafter .flex-parent .flex-1{flex:1}.editioncrafter .flex-parent .flex-2{flex:2}.editioncrafter .flex-parent .flex-3{flex:3}.editioncrafter .flex-parent .flex-4{flex:4}.editioncrafter .flex-parent .flex-5{flex:5}.editioncrafter .flex-parent .flex-6{flex:6}.editioncrafter .flex-parent .flex-7{flex:7}.editioncrafter .flex-parent .flex-8{flex:8}.editioncrafter .flex-parent .flex-9{flex:9}.editioncrafter .flex-parent .flex-10{flex:10}.editioncrafter .flex-parent .flex-11{flex:11}.editioncrafter .flex-parent .flex-12{flex:12}.editioncrafter .bg-maroon-gradient{background-image:linear-gradient(to right,#792421,#66211c,#531d17,#411912,#30140d)}.editioncrafter .bg-dark-gradient-bt{background-image:linear-gradient(to bottom,#f2e6d9,#e6e0c1,#e4d2a5)}.editioncrafter .bg-dark-gradient-tb{background-image:linear-gradient(to bottom,#e4d2a5,#e6e0c1,#f2e6d9)}.editioncrafter .bg-light-gradient-bt{background-image:linear-gradient(to bottom,#fefcfb,#f0eddb,#ede2c4)}.editioncrafter .bg-light-gradient-tb{background-image:linear-gradient(to bottom,#ede2c4,#f0eddb,#fefcfb)}.editioncrafter .accent-bar{height:10px;width:100%}.editioncrafter .invisible{display:none}.editioncrafter .disabled{opacity:.5}.editioncrafter .figure-dialog-img-container img{display:block;width:100%;height:auto}.editioncrafter a:hover{text-decoration:underline}.editioncrafter a{color:#792421;text-decoration:none}@-webkit-keyframes slide-down{0%{height:2px;bottom:-5px}to{height:6px;bottom:-9px}}@-moz-keyframes slide-down{0%{height:2px;bottom:-5px}to{height:6px;bottom:-9px}}@-ms-keyframes slide-down{0%{height:2px;bottom:-5px}to{height:6px;bottom:-9px}}@-o-keyframes slide-down{0%{height:2px;bottom:-5px}to{height:6px;bottom:-9px}}@keyframes slide-down{0%{height:2px;bottom:-5px}to{height:6px;bottom:-9px}}.editioncrafter #globalNavigation{display:flex;align-items:center;flex-direction:row-reverse;font-size:max(.9rem,14.4px);position:relative;top:min(-4rem,-64px);right:max(2rem,32px);float:right}@container diplomatic (min-width: 960px){.editioncrafter #globalNavigation{display:block}}.editioncrafter #globalNavigation .expandedViewOnly span,.editioncrafter #globalNavigation .expandedViewOnly a{color:#fff;margin-left:max(1rem,16px);cursor:pointer}.editioncrafter #globalNavigation span .francais{font-weight:100}.editioncrafter #globalNavigation input{height:max(1.5rem,24px);padding:0 0 0 max(.5rem,8px);font-style:italic;border:1px solid rgba(0,0,0,.3882352941);color:#756c6c;background-color:#d8d8d8}.editioncrafter #loadingStateModal{position:fixed;z-index:9000;background-color:#0000007a;width:100vw;height:100vh}.editioncrafter .spinner{width:100%;height:100%;margin:calc(50vh - (max(1rem,16px)/2)) auto 0 auto;text-align:center}.editioncrafter .spinner>div{width:max(1rem,16px);height:max(1rem,16px);background-color:#fff;border-radius:100%;display:inline-block;-webkit-animation:sk-bouncedelay 1.4s infinite ease-in-out both;animation:sk-bouncedelay 1.4s infinite ease-in-out both}.editioncrafter .spinner .bounce1{-webkit-animation-delay:-.32s;animation-delay:-.32s}.editioncrafter .spinner .bounce2{-webkit-animation-delay:-.16s;animation-delay:-.16s}@-webkit-keyframes sk-bouncedelay{0%,to,80%{-webkit-transform:scale(0)}40%{-webkit-transform:scale(1)}}@keyframes sk-bouncedelay{0%,to,80%{-webkit-transform:scale(0);transform:scale(0)}40%{-webkit-transform:scale(1);transform:scale(1)}}.editioncrafter figure{padding:max(.3rem,4.8px) 0 0;border-radius:max(.2rem,3.2px);margin:0;text-align:center}.editioncrafter figure.current{background-color:#077affd4}.editioncrafter .thumbnail-caption.current{color:#077affd4!important;font-weight:900}.editioncrafter .watermarkContainer .navigationComponent{position:absolute}.editioncrafter .watermark{width:100%;height:100%;margin:calc(50% - (max(10rem,160px)/2)) auto 0 auto}.editioncrafter .transcriptContent .watermark{margin:calc(50% - 12.5rem) auto 0 auto}.editioncrafter .watermark_contents{width:max(10rem,160px);height:max(10rem,160px);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIYAAABKCAYAAAB+UyxeAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAB4ISURBVHgB7V1LcBtncu4ZgNRjt4rQLTeOKntgZb0reNd2uWpTReiWnAQdNpbsrRJ88EZyUiXylhupUyonkVVZy9k9CKqyrTg5EDrmJPDmJJsVmN2kdNPw5pwMVa1lPoD50193/4PBiwRAkJJldRUJYGYw8z/678fX3T8CmpDKV65HFIYb5FyBWq3LtX/9TYNe0UtDIU1KQbDKTBHzayGYmZ2nV/RSUZ4mIJYWFWaIa/IhoKZrt5/SK3qpKEcT0MKP3togcnV+++/MGW8zk5QXfvjT/3v8h99+69VJubxUWPjJT64svPZGxP15TN9RCmhMwsDRmd1HrEbeZ4YoiuRIkm1+rfPpS3z8Xu2fP67St4TK7914SI77QdTkv6jrpKpKMDvG6RL/VWufffQ+fQdofFXy/VaRkiDiAeMBFamBQV3mv5Xa/TsXy7/421L53Q9XmVli2jldq9XWmvQikwvOy2uSYMLj9PjO6Wa27dwnnNum7wiNzRi1T/6xzoPUlDUEieGoyt5JxAN7Sy5Idpu1z36zWr56Y4nO7j3ia+u0v7/+wnotYO6AFrkPt8XDCgLtx9m9iKVJkxmH/1yJj8DAjuk7QhMZn/Rs9nz6/uxemQfuGg/spriwLiiwumERvMerzTWYcSKamdkQZkqS9RdSzThaZ+a4xn8NYQ7natzO2J/mtoOpS9mviEo9vVOUxSFqxm3V7n+8RC8JTcYYp3cKzAgl1rdV/lTlgYPk4NUWFuGl4Hzts4/9uQq/VniwHewRliTXTAXdyw7+c6MgiFmi1Zl5uc13VgdekyRN7u88t/sS92eRoD6DPV4E4TovkjXuLxgnppeIJmMMUSG8sjrUrN3/aBVvRGrkgjIPYIEHtJoyD44D+8BEBEHExx6KmmEV9JwZJKZcDrZE2h9ta7gkKgYGKdSmk1O4Zpv7vsWfYzG8v7d3k9ohS0Lt/yAqX+HF0d5vfJtAwMkYQwYr6BiVrjOoNslreC+G6NUPl6jNEmLnVJ2NuYqIYFU/GHBInjVmkK+eI4P4yYrSI0B0iYDNPJB2Es3xaihzn0skHgp7KrmwJnbV17PxoQZ2jm5TkMdzLtK3hCaVGCwNwg73u2Rt0GUwVPmlLuokv1dlNVKnb9hYdY6N12CTsFph2AUY6+CuWP5JAhVTp5OkdhsMKpLCmLNorupNCrltCd2jkJnbtZbZsB5r1XOfyyJtWMpm7v/C06QSI85+OKyzqTphCcIYiDIRqxkW12WOs6xRPh/xEQzgUx7ASvndGzcpcQ9OyFAt8vObwqwdguta4kbWa59qG1jyrdXuj8kU715fYWP8HDPdZb7/mrj4RKnhnhqwJGNYpxeIJlcl7V0ZpHKFO7e7szqKRZ5KELU3yixqCqLfT52q0+4uG3NJQ6384AJWquAhcBOPW80E7gLrD3gj2k5j5O6L3PjxIFU9MTN/zO0vcn+cMQNUL3tBexxaYFefbTRmomUz2F8ImpQxCqkhtcfW+ZixuF47hHZ2oiDMPXFBOxKjDqvVATgDxhDA21likRzLqp42aDY7W+M+fCXvFb3tU4uy8sPcOo1LLtji/6yOwqIY41BPIjFD4ECRXQWVyh4Pe2xXrscviuSYNLoade6QFMT/n5AgRaAyXNLmQeTVA29nf3/V7slShZQJnFOX8MxuBZJEdPcUqFYVJlu3Z5R6zwtTJGFg0m5kEskQBM7uq5gOGC9gaShMweLJsXFL7it5zeVuMdO/MF5LAN2pb1mcwo1Uoyum4fAv/PkI8Dc+lH9xvURtNtIo2BbVgBXuLX3V23Gqv0MRm3rcH2u3m1AnXlVYnkcJmAFhNTHYxJ8ripNQU7wE4CD5PAzVkrXnAcS1qKUeKHtUMrzlJquR1zvHxEbYknuD1K2NVIoFBUNKC4PGR+NI/ClxVf5/znCQiN+zEesCGeMwrI/LcCdFeQr2q0QzbBQFNVJ0DxPBnMwT4Vi0gwALhyGQSxhK24b2Zeke4xi1QQ+QifaE+IkamiT3T5KCMAtPOksAHuCgKZMPCkQMlwVLgO5X97gormIYLDJDIez/QDwaiOuZmRJBupzdq/EkD2ZqnRgj3M8V7BX2Q0S9i8GFeP45ys8wU2PB5GJ5RqvVkDYxE8p1cL+JGVltCrjvTWFW2Er63Cfc+XllJjGwGzYekTEknn1BXrEwMTYBOibSxI/FvIxHkqzxIrpFx0x5uF88KYiU3uVJusgPvssdbw55uEw+X7/YddTlhq7QAUZjTGOSIqtuSUSxY28ml49MWvjVign1KicSZhkjPiMGNOwMhuy7TsiKl4mI+75zhSXl2b2SSDJFcjcFBcPEk6gLTDSkBn833GbJAYn6gCXt2oFtUZwnYsnVsOdE3ijm+VmH9Cy/88ul2ue/PvA+R6U07K4iPLhN1GKGmNkQ1HIAc4jqSAQOX5XP4qdDFZyMSJQVpvEMlmJtHrwZSC8M3qJJspqt1hJpD+fk8zcCsA1k4JQx4KYGfO+2U+kXhpJewJOpC0I9ipuM7DJD9KlbXdGeWUXtiVQ8D8aycYvM4znqGNw97sBk6pVI469c5/D5TIWXyUUMCnPm0z7OTEIM7kr55x/UpGEQj63dmE6I/MCqy5sv2+DXAVDxJG6LOHds7wROjb9A4Osyr8IlHtAnfO1mr2cDA9SCfPWe4NlTexZAuBV2L0tir8NzcrTF6Gc9aLfnXRBU7Sub/LwafX2qSt9nfMKFG+n92rBLaDo0O7vMfb3L7y7TMVGXu2rMUeXOVyQRJ5ffuHz1xlcb9+/cSy/SgFIz5VZnWMQJU5/L2xZ7aF6tf9gljKxCjDuo6mRVxHHICGeQRzoAUNZqH8rKABQfR19xb9xvjo9tsCRtqq4XKbAujAhGSZJrTg3RLX7+WhaQYwnR3eB+I3XyvoORr97YPE6V0ueuyoCH+4gDQDTewmqQFZM9z2I8NSqn2OFJSVze+3eUmaEKJbuMCub6NgB5o90CZzuHJKLzYguw4cso64bkjpD05bKoyGezMMDrpHYLpANUCTME39ex9xaGD5lZinLs2ey52qe/KvahtG0dl/I7f31TPmvQMaIpkdgqudxil3E/RRoIcIlBeuV6kdqtgPK5usQxrly/mIpFHkD+W+MBrVqm1olLjEHUYyQuidE6MwO9D3UgriYkhDI60M6AXWKAWmLcFczrapiaQYxHvQE1aCvmAW3CSD/UzQSau7eHmNCWqaLpL6DELfN92S6cvko5UOvZSooliQVuooreOD0vRtvX0biBpedBho9UCFB0x5tpGm4D9HFFjjiH95AQms+q6mNLvIyEttgtL434SIX0kcTEng0/G/hIzRuy0yIxaveT4rRVyqHmkDBHm5kDojPglfPNqaUXPo+TugJUiyr2AzJAyvAQURPblkBU1hS/4J43QM2LQNALTI+g2k1BRp27NU5wz3AKMN0W33vpOGI+/Iw1VpnVaXopI9nJKXPkxB0D6lmiF4w6qXZh2RJsYiIDmmAvYcUqUyxKog2kAuBp5yom5iWlLwMmgSqGUawLVhMmZQm4JeKm1sQ9hipltfO8w+mwlejZqfentWhHdqCYKxkedggZz/FfzMyxTFOiNGOKo6ujrkbV22HZoHzNrNLVPS8uKQeufKWcfGGfDeqZmaKIdk1ivkcBR3OdqAugr5sGczcF+xBElO+prnBJ7qG2hrPjkgXPsZuSeC7ETAU32SU1xDxOWqqqERpWDsokG4fG8qzL7/3NbUEgsRqHAGCTEDMd9C4AJkC+r/euPqtlqcgKB+kEPbXvbKdxFDUoedLwHi6lMM68xS0KMvmSkifJu400Xc9xACtAsg7iIHzcPAqVKAyJQ8oEkryzLMG8PNvsrs3SQpBNze5CvgUkUS53U1x6H29S1VSnEyABG5N2NA17YzzG0DwKACvbsrrarfpRG2HSgnW5ru7uINYHPBl5QOEIqAGomtP4Bk9um8V7XnJPGxaQQwnAkmWHeXh8S1Y+0vD+mG/01IlUCKpCXUiXws4S1Q2K5F1Lj10g6ReEupp2u2gBR6gcZUowXiLf2ZRnOjE4NRioObJq5EICHaNEsZqe6lFV2/iMoWIVQFLRVsrlSS1tYzQYeJvka2EliBQ80MF23XUdqhb4PHkYPE7tA+89IHoJDKKHEUboF1DR970qE4MOBifxsQMSaARcg/RwMhZqm4QSLPMeD8CvJyxJzgmDS+BQgLeYNPK8BeY+aCJFbWLcmTkP65PB+7ePWjE3HmNoMAvGZ00wDDXeoJcvTsKhmv2190hwBAwm1AADSAEbhI4kCnlJJIRmZMO+uZRpuTKCo8YgiTBWOyCCxU4gK0ASAxTPinysY6T7QOVJpZ4E+LxUceoNUcOkConk8JJNc15hLNcFdGMbJat6JMM8ELtIFoJPdziwHZC07aB0FGk+HmPAhWvlCQEz48wnmZyL98dhDvF0kGyrIhtA2S2ONC+y77hKEk6HbSCJO0X7yrYgkBjgnpjGSM9ThLCkMRVvG5BGQ/EsSD8lgcqlT5Ai7KoOCnyBCUZhxAyz4P5z5hEp5uzM2PVMgryPU6cigfd10W1p7MdxRJmvYfeZ2zKaJwlVOcE4eZqYMezhKm6dw0DOM8ZxeWTxnYpqT4hoBhGpmogVaBpsH0xCGVyCxJ4hxixCyXRv8kRUUlWmBJCrSsAfYORCJfjEIjUq0cYLbGOtj7MqU1UchrEwiqoazxgcjOTXmXBRJEySQPXM6Zg436Zxx3jVR8HHpfFyPtVazzYK1j/rskCTZs7uPeQVcnHEhlepizF88g8P1rNTr0/dOMufbrCE0/snUH134sxZrcfV9ggcTt6GUbsj7r2dFlblH/Hr3Kjemd2n6p+Z3kulCjNMqyDZXZBocLe1LQUD57ZFipzd+8pKJhuHht7ZCMVeJpNk24dpJ0ejct+R/TbrztayNDphH/7s7l3p6CFkiSgY0Ka8Ppt9nTu/jpV8HBa75XY2TSpdG9CeJUnzR+U+JAnKG7A6h4hiO47EmVUevxU6Stu4vxx7gW1RlXa4BO3A+BTUWxO7Z96kVpUlyy3JspuZeXjgfSUgGo4zvympxEBW0Hsf3uzkVcrRpqWZmfiUNLiyVLd7Ap6AxkmirossTa8xsuSQ7wVbaXnjux9GhjROhdiOeWigVUxaWRaL2gvD2/wsYCaXu3JE/5ivS2p/kkQEiYGK93c/9G3tze/0iTkkzHH1RoUZaSqSTiD5dz9EemVRgnzAUgJRfyVBXfMc8m9LEnZ86L3YPrIyjFUag5QxdII0RY199q6MpbMoDyBE8hgSDvi9JcaCQkQeaVm+F4YF1dMCgClzXL1x63BX1gMIpPUdSW4i17eXzDiOSJN3G7pNQ7AkfdUoKRJ0V7idT23y2QuRUgiTLFKz2uyAYoEa2Wof4L4rinaKq40IZzxlSSdM6N1O8+B4bFiSJeKSR1piMQKFiUSUxwHalDFg8bZpWbyETMKsdTTVYTyAm13fdoI1FFLIOAgemNF0TQaNXUBmjuE4hxYalSGKRU+76Saz8Mt5WS2B1HZUSPASnnjkUPRMIrdhza4BxYTw+6cfDdXf3K+mMoTwNd6XWOp+hXJGloBLdHSK+o4E9KR2X1RYrNABg2UjUO2Tj+tSclFeGtmIV8bQdL2IDQbWbTOwEaoDb9Bd4Y6WBvT1bJXO7K2KqmkbFKxZ0Cz2WGwjl+PnH8SDjCSbvAq2O+KBLhGNuALGILPKVw+9Tm2GQ69Lr1dmr2Uqy6g23UDavBVfKbUQKQ7THFOfLDwyzTJym+yBYVdHuTxMH4L4QZIDlLvOcYnBxhQbmD2dn9cgEkuVUAAcwRhEbCtQBOCmwLGFjQMNoDYyr0jRzp38eB1+ziSGI7LDph1dFbzD0bRIFmEgmXelUa7PpPaxtGCdK64NI01DLO11RuJghUfmeRQFlBFmIAOOOHCFHFBELzvGq0DfLDkGSgQZ2Pt31lh0n/s25HocN+kiwqIKtntOxXQEknRAr/YPoZQxLAtrW4wUuEw51pk9EykIYJ5dOehiFNnAvfNVZN+cqkK3in5lQMqCW7dI60GbkgSTz9+WPUJf0cEkScviIc6lkrZlVXxHJcM2DrusC/lUS373LhI+RG8iknoI0pbmM3r7IzReC826hwXvABzJ+XUYptkI6isaTClKCuNewvvBpWyNy5HuPQJcHgxskCV8SDCGZm4eFqmzKGnR/Pwo3WEnsCxr9fcXDaDZ1JI93YNr1JjDd52mPU6IVR1UFTcwViIuXrvVpN2zVVYZVYsQdm1kYhHJEvkUe/j3ug9E7DsiUge71eRyBUu5A+TcEIRUP/td8uTeds/iIHxfmPTZ9wQrGDZIg44L02ZALPmMcoKMlzTOTjdZL6SHovSdL3rOkqYAesq+p6kbriOQX8zDJNBgxlBw6JHgFCQRPsYl9hmyzpd6uUzsEKTMqcizu7YYgDlVEMM0OynIXUgSv59mZFcj1P7IPqOxyHrq90z0vD/u389nrgCDnUuBqGwtqy+W1syviBTV9WHvgg9pp/fXzwULmFHnPkRdx7ITjIUxjJDRhb9sQTcKxjW6GvXc056Xqe7vPHc+c/4pBTRcguj3OxFkuYd89lX6m1LW2WotD4IShkZXTcc9DJxblRI8pK6pGrgwLGiUqhRMnIaVm6ntEdggYPBV0lySyTAY2UoV5jVe0kNe6gwj20oBb0de+cPd5/7jYZfhN+x73ZSdmG7Kehpx//dcJ9qqgTzPrCqFIHky/T10bAY9C9/JS2YcShsgrcu9Fx9cV2LMIZE9ZFMjP2FAsY0v2JVVg4f6jnTS9OO003oultzREBlNUoDc1DxMJN6kg4K/edLcTke+kssXC2vrm+lq6PRoLruLoD1vy57du9cWUXbrhcEUd33KSgb0VYqrhXEiW/1NqcPRNlSpwwgFOS79JRooJXxppDLVJdKxWxdp7JD5LjkjUL9PDSPK0oO+vg1+hp1DfgfFw4q9D83HsEnXXxtwkhA7MFtL1E+rVZQPPSpk4H0B6TLjpEXKWsV+SWD1DkWCkXRWSER+og64v6gsapFsHi/iuscY1gzvFB72mWnyjFZr0AYvcdcD/CrNYgLqnjes/rckW1A/m00DiZpIjRwMlCIg4Zj7NDND6XOhajxpfTBL6KTm0wrTfBIkJPvNaLSdGEfZVJfV/NQq0katK6laIktM4OJMh/uu9YMsd2/Fw6rUerdPsKqtyHCPiLKTISsmzff0n5u2f5aooICC2sZnv3pgkUS0AWL8HOnWRprQ6wfUT6AZkgOz0nX3Y/3zBIbPy94ckXzWzWSy0qlhk1riGV+pfXbnfHpPnVgkUmt2WJJ0XPsu1YG9T5EYFABPKmfGC6J/JZtFn7YTJaKWRT+tX0cYp67kkXHpOW7ck1G5U7O+5G1MVjsqxzPuUidTXGDxrIHpSb6rK9/jJXxdWwJ1ZbFnEt0dz1ZyZN/XxBtncHu3wdlh7OzWTygNwH08Q8zOxiJnBnkimBAk2GjNa7atRXt2VWpcpMwTOASrxXCAwQoJ5L0YzyQOv+bwUYexlOFXSPc9b2TGJ/UIBXhkb/JEywfM3rDfKeFGtMPF2uf/NP5Odv5+6Ggm61lyJ8AYPhcS1LHMbbDAmGh1riGqQmOAuLYpaGuG+txWUS9Ecl1GSphXRV6UmyqI+hrcwWmU0BavAjSh13tBHRsLKkuZtCTGO+tzyf/MuPVDx4fHI5v4a1IbdsdFkVJqjHYY0koGplWuOH7OJ+wNFmeyUrUirUZjkuV5LKE6zHdASuwSt9wn1v0kqSUdCVOy2wwGqX16Zy1VXZ5xQIDpJ9llb+brKLXw/Q56tkGr/3xo+n4H54hYJJSovV9DKMAYBdsrbKdMBVKGxFjiOcrkgZuTX21wbG99M7uaem2aJXerMxamfpRqCIZq3sbuxrjJ2b00FmNIxzWJdw66rHz1+hp3YO1Q7v8rtidQHERYQXm9NklKWSBLVJXUiKb6tpsgLjNJwX3AFQZkJ/MzEb4SbJD6yNgZ9uxiqjr8Dn1DjNtBdkkKX2uN7LbZHjFLxFgkhK+ub7UaI7vTshNxJ6/DCqRQVHXPcBFTqfJbMTFhkWZ3PhwhnHEQjb8B7OzsKht8D+Xhp06v0i5yMWjpwO/ssQjN7TIbhgWpuUBV15nd3slv6IoXjAOGo7p5fmKTXdbnVLSkXV3FZ3bxviaG7M6Oeg+aEKa76mURyA5zoOCH34dFS7ap4/QgCZNKK9gSuMsuUgz2ijBwGImtCYinbSzKvXXbyZoBdEVJSUgyKkY3gu30CZu6aD1tiTrFVA0xTANa7ENyvWuuRjHeFcS7oW78xqr1b7FURmbZRMbo2BIDZMbiBou5ixZsKx+Eu6e1FSBzZel7uxWogvQabDj2bHbZioT9gGeMMvJ7WCkaiJ1xTvN9kL6X9Ryy5BFHpeig1LYBUHeUvvPuq9gMmIiZYt8NMMlH2Ge0qy22l0ePRK0QJIbWvPTbPGCqZ7Nde4tZFHV+khrjiRhDHmpIJare5X2rVT/I4LE61JLA5UgIQu5HNp9xZ6fKg1qx4pwotbQPwiuyRmIakwmyzMQqQgp3zpOv3/Ab3HZqXHGPOL1PFsDKMhZ0uqmyXjXW1SafIc/2CsbDtzE1ajV9END2tm60zxMMo9TcY7ETNGZ0Ket6ZnYrrMkBfM//zgrUSlpEtb+ehQhg5DN6/aRrH7URaGLGsIdixS8C15A9sg/YVMUitUWbEKy4+ZQxbBuEcXMlU0+jWzLQUVeteCoW15ByTJvcIMxdAFZCx0wG/nVFtRX3cemEj1X1Bw8wY+iPQpNuMi+EhB4xGs/s3hVE7vQBOYUcGWWdZ6tjr9C1LVweCCeNPZF90LyKW6xWDEDXIKTIrLqXkRyE22iruktH4xh+181/7pyL6STIb2KbJd3uCqkL2A0ZOykXU1RWbJvUoK733g4qCe4u93N1VIaa6Ad5s7Tww5/+Gzfs79TYo6cLP/zJ24//57++6Ltu4e3TtJ97jJW8cOENNoqCysKfvf4U1y78+A1hjKP+AO7j3/9ng9vTrP3Lr/vu87jxxc7j//6PmK/5Es+Rv//93Zdy7g+/7WPKx4/5ev6j50ALP37rbX4JuK319NiP3jrDY/w5T2xj4Qd//iXlW6pGULGmpZanoVoWXnujgD723fO1NxqwCxd+8LPPR+nXkSQGSEGVDy5TOPOIUbdlyuculd/5JfWib93WtWyGxjZB/jZz8jy1Zb8NQO41OiI97y2Pjo0gEXyA0pPGe+qjfF3m6eqNeyLdR9jl78gSA/T497/7kjmS4d4cY/nuL5lz7/DKLfBK3Bx0/cKf/qxBs1L93TSg7DS/PmZOfyA/oV0s/gmvCpEyeD9oRb/MtPCjN+WlW2K8+RcwriEVRZrxmIwr0fg7XyxcePP6wmtvPj1MOk/6eyV9ZO7qPSlaSmTL6Qpz6O2B10J6JJIAFEhI3LwIMZKQZJzPd9zBF2QP0RMltYNkWynJyNescY00H5VcC9HZ24fVsx7JKxlEYowC+gWTILaiUG0fyNIL3rzK/ewmM6TL9rExje2T0nsD30Ck9oANb6bPGJ3knmWJaxzwSwav6PnRYcwxFRsjS9B9bF/ApbpP35z5B8rtf46kEz62xediekUvBPFcNNhuCXhu/p69wzO9nuTUbIwsCQfmODx/ZndF3qvNcahee0UnS1qZliyzd7jSOzfHwhjy0E8EaNmGAWrMcVkKnEfYVOVloUwp59Hvxfc5jrGTeVLQrKuEdOo2Ri9Zyt5cGlORzCbbrlFJU+Kz6fC9P7InLbU9PT36OGp2dH+NR2SvMR2e8R0POBZlMsC3qZOxhX5sdV2p10WGSq7K7sc+A83/JpvGa5ojtAkZYRorybl1aqeb2/rv+qTj+QHfzWyS29WnyEIUwJCK2Y3fjp0xQJJ9ZDvv2/uG1LoOi6v4SGenDqObWpnNWzwNuxakOZqNNJ4yhQjo86CugNwUt1/QmJebDxzVfLDtZBjDsoqQqoZMrdpn08tmfkVHI8umQ1rlumSItdvyQ4knwhjSAP191gLp7rg+p6DQk0dZoKP+4MvwQp/e655mRHGhL59T8z4Kdi62M9uU3ZJ6lHZD/UHCzdiP+vmQu1KceR51korSrHhKd0fuiP1mWu7oyypQHe9y7H6Gw/udrf7rrgTM1ufEJL/L4honxhgg7JwjZY9h7p78dqlPsOku3xusKo5CvWrGknHHqVmdhLIZYNNSXYYTZcsaCl0lDFmmymbVy7lAfhyg64YD2oZn/D8pcUShcyMVEAAAAABJRU5ErkJggg==);background-size:100%;background-repeat:no-repeat;margin:auto}.editioncrafter .third_pane_blank{min-width:8px}.editioncrafter .navigationComponent{position:sticky;display:none;z-index:2;height:48px;width:100%;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:4px;background-color:#fff;border-radius:max(.3rem,4.8px);font-family:Inter,sans-serif;font-size:14px;justify-content:space-between;align-items:center;align-self:stretch}@container diplomatic (min-width: 600px){.editioncrafter .navigationComponent{top:80px}}@container diplomatic (min-width: 960px){.editioncrafter .navigationComponent{top:0;left:0;display:flex}}.editioncrafter .navigationComponent button{cursor:pointer}.editioncrafter .navigationComponentNarrow{display:flex;width:auto;z-index:2;height:48px;width:100%;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:4px;background-color:#fff;font-size:14px}@container diplomatic (min-width: 960px){.editioncrafter .navigationComponentNarrow{display:none}}.editioncrafter .navigationComponentNarrow button{cursor:pointer}.editioncrafter .dropdownV2{width:150px;margin-right:10px}.editioncrafter .toolbar-side{display:flex;gap:10px;height:48px;align-items:center;justify-content:center}.editioncrafter .nav-arrow{height:18px;width:18px}.editioncrafter .nav-arrow svg{height:100%;width:100%}.editioncrafter .imageViewComponent .navigationComponent{background-color:#4a4a4a;border-radius:max(.3rem,4.8px);opacity:.8}@container diplomatic (min-width: 960px){.editioncrafter .imageViewComponent .navigationComponent{background-color:#000;color:#fff;border-radius:0;opacity:1}}.editioncrafter .imageViewComponent .navigationComponentNarrow{background-color:#000;color:#fff;border-radius:0;opacity:1}.editioncrafter .transcriptionViewComponent .navigationComponent{background-color:#fff;color:#000}.editioncrafter #doc-type-help:after{color:#978e8e}.editioncrafter #doc-type-help .dark .MuiSvgIcon-root.MuiSelect-icon{color:#fff}.editioncrafter .breadcrumbs{overflow-x:hidden;display:hidden;align-items:baseline;width:100%;justify-content:space-between;align-items:center;gap:10px}@container diplomatic (min-width: 960px){.editioncrafter .breadcrumbs{display:flex}}.editioncrafter .breadcrumbs .vertical-separator{height:24px}.editioncrafter .breadcrumbsNarrow{overflow-x:hidden;display:flex;align-items:baseline;max-width:70%}@container diplomatic (min-width: 960px){.editioncrafter .breadcrumbsNarrow{display:none}}.editioncrafter .breadcrumbs .folio-path{display:flex;gap:6px;font-weight:400}.editioncrafter .breadcrumbs .folio-path .document-title{max-width:80px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.editioncrafter .breadcrumbs .folioName,.editioncrafter .breadcrumbsNarrow .folioName{font-size:14px;font-weight:700;text-decoration-line:underline;text-decoration-style:solid;text-decoration-skip-ink:none;text-decoration-thickness:auto;text-underline-offset:auto;text-underline-position:from-font}.editioncrafter .grid-view-button{height:18px;width:18px;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;background:none}.editioncrafter .grid-view-button svg{height:18px;width:18px}.editioncrafter .imageViewComponent .grid-view-button{color:#fff}.editioncrafter .toggle-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;background:none;color:#6f747c;display:flex;width:32px;height:32px;padding:8px;justify-content:center;align-items:center;gap:10px;border-radius:5px}.editioncrafter .imageViewComponent .toggle-button{background:none;color:#fff}.editioncrafter .toggle-button.active{background:#07529a;color:#fff}.editioncrafter .tag-bar{display:flex;position:absolute;background:#f3f4f7;width:100%;z-index:100}.editioncrafter .tag-bar-close{-webkit-appearance:none;-moz-appearance:none;appearance:none;height:48px;width:48px;display:flex;align-items:center;justify-content:center;border:none;background:none;border-radius:50%}.editioncrafter .tag-bar-close:hover{cursor:pointer;background-color:#ddd}.editioncrafter .tag-bar-close svg{height:24px;width:24px}.editioncrafter .tag-list{width:calc(100% - 30px);top:46px;display:flex;flex-wrap:wrap;align-items:center;gap:6px;align-self:stretch;padding:8px 16px}.editioncrafter .tag-list button{display:flex;padding:6px 10px;justify-content:center;align-items:center;gap:4px;border-radius:50px;border:1px solid rgba(10,10,10,.2);background:#fff}.editioncrafter .tag-list button.active{background-color:#07529a;color:#fff}.editioncrafter .tag-list button:hover{cursor:pointer}.editioncrafter .tag-list .tag-label{display:flex;align-items:center;gap:6px}.editioncrafter .imageViewComponent .tag-bar{background:#242629;top:44px}.editioncrafter .imageViewComponent .tag-bar *{color:#fff}.editioncrafter .imageViewComponent .tag-bar .tag-list button{background-color:#484b51}.editioncrafter .imageViewComponent .tag-bar .tag-list button.active{background-color:#07529a;color:#fff}.editioncrafter .imageViewComponent .tag-bar .tag-bar-close:hover{background:#898888}.editioncrafter .book-mode-toggles{cursor:pointer}.editioncrafter .lockmode-container{display:flex;align-items:center;justify-content:space-between;width:100%}.editioncrafter .lockmode-container:hover{cursor:pointer}.editioncrafter .lockmode-container .switch{width:42px;position:relative;background-color:#f3f4f7;border-radius:5px;transition:all .2s ease-out;display:flex;padding:1px;align-items:center;gap:10px;height:22px}.editioncrafter .lockmode-container .switch:hover{cursor:pointer}.editioncrafter .imageViewComponent .lockmode-container .switch{background-color:#242629}.editioncrafter .lockmode-container .switch .slider{position:absolute;left:calc(50% - 20px);top:calc(50% - 10px);border-radius:5px;transition:all .2s ease-out;background-color:#fff;display:flex;width:20px;height:20px;justify-content:center;align-items:center;gap:10px;flex-shrink:0}.editioncrafter .lockmode-container .switch .slider svg{height:12px;width:12px}.editioncrafter .imageViewComponent .lockmode-container .slider{background-color:#0a0a0a}.editioncrafter .lockmode-container input{opacity:0;width:0;height:0;position:absolute}.editioncrafter .lockmode-container input:checked+.switch{background-color:#07529a}.editioncrafter .lockmode-container input:checked+.switch .slider{left:calc(50% + 0px)}.editioncrafter .book-mode-toggles button{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#f3f4f7;border:none;height:32px;width:32px;color:#6f747c}.editioncrafter .book-mode-toggles button svg{height:100%;width:100%}.editioncrafter .book-mode-toggles .document-pages-icon{stroke-width:0;fill:#6f747c}.editioncrafter .book-mode-toggles button.selected,.editioncrafter .imageViewComponent .book-mode-toggles button.selected{background-color:#07529a;color:#fff;stroke:#fff}.editioncrafter .book-mode-toggles button.selected .document-pages-icon{fill:#fff}.editioncrafter .book-mode-toggles button:nth-child(1){border-radius:5px 0 0 5px}.editioncrafter .book-mode-toggles button:nth-child(2){border-radius:0 5px 5px 0}.editioncrafter .imageViewComponent .book-mode-toggles button{background-color:#242629;color:#6f747c}.editioncrafter .closeX{float:right;padding:3px;font-style:bold}.editioncrafter .closeX:hover{cursor:pointer}.editioncrafter .helpContainer .MuiListItem-root{display:flex;gap:10px}.editioncrafter .helpContainer{padding:12px;width:335px;height:min(600px,100vh - 40px);position:relative;top:40px;overflow-x:auto}.editioncrafter .helpContainer .readingGuide td{padding:8px}.editioncrafter .helpContainer .readingGuide h2{margin-top:16px;margin-bottom:10px}.editioncrafter .searchHelpContainer{padding:10px 15px 10px 0;width:335px}.editioncrafter .helpHeader{text-align:center}.editioncrafter .paginationComponent{white-space:nowrap;text-align:center;font-size:max(1.2rem,19.2px);font-weight:700;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;margin-top:52px}@container diplomatic (min-width: 960px){.editioncrafter .paginationComponent{margin-bottom:0}}.editioncrafter .paginationComponent.bottom{margin-top:0}.editioncrafter .paginationControl{padding:16px}.editioncrafter .paginationControl .arrow{font-size:max(1.8rem,28.8px);color:#4a4a4a;margin:max(1rem,16px) max(1rem,16px) 0;cursor:pointer;display:inline-block}.editioncrafter .arrow svg{font-size:inherit!important}.editioncrafter .paginationControl .folioName{position:relative;top:min(-.2rem,-3.2px);color:#4a4a4a}#diplomatic.editioncrafter{container-type:inline-size;container-name:diplomatic}#diplomatic.editioncrafter #content-view h1,#diplomatic.editioncrafter #content-view h2,#diplomatic.editioncrafter #content-view h3,#diplomatic.editioncrafter #content-view h4,#diplomatic.editioncrafter .header-wrapper h1,#diplomatic.editioncrafter .header-wrapper h2,#diplomatic.editioncrafter .header-wrapper h3,#diplomatic.editioncrafter .header-wrapper h4,#diplomatic.editioncrafter #annotation-list-view h1,#diplomatic.editioncrafter #annotation-list-view h2,#diplomatic.editioncrafter #annotation-list-view h3,#diplomatic.editioncrafter #annotation-list-view h4{font-family:Lato,sans-serif;color:#000;padding:0;margin:0}#diplomatic.editioncrafter #content-view h1,#diplomatic.editioncrafter .header-wrapper h1,#diplomatic.editioncrafter #annotation-list-view h1{font-family:Taviraj,serif;font-size:32px}#diplomatic.editioncrafter #content-view h2,#diplomatic.editioncrafter #content-view h3,#diplomatic.editioncrafter .header-wrapper h2,#diplomatic.editioncrafter .header-wrapper h3,#diplomatic.editioncrafter #annotation-list-view h2,#diplomatic.editioncrafter #annotation-list-view h3{font-weight:700}#diplomatic.editioncrafter #content-view h2,#diplomatic.editioncrafter .header-wrapper h2,#diplomatic.editioncrafter #annotation-list-view h2{font-size:22px}#diplomatic.editioncrafter #content-view h3,#diplomatic.editioncrafter .header-wrapper h3,#diplomatic.editioncrafter #annotation-list-view h3{font-size:18px}#diplomatic.editioncrafter #content-view h4,#diplomatic.editioncrafter .header-wrapper h4,#diplomatic.editioncrafter #annotation-list-view h4{font-size:18px;font-weight:700}#diplomatic.editioncrafter #content-view p,#diplomatic.editioncrafter .header-wrapper p,#diplomatic.editioncrafter #annotation-list-view p{font-family:Martel,serif;line-height:1.25}#diplomatic.editioncrafter #content-view span,#diplomatic.editioncrafter .header-wrapper span,#diplomatic.editioncrafter #annotation-list-view span{font-family:Martel,serif;line-height:1.25;margin:0}#diplomatic.editioncrafter #content-view a.MuiButton-containedPrimary.cta-button,#diplomatic.editioncrafter .header-wrapper a.MuiButton-containedPrimary.cta-button,#diplomatic.editioncrafter #annotation-list-view a.MuiButton-containedPrimary.cta-button{color:#fff;padding:10px 70px;border-radius:0}#diplomatic.editioncrafter #content-view a.MuiButton-containedPrimary.cta-button .MuiButton-label span,#diplomatic.editioncrafter .header-wrapper a.MuiButton-containedPrimary.cta-button .MuiButton-label span,#diplomatic.editioncrafter #annotation-list-view a.MuiButton-containedPrimary.cta-button .MuiButton-label span{font-family:Lato,sans-serif;font-size:20px}#diplomatic.editioncrafter #content-view a,#diplomatic.editioncrafter .header-wrapper a,#diplomatic.editioncrafter #annotation-list-view a{color:#792421}#diplomatic.editioncrafter #content-view a:hover,#diplomatic.editioncrafter .header-wrapper a:hover,#diplomatic.editioncrafter #annotation-list-view a:hover{color:#cba374}#diplomatic.editioncrafter #content-view .cta-link.MuiLink-underlineHover:hover,#diplomatic.editioncrafter .header-wrapper .cta-link.MuiLink-underlineHover:hover,#diplomatic.editioncrafter #annotation-list-view .cta-link.MuiLink-underlineHover:hover{text-decoration:none}#diplomatic.editioncrafter #content-view a.cta-link,#diplomatic.editioncrafter .header-wrapper a.cta-link,#diplomatic.editioncrafter #annotation-list-view a.cta-link{color:#000;text-align:center;width:fit-content;text-decoration:none;font-family:Lato,sans-serif;font-size:16px;font-weight:700;position:relative;cursor:pointer;margin-bottom:5px}@container diplomatic (min-width: 960px){#diplomatic.editioncrafter #content-view a.cta-link,#diplomatic.editioncrafter .header-wrapper a.cta-link,#diplomatic.editioncrafter #annotation-list-view a.cta-link{font-size:18px}}#diplomatic.editioncrafter #content-view a.cta-link:before,#diplomatic.editioncrafter .header-wrapper a.cta-link:before,#diplomatic.editioncrafter #annotation-list-view a.cta-link:before{position:absolute;content:"";height:2px;background-color:#000;width:50%;right:30%;bottom:-5px;border-radius:2px}#diplomatic.editioncrafter #content-view a.cta-link:hover:before,#diplomatic.editioncrafter .header-wrapper a.cta-link:hover:before,#diplomatic.editioncrafter #annotation-list-view a.cta-link:hover:before{background-color:#792421;text-decoration:none;height:6px;bottom:-9px;-webkit-animation:slide-down .2s;-moz-animation:slide-down .2s;-ms-animation:slide-down .2s;-o-animation:slide-down .2s;animation:slide-down .2s}#diplomatic.editioncrafter #content-view a.cta-link:hover:after,#diplomatic.editioncrafter .header-wrapper a.cta-link:hover:after,#diplomatic.editioncrafter #annotation-list-view a.cta-link:hover:after{color:#792421}#diplomatic.editioncrafter #content-view a.cta-link.active:before,#diplomatic.editioncrafter .header-wrapper a.cta-link.active:before,#diplomatic.editioncrafter #annotation-list-view a.cta-link.active:before{background-color:#792421;text-decoration:none;height:6px;bottom:-9px;-webkit-animation:slide-down .2s;-moz-animation:slide-down .2s;-ms-animation:slide-down .2s;-o-animation:slide-down .2s;animation:slide-down .2s}#diplomatic.editioncrafter #content-view a.cta-link.active:after,#diplomatic.editioncrafter .header-wrapper a.cta-link.active:after,#diplomatic.editioncrafter #annotation-list-view a.cta-link.active:after{color:#792421}#diplomatic.editioncrafter #content-view a.cta-link.light,#diplomatic.editioncrafter .header-wrapper a.cta-link.light,#diplomatic.editioncrafter #annotation-list-view a.cta-link.light{color:#444}#diplomatic.editioncrafter #content-view a.cta-link.light:before,#diplomatic.editioncrafter .header-wrapper a.cta-link.light:before,#diplomatic.editioncrafter #annotation-list-view a.cta-link.light:before{background-color:#444}#diplomatic.editioncrafter #content-view a.cta-link.light:hover:before,#diplomatic.editioncrafter .header-wrapper a.cta-link.light:hover:before,#diplomatic.editioncrafter #annotation-list-view a.cta-link.light:hover:before{background-color:#792421}#diplomatic.editioncrafter #content-view a.cta-link.video-link:after,#diplomatic.editioncrafter .header-wrapper a.cta-link.video-link:after,#diplomatic.editioncrafter #annotation-list-view a.cta-link.video-link:after{content:"";font-size:12px;margin-bottom:-2px}#diplomatic.editioncrafter #content-view a.cta-link.search-link:after,#diplomatic.editioncrafter .header-wrapper a.cta-link.search-link:after,#diplomatic.editioncrafter #annotation-list-view a.cta-link.search-link:after{font-family:Material Icons;content:"search";font-size:16px}#diplomatic.editioncrafter #header{width:100%;padding:0 20px;background-color:#fff;border-radius:0}@container diplomatic (min-width: 1280px){#diplomatic.editioncrafter #header{padding:5px 50px}}#diplomatic.editioncrafter #header img{width:210px}@container diplomatic (min-width: 600px){#diplomatic.editioncrafter #header img{width:300px}}@container diplomatic (min-width: 960px){#diplomatic.editioncrafter #header img{width:300px}}#diplomatic.editioncrafter #header .expandedViewOnly{width:100%}#diplomatic.editioncrafter #header .nav-item{font-size:16px;margin-right:5px;white-space:nowrap;margin-bottom:15px}#diplomatic.editioncrafter #header .search-btn{margin-bottom:10px;font-size:18px}#diplomatic.editioncrafter .maroon-dropdown{background-color:#460c0a;border-radius:0;-webkit-box-shadow:inset 0 5px 5px -5px rgba(0,0,0,.8),0 5px 5px -5px rgba(0,0,0,.8);-moz-box-shadow:inset 0 5px 5px -5px rgba(0,0,0,.8),0 5px 5px -5px rgba(0,0,0,.8);box-shadow:inset 0 5px 5px -5px #000c,0 5px 5px -5px #000c}#diplomatic.editioncrafter .mobile-menu{padding:50px 0}#diplomatic.editioncrafter .mobile-menu .list-container{position:relative}#diplomatic.editioncrafter .mobile-menu .list-container .list{color:"white"}#diplomatic.editioncrafter .search-bar{height:162px}#diplomatic.editioncrafter .search-bar .label{font-size:32px;color:#fff;font-weight:400;white-space:nowrap}#diplomatic.editioncrafter .search-bar .content{width:50%}#diplomatic.editioncrafter .search-bar #search input{border:1px solid #DEDEDF;border-radius:4px;width:300px;height:38px;font-size:14px;padding:5px 15px;font-family:Lato,sans-serif}#diplomatic.editioncrafter.sticky .header-wrapper.sticky{position:sticky;top:0;z-index:2}#diplomatic.editioncrafter #footer{color:#fff;background-color:#460c0a;display:flex;flex-direction:column;padding:10px 20px}@container diplomatic (min-width: 600px){#diplomatic.editioncrafter #footer{padding:20px 30px}}@container diplomatic (min-width: 960px){#diplomatic.editioncrafter #footer{padding:30px 40px}}#diplomatic.editioncrafter #footer p,#diplomatic.editioncrafter #footer a{font-family:Lato,sans-serif;font-size:16px;color:#fafafa;line-height:1.5;margin:0}#diplomatic.editioncrafter #footer a:hover{color:#cba374;fill:#cba374}#diplomatic.editioncrafter #footer .top{margin-bottom:10px}#diplomatic.editioncrafter #footer .top p{margin:0 5px;white-space:nowrap}#diplomatic.editioncrafter #footer .doi{text-align:center}#diplomatic.editioncrafter #footer .copyright .symbols{text-decoration:none}#diplomatic.editioncrafter #footer .copyright svg{width:14px;height:14px}#diplomatic.editioncrafter #footer .logos{margin-bottom:10px}#diplomatic.editioncrafter #footer .logos img{width:150px}@container diplomatic (min-width: 600px){#diplomatic.editioncrafter #footer .logos img{width:200px}}@container diplomatic (min-width: 600px){#diplomatic.editioncrafter #footer .logos img{width:250px}}#diplomatic.editioncrafter #footer .footer-links{width:100%;text-align:center;font-size:12px;line-height:2}#diplomatic.editioncrafter{background:#fff;width:auto;height:min(100%,100dvh);overflow-y:hidden;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-family:OpenSans,sans-serif;font-size:max(.9rem,14.4px)}#diplomatic.editioncrafter #content{line-height:max(1.2rem,19.2px)}#diplomatic.editioncrafter h1,#diplomatic.editioncrafter h2,#diplomatic.editioncrafter h3,#diplomatic.editioncrafter h4{color:#000000b8;font-family:OpenSans,sans-serif;font-weight:700;padding:0;line-height:max(1.5rem,24px)}.editioncrafter .imageGridComponent{background-color:#000;font-size:max(.8rem,12.8px);overflow:scroll;height:100%;max-height:100dvh}.editioncrafter .imageGridComponent .thumbnail{background-color:inherit;border:none}.editioncrafter .imageGridComponent>ul{display:flex;flex-wrap:wrap;list-style:none;padding-left:0;margin:max(1.5rem,24px) 0 max(8rem,128px) max(2rem,32px)}.editioncrafter .imageGridComponent>ul>li{margin-bottom:20px;width:150px}.editioncrafter .imageGridComponent>ul>li>figure{margin:8px}.editioncrafter .imageGridComponent>ul>li>figure:hover{border:2px #eee solid;margin:6px}.editioncrafter .imageGridComponent>ul>li>.thumbnail-caption{text-align:center;color:#fff;margin:0 10px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.editioncrafter .hidden{display:none}.editioncrafter .imageGridComponent .imageGridToolbar{padding:5px;color:#fff}.editioncrafter .imageGridComponent .imageGridToolbar .jump-to{float:right;display:"inline";margin-right:30px}.editioncrafter .imageGridComponent .imageGridToolbar .jump-to #jump-to-input{margin-left:5px}.editioncrafter .imageGridComponent .imageGridToolbar .jump-to #jump-to-button{margin-left:5px;cursor:pointer}.editioncrafter .imageGridComponent .imageGridToolbar .doc-select{display:inline;margin-left:30px;font-size:max(.8rem,12.8px)}.editioncrafter .imageGridComponent .imageGridToolbar .doc-select .MuiInputBase-root{font-size:max(.8rem,12.8px)}.editioncrafter .split-pane-view{height:100%;width:100%;display:grid}.editioncrafter .split-pane-view.two-pane{grid-template-areas:"image_viewer divider transcription"}.editioncrafter .split-pane-view.three-pane{grid-template-areas:"image_viewer divider transcription divider_two third_pane"}.editioncrafter .split-pane-view>.divider{z-index:2;width:max(1rem,16px);background:#bbb;cursor:ew-resize;display:flex}.editioncrafter .split-pane-view>.divider.first_divider{grid-area:divider}.editioncrafter .split-pane-view>.divider.second_divider{grid-area:divider_two}.editioncrafter .split-pane-view>.divider>.drawer-button{align-self:center;cursor:auto}.editioncrafter .split-pane-view>.divider>.drawer-button:hover{color:#fff}.editioncrafter .split-pane-view>.divider>.hidden{display:none}.editioncrafter .split-pane-view #annotation-view{font-size:16px}.editioncrafter #image-view-seadragon-left,.editioncrafter #image-view-seadragon-right,.editioncrafter #image-view-seadragon-third{width:100%;height:100%;max-height:100dvh;grid-area:image_viewer;background:#000}.editioncrafter .imageViewComponent{position:relative;padding:0;margin:0;width:100%;height:100%;max-height:100dvh}.editioncrafter .imageViewComponent .navigationComponent{position:absolute}.editioncrafter .a9s-annotation.a9s-annotation.selected>rect,.editioncrafter .a9s-annotation.a9s-annotation.selected>polygon{stroke:#4385f6!important;stroke-linejoin:round;fill:#4385f61a!important}.editioncrafter .a9s-annotation.a9s-annotation.hover>rect,.editioncrafter .a9s-annotation.a9s-annotation.hover>polygon{stroke:#4385f6!important;stroke-linejoin:round}.editioncrafter .ImageZoomControl{position:absolute;z-index:1;top:max(8rem,128px);color:#fff;list-style:none;background:#4a4a4a;opacity:.4;margin:0;padding:max(.4rem,6.4px) max(.5rem,8px);border-radius:max(.3rem,4.8px)}@container diplomatic (min-width: 960px){.editioncrafter .ImageZoomControl{top:max(4rem,64px);left:max(2rem,32px)}}.editioncrafter .ImageZoomControl>li{color:#e0e0e0;margin:0!important}.editioncrafter .ImageZoomControl>li>.zoom-in{margin-top:8px}.editioncrafter .ImageZoomControl>li:hover{color:#fff}.editioncrafter .ImageZoomControl>li>.zoom-3{margin-top:8px}.editioncrafter .ImageZoomControl>li>.zoom-2{margin-top:8px;margin-left:5px}.editioncrafter .ImageZoomControl>li>.zoom-1{margin-top:8px;margin-left:7px}.editioncrafter .ImageZoomControl>li>.zoom-out{margin-top:8px}.editioncrafter .ImageZoomControl>li>.zoom-grid{margin-top:30px}.editioncrafter .transcriptionViewComponent .transcriptContent{padding:50px 16px;font-size:max(.9rem,14.4px);-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}@container diplomatic (min-width: 960px){.editioncrafter .transcriptionViewComponent .transcriptContent{padding:5px 16px}}.editioncrafter .transcriptionViewComponent .transcriptContent figure{display:inline-flex;flex-direction:column;width:100%;align-items:center;gap:6px}.editioncrafter .transcriptionViewComponent .transcriptContent .block[data-layout=right-middle],.editioncrafter .transcriptionViewComponent .transcriptContent .block[data-layout=right-top],.editioncrafter .transcriptionViewComponent .transcriptContent .block[data-layout=right-bottom]{max-width:250px}.editioncrafter .transcriptionViewComponent .transcriptContent .x-small-inline-figure{margin:5px;border:1px solid gray;width:30px}.editioncrafter .transcriptionViewComponent .transcriptContent .small-inline-figure{margin:5px;border:1px solid gray;width:60px}.editioncrafter .transcriptionViewComponent .transcriptContent .medium-inline-figure{margin:5px;border:1px solid gray;width:200px}.editioncrafter .transcriptionViewComponent .transcriptContent .large-inline-figure{margin:5px;border:1px solid gray;width:350px}.editioncrafter .transcriptionViewComponent .transcriptContent .surface{grid-area:transcription;margin:0;padding:0;list-style:none}.editioncrafter .transcriptionViewComponent .transcriptContent .grid-mode{display:grid;grid-auto-rows:minmax(min-content,0fr);grid-gap:2px}.editioncrafter .transcriptionViewComponent .transcriptContent .surface>.small-font{font-size:11pt}.editioncrafter .transcriptionViewComponent .transcriptContent .surface>div{padding:10px}.editioncrafter .transcriptionViewComponent .transcriptContent .surface>#z0{grid-area:z0}.editioncrafter .transcriptionViewComponent .transcriptContent .surface>#z1{grid-area:z1}.editioncrafter .transcriptionViewComponent .transcriptContent .surface>#z2{grid-area:z2}.editioncrafter .transcriptionViewComponent .transcriptContent .surface>#z3{grid-area:z3}.editioncrafter .transcriptionViewComponent .transcriptContent .surface>#z4{grid-area:z4}.editioncrafter .transcriptionViewComponent .transcriptContent .surface>#z5{grid-area:z5}.editioncrafter .transcriptionViewComponent .transcriptContent .surface>#z6{grid-area:z6}.editioncrafter .transcriptionViewComponent .transcriptContent .surface>#z7{grid-area:z7}.editioncrafter .transcriptionViewComponent .transcriptContent .surface>#z8{grid-area:z8}.editioncrafter .transcriptionViewComponent .transcriptContent .surface>#z9{grid-area:z9}.editioncrafter .transcriptionViewComponent .transcriptContent .surface>#z10{grid-area:z10}.editioncrafter .transcriptionViewComponent .transcriptContent .surface>#z11{grid-area:z11}.editioncrafter .transcriptionViewComponent .transcriptContent .surface>#z12{grid-area:z12}.editioncrafter .transcriptionViewComponent .transcriptContent .surface>#z13{grid-area:z13}.editioncrafter .transcriptionViewComponent .transcriptContent .surface>#z14{grid-area:z14}.editioncrafter .transcriptionViewComponent .transcriptContent .surface>#z15{grid-area:z15}.editioncrafter .transcriptionViewComponent .transcriptContent .surface>#z16{grid-area:z16}.editioncrafter .transcriptionViewComponent .transcriptContent .surface>#z17{grid-area:z17}.editioncrafter .transcriptionViewComponent .transcriptContent .surface>#z18{grid-area:z18}.editioncrafter .transcriptionViewComponent .transcriptContent .surface>#z19{grid-area:z19}.editioncrafter .transcriptionViewComponent .transcriptContent .surface>#z20{grid-area:z20}.editioncrafter .transcriptionViewComponent .transcriptContent .highlight{background-color:#ff0}.editioncrafter tei-line{display:block}.editioncrafter tei-add{color:#00f;vertical-align:super;font-size:10pt}.editioncrafter tei-seg.active{background:#d4e9ff}.editioncrafter div.active{background:#f1f3f5;border-radius:5px}.editioncrafter .selected-zone{background:#eaf1fd;border-radius:5px}.editioncrafter .editor-comment-content{word-wrap:break-word}.editioncrafter .inline-image{max-width:90%;max-height:360px;margin:auto;text-align:center}.editioncrafter .xmlViewComponent .navigationComponent{background-color:#fff;color:#000}.editioncrafter .xmlContent{padding:0;margin:4.5rem 0 0;width:calc(100% - 1.2rem);max-height:100vh;min-height:100%;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;min-width:max(10rem,160px)}.editioncrafter .xmlViewComponent{overflow:auto;margin:0 0 0 max(1rem,16px);max-height:calc(100vh - max(7rem,112px))}.editioncrafter .xmlContentInner{max-height:100%}.editioncrafter .xmlContentInner pre{overflow-x:auto}.editioncrafter #glossaryView #glossaryViewInner{margin:5px 0 0;width:calc(100% - 1.2rem);max-height:calc(100vh - 170px);padding:5px 16px}@container diplomatic (min-width: 960px){.editioncrafter #glossaryView #glossaryViewInner{margin:52px 0 0}}.editioncrafter #glossaryView .cite-header{text-align:center;margin-bottom:5px}.editioncrafter #glossaryView .cite-instructions{margin:20px 15%}.editioncrafter #glossaryView .glossaryNav{background:#fff;padding:5px;position:relative}.editioncrafter #glossaryView .glossaryNav #glossary-filter{margin-right:10px}.editioncrafter #glossaryView .glossaryNav .alphaNav{display:none}@container diplomatic (min-width: 960px){.editioncrafter #glossaryView .glossaryNav .alphaNav{display:block}}.editioncrafter #glossaryView .alphaNav{color:#00f;display:inline}.editioncrafter #glossaryView .title{white-space:nowrap;position:relative;width:calc(100% - max(1.7rem,27.2px));text-align:center;top:-2em;font-size:max(1.8rem,28.8px);font-weight:700;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}@container diplomatic (min-width: 960px){.editioncrafter #glossaryView .title{top:-1em}}.editioncrafter #glossaryView .subtitle{white-space:nowrap;position:relative;width:calc(100% - max(1.7rem,27.2px));text-align:center;top:-2em;font-style:italic;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}@container diplomatic (min-width: 960px){.editioncrafter #glossaryView .subtitle{top:-1em}}.editioncrafter #glossaryView #glossaryContent{padding:max(80px,5rem) 0 0;max-height:100vh;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;min-width:max(10rem,160px)}@container diplomatic (min-width: 960px){.editioncrafter #glossaryView #glossaryContent{padding:max(3.5rem,56px) 0 0}}.editioncrafter .jumpToFolio_component{margin:max(1rem,16px) 0 0 min(-4.5rem,-72px);padding:max(.6rem,9.6px);height:max(1.2rem,19.2px);width:max(9.5rem,152px);background:#e7e7e7;border:1px solid rgba(90,98,102,.53);border-radius:max(.3rem,4.8px);-webkit-box-shadow:6px 6px 5px 0 rgba(0,0,0,.211765);-moz-box-shadow:6px 6px 5px 0 rgba(0,0,0,.211765);box-shadow:6px 6px 5px #00000036;font-family:sans-serif}.editioncrafter .jumpToFolio_component input:focus{outline:none}.editioncrafter .jumpToFolio_component:after,.editioncrafter .jumpToFolio_component:before{bottom:100%;left:50%;border:solid transparent;content:" ";height:0;width:0;position:absolute;pointer-events:none}.editioncrafter .jumpToFolio_component:after{border-color:#fff0;border-bottom-color:#e7e7e7;border-width:9px;margin-left:-9px}.editioncrafter .jumpToFolio_component:before{border-color:#c2e1f500;border-bottom-color:#5a626687;border-width:11px;margin-left:-11px}.editioncrafter [lang=ar],.editioncrafter [lang=ota],.editioncrafter [lang=fa],.editioncrafter [lang=he],.editioncrafter [lang*=-Arab-AR]{direction:rtl;text-align:right}.editioncrafter [lang=en],.editioncrafter [lang=fr],.editioncrafter [lang=de],.editioncrafter [lang=it],.editioncrafter [lang*=ar-Latn-],.editioncrafter [lang*=ota-Latn-]{direction:ltr;text-align:left}.editioncrafter tei-choice tei-abbr+tei-expan:before,.editioncrafter tei-choice tei-expan+tei-abbr:before,.editioncrafter tei-choice tei-sic+tei-corr:before,.editioncrafter tei-choice tei-corr+tei-sic:before,.editioncrafter tei-choice tei-orig+tei-reg:before,.editioncrafter tei-choice tei-reg+tei-orig:before{content:" ("}.editioncrafter tei-choice tei-abbr+tei-expan:after,.editioncrafter tei-choice tei-expan+tei-abbr:after,.editioncrafter tei-choice tei-sic+tei-corr:after,.editioncrafter tei-choice tei-corr+tei-sic:after,.editioncrafter tei-choice tei-orig+tei-reg:after,.editioncrafter tei-choice tei-reg+tei-orig:after{content:")"}.editioncrafter tei-ab{display:block;margin-top:1em;margin-bottom:1em}.editioncrafter tei-accMat{display:block}.editioncrafter tei-accMat:before{content:"accompanying materials: "}.editioncrafter tei-acquisition{display:block;margin-top:0;margin-bottom:0}.editioncrafter tei-acquisition:before{font-weight:700;content:"acquisition"}.editioncrafter tei-activity{display:block}.editioncrafter tei-activity:before{content:"activity: "}.editioncrafter tei-add[place=above]{color:#00f;vertical-align:super;font-size:10pt}.editioncrafter tei-add[place=inline]:before{content:"«"}.editioncrafter tei-add[place=inline]:after{content:"»"}.editioncrafter tei-add[place=below]{vertical-align:sub}.editioncrafter tei-additional{display:block}.editioncrafter tei-additions{display:block}.editioncrafter tei-additions:before{content:"Significant additions within the document: "}.editioncrafter tei-addrLine{display:block}.editioncrafter tei-address[data-tei-rend~=block],.editioncrafter addresss[data-tei-rendition~="#block"]{display:block}.editioncrafter tei-adminInfo{display:block}.editioncrafter tei-app tei-note{display:none}.editioncrafter tei-appInfo{display:block}.editioncrafter tei-appInfo:before{content:"Application information: "}.editioncrafter tei-application{display:block}.editioncrafter tei-application:after{content:" " attr(version)}.editioncrafter tei-argument{display:block}.editioncrafter tei-att{font-family:Courier,monospace}.editioncrafter tei-att:before{content:"@"}.editioncrafter tei-titlestmt>tei-author{display:block;margin-bottom:1em}.editioncrafter tei-publicationstmt>tei-availability{font-size:80%}.editioncrafter tei-publicationstmt>tei-availability:before{font-weight:700;content:"Availability: "}.editioncrafter tei-publicationstmt>tei-availability[data-tei-status]:before{font-weight:700;content:"Availability (" attr(status) "): "}.editioncrafter tei-back{display:block}.editioncrafter tei-bibl[data-tei-rend~=block],.editioncrafter bibl[data-tei-rendition~="#block"]{display:block;padding-left:2em;text-indent:-2em}.editioncrafter tei-biblFull{display:block}.editioncrafter tei-binding{display:block}.editioncrafter tei-binding:before{content:"Binding: \\a";white-space:pre-wrap}.editioncrafter tei-binding[data-tei-contemporary]:before{content:"Binding: \\a" "Contemporary: " attr(contemporary) "\\a";white-space:pre-wrap}.editioncrafter tei-bindingdesc{display:block}.editioncrafter tei-bindngdesc:before{content:"Binding description: \\a"}.editioncrafter tei-birth{display:block}.editioncrafter tei-birth:before{content:"Birth: "}.editioncrafter tei-cRefPattern{display:none}.editioncrafter tei-caption{display:block;margin-top:1em;margin-bottom:1em}.editioncrafter tei-case[data-tei-value]:before{font-weight:700;content:attr(value) " "}.editioncrafter tei-castgroup{display:block;margin-top:1em;margin-bottom:1em}.editioncrafter tei-castitem{display:list-item}.editioncrafter tei-castlist{display:block;list-style-type:none;margin-top:1em;margin-bottom:1em;margin-left:2em}.editioncrafter tei-cb{display:block;margin-top:1em;margin-bottom:1em}.editioncrafter tei-cb:before{content:"[column break]"}.editioncrafter tei-cell{border-right:thin solid black;border-bottom:thin solid black;padding:2px}.editioncrafter tei-cell[data-tei-role=label]{font-weight:700}.editioncrafter tei-climate{display:block;margin-top:1em;margin-bottom:1em}.editioncrafter tei-climate:before{font-weight:700;content:"Climate: "}.editioncrafter tei-code{font-family:Courier,monospace}.editioncrafter tei-collation{display:block;margin-top:1em;margin-bottom:1em}.editioncrafter tei-condition{display:block;margin-top:1em;margin-bottom:1em}.editioncrafter tei-constitution{display:block;margin-top:1em;margin-bottom:1em}.editioncrafter tei-constitution:before{font-weight:700;content:"Constitution: "}.editioncrafter tei-constitution[data-tei-type]{display:block;margin-top:1em;margin-bottom:1em}.editioncrafter tei-constitution[data-tei-type]:before{font-weight:700;content:"Constitution (" attr(type) "): "}.editioncrafter tei-constitution[data-tei-type=frags]{display:block;margin-top:1em;margin-bottom:1em}.editioncrafter tei-constitution[data-tei-type=frags]:before{font-weight:700;content:"Constitution (fragments): "}.editioncrafter tei-custevent{display:list-item}.editioncrafter tei-custodialhist{display:block;margin-top:1em;margin-bottom:1em}.editioncrafter tei-date[data-tei-when]:empty:before{content:attr(when)}.editioncrafter tei-del{color:red}.editioncrafter tei-editionstmt{display:block}.editioncrafter teieg-egxml{display:block;font-size:80%;margin-left:1em;padding-left:1em;border-left:1px solid #aaaaaa;margin-top:.75em;margin-bottom:.75em;padding-top:.75em;padding-bottom:.75em;font-family:monospace;white-space:pre}.editioncrafter tei-emph{font-style:italic}.editioncrafter tei-encodingdesc{display:none}.editioncrafter tei-epigraph{display:block;margin-top:1em;margin-bottom:1em}.editioncrafter tei-explicit{font-style:italic}.editioncrafter tei-filedesc>tei-extent{display:none}.editioncrafter tei-figure{display:block;text-align:center;margin-left:auto;margin-right:auto}.editioncrafter tei-gap[data-tei-reason=lost]:before{content:"["}.editioncrafter tei-gap[data-tei-reason=lost]:after{content:attr(data-content) "]"}.editioncrafter tei-gap[data-tei-reason=illegible]:after{content:attr(data-content)}.editioncrafter tei-gi{font-family:Courier,monospace}.editioncrafter tei-gi:before{content:"<"}.editioncrafter tei-gi:after{content:">"}.editioncrafter tei-head{display:block;font-family:OpenSans,sans-serif;font-weight:700;font-size:1.5em;line-height:max(1.5rem,24px)}.editioncrafter tei-body>tei-head{font-size:180%;text-indent:-.5em}.editioncrafter tei-div.textpart{display:none}.editioncrafter tei-div>tei-head{font-size:170%;text-indent:-.5em}.editioncrafter tei-div>tei-div>tei-head{font-size:155%}.editioncrafter tei-div>tei-div>tei-div>tei-head{font-size:140%}.editioncrafter tei-div>tei-div>tei-div>tei-div>tei-head,.editioncrafter list>tei-head{font-size:130%}.editioncrafter tei-div>tei-div>tei-div>tei-div>tei-div>tei-head{font-size:120%}.editioncrafter tei-div>tei-div>tei-div>tei-div>tei-div>tei-div tei-head{font-size:110%}.editioncrafter tei-figure>tei-head{display:block;margin:1.5em auto;padding:.5em 1.5em 1.5em;border:1px solid black;border-radius:15px;width:325px;position:relative;border:1px solid #aaaaaa;background:#fafafa;text-indent:0;font-size:85%;text-align:justify;-webkit-box-shadow:0px 1px 3px rgba(0,0,0,.25);-moz-box-shadow:0px 1px 3px rgba(0,0,0,.25);box-shadow:0 1px 3px #00000040;width:85%;font-family:Georgia,Serif;font-size:13pt}.editioncrafter tei-hi[rend~=caps]{font-weight:700}.editioncrafter tei-hi[rend~=italic]{font-style:italic}.editioncrafter tei-hi[rend~=underline]{text-decoration:underline}.editioncrafter tei-ident{font-family:Courier,monospace}.editioncrafter tei-incipit{font-style:italic}.editioncrafter tei-item{display:list-item;margin-left:1em}.editioncrafter tei-cell item{margin-left:1em}.editioncrafter tei-l{display:block}.editioncrafter tei-l[data-lineno]:before{content:attr(data-lineno);position:absolute;left:2em}.editioncrafter tei-lb:after{content:"\\a";white-space:pre}.editioncrafter tei-lg{display:block;margin-top:1em;margin-bottom:1em}.editioncrafter tei-list{display:block;margin-top:1em;margin-bottom:1em;list-style-type:none}.editioncrafter tei-item>tei-list{margin-top:0}.editioncrafter tei-sourcedesc tei-list{list-style-type:none}.editioncrafter tei-sourcedesc>tei-list>tei-head{font-size:140%;font-weight:700}.editioncrafter tei-sourcedesc tei-list>tei-item{display:list-item}.editioncrafter tei-text tei-list[type=simple]{list-style-type:none}.editioncrafter tei-text tei-list[type=bulleted]{list-style-type:disc}.editioncrafter tei-text tei-list[type=ordered]{list-style-type:none;counter-reset:items 0}.editioncrafter tei-text tei-list[type=ordered]>tei-item{display:list-item;margin-left:0}.editioncrafter tei-text tei-list[type=ordered]>item:before{counter-increment:items 1;content:counter(items,decimal) ". "}.editioncrafter tei-text tei-list[type=gloss]{list-style-type:none}.editioncrafter tei-list[type=gloss]>tei-label{display:block;margin-top:.25em;margin-bottom:.25em;font-weight:700}.editioncrafter tei-list[type=gloss]>tei-item{margin-left:2em}.editioncrafter tei-item>tei-list[type=ordered]{margin-left:1em}.editioncrafter tei-listapp{display:block;margin:1em;padding:1em}.editioncrafter tei-listbibl{display:block;list-style-type:none;margin-left:.5 em;margin-top:.5em}.editioncrafter tei-listbibl>tei-head{font-size:120%;font-weight:700}.editioncrafter tei-listbibl>tei-bibl{display:list-item;margin-left:.5em}.editioncrafter tei-listwit{display:block;list-style-type:none;margin-left:.5em}.editioncrafter tei-listwit>tei-head{font-size:120%;font-weight:700}.editioncrafter tei-listwit>tei-witness{display:list-item;margin-left:2em;text-indent:-1.1em}.editioncrafter tei-witness>tei-listwit{display:inline}.editioncrafter tei-witness>tei-listwit>tei-head{display:inline}.editioncrafter tei-witness>tei-listwit>tei-witness{display:inline}.editioncrafter tei-locus{display:none}.editioncrafter tei-milestone{display:none;margin-left:auto;margin-right:auto;text-align:center}.editioncrafter tei-musicNotation{font-weight:700}.editioncrafter tei-musicNotation:before{font-weight:700;content:"Musical Notation: "}.editioncrafter tei-node{display:none}.editioncrafter tei-note{display:none}.editioncrafter tei-notesstmt{display:none}.editioncrafter tei-ovar{font-style:italic}.editioncrafter tei-origPlace{font-weight:700}.editioncrafter tei-origPlace:before{font-weight:700;content:"Place of Origin: "}.editioncrafter tei-p{display:block;margin-top:1em;margin-bottom:1em;text-align:justify}.editioncrafter *[data-tei-rendition~="#center"] p{text-align:center}.editioncrafter tei-availability>p:first-child{margin-top:0}.editioncrafter tei-performance{display:block;margin-top:1em;margin-bottom:1em}.editioncrafter tei-person{display:block;margin-top:1em;margin-bottom:1em}.editioncrafter tei-personGrp{display:block;margin-top:1em;margin-bottom:1em}.editioncrafter tei-postscript{display:block;margin-top:2em}.editioncrafter tei-principal{font-weight:700}.editioncrafter tei-principal:before{font-weight:700;content:"Principal: "}.editioncrafter tei-profiledesc{display:none}.editioncrafter tei-publicationstmt>*{display:none}.editioncrafter tei-publicationstmt{display:block;margin-top:1em;margin-bottom:1em}.editioncrafter tei-publicationstmt>date{display:none}.editioncrafter tei-publicationstmt>publisher{display:none}.editioncrafter tei-q{quotes:"“" "”" "‘" "’" "“" "”" "‘" "’" "“" "”" "‘" "’" "“" "”"}.editioncrafter tei-q:before{content:""}.editioncrafter tei-q:after{content:""}.editioncrafter tei-q[data-tei-next]:after{content:""!important}.editioncrafter tei-q[data-tei-prev]:before{content:""!important}.editioncrafter tei-quote{font-style:italic}.editioncrafter tei-app tei-rdg{display:none}.editioncrafter tei-re{display:block;margin-top:0;margin-bottom:0}.editioncrafter tei-recordhist{display:block;margin-top:1em;margin-bottom:1em}.editioncrafter tei-ref{color:#5f0000}.editioncrafter tei-remarks{font-weight:700}.editioncrafter tei-remarks:before{font-weight:700;content:"remarks: "}.editioncrafter tei-respstmt{display:block;margin-top:0;margin-bottom:0}.editioncrafter tei-revisiondesc{display:none}.editioncrafter tei-row{display:grid;grid-auto-flow:column;grid-auto-columns:1fr}.editioncrafter tei-salute{display:block;margin-top:1em;margin-bottom:1em}.editioncrafter tei-samplingdecl{display:block;margin-top:0;margin-bottom:0}.editioncrafter tei-scriptnote{display:block;margin-top:1em;margin-bottom:1em}.editioncrafter tei-seal{display:block;margin-top:0;margin-bottom:0}.editioncrafter tei-seal:before{font-weight:700;content:"Seal: "}.editioncrafter tei-sealdesc{display:block;margin-top:1em;margin-bottom:1em}.editioncrafter tei-secFol:before{font-weight:700;content:"Second Folio: "}.editioncrafter tei-secl>*:first-child:before{content:"\\a[";white-space:pre}.editioncrafter tei-secl>*:last-child:after{content:"]\\a\\a";white-space:pre}.editioncrafter tei-seg{outline:0px solid transparent}.editioncrafter tei-sense{display:block;margin-top:0;margin-bottom:0}.editioncrafter tei-seriesstmt{display:none}.editioncrafter tei-setting{display:block;margin-top:0;margin-bottom:0}.editioncrafter tei-signed{display:block;margin-top:2em}.editioncrafter tei-soCalled{quotes:"“" "”" "‘" "’" "“" "”" "‘" "’" "“" "”" "‘" "’" "“" "”"}.editioncrafter tei-soCalled:before{content:open-quote}.editioncrafter tei-soCalled:after{content:close-quote}.editioncrafter tei-soCalled[data-tei-next]:after{content:""!important}.editioncrafter tei-soCalled[data-tei-prev]:before{content:""!important}.editioncrafter tei-sound{font-style:italic}.editioncrafter tei-source{display:block;margin-top:0;margin-bottom:0}.editioncrafter tei-sourcedesc{display:none}.editioncrafter tei-space:before{font-weight:700;content:""}.editioncrafter tei-span[data-tei-data-n]:before{content:attr(data-n)}.editioncrafter tei-speaker{font-weight:700;margin-right:0}.editioncrafter tei-sponsor{display:block;margin-top:0;margin-bottom:0}.editioncrafter tei-sponsor:before{font-weight:700;content:"Sponsor:"}.editioncrafter tei-stage{display:block;margin-top:1em;margin-bottom:1em;font-style:italic}.editioncrafter tei-stamp{display:block;margin-top:1em;margin-bottom:1em}.editioncrafter tei-stamp:before{font-weight:700;content:"Stamped: "}.editioncrafter tei-surplus>*:first-child:before{content:"\\a[";white-space:pre}.editioncrafter tei-surplus>*:last-child:after{content:"]\\a\\a";white-space:pre}.editioncrafter tei-tei{display:block}.editioncrafter tei-table{display:block;border-top:thin solid black;border-left:thin solid black}.editioncrafter tei-table{margin-top:2em;margin-bottom:2em;font-size:12pt}.editioncrafter tei-table>tei-head{border-bottom:thin solid black;border-right:thin solid black;font-size:120%;font-weight:700;padding:2px;text-align:center}.editioncrafter tei-teiheader{display:block;margin-top:2em;margin-bottom:2em}.editioncrafter tei-tei>tei-text{display:block;line-height:1.5}.editioncrafter tei-textclass{display:none}.editioncrafter tei-textdesc{display:none}.editioncrafter tei-tei tei-title{display:inline}.editioncrafter tei-tei tei-title[level=a]{quotes:"“" "”" "‘" "’" "“" "”" "‘" "’" "“" "”" "‘" "’" "“" "”"}.editioncrafter tei-tei tei-title[level=a]:before{content:open-quote}.editioncrafter tei-tei tei-title[level=a]:after{content:close-quote}.editioncrafter tei-tei tei-title[level=a][next]:after{content:""!important}.editioncrafter tei-tei tei-title[level=a][prev]:before{content:""!important}.editioncrafter tei-title[level=m]{font-style:italic}.editioncrafter tei-titlestmt>tei-title{display:block;font-family:Arvo,sans-serif;font-weight:400;font-weight:700!important;font-size:150%}.editioncrafter tei-typedesc{display:none}.editioncrafter tei-u:before{content:"-"}.editioncrafter tei-view{font-style:italic}.editioncrafter tei-wit{display:inline}.editioncrafter tei-witdetail{display:none}.editioncrafter .inline-ring-spinner{display:inline-block;margin-left:10px;margin-right:10px;width:16px;height:16px}.editioncrafter .inline-ring-spinner .light{border:3px solid #fff;border-color:#fff transparent transparent transparent}.editioncrafter .inline-ring-spinner .dark{border:3px solid #000;border-color:#000 transparent transparent transparent}.editioncrafter .inline-ring-spinner div{box-sizing:border-box;display:block;position:absolute;width:16px;height:16px;border-radius:50%;animation:inline-ring-spinner 1.2s cubic-bezier(.5,0,.5,1) infinite}.editioncrafter .inline-ring-spinner div:nth-child(1){animation-delay:-.45s}.editioncrafter .inline-ring-spinner div:nth-child(2){animation-delay:-.3s}.editioncrafter .inline-ring-spinner div:nth-child(3){animation-delay:-.15s}@keyframes inline-ring-spinner{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.editioncrafter .big-ring-spinner{width:100%;height:100vh;display:flex;justify-content:center}.editioncrafter .big-ring-spinner div{box-sizing:border-box;display:block;position:absolute;width:128px;height:128px;margin-top:30vh;border-radius:50%;animation:big-ring-spinner 1.2s cubic-bezier(.5,0,.5,1) infinite}.editioncrafter .big-ring-spinner.dark div{border:16px solid #000;border-color:#000 transparent transparent transparent}.editioncrafter .big-ring-spinner.light div{border:16px solid #fff;border-color:#fff transparent transparent transparent}.editioncrafter .big-ring-spinner div:nth-child(1){animation-delay:-.45s}.editioncrafter .big-ring-spinner div:nth-child(2){animation-delay:-.3s}.editioncrafter .big-ring-spinner div:nth-child(3){animation-delay:-.15s}@keyframes big-ring-spinner{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.editioncrafter .single-pane-view{height:100%;width:100%;overflow:auto}.editioncrafter .single-pane-view>div{height:100%}')),document.head.appendChild(e)}}catch(i){console.error("vite-plugin-css-injected-by-js",i)}})();var l9=Object.defineProperty,u9=(e,i,t)=>i in e?l9(e,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[i]=t,ji=(e,i,t)=>u9(e,typeof i!="symbol"?i+"":i,t),Jn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function gr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function YS(e){if(e.__esModule)return e;var i=e.default;if(typeof i=="function"){var t=function n(){return this instanceof n?Reflect.construct(i,arguments,this.constructor):i.apply(this,arguments)};t.prototype=i.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var o=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,o.get?o:{enumerable:!0,get:function(){return e[n]}})}),t}var $S={exports:{}},_s={},pp,qw;function c9(){if(qw)return pp;qw=1;/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var e=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable;function n(u){if(u==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(u)}function o(){try{if(!Object.assign)return!1;var u=new String("abc");if(u[5]="de",Object.getOwnPropertyNames(u)[0]==="5")return!1;for(var h={},d=0;d<10;d++)h["_"+String.fromCharCode(d)]=d;var p=Object.getOwnPropertyNames(h).map(function(v){return h[v]});if(p.join("")!=="0123456789")return!1;var m={};return"abcdefghijklmnopqrst".split("").forEach(function(v){m[v]=v}),Object.keys(Object.assign({},m)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}return pp=o()?Object.assign:function(u,h){for(var d,p=n(u),m,v=1;v<arguments.length;v++){d=Object(arguments[v]);for(var x in d)i.call(d,x)&&(p[x]=d[x]);if(e){m=e(d);for(var E=0;E<m.length;E++)t.call(d,m[E])&&(p[m[E]]=d[m[E]])}}return p},pp}var Zw;function d9(){if(Zw)return _s;Zw=1;/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */c9();var e=xt,i=60103;if(_s.Fragment=60107,typeof Symbol=="function"&&Symbol.for){var t=Symbol.for;i=t("react.element"),_s.Fragment=t("react.fragment")}var n=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o=Object.prototype.hasOwnProperty,u={key:!0,ref:!0,__self:!0,__source:!0};function h(d,p,m){var v,x={},E=null,C=null;m!==void 0&&(E=""+m),p.key!==void 0&&(E=""+p.key),p.ref!==void 0&&(C=p.ref);for(v in p)o.call(p,v)&&!u.hasOwnProperty(v)&&(x[v]=p[v]);if(d&&d.defaultProps)for(v in p=d.defaultProps,p)x[v]===void 0&&(x[v]=p[v]);return{$$typeof:i,type:d,key:E,ref:C,props:x,_owner:n.current}}return _s.jsx=h,_s.jsxs=h,_s}$S.exports=d9();var q=$S.exports;function um(e,i){return function(){return null}}function De(){return De=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var t=arguments[i];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},De.apply(this,arguments)}function Fo(e){"@babel/helpers - typeof";return Fo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Fo(e)}function fp(e){return e&&Fo(e)==="object"&&e.constructor===Object}function Bs(e,i){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{clone:!0},n=t.clone?De({},e):e;return fp(e)&&fp(i)&&Object.keys(i).forEach(function(o){o!=="__proto__"&&(fp(i[o])&&o in e?n[o]=Bs(e[o],i[o],t):n[o]=i[o])}),n}var KS={exports:{}},mp,Xw;function h9(){if(Xw)return mp;Xw=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return mp=e,mp}var gp,Yw;function p9(){if(Yw)return gp;Yw=1;var e=h9();function i(){}function t(){}return t.resetWarningCache=i,gp=function(){function n(h,d,p,m,v,x){if(x!==e){var E=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw E.name="Invariant Violation",E}}n.isRequired=n;function o(){return n}var u={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:o,element:n,elementType:n,instanceOf:o,node:n,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:t,resetWarningCache:i};return u.PropTypes=u,u},gp}KS.exports=p9()();var Ks=KS.exports;const vt=gr(Ks);var f9=um(vt.element);f9.isRequired=um(vt.element.isRequired);um(Ks.elementType);function m9(e,i){if(Fo(e)!=="object"||e===null)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var n=t.call(e,i);if(Fo(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(e)}function QS(e){var i=m9(e,"string");return Fo(i)==="symbol"?i:String(i)}function zs(e,i,t){return i=QS(i),i in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}function Us(e){for(var i="https://mui.com/production-error/?code="+e,t=1;t<arguments.length;t+=1)i+="&args[]="+encodeURIComponent(arguments[t]);return"Minified Material-UI error #"+e+"; visit "+i+" for the full message."}var En={},$w;function g9(){if($w)return En;$w=1;/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e=60103,i=60106,t=60107,n=60108,o=60114,u=60109,h=60110,d=60112,p=60113,m=60120,v=60115,x=60116,E=60121,C=60122,O=60117,_=60129,k=60131;if(typeof Symbol=="function"&&Symbol.for){var I=Symbol.for;e=I("react.element"),i=I("react.portal"),t=I("react.fragment"),n=I("react.strict_mode"),o=I("react.profiler"),u=I("react.provider"),h=I("react.context"),d=I("react.forward_ref"),p=I("react.suspense"),m=I("react.suspense_list"),v=I("react.memo"),x=I("react.lazy"),E=I("react.block"),C=I("react.server.block"),O=I("react.fundamental"),_=I("react.debug_trace_mode"),k=I("react.legacy_hidden")}function G(ve){if(typeof ve=="object"&&ve!==null){var Fe=ve.$$typeof;switch(Fe){case e:switch(ve=ve.type,ve){case t:case o:case n:case p:case m:return ve;default:switch(ve=ve&&ve.$$typeof,ve){case h:case d:case x:case v:case u:return ve;default:return Fe}}case i:return Fe}}}var Z=u,ae=e,te=d,Q=t,le=x,ce=v,me=i,Pe=o,be=n,fe=p;return En.ContextConsumer=h,En.ContextProvider=Z,En.Element=ae,En.ForwardRef=te,En.Fragment=Q,En.Lazy=le,En.Memo=ce,En.Portal=me,En.Profiler=Pe,En.StrictMode=be,En.Suspense=fe,En.isAsyncMode=function(){return!1},En.isConcurrentMode=function(){return!1},En.isContextConsumer=function(ve){return G(ve)===h},En.isContextProvider=function(ve){return G(ve)===u},En.isElement=function(ve){return typeof ve=="object"&&ve!==null&&ve.$$typeof===e},En.isForwardRef=function(ve){return G(ve)===d},En.isFragment=function(ve){return G(ve)===t},En.isLazy=function(ve){return G(ve)===x},En.isMemo=function(ve){return G(ve)===v},En.isPortal=function(ve){return G(ve)===i},En.isProfiler=function(ve){return G(ve)===o},En.isStrictMode=function(ve){return G(ve)===n},En.isSuspense=function(ve){return G(ve)===p},En.isValidElementType=function(ve){return typeof ve=="string"||typeof ve=="function"||ve===t||ve===o||ve===_||ve===n||ve===p||ve===m||ve===k||typeof ve=="object"&&ve!==null&&(ve.$$typeof===x||ve.$$typeof===v||ve.$$typeof===u||ve.$$typeof===h||ve.$$typeof===d||ve.$$typeof===O||ve.$$typeof===E||ve[0]===C)},En.typeOf=G,En}g9();vt.oneOfType([vt.func,vt.object]);function JS(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return Math.min(Math.max(i,e),t)}function v9(e){e=e.substr(1);var i=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g"),t=e.match(i);return t&&t[0].length===1&&(t=t.map(function(n){return n+n})),t?"rgb".concat(t.length===4?"a":"","(").concat(t.map(function(n,o){return o<3?parseInt(n,16):Math.round(parseInt(n,16)/255*1e3)/1e3}).join(", "),")"):""}function y9(e){e=Ws(e);var i=e,t=i.values,n=t[0],o=t[1]/100,u=t[2]/100,h=o*Math.min(u,1-u),d=function(v){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:(v+n/30)%12;return u-h*Math.max(Math.min(x-3,9-x,1),-1)},p="rgb",m=[Math.round(d(0)*255),Math.round(d(8)*255),Math.round(d(4)*255)];return e.type==="hsla"&&(p+="a",m.push(t[3])),cm({type:p,values:m})}function Ws(e){if(e.type)return e;if(e.charAt(0)==="#")return Ws(v9(e));var i=e.indexOf("("),t=e.substring(0,i);if(["rgb","rgba","hsl","hsla"].indexOf(t)===-1)throw new Error(Us(3,e));var n=e.substring(i+1,e.length-1).split(",");return n=n.map(function(o){return parseFloat(o)}),{type:t,values:n}}function cm(e){var i=e.type,t=e.values;return i.indexOf("rgb")!==-1?t=t.map(function(n,o){return o<3?parseInt(n,10):n}):i.indexOf("hsl")!==-1&&(t[1]="".concat(t[1],"%"),t[2]="".concat(t[2],"%")),"".concat(i,"(").concat(t.join(", "),")")}function w9(e,i){var t=Kw(e),n=Kw(i);return(Math.max(t,n)+.05)/(Math.min(t,n)+.05)}function Kw(e){e=Ws(e);var i=e.type==="hsl"?Ws(y9(e)).values:e.values;return i=i.map(function(t){return t/=255,t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}),Number((.2126*i[0]+.7152*i[1]+.0722*i[2]).toFixed(3))}function b9(e,i){if(e=Ws(e),i=JS(i),e.type.indexOf("hsl")!==-1)e.values[2]*=1-i;else if(e.type.indexOf("rgb")!==-1)for(var t=0;t<3;t+=1)e.values[t]*=1-i;return cm(e)}function x9(e,i){if(e=Ws(e),i=JS(i),e.type.indexOf("hsl")!==-1)e.values[2]+=(100-e.values[2])*i;else if(e.type.indexOf("rgb")!==-1)for(var t=0;t<3;t+=1)e.values[t]+=(255-e.values[t])*i;return cm(e)}function Bo(e,i){if(e==null)return{};var t={},n=Object.keys(e),o,u;for(u=0;u<n.length;u++)o=n[u],!(i.indexOf(o)>=0)&&(t[o]=e[o]);return t}function Qt(e,i){if(e==null)return{};var t=Bo(e,i),n,o;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(o=0;o<u.length;o++)n=u[o],!(i.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(t[n]=e[n])}return t}var qi=["xs","sm","md","lg","xl"];function S9(e){var i=e.values,t=i===void 0?{xs:0,sm:600,md:960,lg:1280,xl:1920}:i,n=e.unit,o=n===void 0?"px":n,u=e.step,h=u===void 0?5:u,d=Qt(e,["values","unit","step"]);function p(C){var O=typeof t[C]=="number"?t[C]:C;return"@media (min-width:".concat(O).concat(o,")")}function m(C){var O=qi.indexOf(C)+1,_=t[qi[O]];if(O===qi.length)return p("xs");var k=typeof _=="number"&&O>0?_:C;return"@media (max-width:".concat(k-h/100).concat(o,")")}function v(C,O){var _=qi.indexOf(O);return _===qi.length-1?p(C):"@media (min-width:".concat(typeof t[C]=="number"?t[C]:C).concat(o,") and ")+"(max-width:".concat((_!==-1&&typeof t[qi[_+1]]=="number"?t[qi[_+1]]:O)-h/100).concat(o,")")}function x(C){return v(C,C)}function E(C){return t[C]}return De({keys:qi,values:t,up:p,down:m,between:v,only:x,width:E},d)}function E9(e,i,t){var n;return De({gutters:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return console.warn(["Material-UI: theme.mixins.gutters() is deprecated.","You can use the source of the mixin directly:",`
      paddingLeft: theme.spacing(2),
      paddingRight: theme.spacing(2),
      [theme.breakpoints.up('sm')]: {
        paddingLeft: theme.spacing(3),
        paddingRight: theme.spacing(3),
      },
      `].join(`
`)),De({paddingLeft:i(2),paddingRight:i(2)},o,zs({},e.up("sm"),De({paddingLeft:i(3),paddingRight:i(3)},o[e.up("sm")])))},toolbar:(n={minHeight:56},zs(n,"".concat(e.up("xs")," and (orientation: landscape)"),{minHeight:48}),zs(n,e.up("sm"),{minHeight:64}),n)},t)}var fc={black:"#000",white:"#fff"},dm={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#d5d5d5",A200:"#aaaaaa",A400:"#303030",A700:"#616161"},vp={300:"#7986cb",500:"#3f51b5",700:"#303f9f"},yp={A200:"#ff4081",A400:"#f50057",A700:"#c51162"},wp={300:"#e57373",500:"#f44336",700:"#d32f2f"},bp={300:"#ffb74d",500:"#ff9800",700:"#f57c00"},xp={300:"#64b5f6",500:"#2196f3",700:"#1976d2"},Sp={300:"#81c784",500:"#4caf50",700:"#388e3c"},Qw={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",hint:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:fc.white,default:dm[50]},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},Ep={text:{primary:fc.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",hint:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:dm[800],default:"#303030"},action:{active:fc.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function Jw(e,i,t,n){var o=n.light||n,u=n.dark||n*1.5;e[i]||(e.hasOwnProperty(t)?e[i]=e[t]:i==="light"?e.light=x9(e.main,o):i==="dark"&&(e.dark=b9(e.main,u)))}function T9(e){var i=e.primary,t=i===void 0?{light:vp[300],main:vp[500],dark:vp[700]}:i,n=e.secondary,o=n===void 0?{light:yp.A200,main:yp.A400,dark:yp.A700}:n,u=e.error,h=u===void 0?{light:wp[300],main:wp[500],dark:wp[700]}:u,d=e.warning,p=d===void 0?{light:bp[300],main:bp[500],dark:bp[700]}:d,m=e.info,v=m===void 0?{light:xp[300],main:xp[500],dark:xp[700]}:m,x=e.success,E=x===void 0?{light:Sp[300],main:Sp[500],dark:Sp[700]}:x,C=e.type,O=C===void 0?"light":C,_=e.contrastThreshold,k=_===void 0?3:_,I=e.tonalOffset,G=I===void 0?.2:I,Z=Qt(e,["primary","secondary","error","warning","info","success","type","contrastThreshold","tonalOffset"]);function ae(ce){var me=w9(ce,Ep.text.primary)>=k?Ep.text.primary:Qw.text.primary;return me}var te=function(ce){var me=arguments.length>1&&arguments[1]!==void 0?arguments[1]:500,Pe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:300,be=arguments.length>3&&arguments[3]!==void 0?arguments[3]:700;if(ce=De({},ce),!ce.main&&ce[me]&&(ce.main=ce[me]),!ce.main)throw new Error(Us(4,me));if(typeof ce.main!="string")throw new Error(Us(5,JSON.stringify(ce.main)));return Jw(ce,"light",Pe,G),Jw(ce,"dark",be,G),ce.contrastText||(ce.contrastText=ae(ce.main)),ce},Q={dark:Ep,light:Qw},le=Bs(De({common:fc,type:O,primary:te(t),secondary:te(o,"A400","A200","A700"),error:te(h),warning:te(p),info:te(v),success:te(E),grey:dm,contrastThreshold:k,getContrastText:ae,augmentColor:te,tonalOffset:G},Q[O]),Z);return le}function eE(e){return Math.round(e*1e5)/1e5}function C9(e){return eE(e)}var eb={textTransform:"uppercase"},tb='"Roboto", "Helvetica", "Arial", sans-serif';function P9(e,i){var t=typeof i=="function"?i(e):i,n=t.fontFamily,o=n===void 0?tb:n,u=t.fontSize,h=u===void 0?14:u,d=t.fontWeightLight,p=d===void 0?300:d,m=t.fontWeightRegular,v=m===void 0?400:m,x=t.fontWeightMedium,E=x===void 0?500:x,C=t.fontWeightBold,O=C===void 0?700:C,_=t.htmlFontSize,k=_===void 0?16:_,I=t.allVariants,G=t.pxToRem,Z=Qt(t,["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"]),ae=h/14,te=G||function(ce){return"".concat(ce/k*ae,"rem")},Q=function(ce,me,Pe,be,fe){return De({fontFamily:o,fontWeight:ce,fontSize:te(me),lineHeight:Pe},o===tb?{letterSpacing:"".concat(eE(be/me),"em")}:{},fe,I)},le={h1:Q(p,96,1.167,-1.5),h2:Q(p,60,1.2,-.5),h3:Q(v,48,1.167,0),h4:Q(v,34,1.235,.25),h5:Q(v,24,1.334,0),h6:Q(E,20,1.6,.15),subtitle1:Q(v,16,1.75,.15),subtitle2:Q(E,14,1.57,.1),body1:Q(v,16,1.5,.15),body2:Q(v,14,1.43,.15),button:Q(E,14,1.75,.4,eb),caption:Q(v,12,1.66,.4),overline:Q(v,12,2.66,1,eb)};return Bs(De({htmlFontSize:k,pxToRem:te,round:C9,fontFamily:o,fontSize:h,fontWeightLight:p,fontWeightRegular:v,fontWeightMedium:E,fontWeightBold:O},le),Z,{clone:!1})}var _9=.2,k9=.14,R9=.12;function On(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(_9,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(k9,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(R9,")")].join(",")}var O9=["none",On(0,2,1,-1,0,1,1,0,0,1,3,0),On(0,3,1,-2,0,2,2,0,0,1,5,0),On(0,3,3,-2,0,3,4,0,0,1,8,0),On(0,2,4,-1,0,4,5,0,0,1,10,0),On(0,3,5,-1,0,5,8,0,0,1,14,0),On(0,3,5,-1,0,6,10,0,0,1,18,0),On(0,4,5,-2,0,7,10,1,0,2,16,1),On(0,5,5,-3,0,8,10,1,0,3,14,2),On(0,5,6,-3,0,9,12,1,0,3,16,2),On(0,6,6,-3,0,10,14,1,0,4,18,3),On(0,6,7,-4,0,11,15,1,0,4,20,3),On(0,7,8,-4,0,12,17,2,0,5,22,4),On(0,7,8,-4,0,13,19,2,0,5,24,4),On(0,7,9,-4,0,14,21,2,0,5,26,4),On(0,8,9,-5,0,15,22,2,0,6,28,5),On(0,8,10,-5,0,16,24,2,0,6,30,5),On(0,8,11,-5,0,17,26,2,0,6,32,5),On(0,9,11,-5,0,18,28,2,0,7,34,6),On(0,9,12,-6,0,19,29,2,0,7,36,6),On(0,10,13,-6,0,20,31,3,0,8,38,7),On(0,10,13,-6,0,21,33,3,0,8,40,7),On(0,10,14,-6,0,22,35,3,0,8,42,7),On(0,11,14,-7,0,23,36,3,0,9,44,8),On(0,11,15,-7,0,24,38,3,0,9,46,8)],A9={borderRadius:4};function xf(e,i){(i==null||i>e.length)&&(i=e.length);for(var t=0,n=new Array(i);t<i;t++)n[t]=e[t];return n}function D9(e){if(Array.isArray(e))return xf(e)}function I9(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function tE(e,i){if(e){if(typeof e=="string")return xf(e,i);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return xf(e,i)}}function M9(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hm(e){return D9(e)||I9(e)||tE(e)||M9()}function L9(e){if(Array.isArray(e))return e}function N9(e,i){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var n,o,u,h,d=[],p=!0,m=!1;try{if(u=(t=t.call(e)).next,i!==0)for(;!(p=(n=u.call(t)).done)&&(d.push(n.value),d.length!==i);p=!0);}catch(v){m=!0,o=v}finally{try{if(!p&&t.return!=null&&(h=t.return(),Object(h)!==h))return}finally{if(m)throw o}}return d}}function z9(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pm(e,i){return L9(e)||N9(e,i)||tE(e,i)||z9()}function j9(e){var i=e.spacing||8;return typeof i=="number"?function(t){return i*t}:Array.isArray(i)?function(t){return i[t]}:typeof i=="function"?i:function(){}}function H9(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:8;if(e.mui)return e;var i=j9({spacing:e}),t=function(){for(var n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];return o.length===0?i(1):o.length===1?i(o[0]):o.map(function(h){if(typeof h=="string")return h;var d=i(h);return typeof d=="number"?"".concat(d,"px"):d}).join(" ")};return Object.defineProperty(t,"unit",{get:function(){return e}}),t.mui=!0,t}var nb={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},mc={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function ib(e){return"".concat(Math.round(e),"ms")}const F9={easing:nb,duration:mc,create:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["all"],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=i.duration,n=t===void 0?mc.standard:t,o=i.easing,u=o===void 0?nb.easeInOut:o,h=i.delay,d=h===void 0?0:h;return Qt(i,["duration","easing","delay"]),(Array.isArray(e)?e:[e]).map(function(p){return"".concat(p," ").concat(typeof n=="string"?n:ib(n)," ").concat(u," ").concat(typeof d=="string"?d:ib(d))}).join(",")},getAutoHeightDuration:function(e){if(!e)return 0;var i=e/36;return Math.round((4+15*Math.pow(i,.25)+i/5)*10)}};var nE={mobileStepper:1e3,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function iE(){for(var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=e.breakpoints,t=i===void 0?{}:i,n=e.mixins,o=n===void 0?{}:n,u=e.palette,h=u===void 0?{}:u,d=e.spacing,p=e.typography,m=p===void 0?{}:p,v=Qt(e,["breakpoints","mixins","palette","spacing","typography"]),x=T9(h),E=S9(t),C=H9(d),O=Bs({breakpoints:E,direction:"ltr",mixins:E9(E,C,o),overrides:{},palette:x,props:{},shadows:O9,typography:P9(x,m),spacing:C,shape:A9,transitions:F9,zIndex:nE},v),_=arguments.length,k=new Array(_>1?_-1:0),I=1;I<_;I++)k[I-1]=arguments[I];return O=k.reduce(function(G,Z){return Bs(G,Z)},O),O}var B9=typeof Symbol=="function"&&Symbol.for;const rE=B9?Symbol.for("mui.nested"):"__THEME_NESTED__";var U9=["checked","disabled","error","focused","focusVisible","required","expanded","selected"];function W9(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=e.disableGlobal,t=i===void 0?!1:i,n=e.productionPrefix,o=n===void 0?"jss":n,u=e.seed,h=u===void 0?"":u,d=h===""?"":"".concat(h,"-"),p=0,m=function(){return p+=1,p};return function(v,x){var E=x.options.name;if(E&&E.indexOf("Mui")===0&&!x.options.link&&!t){if(U9.indexOf(v.key)!==-1)return"Mui-".concat(v.key);var C="".concat(d).concat(E,"-").concat(v.key);return!x.options.theme[rE]||h!==""?C:"".concat(C,"-").concat(m())}return"".concat(d).concat(o).concat(m())}}function kc(e){var i=e.theme,t=e.name,n=e.props;if(!i||!i.props||!i.props[t])return n;var o=i.props[t],u;for(u in o)n[u]===void 0&&(n[u]=o[u]);return n}var rb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fl=(typeof window>"u"?"undefined":rb(window))==="object"&&(typeof document>"u"?"undefined":rb(document))==="object"&&document.nodeType===9;function V9(e,i){for(var t=0;t<i.length;t++){var n=i[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,QS(n.key),n)}}function fm(e,i,t){return i&&V9(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function Sf(e,i){return Sf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},Sf(e,i)}function Rc(e,i){e.prototype=Object.create(i.prototype),e.prototype.constructor=e,Sf(e,i)}function Ef(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var G9={}.constructor;function Tf(e){if(e==null||typeof e!="object")return e;if(Array.isArray(e))return e.map(Tf);if(e.constructor!==G9)return e;var i={};for(var t in e)i[t]=Tf(e[t]);return i}function mm(e,i,t){e===void 0&&(e="unnamed");var n=t.jss,o=Tf(i),u=n.plugins.onCreateRule(e,o,t);return u||(e[0],null)}var ob=function(e,i){for(var t="",n=0;n<e.length&&e[n]!=="!important";n++)t&&(t+=i),t+=e[n];return t},zo=function(e){if(!Array.isArray(e))return e;var i="";if(Array.isArray(e[0]))for(var t=0;t<e.length&&e[t]!=="!important";t++)i&&(i+=", "),i+=ob(e[t]," ");else i=ob(e,", ");return e[e.length-1]==="!important"&&(i+=" !important"),i};function Qs(e){return e&&e.format===!1?{linebreak:"",space:""}:{linebreak:`
`,space:" "}}function Fa(e,i){for(var t="",n=0;n<i;n++)t+="  ";return t+e}function ul(e,i,t){t===void 0&&(t={});var n="";if(!i)return n;var o=t,u=o.indent,h=u===void 0?0:u,d=i.fallbacks;t.format===!1&&(h=-1/0);var p=Qs(t),m=p.linebreak,v=p.space;if(e&&h++,d)if(Array.isArray(d))for(var x=0;x<d.length;x++){var E=d[x];for(var C in E){var O=E[C];O!=null&&(n&&(n+=m),n+=Fa(C+":"+v+zo(O)+";",h))}}else for(var _ in d){var k=d[_];k!=null&&(n&&(n+=m),n+=Fa(_+":"+v+zo(k)+";",h))}for(var I in i){var G=i[I];G!=null&&I!=="fallbacks"&&(n&&(n+=m),n+=Fa(I+":"+v+zo(G)+";",h))}return!n&&!t.allowEmpty||!e?n:(h--,n&&(n=""+m+n+m),Fa(""+e+v+"{"+n,h)+Fa("}",h))}var q9=/([[\].#*$><+~=|^:(),"'`\s])/g,sb=typeof CSS<"u"&&CSS.escape,gm=function(e){return sb?sb(e):e.replace(q9,"\\$1")},oE=function(){function e(t,n,o){this.type="style",this.isProcessed=!1;var u=o.sheet,h=o.Renderer;this.key=t,this.options=o,this.style=n,u?this.renderer=u.renderer:h&&(this.renderer=new h)}var i=e.prototype;return i.prop=function(t,n,o){if(n===void 0)return this.style[t];var u=o?o.force:!1;if(!u&&this.style[t]===n)return this;var h=n;(!o||o.process!==!1)&&(h=this.options.jss.plugins.onChangeValue(n,t,this));var d=h==null||h===!1,p=t in this.style;if(d&&!p&&!u)return this;var m=d&&p;if(m?delete this.style[t]:this.style[t]=h,this.renderable&&this.renderer)return m?this.renderer.removeProperty(this.renderable,t):this.renderer.setProperty(this.renderable,t,h),this;var v=this.options.sheet;return v&&v.attached,this},e}(),Cf=function(e){Rc(i,e);function i(n,o,u){var h;h=e.call(this,n,o,u)||this;var d=u.selector,p=u.scoped,m=u.sheet,v=u.generateId;return d?h.selectorText=d:p!==!1&&(h.id=v(Ef(Ef(h)),m),h.selectorText="."+gm(h.id)),h}var t=i.prototype;return t.applyTo=function(n){var o=this.renderer;if(o){var u=this.toJSON();for(var h in u)o.setProperty(n,h,u[h])}return this},t.toJSON=function(){var n={};for(var o in this.style){var u=this.style[o];typeof u!="object"?n[o]=u:Array.isArray(u)&&(n[o]=zo(u))}return n},t.toString=function(n){var o=this.options.sheet,u=o?o.options.link:!1,h=u?De({},n,{allowEmpty:!0}):n;return ul(this.selectorText,this.style,h)},fm(i,[{key:"selector",set:function(n){if(n!==this.selectorText){this.selectorText=n;var o=this.renderer,u=this.renderable;if(!(!u||!o)){var h=o.setSelector(u,n);h||o.replaceRule(u,this)}}},get:function(){return this.selectorText}}]),i}(oE),Z9={onCreateRule:function(e,i,t){return e[0]==="@"||t.parent&&t.parent.type==="keyframes"?null:new Cf(e,i,t)}},Tp={indent:1,children:!0},X9=/@([\w-]+)/,Y9=function(){function e(t,n,o){this.type="conditional",this.isProcessed=!1,this.key=t;var u=t.match(X9);this.at=u?u[1]:"unknown",this.query=o.name||"@"+this.at,this.options=o,this.rules=new Oc(De({},o,{parent:this}));for(var h in n)this.rules.add(h,n[h]);this.rules.process()}var i=e.prototype;return i.getRule=function(t){return this.rules.get(t)},i.indexOf=function(t){return this.rules.indexOf(t)},i.addRule=function(t,n,o){var u=this.rules.add(t,n,o);return u?(this.options.jss.plugins.onProcessRule(u),u):null},i.replaceRule=function(t,n,o){var u=this.rules.replace(t,n,o);return u&&this.options.jss.plugins.onProcessRule(u),u},i.toString=function(t){t===void 0&&(t=Tp);var n=Qs(t),o=n.linebreak;if(t.indent==null&&(t.indent=Tp.indent),t.children==null&&(t.children=Tp.children),t.children===!1)return this.query+" {}";var u=this.rules.toString(t);return u?this.query+" {"+o+u+o+"}":""},e}(),$9=/@container|@media|@supports\s+/,K9={onCreateRule:function(e,i,t){return $9.test(e)?new Y9(e,i,t):null}},Cp={indent:1,children:!0},Q9=/@keyframes\s+([\w-]+)/,Pf=function(){function e(t,n,o){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var u=t.match(Q9);u&&u[1]?this.name=u[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=o;var h=o.scoped,d=o.sheet,p=o.generateId;this.id=h===!1?this.name:gm(p(this,d)),this.rules=new Oc(De({},o,{parent:this}));for(var m in n)this.rules.add(m,n[m],De({},o,{parent:this}));this.rules.process()}var i=e.prototype;return i.toString=function(t){t===void 0&&(t=Cp);var n=Qs(t),o=n.linebreak;if(t.indent==null&&(t.indent=Cp.indent),t.children==null&&(t.children=Cp.children),t.children===!1)return this.at+" "+this.id+" {}";var u=this.rules.toString(t);return u&&(u=""+o+u+o),this.at+" "+this.id+" {"+u+"}"},e}(),J9=/@keyframes\s+/,ez=/\$([\w-]+)/g,_f=function(e,i){return typeof e=="string"?e.replace(ez,function(t,n){return n in i?i[n]:t}):e},ab=function(e,i,t){var n=e[i],o=_f(n,t);o!==n&&(e[i]=o)},tz={onCreateRule:function(e,i,t){return typeof e=="string"&&J9.test(e)?new Pf(e,i,t):null},onProcessStyle:function(e,i,t){return i.type!=="style"||!t||("animation-name"in e&&ab(e,"animation-name",t.keyframes),"animation"in e&&ab(e,"animation",t.keyframes)),e},onChangeValue:function(e,i,t){var n=t.options.sheet;if(!n)return e;switch(i){case"animation":return _f(e,n.keyframes);case"animation-name":return _f(e,n.keyframes);default:return e}}},nz=function(e){Rc(i,e);function i(){return e.apply(this,arguments)||this}var t=i.prototype;return t.toString=function(n){var o=this.options.sheet,u=o?o.options.link:!1,h=u?De({},n,{allowEmpty:!0}):n;return ul(this.key,this.style,h)},i}(oE),iz={onCreateRule:function(e,i,t){return t.parent&&t.parent.type==="keyframes"?new nz(e,i,t):null}},rz=function(){function e(t,n,o){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=t,this.style=n,this.options=o}var i=e.prototype;return i.toString=function(t){var n=Qs(t),o=n.linebreak;if(Array.isArray(this.style)){for(var u="",h=0;h<this.style.length;h++)u+=ul(this.at,this.style[h]),this.style[h+1]&&(u+=o);return u}return ul(this.at,this.style,t)},e}(),oz=/@font-face/,sz={onCreateRule:function(e,i,t){return oz.test(e)?new rz(e,i,t):null}},az=function(){function e(t,n,o){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=t,this.style=n,this.options=o}var i=e.prototype;return i.toString=function(t){return ul(this.key,this.style,t)},e}(),lz={onCreateRule:function(e,i,t){return e==="@viewport"||e==="@-ms-viewport"?new az(e,i,t):null}},uz=function(){function e(t,n,o){this.type="simple",this.isProcessed=!1,this.key=t,this.value=n,this.options=o}var i=e.prototype;return i.toString=function(t){if(Array.isArray(this.value)){for(var n="",o=0;o<this.value.length;o++)n+=this.key+" "+this.value[o]+";",this.value[o+1]&&(n+=`
`);return n}return this.key+" "+this.value+";"},e}(),cz={"@charset":!0,"@import":!0,"@namespace":!0},dz={onCreateRule:function(e,i,t){return e in cz?new uz(e,i,t):null}},lb=[Z9,K9,tz,iz,sz,lz,dz],hz={process:!0},ub={force:!0,process:!0},Oc=function(){function e(t){this.map={},this.raw={},this.index=[],this.counter=0,this.options=t,this.classes=t.classes,this.keyframes=t.keyframes}var i=e.prototype;return i.add=function(t,n,o){var u=this.options,h=u.parent,d=u.sheet,p=u.jss,m=u.Renderer,v=u.generateId,x=u.scoped,E=De({classes:this.classes,parent:h,sheet:d,jss:p,Renderer:m,generateId:v,scoped:x,name:t,keyframes:this.keyframes,selector:void 0},o),C=t;t in this.raw&&(C=t+"-d"+this.counter++),this.raw[C]=n,C in this.classes&&(E.selector="."+gm(this.classes[C]));var O=mm(C,n,E);if(!O)return null;this.register(O);var _=E.index===void 0?this.index.length:E.index;return this.index.splice(_,0,O),O},i.replace=function(t,n,o){var u=this.get(t),h=this.index.indexOf(u);u&&this.remove(u);var d=o;return h!==-1&&(d=De({},o,{index:h})),this.add(t,n,d)},i.get=function(t){return this.map[t]},i.remove=function(t){this.unregister(t),delete this.raw[t.key],this.index.splice(this.index.indexOf(t),1)},i.indexOf=function(t){return this.index.indexOf(t)},i.process=function(){var t=this.options.jss.plugins;this.index.slice(0).forEach(t.onProcessRule,t)},i.register=function(t){this.map[t.key]=t,t instanceof Cf?(this.map[t.selector]=t,t.id&&(this.classes[t.key]=t.id)):t instanceof Pf&&this.keyframes&&(this.keyframes[t.name]=t.id)},i.unregister=function(t){delete this.map[t.key],t instanceof Cf?(delete this.map[t.selector],delete this.classes[t.key]):t instanceof Pf&&delete this.keyframes[t.name]},i.update=function(){var t,n,o;if(typeof(arguments.length<=0?void 0:arguments[0])=="string"?(t=arguments.length<=0?void 0:arguments[0],n=arguments.length<=1?void 0:arguments[1],o=arguments.length<=2?void 0:arguments[2]):(n=arguments.length<=0?void 0:arguments[0],o=arguments.length<=1?void 0:arguments[1],t=null),t)this.updateOne(this.get(t),n,o);else for(var u=0;u<this.index.length;u++)this.updateOne(this.index[u],n,o)},i.updateOne=function(t,n,o){o===void 0&&(o=hz);var u=this.options,h=u.jss.plugins,d=u.sheet;if(t.rules instanceof e){t.rules.update(n,o);return}var p=t.style;if(h.onUpdate(n,t,d,o),o.process&&p&&p!==t.style){h.onProcessStyle(t.style,t,d);for(var m in t.style){var v=t.style[m],x=p[m];v!==x&&t.prop(m,v,ub)}for(var E in p){var C=t.style[E],O=p[E];C==null&&C!==O&&t.prop(E,null,ub)}}},i.toString=function(t){for(var n="",o=this.options.sheet,u=o?o.options.link:!1,h=Qs(t),d=h.linebreak,p=0;p<this.index.length;p++){var m=this.index[p],v=m.toString(t);!v&&!u||(n&&(n+=d),n+=v)}return n},e}(),sE=function(){function e(t,n){this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=De({},n,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),n.Renderer&&(this.renderer=new n.Renderer(this)),this.rules=new Oc(this.options);for(var o in t)this.rules.add(o,t[o]);this.rules.process()}var i=e.prototype;return i.attach=function(){return this.attached?this:(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy(),this)},i.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},i.addRule=function(t,n,o){var u=this.queue;this.attached&&!u&&(this.queue=[]);var h=this.rules.add(t,n,o);return h?(this.options.jss.plugins.onProcessRule(h),this.attached?(this.deployed&&(u?u.push(h):(this.insertRule(h),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0))),h):(this.deployed=!1,h)):null},i.replaceRule=function(t,n,o){var u=this.rules.get(t);if(!u)return this.addRule(t,n,o);var h=this.rules.replace(t,n,o);return h&&this.options.jss.plugins.onProcessRule(h),this.attached?(this.deployed&&this.renderer&&(h?u.renderable&&this.renderer.replaceRule(u.renderable,h):this.renderer.deleteRule(u)),h):(this.deployed=!1,h)},i.insertRule=function(t){this.renderer&&this.renderer.insertRule(t)},i.addRules=function(t,n){var o=[];for(var u in t){var h=this.addRule(u,t[u],n);h&&o.push(h)}return o},i.getRule=function(t){return this.rules.get(t)},i.deleteRule=function(t){var n=typeof t=="object"?t:this.rules.get(t);return!n||this.attached&&!n.renderable?!1:(this.rules.remove(n),this.attached&&n.renderable&&this.renderer?this.renderer.deleteRule(n.renderable):!0)},i.indexOf=function(t){return this.rules.indexOf(t)},i.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},i.update=function(){var t;return(t=this.rules).update.apply(t,arguments),this},i.updateOne=function(t,n,o){return this.rules.updateOne(t,n,o),this},i.toString=function(t){return this.rules.toString(t)},e}(),pz=function(){function e(){this.plugins={internal:[],external:[]},this.registry={}}var i=e.prototype;return i.onCreateRule=function(t,n,o){for(var u=0;u<this.registry.onCreateRule.length;u++){var h=this.registry.onCreateRule[u](t,n,o);if(h)return h}return null},i.onProcessRule=function(t){if(!t.isProcessed){for(var n=t.options.sheet,o=0;o<this.registry.onProcessRule.length;o++)this.registry.onProcessRule[o](t,n);t.style&&this.onProcessStyle(t.style,t,n),t.isProcessed=!0}},i.onProcessStyle=function(t,n,o){for(var u=0;u<this.registry.onProcessStyle.length;u++)n.style=this.registry.onProcessStyle[u](n.style,n,o)},i.onProcessSheet=function(t){for(var n=0;n<this.registry.onProcessSheet.length;n++)this.registry.onProcessSheet[n](t)},i.onUpdate=function(t,n,o,u){for(var h=0;h<this.registry.onUpdate.length;h++)this.registry.onUpdate[h](t,n,o,u)},i.onChangeValue=function(t,n,o){for(var u=t,h=0;h<this.registry.onChangeValue.length;h++)u=this.registry.onChangeValue[h](u,n,o);return u},i.use=function(t,n){n===void 0&&(n={queue:"external"});var o=this.plugins[n.queue];o.indexOf(t)===-1&&(o.push(t),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce(function(u,h){for(var d in h)d in u&&u[d].push(h[d]);return u},{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},e}(),fz=function(){function e(){this.registry=[]}var i=e.prototype;return i.add=function(t){var n=this.registry,o=t.options.index;if(n.indexOf(t)===-1){if(n.length===0||o>=this.index){n.push(t);return}for(var u=0;u<n.length;u++)if(n[u].options.index>o){n.splice(u,0,t);return}}},i.reset=function(){this.registry=[]},i.remove=function(t){var n=this.registry.indexOf(t);this.registry.splice(n,1)},i.toString=function(t){for(var n=t===void 0?{}:t,o=n.attached,u=Bo(n,["attached"]),h=Qs(u),d=h.linebreak,p="",m=0;m<this.registry.length;m++){var v=this.registry[m];o!=null&&v.attached!==o||(p&&(p+=d),p+=v.toString(u))}return p},fm(e,[{key:"index",get:function(){return this.registry.length===0?0:this.registry[this.registry.length-1].options.index}}]),e}(),Qa=new fz,kf=typeof globalThis<"u"?globalThis:typeof window<"u"&&window.Math===Math?window:typeof self<"u"&&self.Math===Math?self:Function("return this")(),Rf="2f1acc6c3a606b082e5eef5e54414ffb";kf[Rf]==null&&(kf[Rf]=0);var cb=kf[Rf]++,db=function(e){e===void 0&&(e={});var i=0,t=function(n,o){i+=1;var u="",h="";return o&&(o.options.classNamePrefix&&(h=o.options.classNamePrefix),o.options.jss.id!=null&&(u=String(o.options.jss.id))),e.minify?""+(h||"c")+cb+u+i:h+n.key+"-"+cb+(u?"-"+u:"")+"-"+i};return t},aE=function(e){var i;return function(){return i||(i=e()),i}},mz=function(e,i){try{return e.attributeStyleMap?e.attributeStyleMap.get(i):e.style.getPropertyValue(i)}catch{return""}},gz=function(e,i,t){try{var n=t;if(Array.isArray(t)&&(n=zo(t)),e.attributeStyleMap)e.attributeStyleMap.set(i,n);else{var o=n?n.indexOf("!important"):-1,u=o>-1?n.substr(0,o-1):n;e.style.setProperty(i,u,o>-1?"important":"")}}catch{return!1}return!0},vz=function(e,i){try{e.attributeStyleMap?e.attributeStyleMap.delete(i):e.style.removeProperty(i)}catch{}},yz=function(e,i){return e.selectorText=i,e.selectorText===i},lE=aE(function(){return document.querySelector("head")});function wz(e,i){for(var t=0;t<e.length;t++){var n=e[t];if(n.attached&&n.options.index>i.index&&n.options.insertionPoint===i.insertionPoint)return n}return null}function bz(e,i){for(var t=e.length-1;t>=0;t--){var n=e[t];if(n.attached&&n.options.insertionPoint===i.insertionPoint)return n}return null}function xz(e){for(var i=lE(),t=0;t<i.childNodes.length;t++){var n=i.childNodes[t];if(n.nodeType===8&&n.nodeValue.trim()===e)return n}return null}function Sz(e){var i=Qa.registry;if(i.length>0){var t=wz(i,e);if(t&&t.renderer)return{parent:t.renderer.element.parentNode,node:t.renderer.element};if(t=bz(i,e),t&&t.renderer)return{parent:t.renderer.element.parentNode,node:t.renderer.element.nextSibling}}var n=e.insertionPoint;if(n&&typeof n=="string"){var o=xz(n);if(o)return{parent:o.parentNode,node:o.nextSibling}}return!1}function Ez(e,i){var t=i.insertionPoint,n=Sz(i);if(n!==!1&&n.parent){n.parent.insertBefore(e,n.node);return}if(t&&typeof t.nodeType=="number"){var o=t,u=o.parentNode;u&&u.insertBefore(e,o.nextSibling);return}lE().appendChild(e)}var Tz=aE(function(){var e=document.querySelector('meta[property="csp-nonce"]');return e?e.getAttribute("content"):null}),hb=function(e,i,t){try{"insertRule"in e?e.insertRule(i,t):"appendRule"in e&&e.appendRule(i)}catch{return!1}return e.cssRules[t]},pb=function(e,i){var t=e.cssRules.length;return i===void 0||i>t?t:i},Cz=function(){var e=document.createElement("style");return e.textContent=`
`,e},Pz=function(){function e(t){this.getPropertyValue=mz,this.setProperty=gz,this.removeProperty=vz,this.setSelector=yz,this.hasInsertedRules=!1,this.cssRules=[],t&&Qa.add(t),this.sheet=t;var n=this.sheet?this.sheet.options:{},o=n.media,u=n.meta,h=n.element;this.element=h||Cz(),this.element.setAttribute("data-jss",""),o&&this.element.setAttribute("media",o),u&&this.element.setAttribute("data-meta",u);var d=Tz();d&&this.element.setAttribute("nonce",d)}var i=e.prototype;return i.attach=function(){if(!(this.element.parentNode||!this.sheet)){Ez(this.element,this.sheet.options);var t=!!(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&t&&(this.hasInsertedRules=!1,this.deploy())}},i.detach=function(){if(this.sheet){var t=this.element.parentNode;t&&t.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent=`
`)}},i.deploy=function(){var t=this.sheet;if(t){if(t.options.link){this.insertRules(t.rules);return}this.element.textContent=`
`+t.toString()+`
`}},i.insertRules=function(t,n){for(var o=0;o<t.index.length;o++)this.insertRule(t.index[o],o,n)},i.insertRule=function(t,n,o){if(o===void 0&&(o=this.element.sheet),t.rules){var u=t,h=o;if(t.type==="conditional"||t.type==="keyframes"){var d=pb(o,n);if(h=hb(o,u.toString({children:!1}),d),h===!1)return!1;this.refCssRule(t,d,h)}return this.insertRules(u.rules,h),h}var p=t.toString();if(!p)return!1;var m=pb(o,n),v=hb(o,p,m);return v===!1?!1:(this.hasInsertedRules=!0,this.refCssRule(t,m,v),v)},i.refCssRule=function(t,n,o){t.renderable=o,t.options.parent instanceof sE&&this.cssRules.splice(n,0,o)},i.deleteRule=function(t){var n=this.element.sheet,o=this.indexOf(t);return o===-1?!1:(n.deleteRule(o),this.cssRules.splice(o,1),!0)},i.indexOf=function(t){return this.cssRules.indexOf(t)},i.replaceRule=function(t,n){var o=this.indexOf(t);return o===-1?!1:(this.element.sheet.deleteRule(o),this.cssRules.splice(o,1),this.insertRule(n,o))},i.getRules=function(){return this.element.sheet.cssRules},e}(),_z=0,kz=function(){function e(t){this.id=_z++,this.version="10.10.0",this.plugins=new pz,this.options={id:{minify:!1},createGenerateId:db,Renderer:fl?Pz:null,plugins:[]},this.generateId=db({minify:!1});for(var n=0;n<lb.length;n++)this.plugins.use(lb[n],{queue:"internal"});this.setup(t)}var i=e.prototype;return i.setup=function(t){return t===void 0&&(t={}),t.createGenerateId&&(this.options.createGenerateId=t.createGenerateId),t.id&&(this.options.id=De({},this.options.id,t.id)),(t.createGenerateId||t.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),t.insertionPoint!=null&&(this.options.insertionPoint=t.insertionPoint),"Renderer"in t&&(this.options.Renderer=t.Renderer),t.plugins&&this.use.apply(this,t.plugins),this},i.createStyleSheet=function(t,n){n===void 0&&(n={});var o=n,u=o.index;typeof u!="number"&&(u=Qa.index===0?0:Qa.index+1);var h=new sE(t,De({},n,{jss:this,generateId:n.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:u}));return this.plugins.onProcessSheet(h),h},i.removeStyleSheet=function(t){return t.detach(),Qa.remove(t),this},i.createRule=function(t,n,o){if(n===void 0&&(n={}),o===void 0&&(o={}),typeof t=="object")return this.createRule(void 0,t,n);var u=De({},o,{name:t,jss:this,Renderer:this.options.Renderer});u.generateId||(u.generateId=this.generateId),u.classes||(u.classes={}),u.keyframes||(u.keyframes={});var h=mm(t,n,u);return h&&this.plugins.onProcessRule(h),h},i.use=function(){for(var t=this,n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];return o.forEach(function(h){t.plugins.use(h)}),this},e}(),uE=function(e){return new kz(e)},vm=typeof CSS=="object"&&CSS!=null&&"number"in CSS;function cE(e){var i=null;for(var t in e){var n=e[t],o=typeof n;if(o==="function")i||(i={}),i[t]=n;else if(o==="object"&&n!==null&&!Array.isArray(n)){var u=cE(n);u&&(i||(i={}),i[t]=u)}}return i}/**
 * A better abstraction over CSS.
 *
 * @copyright Oleg Isonen (Slobodskoi) / Isonen 2014-present
 * @website https://github.com/cssinjs/jss
 * @license MIT
 */uE();var dE=Date.now(),Pp="fnValues"+dE,_p="fnStyle"+ ++dE,Rz=function(){return{onCreateRule:function(e,i,t){if(typeof i!="function")return null;var n=mm(e,{},t);return n[_p]=i,n},onProcessStyle:function(e,i){if(Pp in i||_p in i)return e;var t={};for(var n in e){var o=e[n];typeof o=="function"&&(delete e[n],t[n]=o)}return i[Pp]=t,e},onUpdate:function(e,i,t,n){var o=i,u=o[_p];u&&(o.style=u(e)||{});var h=o[Pp];if(h)for(var d in h)o.prop(d,h[d](e),n)}}},Kr="@global",Of="@global ",Oz=function(){function e(t,n,o){this.type="global",this.at=Kr,this.isProcessed=!1,this.key=t,this.options=o,this.rules=new Oc(De({},o,{parent:this}));for(var u in n)this.rules.add(u,n[u]);this.rules.process()}var i=e.prototype;return i.getRule=function(t){return this.rules.get(t)},i.addRule=function(t,n,o){var u=this.rules.add(t,n,o);return u&&this.options.jss.plugins.onProcessRule(u),u},i.replaceRule=function(t,n,o){var u=this.rules.replace(t,n,o);return u&&this.options.jss.plugins.onProcessRule(u),u},i.indexOf=function(t){return this.rules.indexOf(t)},i.toString=function(t){return this.rules.toString(t)},e}(),Az=function(){function e(t,n,o){this.type="global",this.at=Kr,this.isProcessed=!1,this.key=t,this.options=o;var u=t.substr(Of.length);this.rule=o.jss.createRule(u,n,De({},o,{parent:this}))}var i=e.prototype;return i.toString=function(t){return this.rule?this.rule.toString(t):""},e}(),Dz=/\s*,\s*/g;function hE(e,i){for(var t=e.split(Dz),n="",o=0;o<t.length;o++)n+=i+" "+t[o].trim(),t[o+1]&&(n+=", ");return n}function Iz(e,i){var t=e.options,n=e.style,o=n?n[Kr]:null;if(o){for(var u in o)i.addRule(u,o[u],De({},t,{selector:hE(u,e.selector)}));delete n[Kr]}}function Mz(e,i){var t=e.options,n=e.style;for(var o in n)if(!(o[0]!=="@"||o.substr(0,Kr.length)!==Kr)){var u=hE(o.substr(Kr.length),e.selector);i.addRule(u,n[o],De({},t,{selector:u})),delete n[o]}}function Lz(){function e(t,n,o){if(!t)return null;if(t===Kr)return new Oz(t,n,o);if(t[0]==="@"&&t.substr(0,Of.length)===Of)return new Az(t,n,o);var u=o.parent;return u&&(u.type==="global"||u.options.parent&&u.options.parent.type==="global")&&(o.scoped=!1),!o.selector&&o.scoped===!1&&(o.selector=t),null}function i(t,n){t.type!=="style"||!n||(Iz(t,n),Mz(t,n))}return{onCreateRule:e,onProcessRule:i}}var fb=/\s*,\s*/g,Nz=/&/g,zz=/\$([\w-]+)/g;function jz(){function e(o,u){return function(h,d){var p=o.getRule(d)||u&&u.getRule(d);return p?p.selector:d}}function i(o,u){for(var h=u.split(fb),d=o.split(fb),p="",m=0;m<h.length;m++)for(var v=h[m],x=0;x<d.length;x++){var E=d[x];p&&(p+=", "),p+=E.indexOf("&")!==-1?E.replace(Nz,v):v+" "+E}return p}function t(o,u,h){if(h)return De({},h,{index:h.index+1});var d=o.options.nestingLevel;d=d===void 0?1:d+1;var p=De({},o.options,{nestingLevel:d,index:u.indexOf(o)+1});return delete p.name,p}function n(o,u,h){if(u.type!=="style")return o;var d=u,p=d.options.parent,m,v;for(var x in o){var E=x.indexOf("&")!==-1,C=x[0]==="@";if(!(!E&&!C)){if(m=t(d,p,m),E){var O=i(x,d.selector);v||(v=e(p,h)),O=O.replace(zz,v);var _=d.key+"-"+x;"replaceRule"in p?p.replaceRule(_,o[x],De({},m,{selector:O})):p.addRule(_,o[x],De({},m,{selector:O}))}else C&&p.addRule(x,{},m).addRule(d.key,o[x],{selector:d.selector});delete o[x]}}return o}return{onProcessStyle:n}}var Hz=/[A-Z]/g,Fz=/^ms-/,kp={};function Bz(e){return"-"+e.toLowerCase()}function pE(e){if(kp.hasOwnProperty(e))return kp[e];var i=e.replace(Hz,Bz);return kp[e]=Fz.test(i)?"-"+i:i}function gc(e){var i={};for(var t in e){var n=t.indexOf("--")===0?t:pE(t);i[n]=e[t]}return e.fallbacks&&(Array.isArray(e.fallbacks)?i.fallbacks=e.fallbacks.map(gc):i.fallbacks=gc(e.fallbacks)),i}function Uz(){function e(t){if(Array.isArray(t)){for(var n=0;n<t.length;n++)t[n]=gc(t[n]);return t}return gc(t)}function i(t,n,o){if(n.indexOf("--")===0)return t;var u=pE(n);return n===u?t:(o.prop(u,t),null)}return{onProcessStyle:e,onChangeValue:i}}var He=vm&&CSS?CSS.px:"px",Ku=vm&&CSS?CSS.ms:"ms",ks=vm&&CSS?CSS.percent:"%",Wz={"animation-delay":Ku,"animation-duration":Ku,"background-position":He,"background-position-x":He,"background-position-y":He,"background-size":He,border:He,"border-bottom":He,"border-bottom-left-radius":He,"border-bottom-right-radius":He,"border-bottom-width":He,"border-left":He,"border-left-width":He,"border-radius":He,"border-right":He,"border-right-width":He,"border-top":He,"border-top-left-radius":He,"border-top-right-radius":He,"border-top-width":He,"border-width":He,"border-block":He,"border-block-end":He,"border-block-end-width":He,"border-block-start":He,"border-block-start-width":He,"border-block-width":He,"border-inline":He,"border-inline-end":He,"border-inline-end-width":He,"border-inline-start":He,"border-inline-start-width":He,"border-inline-width":He,"border-start-start-radius":He,"border-start-end-radius":He,"border-end-start-radius":He,"border-end-end-radius":He,margin:He,"margin-bottom":He,"margin-left":He,"margin-right":He,"margin-top":He,"margin-block":He,"margin-block-end":He,"margin-block-start":He,"margin-inline":He,"margin-inline-end":He,"margin-inline-start":He,padding:He,"padding-bottom":He,"padding-left":He,"padding-right":He,"padding-top":He,"padding-block":He,"padding-block-end":He,"padding-block-start":He,"padding-inline":He,"padding-inline-end":He,"padding-inline-start":He,"mask-position-x":He,"mask-position-y":He,"mask-size":He,height:He,width:He,"min-height":He,"max-height":He,"min-width":He,"max-width":He,bottom:He,left:He,top:He,right:He,inset:He,"inset-block":He,"inset-block-end":He,"inset-block-start":He,"inset-inline":He,"inset-inline-end":He,"inset-inline-start":He,"box-shadow":He,"text-shadow":He,"column-gap":He,"column-rule":He,"column-rule-width":He,"column-width":He,"font-size":He,"font-size-delta":He,"letter-spacing":He,"text-decoration-thickness":He,"text-indent":He,"text-stroke":He,"text-stroke-width":He,"word-spacing":He,motion:He,"motion-offset":He,outline:He,"outline-offset":He,"outline-width":He,perspective:He,"perspective-origin-x":ks,"perspective-origin-y":ks,"transform-origin":ks,"transform-origin-x":ks,"transform-origin-y":ks,"transform-origin-z":ks,"transition-delay":Ku,"transition-duration":Ku,"vertical-align":He,"flex-basis":He,"shape-margin":He,size:He,gap:He,grid:He,"grid-gap":He,"row-gap":He,"grid-row-gap":He,"grid-column-gap":He,"grid-template-rows":He,"grid-template-columns":He,"grid-auto-rows":He,"grid-auto-columns":He,"box-shadow-x":He,"box-shadow-y":He,"box-shadow-blur":He,"box-shadow-spread":He,"font-line-height":He,"text-shadow-x":He,"text-shadow-y":He,"text-shadow-blur":He};function fE(e){var i=/(-[a-z])/g,t=function(u){return u[1].toUpperCase()},n={};for(var o in e)n[o]=e[o],n[o.replace(i,t)]=e[o];return n}var Vz=fE(Wz);function Ja(e,i,t){if(i==null)return i;if(Array.isArray(i))for(var n=0;n<i.length;n++)i[n]=Ja(e,i[n],t);else if(typeof i=="object")if(e==="fallbacks")for(var o in i)i[o]=Ja(o,i[o],t);else for(var u in i)i[u]=Ja(e+"-"+u,i[u],t);else if(typeof i=="number"&&isNaN(i)===!1){var h=t[e]||Vz[e];return h&&!(i===0&&h===He)?typeof h=="function"?h(i).toString():""+i+h:i.toString()}return i}function Gz(e){e===void 0&&(e={});var i=fE(e);function t(o,u){if(u.type!=="style")return o;for(var h in o)o[h]=Ja(h,o[h],i);return o}function n(o,u){return Ja(u,o,i)}return{onProcessStyle:t,onChangeValue:n}}var qa="",Af="",mE="",gE="",qz=fl&&"ontouchstart"in document.documentElement;if(fl){var Rp={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},Zz=document.createElement("p"),Op=Zz.style,Xz="Transform";for(var Ap in Rp)if(Ap+Xz in Op){qa=Ap,Af=Rp[Ap];break}qa==="Webkit"&&"msHyphens"in Op&&(qa="ms",Af=Rp.ms,gE="edge"),qa==="Webkit"&&"-apple-trailing-word"in Op&&(mE="apple")}var Yt={js:qa,css:Af,vendor:mE,browser:gE,isTouch:qz};function Yz(e){return e[1]==="-"||Yt.js==="ms"?e:"@"+Yt.css+"keyframes"+e.substr(10)}var $z={noPrefill:["appearance"],supportedProperty:function(e){return e!=="appearance"?!1:Yt.js==="ms"?"-webkit-"+e:Yt.css+e}},Kz={noPrefill:["color-adjust"],supportedProperty:function(e){return e!=="color-adjust"?!1:Yt.js==="Webkit"?Yt.css+"print-"+e:e}},Qz=/[-\s]+(.)?/g;function Jz(e,i){return i?i.toUpperCase():""}function ym(e){return e.replace(Qz,Jz)}function Jr(e){return ym("-"+e)}var e6={noPrefill:["mask"],supportedProperty:function(e,i){if(!/^mask/.test(e))return!1;if(Yt.js==="Webkit"){var t="mask-image";if(ym(t)in i)return e;if(Yt.js+Jr(t)in i)return Yt.css+e}return e}},t6={noPrefill:["text-orientation"],supportedProperty:function(e){return e!=="text-orientation"?!1:Yt.vendor==="apple"&&!Yt.isTouch?Yt.css+e:e}},n6={noPrefill:["transform"],supportedProperty:function(e,i,t){return e!=="transform"?!1:t.transform?e:Yt.css+e}},i6={noPrefill:["transition"],supportedProperty:function(e,i,t){return e!=="transition"?!1:t.transition?e:Yt.css+e}},r6={noPrefill:["writing-mode"],supportedProperty:function(e){return e!=="writing-mode"?!1:Yt.js==="Webkit"||Yt.js==="ms"&&Yt.browser!=="edge"?Yt.css+e:e}},o6={noPrefill:["user-select"],supportedProperty:function(e){return e!=="user-select"?!1:Yt.js==="Moz"||Yt.js==="ms"||Yt.vendor==="apple"?Yt.css+e:e}},s6={supportedProperty:function(e,i){if(!/^break-/.test(e))return!1;if(Yt.js==="Webkit"){var t="WebkitColumn"+Jr(e);return t in i?Yt.css+"column-"+e:!1}if(Yt.js==="Moz"){var n="page"+Jr(e);return n in i?"page-"+e:!1}return!1}},a6={supportedProperty:function(e,i){if(!/^(border|margin|padding)-inline/.test(e))return!1;if(Yt.js==="Moz")return e;var t=e.replace("-inline","");return Yt.js+Jr(t)in i?Yt.css+t:!1}},l6={supportedProperty:function(e,i){return ym(e)in i?e:!1}},u6={supportedProperty:function(e,i){var t=Jr(e);return e[0]==="-"||e[0]==="-"&&e[1]==="-"?e:Yt.js+t in i?Yt.css+e:Yt.js!=="Webkit"&&"Webkit"+t in i?"-webkit-"+e:!1}},c6={supportedProperty:function(e){return e.substring(0,11)!=="scroll-snap"?!1:Yt.js==="ms"?""+Yt.css+e:e}},d6={supportedProperty:function(e){return e!=="overscroll-behavior"?!1:Yt.js==="ms"?Yt.css+"scroll-chaining":e}},h6={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},p6={supportedProperty:function(e,i){var t=h6[e];return t&&Yt.js+Jr(t)in i?Yt.css+t:!1}},vE={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},f6=Object.keys(vE),m6=function(e){return Yt.css+e},g6={supportedProperty:function(e,i,t){var n=t.multiple;if(f6.indexOf(e)>-1){var o=vE[e];if(!Array.isArray(o))return Yt.js+Jr(o)in i?Yt.css+o:!1;if(!n)return!1;for(var u=0;u<o.length;u++)if(!(Yt.js+Jr(o[0])in i))return!1;return o.map(m6)}return!1}},yE=[$z,Kz,e6,t6,n6,i6,r6,o6,s6,a6,l6,u6,c6,d6,p6,g6],mb=yE.filter(function(e){return e.supportedProperty}).map(function(e){return e.supportedProperty}),v6=yE.filter(function(e){return e.noPrefill}).reduce(function(e,i){return e.push.apply(e,hm(i.noPrefill)),e},[]),Za,Do={};if(fl){Za=document.createElement("p");var Dp=window.getComputedStyle(document.documentElement,"");for(var Ip in Dp)isNaN(Ip)||(Do[Dp[Ip]]=Dp[Ip]);v6.forEach(function(e){return delete Do[e]})}function Df(e,i){if(i===void 0&&(i={}),!Za)return e;if(Do[e]!=null)return Do[e];(e==="transition"||e==="transform")&&(i[e]=e in Za.style);for(var t=0;t<mb.length&&(Do[e]=mb[t](e,Za.style,i),!Do[e]);t++);try{Za.style[e]=""}catch{return!1}return Do[e]}var Rs={},y6={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},w6=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g,Yr;function b6(e,i,t){if(i==="var")return"var";if(i==="all")return"all";if(t==="all")return", all";var n=i?Df(i):", "+Df(t);return n||i||t}fl&&(Yr=document.createElement("p"));function gb(e,i){var t=i;if(!Yr||e==="content")return i;if(typeof t!="string"||!isNaN(parseInt(t,10)))return t;var n=e+t;if(Rs[n]!=null)return Rs[n];try{Yr.style[e]=t}catch{return Rs[n]=!1,!1}if(y6[e])t=t.replace(w6,b6);else if(Yr.style[e]===""&&(t=Yt.css+t,t==="-ms-flex"&&(Yr.style[e]="-ms-flexbox"),Yr.style[e]=t,Yr.style[e]===""))return Rs[n]=!1,!1;return Yr.style[e]="",Rs[n]=t,Rs[n]}function x6(){function e(o){if(o.type==="keyframes"){var u=o;u.at=Yz(u.at)}}function i(o){for(var u in o){var h=o[u];if(u==="fallbacks"&&Array.isArray(h)){o[u]=h.map(i);continue}var d=!1,p=Df(u);p&&p!==u&&(d=!0);var m=!1,v=gb(p,zo(h));v&&v!==h&&(m=!0),(d||m)&&(d&&delete o[u],o[p||u]=v||h)}return o}function t(o,u){return u.type!=="style"?o:i(o)}function n(o,u){return gb(u,zo(o))||o}return{onProcessRule:e,onProcessStyle:t,onChangeValue:n}}function S6(){var e=function(i,t){return i.length===t.length?i>t?1:-1:i.length-t.length};return{onProcessStyle:function(i,t){if(t.type!=="style")return i;for(var n={},o=Object.keys(i).sort(e),u=0;u<o.length;u++)n[o[u]]=i[o[u]];return n}}}function E6(){return{plugins:[Rz(),Lz(),jz(),Uz(),Gz(),typeof window>"u"?null:x6(),S6()]}}function wm(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=e.baseClasses,t=e.newClasses;if(e.Component,!t)return i;var n=De({},i);return Object.keys(t).forEach(function(o){t[o]&&(n[o]="".concat(i[o]," ").concat(t[o]))}),n}var Is={set:function(e,i,t,n){var o=e.get(i);o||(o=new Map,e.set(i,o)),o.set(t,n)},get:function(e,i,t){var n=e.get(i);return n?n.get(t):void 0},delete:function(e,i,t){var n=e.get(i);n.delete(t)}},wE=xt.createContext(null);function Uo(){var e=xt.useContext(wE);return e}var T6=uE(E6()),C6=W9(),P6=new Map,_6={disableGeneration:!1,generateClassName:C6,jss:T6,sheetsCache:null,sheetsManager:P6,sheetsRegistry:null},k6=xt.createContext(_6),vb=-1e9;function R6(){return vb+=1,vb}var O6={};function A6(e){var i=typeof e=="function";return{create:function(t,n){var o;try{o=i?e(t):e}catch(d){throw d}if(!n||!t.overrides||!t.overrides[n])return o;var u=t.overrides[n],h=De({},o);return Object.keys(u).forEach(function(d){h[d]=Bs(h[d],u[d])}),h},options:{}}}function D6(e,i,t){var n=e.state,o=e.stylesOptions;if(o.disableGeneration)return i||{};n.cacheClasses||(n.cacheClasses={value:null,lastProp:null,lastJSS:{}});var u=!1;return n.classes!==n.cacheClasses.lastJSS&&(n.cacheClasses.lastJSS=n.classes,u=!0),i!==n.cacheClasses.lastProp&&(n.cacheClasses.lastProp=i,u=!0),u&&(n.cacheClasses.value=wm({baseClasses:n.cacheClasses.lastJSS,newClasses:i,Component:t})),n.cacheClasses.value}function I6(e,i){var t=e.state,n=e.theme,o=e.stylesOptions,u=e.stylesCreator,h=e.name;if(!o.disableGeneration){var d=Is.get(o.sheetsManager,u,n);d||(d={refs:0,staticSheet:null,dynamicStyles:null},Is.set(o.sheetsManager,u,n,d));var p=De({},u.options,o,{theme:n,flip:typeof o.flip=="boolean"?o.flip:n.direction==="rtl"});p.generateId=p.serverGenerateClassName||p.generateClassName;var m=o.sheetsRegistry;if(d.refs===0){var v;o.sheetsCache&&(v=Is.get(o.sheetsCache,u,n));var x=u.create(n,h);v||(v=o.jss.createStyleSheet(x,De({link:!1},p)),v.attach(),o.sheetsCache&&Is.set(o.sheetsCache,u,n,v)),m&&m.add(v),d.staticSheet=v,d.dynamicStyles=cE(x)}if(d.dynamicStyles){var E=o.jss.createStyleSheet(d.dynamicStyles,De({link:!0},p));E.update(i),E.attach(),t.dynamicSheet=E,t.classes=wm({baseClasses:d.staticSheet.classes,newClasses:E.classes}),m&&m.add(E)}else t.classes=d.staticSheet.classes;d.refs+=1}}function M6(e,i){var t=e.state;t.dynamicSheet&&t.dynamicSheet.update(i)}function L6(e){var i=e.state,t=e.theme,n=e.stylesOptions,o=e.stylesCreator;if(!n.disableGeneration){var u=Is.get(n.sheetsManager,o,t);u.refs-=1;var h=n.sheetsRegistry;u.refs===0&&(Is.delete(n.sheetsManager,o,t),n.jss.removeStyleSheet(u.staticSheet),h&&h.remove(u.staticSheet)),i.dynamicSheet&&(n.jss.removeStyleSheet(i.dynamicSheet),h&&h.remove(i.dynamicSheet))}}function N6(e,i){var t=xt.useRef([]),n,o=xt.useMemo(function(){return{}},i);t.current!==o&&(t.current=o,n=e()),xt.useEffect(function(){return function(){n&&n()}},[o])}function z6(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=i.name,n=i.classNamePrefix,o=i.Component,u=i.defaultTheme,h=u===void 0?O6:u,d=Qt(i,["name","classNamePrefix","Component","defaultTheme"]),p=A6(e),m=t||n||"makeStyles";p.options={index:R6(),name:t,meta:m,classNamePrefix:m};var v=function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},E=Uo()||h,C=De({},xt.useContext(k6),d),O=xt.useRef(),_=xt.useRef();N6(function(){var I={name:t,state:{},stylesCreator:p,stylesOptions:C,theme:E};return I6(I,x),_.current=!1,O.current=I,function(){L6(I)}},[E,p]),xt.useEffect(function(){_.current&&M6(O.current,x),_.current=!0});var k=D6(O.current,x.classes,o);return k};return v}function j6(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}function bE(e){var i,t,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e))for(i=0;i<e.length;i++)e[i]&&(t=bE(e[i]))&&(n&&(n+=" "),n+=t);else for(i in e)e[i]&&(n&&(n+=" "),n+=i);return n}function Tn(){for(var e,i,t=0,n="";t<arguments.length;)(e=arguments[t++])&&(i=bE(e))&&(n&&(n+=" "),n+=i);return n}var xE={exports:{}},mn={},yb;function H6(){if(yb)return mn;yb=1;/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e=typeof Symbol=="function"&&Symbol.for,i=e?Symbol.for("react.element"):60103,t=e?Symbol.for("react.portal"):60106,n=e?Symbol.for("react.fragment"):60107,o=e?Symbol.for("react.strict_mode"):60108,u=e?Symbol.for("react.profiler"):60114,h=e?Symbol.for("react.provider"):60109,d=e?Symbol.for("react.context"):60110,p=e?Symbol.for("react.async_mode"):60111,m=e?Symbol.for("react.concurrent_mode"):60111,v=e?Symbol.for("react.forward_ref"):60112,x=e?Symbol.for("react.suspense"):60113,E=e?Symbol.for("react.suspense_list"):60120,C=e?Symbol.for("react.memo"):60115,O=e?Symbol.for("react.lazy"):60116,_=e?Symbol.for("react.block"):60121,k=e?Symbol.for("react.fundamental"):60117,I=e?Symbol.for("react.responder"):60118,G=e?Symbol.for("react.scope"):60119;function Z(te){if(typeof te=="object"&&te!==null){var Q=te.$$typeof;switch(Q){case i:switch(te=te.type,te){case p:case m:case n:case u:case o:case x:return te;default:switch(te=te&&te.$$typeof,te){case d:case v:case O:case C:case h:return te;default:return Q}}case t:return Q}}}function ae(te){return Z(te)===m}return mn.AsyncMode=p,mn.ConcurrentMode=m,mn.ContextConsumer=d,mn.ContextProvider=h,mn.Element=i,mn.ForwardRef=v,mn.Fragment=n,mn.Lazy=O,mn.Memo=C,mn.Portal=t,mn.Profiler=u,mn.StrictMode=o,mn.Suspense=x,mn.isAsyncMode=function(te){return ae(te)||Z(te)===p},mn.isConcurrentMode=ae,mn.isContextConsumer=function(te){return Z(te)===d},mn.isContextProvider=function(te){return Z(te)===h},mn.isElement=function(te){return typeof te=="object"&&te!==null&&te.$$typeof===i},mn.isForwardRef=function(te){return Z(te)===v},mn.isFragment=function(te){return Z(te)===n},mn.isLazy=function(te){return Z(te)===O},mn.isMemo=function(te){return Z(te)===C},mn.isPortal=function(te){return Z(te)===t},mn.isProfiler=function(te){return Z(te)===u},mn.isStrictMode=function(te){return Z(te)===o},mn.isSuspense=function(te){return Z(te)===x},mn.isValidElementType=function(te){return typeof te=="string"||typeof te=="function"||te===n||te===m||te===u||te===o||te===x||te===E||typeof te=="object"&&te!==null&&(te.$$typeof===O||te.$$typeof===C||te.$$typeof===h||te.$$typeof===d||te.$$typeof===v||te.$$typeof===k||te.$$typeof===I||te.$$typeof===G||te.$$typeof===_)},mn.typeOf=Z,mn}xE.exports=H6();var F6=xE.exports,bm=F6,B6={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},U6={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},W6={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},SE={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},xm={};xm[bm.ForwardRef]=W6;xm[bm.Memo]=SE;function wb(e){return bm.isMemo(e)?SE:xm[e.$$typeof]||B6}var V6=Object.defineProperty,G6=Object.getOwnPropertyNames,bb=Object.getOwnPropertySymbols,q6=Object.getOwnPropertyDescriptor,Z6=Object.getPrototypeOf,xb=Object.prototype;function EE(e,i,t){if(typeof i!="string"){if(xb){var n=Z6(i);n&&n!==xb&&EE(e,n,t)}var o=G6(i);bb&&(o=o.concat(bb(i)));for(var u=wb(e),h=wb(i),d=0;d<o.length;++d){var p=o[d];if(!U6[p]&&!(t&&t[p])&&!(h&&h[p])&&!(u&&u[p])){var m=q6(i,p);try{V6(e,p,m)}catch{}}}}return e}var X6=EE;const vc=gr(X6);function Y6(e,i){if(typeof i=="function"){var t=i(e);return t}return De({},e,i)}function $6(e){var i=e.children,t=e.theme,n=Uo(),o=xt.useMemo(function(){var u=n===null?t:Y6(n,t);return u!=null&&(u[rE]=n!==null),u},[t,n]);return xt.createElement(wE.Provider,{value:o},i)}var K6=function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function(t){var n=i.defaultTheme,o=i.withTheme,u=o===void 0?!1:o,h=i.name,d=Qt(i,["defaultTheme","withTheme","name"]),p=h,m=z6(e,De({defaultTheme:n,Component:t,name:h||t.displayName,classNamePrefix:p},d)),v=xt.forwardRef(function(x,E){x.classes;var C=x.innerRef,O=Qt(x,["classes","innerRef"]),_=m(De({},t.defaultProps,x)),k,I=O;return(typeof h=="string"||u)&&(k=Uo()||n,h&&(I=kc({theme:k,name:h,props:O})),u&&!I.theme&&(I.theme=k)),xt.createElement(t,De({ref:C||E,classes:_},I))});return vc(v,t),v}},TE=iE();function ml(){var e=Uo()||TE;return e}function ei(e,i){return K6(e,De({defaultTheme:TE},i))}function Q6(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=Uo(),n=kc({theme:t,name:"MuiUseMediaQuery",props:{}}),o=typeof e=="function"?e(t):e;o=o.replace(/^@media( ?)/m,"");var u=typeof window<"u"&&typeof window.matchMedia<"u",h=De({},n,i),d=h.defaultMatches,p=d===void 0?!1:d,m=h.matchMedia,v=m===void 0?u?window.matchMedia:null:m,x=h.noSsr,E=x===void 0?!1:x,C=h.ssrMatchMedia,O=C===void 0?null:C,_=B.useState(function(){return E&&u?v(o).matches:O?O(o).matches:p}),k=_[0],I=_[1];return B.useEffect(function(){var G=!0;if(u){var Z=v(o),ae=function(){G&&I(Z.matches)};return ae(),Z.addListener(ae),function(){G=!1,Z.removeListener(ae)}}},[o,v,u]),k}var J6=function(e,i){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return t?qi.indexOf(e)<=qi.indexOf(i):qi.indexOf(e)<qi.indexOf(i)},ej=typeof window>"u"?B.useEffect:B.useLayoutEffect,CE=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return function(i){var t=e.withTheme,n=t===void 0?!1:t,o=e.noSSR,u=o===void 0?!1:o,h=e.initialWidth;function d(p){var m=ml(),v=p.theme||m,x=kc({theme:v,name:"MuiWithWidth",props:De({},p)}),E=x.initialWidth,C=x.width,O=Qt(x,["initialWidth","width"]),_=B.useState(!1),k=_[0],I=_[1];ej(function(){I(!0)},[]);var G=v.breakpoints.keys.slice().reverse(),Z=G.reduce(function(te,Q){var le=Q6(v.breakpoints.up(Q));return!te&&le?Q:te},null),ae=De({width:C||(k||u?Z:void 0)||E||h},n?{theme:v}:{},O);return ae.width===void 0?null:B.createElement(i,ae)}return vc(d,i),d}},Ms;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ms||(Ms={}));var Sb=function(e){return e},Eb="beforeunload",tj="popstate";function nj(e){e===void 0&&(e={});var i=e,t=i.window,n=t===void 0?document.defaultView:t,o=n.history;function u(){var le=n.location,ce=le.pathname,me=le.search,Pe=le.hash,be=o.state||{};return[be.idx,Sb({pathname:ce,search:me,hash:Pe,state:be.usr||null,key:be.key||"default"})]}var h=null;function d(){if(h)C.call(h),h=null;else{var le=Ms.Pop,ce=u(),me=ce[0],Pe=ce[1];if(C.length){if(me!=null){var be=v-me;be&&(h={action:le,location:Pe,retry:function(){te(be*-1)}},te(be))}}else G(le)}}n.addEventListener(tj,d);var p=Ms.Pop,m=u(),v=m[0],x=m[1],E=Cb(),C=Cb();v==null&&(v=0,o.replaceState(De({},o.state,{idx:v}),""));function O(le){return typeof le=="string"?le:rj(le)}function _(le,ce){return ce===void 0&&(ce=null),Sb(De({pathname:x.pathname,hash:"",search:""},typeof le=="string"?oj(le):le,{state:ce,key:ij()}))}function k(le,ce){return[{usr:le.state,key:le.key,idx:ce},O(le)]}function I(le,ce,me){return!C.length||(C.call({action:le,location:ce,retry:me}),!1)}function G(le){p=le;var ce=u();v=ce[0],x=ce[1],E.call({action:p,location:x})}function Z(le,ce){var me=Ms.Push,Pe=_(le,ce);function be(){Z(le,ce)}if(I(me,Pe,be)){var fe=k(Pe,v+1),ve=fe[0],Fe=fe[1];try{o.pushState(ve,"",Fe)}catch{n.location.assign(Fe)}G(me)}}function ae(le,ce){var me=Ms.Replace,Pe=_(le,ce);function be(){ae(le,ce)}if(I(me,Pe,be)){var fe=k(Pe,v),ve=fe[0],Fe=fe[1];o.replaceState(ve,"",Fe),G(me)}}function te(le){o.go(le)}var Q={get action(){return p},get location(){return x},createHref:O,push:Z,replace:ae,go:te,back:function(){te(-1)},forward:function(){te(1)},listen:function(le){return E.push(le)},block:function(le){var ce=C.push(le);return C.length===1&&n.addEventListener(Eb,Tb),function(){ce(),C.length||n.removeEventListener(Eb,Tb)}}};return Q}function Tb(e){e.preventDefault(),e.returnValue=""}function Cb(){var e=[];return{get length(){return e.length},push:function(i){return e.push(i),function(){e=e.filter(function(t){return t!==i})}},call:function(i){e.forEach(function(t){return t&&t(i)})}}}function ij(){return Math.random().toString(36).substr(2,8)}function rj(e){var i=e.pathname,t=i===void 0?"/":i,n=e.search,o=n===void 0?"":n,u=e.hash,h=u===void 0?"":u;return o&&o!=="?"&&(t+=o.charAt(0)==="?"?o:"?"+o),h&&h!=="#"&&(t+=h.charAt(0)==="#"?h:"#"+h),t}function oj(e){var i={};if(e){var t=e.indexOf("#");t>=0&&(i.hash=e.substr(t),e=e.substr(0,t));var n=e.indexOf("?");n>=0&&(i.search=e.substr(n),e=e.substr(0,n)),e&&(i.pathname=e)}return i}var PE={exports:{}},Mp={},Pb;function sj(){if(Pb)return Mp;Pb=1;/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e=xt;function i(x,E){return x===E&&(x!==0||1/x===1/E)||x!==x&&E!==E}var t=typeof Object.is=="function"?Object.is:i,n=e.useState,o=e.useEffect,u=e.useLayoutEffect,h=e.useDebugValue;function d(x,E){var C=E(),O=n({inst:{value:C,getSnapshot:E}}),_=O[0].inst,k=O[1];return u(function(){_.value=C,_.getSnapshot=E,p(_)&&k({inst:_})},[x,C,E]),o(function(){return p(_)&&k({inst:_}),x(function(){p(_)&&k({inst:_})})},[x]),h(C),C}function p(x){var E=x.getSnapshot;x=x.value;try{var C=E();return!t(x,C)}catch{return!0}}function m(x,E){return E()}var v=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:d;return Mp.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:v,Mp}PE.exports=sj();var _E=PE.exports,Lp={},_b;function aj(){if(_b)return Lp;_b=1;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e=xt,i=_E;function t(m,v){return m===v&&(m!==0||1/m===1/v)||m!==m&&v!==v}var n=typeof Object.is=="function"?Object.is:t,o=i.useSyncExternalStore,u=e.useRef,h=e.useEffect,d=e.useMemo,p=e.useDebugValue;return Lp.useSyncExternalStoreWithSelector=function(m,v,x,E,C){var O=u(null);if(O.current===null){var _={hasValue:!1,value:null};O.current=_}else _=O.current;O=d(function(){function I(Q){if(!G){if(G=!0,Z=Q,Q=E(Q),C!==void 0&&_.hasValue){var le=_.value;if(C(le,Q))return ae=le}return ae=Q}if(le=ae,n(Z,Q))return le;var ce=E(Q);return C!==void 0&&C(le,ce)?le:(Z=Q,ae=ce)}var G=!1,Z,ae,te=x===void 0?null:x;return[function(){return I(v())},te===null?void 0:function(){return I(te())}]},[v,x,E,C]);var k=o(m,O[0],O[1]);return h(function(){_.hasValue=!0,_.value=k},[k]),p(k),k},Lp}aj();function lj(e){e()}let kE=lj;const uj=e=>kE=e,cj=()=>kE,RE=B.createContext(null),dj=()=>{throw new Error("uSES not initialized!")};var OE={exports:{}},gn={},kb;function hj(){if(kb)return gn;kb=1;/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e=Symbol.for("react.element"),i=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),h=Symbol.for("react.context"),d=Symbol.for("react.server_context"),p=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),v=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),C=Symbol.for("react.offscreen"),O;O=Symbol.for("react.module.reference");function _(k){if(typeof k=="object"&&k!==null){var I=k.$$typeof;switch(I){case e:switch(k=k.type,k){case t:case o:case n:case m:case v:return k;default:switch(k=k&&k.$$typeof,k){case d:case h:case p:case E:case x:case u:return k;default:return I}}case i:return I}}}return gn.ContextConsumer=h,gn.ContextProvider=u,gn.Element=e,gn.ForwardRef=p,gn.Fragment=t,gn.Lazy=E,gn.Memo=x,gn.Portal=i,gn.Profiler=o,gn.StrictMode=n,gn.Suspense=m,gn.SuspenseList=v,gn.isAsyncMode=function(){return!1},gn.isConcurrentMode=function(){return!1},gn.isContextConsumer=function(k){return _(k)===h},gn.isContextProvider=function(k){return _(k)===u},gn.isElement=function(k){return typeof k=="object"&&k!==null&&k.$$typeof===e},gn.isForwardRef=function(k){return _(k)===p},gn.isFragment=function(k){return _(k)===t},gn.isLazy=function(k){return _(k)===E},gn.isMemo=function(k){return _(k)===x},gn.isPortal=function(k){return _(k)===i},gn.isProfiler=function(k){return _(k)===o},gn.isStrictMode=function(k){return _(k)===n},gn.isSuspense=function(k){return _(k)===m},gn.isSuspenseList=function(k){return _(k)===v},gn.isValidElementType=function(k){return typeof k=="string"||typeof k=="function"||k===t||k===o||k===n||k===m||k===v||k===C||typeof k=="object"&&k!==null&&(k.$$typeof===E||k.$$typeof===x||k.$$typeof===u||k.$$typeof===h||k.$$typeof===p||k.$$typeof===O||k.getModuleId!==void 0)},gn.typeOf=_,gn}OE.exports=hj();var pj=OE.exports;const fj=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function mj(e,i,t,n,{areStatesEqual:o,areOwnPropsEqual:u,areStatePropsEqual:h}){let d=!1,p,m,v,x,E;function C(G,Z){return p=G,m=Z,v=e(p,m),x=i(n,m),E=t(v,x,m),d=!0,E}function O(){return v=e(p,m),i.dependsOnOwnProps&&(x=i(n,m)),E=t(v,x,m),E}function _(){return e.dependsOnOwnProps&&(v=e(p,m)),i.dependsOnOwnProps&&(x=i(n,m)),E=t(v,x,m),E}function k(){const G=e(p,m),Z=!h(G,v);return v=G,Z&&(E=t(v,x,m)),E}function I(G,Z){const ae=!u(Z,m),te=!o(G,p,Z,m);return p=G,m=Z,ae&&te?O():ae?_():te?k():E}return function(G,Z){return d?I(G,Z):C(G,Z)}}function gj(e,i){let{initMapStateToProps:t,initMapDispatchToProps:n,initMergeProps:o}=i,u=Bo(i,fj);const h=t(e,u),d=n(e,u),p=o(e,u);return mj(h,d,p,e,u)}function AE(e){return function(i){const t=e(i);function n(){return t}return n.dependsOnOwnProps=!1,n}}function Rb(e){return e.dependsOnOwnProps?!!e.dependsOnOwnProps:e.length!==1}function vj(e,i){return function(t,{displayName:n}){const o=function(u,h){return o.dependsOnOwnProps?o.mapToProps(u,h):o.mapToProps(u,void 0)};return o.dependsOnOwnProps=!0,o.mapToProps=function(u,h){o.mapToProps=e,o.dependsOnOwnProps=Rb(e);let d=o(u,h);return typeof d=="function"&&(o.mapToProps=d,o.dependsOnOwnProps=Rb(d),d=o(u,h)),d},o}}function yj(e,i){return(t,n)=>{throw new Error(`Invalid value of type ${typeof e} for ${i} argument when connecting component ${n.wrappedComponentName}.`)}}function wj(e){return AE(i=>({dispatch:i}))}function bj(e){return e?typeof e=="function"?vj(e):yj(e,"mapStateToProps"):AE(()=>({}))}function xj(e,i,t){return De({},t,e,i)}function Sj(e){return()=>xj}function Ej(){const e=cj();let i=null,t=null;return{clear(){i=null,t=null},notify(){e(()=>{let n=i;for(;n;)n.callback(),n=n.next})},get(){let n=[],o=i;for(;o;)n.push(o),o=o.next;return n},subscribe(n){let o=!0,u=t={callback:n,next:null,prev:t};return u.prev?u.prev.next=u:i=u,function(){!o||i===null||(o=!1,u.next?u.next.prev=u.prev:t=u.prev,u.prev?u.prev.next=u.next:i=u.next)}}}}const Ob={notify(){},get:()=>[]};function DE(e,i){let t,n=Ob;function o(x){return p(),n.subscribe(x)}function u(){n.notify()}function h(){v.onStateChange&&v.onStateChange()}function d(){return!!t}function p(){t||(t=i?i.addNestedSub(h):e.subscribe(h),n=Ej())}function m(){t&&(t(),t=void 0,n.clear(),n=Ob)}const v={addNestedSub:o,notifyNestedSubs:u,handleChangeWrapper:h,isSubscribed:d,trySubscribe:p,tryUnsubscribe:m,getListeners:()=>n};return v}const Tj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",yc=Tj?B.useLayoutEffect:B.useEffect;function Ab(e,i){return e===i?e!==0||i!==0||1/e===1/i:e!==e&&i!==i}function Np(e,i){if(Ab(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;const t=Object.keys(e),n=Object.keys(i);if(t.length!==n.length)return!1;for(let o=0;o<t.length;o++)if(!Object.prototype.hasOwnProperty.call(i,t[o])||!Ab(e[t[o]],i[t[o]]))return!1;return!0}const Cj=["reactReduxForwardedRef"];let IE=dj;const Pj=e=>{IE=e},_j=[null,null];function kj(e,i,t){yc(()=>e(...i),t)}function Rj(e,i,t,n,o,u){e.current=n,t.current=!1,o.current&&(o.current=null,u())}function Oj(e,i,t,n,o,u,h,d,p,m,v){if(!e)return()=>{};let x=!1,E=null;const C=()=>{if(x||!d.current)return;const O=i.getState();let _,k;try{_=n(O,o.current)}catch(I){k=I,E=I}k||(E=null),_===u.current?h.current||m():(u.current=_,p.current=_,h.current=!0,v())};return t.onStateChange=C,t.trySubscribe(),C(),()=>{if(x=!0,t.tryUnsubscribe(),t.onStateChange=null,E)throw E}}function Aj(e,i){return e===i}function Yi(e,i,t,{pure:n,areStatesEqual:o=Aj,areOwnPropsEqual:u=Np,areStatePropsEqual:h=Np,areMergedPropsEqual:d=Np,forwardRef:p=!1,context:m=RE}={}){const v=m,x=bj(e),E=wj(),C=Sj(),O=!!e;return _=>{const k=_.displayName||_.name||"Component",I=`Connect(${k})`,G={shouldHandleStateChanges:O,displayName:I,wrappedComponentName:k,WrappedComponent:_,initMapStateToProps:x,initMapDispatchToProps:E,initMergeProps:C,areStatesEqual:o,areStatePropsEqual:h,areOwnPropsEqual:u,areMergedPropsEqual:d};function Z(te){const[Q,le,ce]=B.useMemo(()=>{const{reactReduxForwardedRef:At}=te,at=Bo(te,Cj);return[te.context,At,at]},[te]),me=B.useMemo(()=>Q&&Q.Consumer&&pj.isContextConsumer(xt.createElement(Q.Consumer,null))?Q:v,[Q,v]),Pe=B.useContext(me),be=!!te.store&&!!te.store.getState&&!!te.store.dispatch,fe=!!Pe&&!!Pe.store,ve=be?te.store:Pe.store,Fe=fe?Pe.getServerState:ve.getState,Ge=B.useMemo(()=>gj(ve.dispatch,G),[ve]),[Te,ye]=B.useMemo(()=>{if(!O)return _j;const At=DE(ve,be?void 0:Pe.subscription),at=At.notifyNestedSubs.bind(At);return[At,at]},[ve,be,Pe]),ke=B.useMemo(()=>be?Pe:De({},Pe,{subscription:Te}),[be,Pe,Te]),_e=B.useRef(),$=B.useRef(ce),Le=B.useRef(),st=B.useRef(!1);B.useRef(!1);const J=B.useRef(!1),Et=B.useRef();yc(()=>(J.current=!0,()=>{J.current=!1}),[]);const yt=B.useMemo(()=>()=>Le.current&&ce===$.current?Le.current:Ge(ve.getState(),ce),[ve,ce]),mt=B.useMemo(()=>At=>Te?Oj(O,ve,Te,Ge,$,_e,st,J,Le,ye,At):()=>{},[Te]);kj(Rj,[$,_e,st,ce,Le,ye]);let Tt;try{Tt=IE(mt,yt,Fe?()=>Ge(Fe(),ce):yt)}catch(At){throw Et.current&&(At.message+=`
The error may be correlated with this previous error:
${Et.current.stack}

`),At}yc(()=>{Et.current=void 0,Le.current=void 0,_e.current=Tt});const Bt=B.useMemo(()=>xt.createElement(_,De({},Tt,{ref:le})),[le,_,Tt]);return B.useMemo(()=>O?xt.createElement(me.Provider,{value:ke},Bt):Bt,[me,Bt,ke])}const ae=xt.memo(Z);if(ae.WrappedComponent=_,ae.displayName=Z.displayName=I,p){const te=xt.forwardRef(function(Q,le){return xt.createElement(ae,De({},Q,{reactReduxForwardedRef:le}))});return te.displayName=I,te.WrappedComponent=_,vc(te,_)}return vc(ae,_)}}function Dj({store:e,context:i,children:t,serverState:n}){const o=B.useMemo(()=>{const d=DE(e);return{store:e,subscription:d,getServerState:n?()=>n:void 0}},[e,n]),u=B.useMemo(()=>e.getState(),[e]);yc(()=>{const{subscription:d}=o;return d.onStateChange=d.notifyNestedSubs,d.trySubscribe(),u!==e.getState()&&d.notifyNestedSubs(),()=>{d.tryUnsubscribe(),d.onStateChange=void 0}},[o,u]);const h=i||RE;return xt.createElement(h.Provider,{value:o},t)}Pj(_E.useSyncExternalStore);uj(rr.unstable_batchedUpdates);/**
 * @remix-run/router v1.6.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cl(){return cl=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var t=arguments[i];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},cl.apply(this,arguments)}var $r;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})($r||($r={}));const Db="popstate";function Ij(e){e===void 0&&(e={});function i(o,u){let{pathname:h="/",search:d="",hash:p=""}=Wo(o.location.hash.substr(1));return If("",{pathname:h,search:d,hash:p},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function t(o,u){let h=o.document.querySelector("base"),d="";if(h&&h.getAttribute("href")){let p=o.location.href,m=p.indexOf("#");d=m===-1?p:p.slice(0,m)}return d+"#"+(typeof u=="string"?u:ME(u))}function n(o,u){Ac(o.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(u)+")")}return Lj(i,t,n,e)}function Wn(e,i){if(e===!1||e===null||typeof e>"u")throw new Error(i)}function Ac(e,i){if(!e){typeof console<"u"&&console.warn(i);try{throw new Error(i)}catch{}}}function Mj(){return Math.random().toString(36).substr(2,8)}function Ib(e,i){return{usr:e.state,key:e.key,idx:i}}function If(e,i,t,n){return t===void 0&&(t=null),cl({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof i=="string"?Wo(i):i,{state:t,key:i&&i.key||n||Mj()})}function ME(e){let{pathname:i="/",search:t="",hash:n=""}=e;return t&&t!=="?"&&(i+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(i+=n.charAt(0)==="#"?n:"#"+n),i}function Wo(e){let i={};if(e){let t=e.indexOf("#");t>=0&&(i.hash=e.substr(t),e=e.substr(0,t));let n=e.indexOf("?");n>=0&&(i.search=e.substr(n),e=e.substr(0,n)),e&&(i.pathname=e)}return i}function Lj(e,i,t,n){n===void 0&&(n={});let{window:o=document.defaultView,v5Compat:u=!1}=n,h=o.history,d=$r.Pop,p=null,m=v();m==null&&(m=0,h.replaceState(cl({},h.state,{idx:m}),""));function v(){return(h.state||{idx:null}).idx}function x(){d=$r.Pop;let k=v(),I=k==null?null:k-m;m=k,p&&p({action:d,location:_.location,delta:I})}function E(k,I){d=$r.Push;let G=If(_.location,k,I);t&&t(G,k),m=v()+1;let Z=Ib(G,m),ae=_.createHref(G);try{h.pushState(Z,"",ae)}catch{o.location.assign(ae)}u&&p&&p({action:d,location:_.location,delta:1})}function C(k,I){d=$r.Replace;let G=If(_.location,k,I);t&&t(G,k),m=v();let Z=Ib(G,m),ae=_.createHref(G);h.replaceState(Z,"",ae),u&&p&&p({action:d,location:_.location,delta:0})}function O(k){let I=o.location.origin!=="null"?o.location.origin:o.location.href,G=typeof k=="string"?k:ME(k);return Wn(I,"No window.location.(origin|href) available to create URL for href: "+G),new URL(G,I)}let _={get action(){return d},get location(){return e(o,h)},listen(k){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(Db,x),p=k,()=>{o.removeEventListener(Db,x),p=null}},createHref(k){return i(o,k)},createURL:O,encodeLocation(k){let I=O(k);return{pathname:I.pathname,search:I.search,hash:I.hash}},push:E,replace:C,go(k){return h.go(k)}};return _}var Mb;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Mb||(Mb={}));function Nj(e,i,t){t===void 0&&(t="/");let n=typeof i=="string"?Wo(i):i,o=zE(n.pathname||"/",t);if(o==null)return null;let u=LE(e);zj(u);let h=null;for(let d=0;h==null&&d<u.length;++d)h=qj(u[d],Yj(o));return h}function LE(e,i,t,n){i===void 0&&(i=[]),t===void 0&&(t=[]),n===void 0&&(n="");let o=(u,h,d)=>{let p={relativePath:d===void 0?u.path||"":d,caseSensitive:u.caseSensitive===!0,childrenIndex:h,route:u};p.relativePath.startsWith("/")&&(Wn(p.relativePath.startsWith(n),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(n.length));let m=jo([n,p.relativePath]),v=t.concat(p);u.children&&u.children.length>0&&(Wn(u.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),LE(u.children,i,v,m)),!(u.path==null&&!u.index)&&i.push({path:m,score:Vj(m,u.index),routesMeta:v})};return e.forEach((u,h)=>{var d;if(u.path===""||!((d=u.path)!=null&&d.includes("?")))o(u,h);else for(let p of NE(u.path))o(u,h,p)}),i}function NE(e){let i=e.split("/");if(i.length===0)return[];let[t,...n]=i,o=t.endsWith("?"),u=t.replace(/\?$/,"");if(n.length===0)return o?[u,""]:[u];let h=NE(n.join("/")),d=[];return d.push(...h.map(p=>p===""?u:[u,p].join("/"))),o&&d.push(...h),d.map(p=>e.startsWith("/")&&p===""?"/":p)}function zj(e){e.sort((i,t)=>i.score!==t.score?t.score-i.score:Gj(i.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}const jj=/^:\w+$/,Hj=3,Fj=2,Bj=1,Uj=10,Wj=-2,Lb=e=>e==="*";function Vj(e,i){let t=e.split("/"),n=t.length;return t.some(Lb)&&(n+=Wj),i&&(n+=Fj),t.filter(o=>!Lb(o)).reduce((o,u)=>o+(jj.test(u)?Hj:u===""?Bj:Uj),n)}function Gj(e,i){return e.length===i.length&&e.slice(0,-1).every((t,n)=>t===i[n])?e[e.length-1]-i[i.length-1]:0}function qj(e,i){let{routesMeta:t}=e,n={},o="/",u=[];for(let h=0;h<t.length;++h){let d=t[h],p=h===t.length-1,m=o==="/"?i:i.slice(o.length)||"/",v=Zj({path:d.relativePath,caseSensitive:d.caseSensitive,end:p},m);if(!v)return null;Object.assign(n,v.params);let x=d.route;u.push({params:n,pathname:jo([o,v.pathname]),pathnameBase:Jj(jo([o,v.pathnameBase])),route:x}),v.pathnameBase!=="/"&&(o=jo([o,v.pathnameBase]))}return u}function Zj(e,i){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[t,n]=Xj(e.path,e.caseSensitive,e.end),o=i.match(t);if(!o)return null;let u=o[0],h=u.replace(/(.)\/+$/,"$1"),d=o.slice(1);return{params:n.reduce((p,m,v)=>{if(m==="*"){let x=d[v]||"";h=u.slice(0,u.length-x.length).replace(/(.)\/+$/,"$1")}return p[m]=$j(d[v]||"",m),p},{}),pathname:u,pathnameBase:h,pattern:e}}function Xj(e,i,t){i===void 0&&(i=!1),t===void 0&&(t=!0),Ac(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(u,h)=>(n.push(h),"/([^\\/]+)"));return e.endsWith("*")?(n.push("*"),o+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":e!==""&&e!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,i?void 0:"i"),n]}function Yj(e){try{return decodeURI(e)}catch(i){return Ac(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+i+").")),e}}function $j(e,i){try{return decodeURIComponent(e)}catch(t){return Ac(!1,'The value for the URL param "'+i+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+t+").")),e}}function zE(e,i){if(i==="/")return e;if(!e.toLowerCase().startsWith(i.toLowerCase()))return null;let t=i.endsWith("/")?i.length-1:i.length,n=e.charAt(t);return n&&n!=="/"?null:e.slice(t)||"/"}function Kj(e,i){i===void 0&&(i="/");let{pathname:t,search:n="",hash:o=""}=typeof e=="string"?Wo(e):e;return{pathname:t?t.startsWith("/")?t:Qj(t,i):i,search:eH(n),hash:tH(o)}}function Qj(e,i){let t=i.replace(/\/+$/,"").split("/");return e.split("/").forEach(n=>{n===".."?t.length>1&&t.pop():n!=="."&&t.push(n)}),t.length>1?t.join("/"):"/"}function zp(e,i,t,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+i+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function jE(e){return e.filter((i,t)=>t===0||i.route.path&&i.route.path.length>0)}function HE(e,i,t,n){n===void 0&&(n=!1);let o;typeof e=="string"?o=Wo(e):(o=cl({},e),Wn(!o.pathname||!o.pathname.includes("?"),zp("?","pathname","search",o)),Wn(!o.pathname||!o.pathname.includes("#"),zp("#","pathname","hash",o)),Wn(!o.search||!o.search.includes("#"),zp("#","search","hash",o)));let u=e===""||o.pathname==="",h=u?"/":o.pathname,d;if(n||h==null)d=t;else{let x=i.length-1;if(h.startsWith("..")){let E=h.split("/");for(;E[0]==="..";)E.shift(),x-=1;o.pathname=E.join("/")}d=x>=0?i[x]:"/"}let p=Kj(o,d),m=h&&h!=="/"&&h.endsWith("/"),v=(u||h===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(m||v)&&(p.pathname+="/"),p}const jo=e=>e.join("/").replace(/\/\/+/g,"/"),Jj=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),eH=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,tH=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function nH(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const FE=["post","put","patch","delete"];new Set(FE);const iH=["get",...FE];new Set(iH);/**
 * React Router v6.11.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wc(){return wc=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var t=arguments[i];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},wc.apply(this,arguments)}const BE=B.createContext(null),rH=B.createContext(null),Dc=B.createContext(null),Ic=B.createContext(null),to=B.createContext({outlet:null,matches:[],isDataRoute:!1}),UE=B.createContext(null);function gl(){return B.useContext(Ic)!=null}function no(){return gl()||Wn(!1),B.useContext(Ic).location}function WE(e){B.useContext(Dc).static||B.useLayoutEffect(e)}function vl(){let{isDataRoute:e}=B.useContext(to);return e?yH():oH()}function oH(){gl()||Wn(!1);let{basename:e,navigator:i}=B.useContext(Dc),{matches:t}=B.useContext(to),{pathname:n}=no(),o=JSON.stringify(jE(t).map(h=>h.pathnameBase)),u=B.useRef(!1);return WE(()=>{u.current=!0}),B.useCallback(function(h,d){if(d===void 0&&(d={}),!u.current)return;if(typeof h=="number"){i.go(h);return}let p=HE(h,JSON.parse(o),n,d.relative==="path");e!=="/"&&(p.pathname=p.pathname==="/"?e:jo([e,p.pathname])),(d.replace?i.replace:i.push)(p,d.state,d)},[e,i,o,n])}function sH(){let{matches:e}=B.useContext(to),i=e[e.length-1];return i?i.params:{}}function aH(e,i){return lH(e,i)}function lH(e,i,t){gl()||Wn(!1);let{navigator:n}=B.useContext(Dc),{matches:o}=B.useContext(to),u=o[o.length-1],h=u?u.params:{};u&&u.pathname;let d=u?u.pathnameBase:"/";u&&u.route;let p=no(),m;if(i){var v;let _=typeof i=="string"?Wo(i):i;d==="/"||(v=_.pathname)!=null&&v.startsWith(d)||Wn(!1),m=_}else m=p;let x=m.pathname||"/",E=d==="/"?x:x.slice(d.length)||"/",C=Nj(e,{pathname:E}),O=pH(C&&C.map(_=>Object.assign({},_,{params:Object.assign({},h,_.params),pathname:jo([d,n.encodeLocation?n.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?d:jo([d,n.encodeLocation?n.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),o,t);return i&&O?B.createElement(Ic.Provider,{value:{location:wc({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:$r.Pop}},O):O}function uH(){let e=vH(),i=nH(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),t=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:n};return B.createElement(B.Fragment,null,B.createElement("h2",null,"Unexpected Application Error!"),B.createElement("h3",{style:{fontStyle:"italic"}},i),t?B.createElement("pre",{style:o},t):null,null)}const cH=B.createElement(uH,null);class dH extends B.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,t){return t.location!==i.location||t.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error||t.error,location:t.location,revalidation:i.revalidation||t.revalidation}}componentDidCatch(i,t){console.error("React Router caught the following error during render",i,t)}render(){return this.state.error?B.createElement(to.Provider,{value:this.props.routeContext},B.createElement(UE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function hH(e){let{routeContext:i,match:t,children:n}=e,o=B.useContext(BE);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),B.createElement(to.Provider,{value:i},n)}function pH(e,i,t){var n;if(i===void 0&&(i=[]),t===void 0&&(t=null),e==null){var o;if((o=t)!=null&&o.errors)e=t.matches;else return null}let u=e,h=(n=t)==null?void 0:n.errors;if(h!=null){let d=u.findIndex(p=>p.route.id&&h?.[p.route.id]);d>=0||Wn(!1),u=u.slice(0,Math.min(u.length,d+1))}return u.reduceRight((d,p,m)=>{let v=p.route.id?h?.[p.route.id]:null,x=null;t&&(x=p.route.errorElement||cH);let E=i.concat(u.slice(0,m+1)),C=()=>{let O;return v?O=x:p.route.Component?O=B.createElement(p.route.Component,null):p.route.element?O=p.route.element:O=d,B.createElement(hH,{match:p,routeContext:{outlet:d,matches:E,isDataRoute:t!=null},children:O})};return t&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?B.createElement(dH,{location:t.location,revalidation:t.revalidation,component:x,error:v,children:C(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):C()},null)}var Mf;(function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate"})(Mf||(Mf={}));var dl;(function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId"})(dl||(dl={}));function fH(e){let i=B.useContext(BE);return i||Wn(!1),i}function mH(e){let i=B.useContext(rH);return i||Wn(!1),i}function gH(e){let i=B.useContext(to);return i||Wn(!1),i}function VE(e){let i=gH(),t=i.matches[i.matches.length-1];return t.route.id||Wn(!1),t.route.id}function vH(){var e;let i=B.useContext(UE),t=mH(dl.UseRouteError),n=VE(dl.UseRouteError);return i||((e=t.errors)==null?void 0:e[n])}function yH(){let{router:e}=fH(Mf.UseNavigateStable),i=VE(dl.UseNavigateStable),t=B.useRef(!1);return WE(()=>{t.current=!0}),B.useCallback(function(n,o){o===void 0&&(o={}),t.current&&(typeof n=="number"?e.navigate(n):e.navigate(n,wc({fromRouteId:i},o)))},[e,i])}function wH(e){let{to:i,replace:t,state:n,relative:o}=e;gl()||Wn(!1);let{matches:u}=B.useContext(to),{pathname:h}=no(),d=vl(),p=HE(i,jE(u).map(v=>v.pathnameBase),h,o==="path"),m=JSON.stringify(p);return B.useEffect(()=>d(JSON.parse(m),{replace:t,state:n,relative:o}),[d,m,o,t,n]),null}function ko(e){Wn(!1)}function bH(e){let{basename:i="/",children:t=null,location:n,navigationType:o=$r.Pop,navigator:u,static:h=!1}=e;gl()&&Wn(!1);let d=i.replace(/^\/*/,"/"),p=B.useMemo(()=>({basename:d,navigator:u,static:h}),[d,u,h]);typeof n=="string"&&(n=Wo(n));let{pathname:m="/",search:v="",hash:x="",state:E=null,key:C="default"}=n,O=B.useMemo(()=>{let _=zE(m,d);return _==null?null:{location:{pathname:_,search:v,hash:x,state:E,key:C},navigationType:o}},[d,m,v,x,E,C,o]);return O==null?null:B.createElement(Dc.Provider,{value:p},B.createElement(Ic.Provider,{children:t,value:O}))}function xH(e){let{children:i,location:t}=e;return aH(Lf(i),t)}var Nb;(function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"})(Nb||(Nb={}));new Promise(()=>{});function Lf(e,i){i===void 0&&(i=[]);let t=[];return B.Children.forEach(e,(n,o)=>{if(!B.isValidElement(n))return;let u=[...i,o];if(n.type===B.Fragment){t.push.apply(t,Lf(n.props.children,u));return}n.type!==ko&&Wn(!1),!n.props.index||!n.props.children||Wn(!1);let h={id:n.props.id||u.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(h.children=Lf(n.props.children,u)),t.push(h)}),t}function Vs(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((i,t)=>{let n=e[t];return i.concat(Array.isArray(n)?n.map(o=>[t,o]):[[t,n]])},[]))}function SH(e,i){let t=Vs(e);if(i)for(let n of i.keys())t.has(n)||i.getAll(n).forEach(o=>{t.append(n,o)});return t}function EH(e){let{basename:i,children:t,window:n}=e,o=B.useRef();o.current==null&&(o.current=Ij({window:n,v5Compat:!0}));let u=o.current,[h,d]=B.useState({action:u.action,location:u.location});return B.useLayoutEffect(()=>u.listen(d),[u]),B.createElement(bH,{basename:i,children:t,location:h.location,navigationType:h.action,navigator:u})}var zb;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(zb||(zb={}));var jb;(function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(jb||(jb={}));function Sm(e){let i=B.useRef(Vs(e)),t=B.useRef(!1),n=no(),o=B.useMemo(()=>SH(n.search,t.current?null:i.current),[n.search]),u=vl(),h=B.useCallback((d,p)=>{const m=Vs(typeof d=="function"?d(o):d);t.current=!0,u("?"+m,p)},[u,o]);return[o,h]}const Em=B.createContext({tags:[],toggleTag:()=>null});function jp(e){return e?e.split(","):[]}function TH(e){const[i]=Sm(),t=no(),n=vl(),[o,u]=B.useState(jp(i.get("tags"))),h=i.get("tags");B.useEffect(()=>{const p=jp(h);u(p)},[h]);const d=B.useMemo(()=>({tags:o,toggleTag:p=>{if(o.includes(p)){const m=jp(h).filter(v=>v!==p);i.set("tags",m.join(",")),u(m),n(`${t.pathname}?${Vs(i.toString())}`)}else i.set("tags",`${h},${p}`),u([...o,p]),n(`${t.pathname}?${Vs(i.toString())}`)}}),[t.pathname,n,i,h,o]);return q.jsx(Em.Provider,{value:d,children:e.children})}function Hb(e,i){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);i&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),t.push.apply(t,n)}return t}function Fb(e){for(var i=1;i<arguments.length;i++){var t=arguments[i]!=null?arguments[i]:{};i%2?Hb(Object(t),!0).forEach(function(n){zs(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Hb(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function pi(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Bb=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Hp=function(){return Math.random().toString(36).substring(7).split("").join(".")},bc={INIT:"@@redux/INIT"+Hp(),REPLACE:"@@redux/REPLACE"+Hp(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Hp()}};function CH(e){if(typeof e!="object"||e===null)return!1;for(var i=e;Object.getPrototypeOf(i)!==null;)i=Object.getPrototypeOf(i);return Object.getPrototypeOf(e)===i}function GE(e,i,t){var n;if(typeof i=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(pi(0));if(typeof i=="function"&&typeof t>"u"&&(t=i,i=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(pi(1));return t(GE)(e,i)}if(typeof e!="function")throw new Error(pi(2));var o=e,u=i,h=[],d=h,p=!1;function m(){d===h&&(d=h.slice())}function v(){if(p)throw new Error(pi(3));return u}function x(_){if(typeof _!="function")throw new Error(pi(4));if(p)throw new Error(pi(5));var k=!0;return m(),d.push(_),function(){if(k){if(p)throw new Error(pi(6));k=!1,m();var I=d.indexOf(_);d.splice(I,1),h=null}}}function E(_){if(!CH(_))throw new Error(pi(7));if(typeof _.type>"u")throw new Error(pi(8));if(p)throw new Error(pi(9));try{p=!0,u=o(u,_)}finally{p=!1}for(var k=h=d,I=0;I<k.length;I++){var G=k[I];G()}return _}function C(_){if(typeof _!="function")throw new Error(pi(10));o=_,E({type:bc.REPLACE})}function O(){var _,k=x;return _={subscribe:function(I){if(typeof I!="object"||I===null)throw new Error(pi(11));function G(){I.next&&I.next(v())}G();var Z=k(G);return{unsubscribe:Z}}},_[Bb]=function(){return this},_}return E({type:bc.INIT}),n={dispatch:E,subscribe:x,getState:v,replaceReducer:C},n[Bb]=O,n}function PH(e){Object.keys(e).forEach(function(i){var t=e[i],n=t(void 0,{type:bc.INIT});if(typeof n>"u")throw new Error(pi(12));if(typeof t(void 0,{type:bc.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(pi(13))})}function _H(e){for(var i=Object.keys(e),t={},n=0;n<i.length;n++){var o=i[n];typeof e[o]=="function"&&(t[o]=e[o])}var u=Object.keys(t),h;try{PH(t)}catch(d){h=d}return function(d,p){if(d===void 0&&(d={}),h)throw h;for(var m=!1,v={},x=0;x<u.length;x++){var E=u[x],C=t[E],O=d[E],_=C(O,p);if(typeof _>"u")throw p&&p.type,new Error(pi(14));v[E]=_,m=m||_!==O}return m=m||u.length!==Object.keys(d).length,m?v:d}}function qE(){for(var e=arguments.length,i=new Array(e),t=0;t<e;t++)i[t]=arguments[t];return i.length===0?function(n){return n}:i.length===1?i[0]:i.reduce(function(n,o){return function(){return n(o.apply(void 0,arguments))}})}function kH(){for(var e=arguments.length,i=new Array(e),t=0;t<e;t++)i[t]=arguments[t];return function(n){return function(){var o=n.apply(void 0,arguments),u=function(){throw new Error(pi(15))},h={getState:o.getState,dispatch:function(){return u.apply(void 0,arguments)}},d=i.map(function(p){return p(h)});return u=qE.apply(void 0,d)(o.dispatch),Fb(Fb({},o),{},{dispatch:u})}}}var or=function(e){return"@@redux-saga/"+e},RH=or("CANCEL_PROMISE"),ZE=or("CHANNEL_END"),XE=or("IO"),Ub=or("MATCH"),YE=or("MULTICAST"),$E=or("SAGA_ACTION"),OH=or("SELF_CANCELLATION"),AH=or("TASK"),js=or("TASK_CANCEL"),KE=or("TERMINATE"),DH=or("LOCATION"),QE=function(e){return e==null},uc=function(e){return e!=null},Ri=function(e){return typeof e=="function"},Tm=function(e){return typeof e=="string"},io=Array.isArray,Mc=function(e){return e&&Ri(e.then)},Cm=function(e){return e&&Ri(e.next)&&Ri(e.throw)},Wb=function e(i){return i&&(Tm(i)||eT(i)||Ri(i)||io(i)&&i.every(e))},Pm=function(e){return e&&Ri(e.take)&&Ri(e.close)},JE=function(e){return Ri(e)&&e.hasOwnProperty("toString")},eT=function(e){return!!e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype},IH=function(e){return Pm(e)&&e[YE]},MH=function(e){return function(){return e}},LH=MH(!0),wi=function(){},tT=function(e){return e},_m=function(e,i){De(e,i),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(i).forEach(function(t){e[t]=i[t]})},NH=function(e,i){var t;return(t=[]).concat.apply(t,i.map(e))};function Lc(e,i){var t=e.indexOf(i);t>=0&&e.splice(t,1)}function zH(e){var i=!1;return function(){i||(i=!0,e())}}var jH=function(e){throw e},HH=function(e){return{value:e,done:!0}};function Nf(e,i,t){i===void 0&&(i=jH),t===void 0&&(t="iterator");var n={meta:{name:t},next:e,throw:i,return:HH,isSagaIterator:!0};return typeof Symbol<"u"&&(n[Symbol.iterator]=function(){return n}),n}function FH(e,i){var t=i.sagaStack;console.error(e),console.error(t)}var nT=function(e){return Array.apply(null,new Array(e))},BH=function(e){return function(i){return e(Object.defineProperty(i,$E,{value:!0}))}},iT=function(e){return e===KE},rT=function(e){return e===js},oT=function(e){return iT(e)||rT(e)};function sT(e,i){var t=Object.keys(e),n=t.length,o=0,u,h=io(e)?nT(n):{},d={};function p(){o===n&&(u=!0,i(h))}return t.forEach(function(m){var v=function(x,E){u||(E||oT(x)?(i.cancel(),i(x,E)):(h[m]=x,o++,p()))};v.cancel=wi,d[m]=v}),i.cancel=function(){u||(u=!0,t.forEach(function(m){return d[m].cancel()}))},d}function km(e){return{name:e.name||"anonymous",location:aT(e)}}function aT(e){return e[DH]}var UH="Channel's Buffer overflow!",WH=1,VH=3,lT=4;function GH(e,i){e===void 0&&(e=10);var t=new Array(e),n=0,o=0,u=0,h=function(m){t[o]=m,o=(o+1)%e,n++},d=function(){if(n!=0){var m=t[u];return t[u]=null,n--,u=(u+1)%e,m}},p=function(){for(var m=[];n;)m.push(d());return m};return{isEmpty:function(){return n==0},put:function(m){if(n<e)h(m);else{var v;switch(i){case WH:throw new Error(UH);case VH:t[o]=m,o=(o+1)%e,u=o;break;case lT:v=2*e,t=p(),n=t.length,o=t.length,u=0,t.length=v,e=v,h(m);break}}},take:d,flush:p}}var qH=function(e){return GH(e,lT)},cc="TAKE",uT="PUT",cT="ALL",ZH="RACE",XH="CALL",YH="CPS",dT="FORK",$H="JOIN",KH="CANCEL",hT="SELECT",QH="ACTION_CHANNEL",JH="CANCELLED",e3="FLUSH",t3="GET_CONTEXT",n3="SET_CONTEXT",Ho=function(e,i){var t;return t={},t[XE]=!0,t.combinator=!1,t.type=e,t.payload=i,t};function i3(e,i){if(e===void 0&&(e="*"),Wb(e))return uc(i)&&console.warn("take(pattern) takes one argument but two were provided. Consider passing an array for listening to several action types"),Ho(cc,{pattern:e});if(IH(e)&&uc(i)&&Wb(i))return Ho(cc,{channel:e,pattern:i});if(Pm(e))return uc(i)&&console.warn("take(channel) takes one argument but two were provided. Second argument is ignored."),Ho(cc,{channel:e})}function r3(e,i){return QE(i)&&(i=e,e=void 0),Ho(uT,{channel:e,action:i})}function o3(e){var i=Ho(cT,e);return i.combinator=!0,i}function s3(e,i){var t=null,n;return Ri(e)?n=e:(io(e)?(t=e[0],n=e[1]):(t=e.context,n=e.fn),t&&Tm(n)&&Ri(t[n])&&(n=t[n])),{context:t,fn:n,args:i}}function pT(e){for(var i=arguments.length,t=new Array(i>1?i-1:0),n=1;n<i;n++)t[n-1]=arguments[n];return Ho(dT,s3(e,t))}function Nc(e){e===void 0&&(e=tT);for(var i=arguments.length,t=new Array(i>1?i-1:0),n=1;n<i;n++)t[n-1]=arguments[n];return Ho(hT,{selector:e,args:t})}function a3(){var e={};return e.promise=new Promise(function(i,t){e.resolve=i,e.reject=t}),e}var fT=[],zc=0;function l3(e){try{Rm(),e()}finally{vT()}}function mT(e){fT.push(e),zc||(Rm(),yT())}function gT(e){try{return Rm(),e()}finally{yT()}}function Rm(){zc++}function vT(){zc--}function yT(){vT();for(var e;!zc&&(e=fT.shift())!==void 0;)l3(e)}var u3=function(e){return function(i){return e.some(function(t){return Om(t)(i)})}},c3=function(e){return function(i){return e(i)}},Vb=function(e){return function(i){return i.type===String(e)}},d3=function(e){return function(i){return i.type===e}},wT=function(){return LH};function Om(e){var i=e==="*"?wT:Tm(e)?Vb:io(e)?u3:JE(e)?Vb:Ri(e)?c3:eT(e)?d3:null;if(i===null)throw new Error("invalid pattern: "+e);return i(e)}var el={type:ZE},Am=function(e){return e&&e.type===ZE};function h3(e){e===void 0&&(e=qH());var i=!1,t=[];function n(d){if(!i){if(t.length===0)return e.put(d);var p=t.shift();p(d)}}function o(d){i&&e.isEmpty()?d(el):e.isEmpty()?(t.push(d),d.cancel=function(){Lc(t,d)}):d(e.take())}function u(d){if(i&&e.isEmpty()){d(el);return}d(e.flush())}function h(){if(!i){i=!0;var d=t;t=[];for(var p=0,m=d.length;p<m;p++){var v=d[p];v(el)}}}return{take:o,put:n,flush:u,close:h}}function p3(){var e,i=!1,t=[],n=t,o=function(){n===t&&(n=t.slice())},u=function(){i=!0;var h=t=n;n=[],h.forEach(function(d){d(el)})};return e={},e[YE]=!0,e.put=function(h){if(!i){if(Am(h)){u();return}for(var d=t=n,p=0,m=d.length;p<m;p++){var v=d[p];v[Ub](h)&&(v.cancel(),v(h))}}},e.take=function(h,d){if(d===void 0&&(d=wT),i){h(el);return}h[Ub]=d,o(),n.push(h),h.cancel=zH(function(){o(),Lc(n,h)})},e.close=u,e}function bT(){var e=p3(),i=e.put;return e.put=function(t){if(t[$E]){i(t);return}mT(function(){i(t)})},e}var Io=0,Ar=1,dc=2,xT=3;function Dm(e,i){var t=e[RH];Ri(t)&&(i.cancel=t),e.then(i,function(n){i(n,!0)})}var yl=0,ST=function(){return++yl},li;function f3(e,i){return e.isSagaIterator?{name:e.meta.name}:km(i)}function m3(e){var i=e.context,t=e.fn,n=e.args;try{var o=t.apply(i,n);if(Cm(o))return o;var u=!1,h=function(d){return u?{value:d,done:!0}:(u=!0,{value:o,done:!Mc(o)})};return Nf(h)}catch(d){return Nf(function(){throw d})}}function g3(e,i,t){var n=i.channel,o=i.action,u=i.resolve;mT(function(){var h;try{h=(n?n.put:e.dispatch)(o)}catch(d){t(d,!0);return}u&&Mc(h)?Dm(h,t):t(h)})}function v3(e,i,t){var n=i.channel,o=n===void 0?e.channel:n,u=i.pattern,h=i.maybe,d=function(p){if(p instanceof Error){t(p,!0);return}if(Am(p)&&!h){t(KE);return}t(p)};try{o.take(d,uc(u)?Om(u):null)}catch(p){t(p,!0);return}t.cancel=d.cancel}function y3(e,i,t,n){var o=i.context,u=i.fn,h=i.args,d=n.task;try{var p=u.apply(o,h);if(Mc(p)){Dm(p,t);return}if(Cm(p)){jc(e,p,d.context,yl,km(u),!1,t);return}t(p)}catch(m){t(m,!0)}}function w3(e,i,t){var n=i.context,o=i.fn,u=i.args;try{var h=function(d,p){QE(d)?t(p):t(d,!0)};o.apply(n,u.concat(h)),h.cancel&&(t.cancel=h.cancel)}catch(d){t(d,!0)}}function b3(e,i,t,n){var o=i.context,u=i.fn,h=i.args,d=i.detached,p=n.task,m=m3({context:o,fn:u,args:h}),v=f3(m,u);gT(function(){var x=jc(e,m,p.context,yl,v,d,void 0);d?t(x):x.isRunning()?(p.queue.addTask(x),t(x)):x.isAborted()?p.queue.abort(x.error()):t(x)})}function x3(e,i,t,n){var o=n.task,u=function(d,p){if(d.isRunning()){var m={task:o,cb:p};p.cancel=function(){d.isRunning()&&Lc(d.joiners,m)},d.joiners.push(m)}else d.isAborted()?p(d.error(),!0):p(d.result())};if(io(i)){if(i.length===0){t([]);return}var h=sT(i,t);i.forEach(function(d,p){u(d,h[p])})}else u(i,t)}function Fp(e){e.isRunning()&&e.cancel()}function S3(e,i,t,n){var o=n.task;i===OH?Fp(o):io(i)?i.forEach(Fp):Fp(i),t()}function E3(e,i,t,n){var o=n.digestEffect,u=yl,h=Object.keys(i);if(h.length===0){t(io(i)?[]:{});return}var d=sT(i,t);h.forEach(function(p){o(i[p],u,d[p],p)})}function T3(e,i,t,n){var o=n.digestEffect,u=yl,h=Object.keys(i),d=io(i)?nT(h.length):{},p={},m=!1;h.forEach(function(v){var x=function(E,C){m||(C||oT(E)?(t.cancel(),t(E,C)):(t.cancel(),m=!0,d[v]=E,t(d)))};x.cancel=wi,p[v]=x}),t.cancel=function(){m||(m=!0,h.forEach(function(v){return p[v].cancel()}))},h.forEach(function(v){m||o(i[v],u,p[v],v)})}function C3(e,i,t){var n=i.selector,o=i.args;try{var u=n.apply(void 0,[e.getState()].concat(o));t(u)}catch(h){t(h,!0)}}function P3(e,i,t){var n=i.pattern,o=i.buffer,u=h3(o),h=Om(n),d=function m(v){Am(v)||e.channel.take(m,h),u.put(v)},p=u.close;u.close=function(){d.cancel(),p()},e.channel.take(d,h),t(u)}function _3(e,i,t,n){var o=n.task;t(o.isCancelled())}function k3(e,i,t){i.flush(t)}function R3(e,i,t,n){var o=n.task;t(o.context[i])}function O3(e,i,t,n){var o=n.task;_m(o.context,i),t()}var A3=(li={},li[cc]=v3,li[uT]=g3,li[cT]=E3,li[ZH]=T3,li[XH]=y3,li[YH]=w3,li[dT]=b3,li[$H]=x3,li[KH]=S3,li[hT]=C3,li[QH]=P3,li[JH]=_3,li[e3]=k3,li[t3]=R3,li[n3]=O3,li);function D3(e,i,t){var n=[],o,u=!1;p(e);var h=function(){return n};function d(v){i(),m(),t(v,!0)}function p(v){n.push(v),v.cont=function(x,E){u||(Lc(n,v),v.cont=wi,E?d(x):(v===e&&(o=x),n.length||(u=!0,t(o))))}}function m(){u||(u=!0,n.forEach(function(v){v.cont=wi,v.cancel()}),n=[])}return{addTask:p,cancelAll:m,abort:d,getTasks:h}}function ET(e,i){return e+"?"+i}function I3(e){var i=aT(e);if(i){var t=i.code,n=i.fileName,o=i.lineNumber,u=t+"  "+ET(n,o);return u}return""}function Gb(e){var i=e.name,t=e.location;return t?i+"  "+ET(t.fileName,t.lineNumber):i}function M3(e){var i=NH(function(t){return t.cancelledTasks},e);return i.length?["Tasks cancelled due to error:"].concat(i).join(`
`):""}var Im=null,tl=[],L3=function(e){e.crashedEffect=Im,tl.push(e)},TT=function(){Im=null,tl.length=0},N3=function(e){Im=e},z3=function(){var e=tl[0],i=tl.slice(1),t=e.crashedEffect?I3(e.crashedEffect):null,n="The above error occurred in task "+Gb(e.meta)+(t?` 
 when executing effect `+t:"");return[n].concat(i.map(function(o){return"    created by "+Gb(o.meta)}),[M3(tl)]).join(`
`)};function j3(e,i,t,n,o,u,h){var d;h===void 0&&(h=wi);var p=Io,m,v,x=null,E=[],C=Object.create(t),O=D3(i,function(){E.push.apply(E,O.getTasks().map(function(ae){return ae.meta.name}))},k);function _(){p===Io&&(p=Ar,O.cancelAll(),k(js,!1))}function k(ae,te){if(!te)ae===js?p=Ar:p!==Ar&&(p=xT),m=ae,x&&x.resolve(ae);else{if(p=dc,L3({meta:o,cancelledTasks:E}),Z.isRoot){var Q=z3();TT(),e.onError(ae,{sagaStack:Q})}v=ae,x&&x.reject(ae)}Z.cont(ae,te),Z.joiners.forEach(function(le){le.cb(ae,te)}),Z.joiners=null}function I(ae){_m(C,ae)}function G(){return x||(x=a3(),p===dc?x.reject(v):p!==Io&&x.resolve(m)),x.promise}var Z=(d={},d[AH]=!0,d.id=n,d.meta=o,d.isRoot=u,d.context=C,d.joiners=[],d.queue=O,d.cancel=_,d.cont=h,d.end=k,d.setContext=I,d.toPromise=G,d.isRunning=function(){return p===Io},d.isCancelled=function(){return p===Ar||p===Io&&i.status===Ar},d.isAborted=function(){return p===dc},d.result=function(){return m},d.error=function(){return v},d);return Z}function jc(e,i,t,n,o,u,h){var d=e.finalizeRunEffect(C);E.cancel=wi;var p={meta:o,cancel:x,status:Io},m=j3(e,p,t,n,o,u,h),v={task:m,digestEffect:O};function x(){p.status===Io&&(p.status=Ar,E(js))}return h&&(h.cancel=m.cancel),E(),m;function E(_,k){try{var I;k?(I=i.throw(_),TT()):rT(_)?(p.status=Ar,E.cancel(),I=Ri(i.return)?i.return(js):{done:!0,value:js}):iT(_)?I=Ri(i.return)?i.return():{done:!0}:I=i.next(_),I.done?(p.status!==Ar&&(p.status=xT),p.cont(I.value)):O(I.value,n,E)}catch(G){if(p.status===Ar)throw G;p.status=dc,p.cont(G,!0)}}function C(_,k,I){if(Mc(_))Dm(_,I);else if(Cm(_))jc(e,_,m.context,k,o,!1,I);else if(_&&_[XE]){var G=A3[_.type];G(e,_.payload,I,v)}else I(_)}function O(_,k,I,G){G===void 0&&(G="");var Z=ST();e.sagaMonitor&&e.sagaMonitor.effectTriggered({effectId:Z,parentEffectId:k,label:G,effect:_});var ae;function te(Q,le){ae||(ae=!0,I.cancel=wi,e.sagaMonitor&&(le?e.sagaMonitor.effectRejected(Z,Q):e.sagaMonitor.effectResolved(Z,Q)),le&&N3(_),I(Q,le))}te.cancel=wi,I.cancel=function(){ae||(ae=!0,te.cancel(),te.cancel=wi,e.sagaMonitor&&e.sagaMonitor.effectCancelled(Z))},d(_,Z,te)}}function H3(e,i){for(var t=e.channel,n=t===void 0?bT():t,o=e.dispatch,u=e.getState,h=e.context,d=h===void 0?{}:h,p=e.sagaMonitor,m=e.effectMiddlewares,v=e.onError,x=v===void 0?FH:v,E=arguments.length,C=new Array(E>2?E-2:0),O=2;O<E;O++)C[O-2]=arguments[O];var _=i.apply(void 0,C),k=ST();p&&(p.rootSagaStarted=p.rootSagaStarted||wi,p.effectTriggered=p.effectTriggered||wi,p.effectResolved=p.effectResolved||wi,p.effectRejected=p.effectRejected||wi,p.effectCancelled=p.effectCancelled||wi,p.actionDispatched=p.actionDispatched||wi,p.rootSagaStarted({effectId:k,saga:i,args:C}));var I;if(m){var G=qE.apply(void 0,m);I=function(ae){return function(te,Q,le){var ce=function(me){return ae(me,Q,le)};return G(ce)(te)}}}else I=tT;var Z={channel:n,dispatch:BH(o),getState:u,sagaMonitor:p,onError:x,finalizeRunEffect:I};return gT(function(){var ae=jc(Z,_,d,k,km(i),!0,void 0);return p&&p.effectResolved(k,ae),ae})}function F3(e){var i={},t=i.context,n=t===void 0?{}:t,o=i.channel,u=o===void 0?bT():o,h=i.sagaMonitor,d=Bo(i,["context","channel","sagaMonitor"]),p;function m(v){var x=v.getState,E=v.dispatch;return p=H3.bind(null,De({},d,{context:n,channel:u,dispatch:E,getState:x,sagaMonitor:h})),function(C){return function(O){h&&h.actionDispatched&&h.actionDispatched(O);var _=C(O);return u.put(O),_}}}return m.run=function(){return p.apply(void 0,arguments)},m.setContext=function(v){_m(n,v)},m}var qb=function(e){return{done:!0,value:e}},Bp={};function B3(e){return Pm(e)?"channel":JE(e)?String(e):Ri(e)?e.name:String(e)}function U3(e,i,t){var n,o,u,h=i;function d(p,m){if(h===Bp)return qb(p);if(m&&!o)throw h=Bp,m;n&&n(p);var v=m?e[o](m):e[h]();return h=v.nextState,u=v.effect,n=v.stateUpdater,o=v.errorState,h===Bp?qb(p):u}return Nf(d,function(p){return d(null,p)},t)}function W3(e,i){for(var t=arguments.length,n=new Array(t>2?t-2:0),o=2;o<t;o++)n[o-2]=arguments[o];var u={done:!1,value:i3(e)},h=function(m){return{done:!1,value:pT.apply(void 0,[i].concat(n,[m]))}},d,p=function(m){return d=m};return U3({q1:function(){return{nextState:"q2",effect:u,stateUpdater:p}},q2:function(){return{nextState:"q1",effect:h(d)}}},"q1","takeEvery("+B3(e)+", "+i.name+")")}function V3(e,i){for(var t=arguments.length,n=new Array(t>2?t-2:0),o=2;o<t;o++)n[o-2]=arguments[o];return pT.apply(void 0,[W3,e,i].concat(n))}const CT={};CT.setFixedFrameMode=function(e,i){return{...e,fixedFrameMode:i}};const Hc={},G3="https://github.com/cu-mkp/editioncrafter-project/text-partial-resource.md";Hc.loadDocument=function(e,i){const t=K3(i,e.transcriptionTypes),{folioIndex:n,folioByName:o}=q3(t);return{...e,loaded:!0,folios:t,folioIndex:n,folioByName:o}};Hc.loadTags=function(e,i){return{...e,tags:i}};Hc.loadFolio=function(e,i){const t=e.folioIndex[i.id],n=e.folios.indexOf(t);return e.folios[n]=i,e.folioIndex[i.id]=i,e.folioByName[i.name]=i,{...e}};function q3(e){const i={},t={};for(let n=0;n<e.length;n++){const o=e[n];i[o.id]=o,t[o.name]=o}return{folioIndex:i,folioByName:t}}function fi(e){throw new Error(`IIIF manifest parser error: ${e}`)}function Z3(e){console.warn(`IIIF manifest parser warning: ${e}`)}function X3(e){for(const i of e.items){i.type!=="AnnotationPage"&&fi(`Expected AnnotationPage in items property of ${e.id}`),i.items||fi(`Expected items property in AnnotationPage ${i.id}`);for(const t of i.items)if(t.type!=="Annotation"&&fi(`Expected Annotation in items property of ${i.id}`),t.motivation==="painting")return t.body||fi(`Expected body property in Annotation ${t.id}`),t.body.id?t.body.service?{bodyId:t.body.id,imageURL:`${t.body.id}/info.json`,imageType:"iiif"}:{bodyId:t.body.id,imageURL:t.body.id,imageType:"image"}:null}return fi(`Unable to find painting Annotation for canvas: ${e.id}`),null}function Y3(e){return e.label?e.label.none[0]:(Z3(`${e.id} does not have a label property.`),"")}function $3(e,i){const t={};if(e.annotations){for(const n of e.annotations)if(n.type==="AnnotationPage"){n.items||fi(`Expected items property in AnnotationPage ${n.id}`);for(const o of n.items)if(o.type!=="Annotation"&&fi(`Expected Annotation in items property of ${n.id}`),o.motivation==="supplementing"){o.body||fi(`Expected body property in Annotation ${o.id}`);const{body:u}=o;if(u.profile===G3&&u.type==="TextPartial"){u.id||fi(`Expected id property in TextPartial in ${o.id}`),u.format||fi(`Expected format property in TextPartial in ${o.id}`);const{id:h,format:d}=u,p=h.split("/");p.length<5&&fi(`TextPartial id property is in the wrong format: ${h}`);const m=p[p.length-2];i[m]&&(t[m]||(t[m]={}),d==="text/html"&&(t[m].htmlURL=h),d==="text/xml"&&(t[m].xmlURL=h))}}}}return t}const Qu=130;function K3(e,i){if(e.type==="variorum"){let t=[];return Object.keys(e.documentData).forEach(n=>{t=t.concat(Zb(e.documentData[n],i[n],n))}),t}return Zb(e,i)}function Zb(e,i,t){const n=[];(!e["@context"]||!e["@context"].includes("http://iiif.io/api/presentation/3/context.json"))&&fi("Expected root object to have a @context containing: http://iiif.io/api/presentation/3/context.json"),e.type!=="Manifest"&&fi("Expected root object of type 'Manifest'."),e.items||fi("Expected manifest to have an items property.");const o=e.items;for(let u=0;u<o.length;u++){const h=o[u];h.type!=="Canvas"&&fi(`Expected items[${u}] to be of type 'Canvas'.`),h.id||fi(`Expected items[${u}] to have an id property.`);const d=X3(h);if(d){const p=h.id.substr(h.id.lastIndexOf("/")+1),m=Y3(h),{bodyId:v,imageURL:x,imageType:E}=d,C=$3(h,i),O=h.width/h.height;let _=[];O>1?_=[Qu,Math.round(Qu/O)]:_=[Math.round(Qu*O),Qu];const k=E==="iiif"?`${v}/full/${_.join(",")}/0/default.jpg`:x,I={id:t?`${t}_${p}`:p,doc_id:t||e.id,name:m,pageNumber:u,image_zoom_url:x,image_thumbnail_url:k,annotationURLs:C,annotations:h.annotations?h.annotations.filter(G=>G.motivation==="tagging"):[]};n.push(I)}}return n}const PT={};PT.loadGlossary=function(e,i){return{...e,loaded:!0,glossary:i}};const Q3={fixedFrameMode:!1};function J3(e){return`${e.replace("/iiif/manifest.json","")}/html/index.html`}function e4(e,i,t,n=!1,o=null,u=!1){return{documentName:i,derivativeNames:o,manifestURL:e,headerUrl:J3(e),transcriptionTypes:t,variorum:n,threePanel:u,folios:[],loaded:!1,folioIndex:{},folioByName:{},tags:null}}function t4(e){return{glossary:{},loaded:!1,URL:e}}function n4(e){const{documentName:i,documentInfo:t,glossaryURL:n,threePanel:o=!1}=e,u=t&&Object.keys(t).length>1,h={},d={},p={};u&&Object.keys(e.documentInfo).forEach(E=>{h[E]=e.documentInfo[E].transcriptionTypes,d[E]=e.documentInfo[E].iiifManifest,p[E]=e.documentInfo[E].documentName});const m=u?h:e.transcriptionTypes,v=u?d:e.iiifManifest,x=u&&p;return _H({diplomatic:Wp("DiplomaticActions",CT,Q3),document:Wp("DocumentActions",Hc,e4(v,i,m,u,x,o)),glossary:Wp("GlossaryActions",PT,t4(n))})}var _T={exports:{}};(function(e){//! openseadragon 4.1.0
//! Built on 2023-05-25
//! Git commit: v4.1.0-0-8849681
//! http://openseadragon.github.io
//! License: http://openseadragon.github.io/license/
function i(t){return new i.Viewer(t)}(function(t){t.version={versionStr:"4.1.0",major:parseInt("4",10),minor:parseInt("1",10),revision:parseInt("0",10)};var n={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object AsyncFunction]":"function","[object Promise]":"promise","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"},o=Object.prototype.toString,u=Object.prototype.hasOwnProperty;t.isFunction=function(h){return t.type(h)==="function"},t.isArray=Array.isArray||function(h){return t.type(h)==="array"},t.isWindow=function(h){return h&&typeof h=="object"&&"setInterval"in h},t.type=function(h){return h==null?String(h):n[o.call(h)]||"object"},t.isPlainObject=function(h){if(!h||i.type(h)!=="object"||h.nodeType||t.isWindow(h)||h.constructor&&!u.call(h,"constructor")&&!u.call(h.constructor.prototype,"isPrototypeOf"))return!1;var d;for(var p in h)d=p;return d===void 0||u.call(h,d)},t.isEmptyObject=function(h){for(var d in h)return!1;return!0},t.freezeObject=function(h){return Object.freeze?t.freezeObject=Object.freeze:t.freezeObject=function(d){return d},t.freezeObject(h)},t.supportsCanvas=function(){var h=document.createElement("canvas");return!!(t.isFunction(h.getContext)&&h.getContext("2d"))}(),t.isCanvasTainted=function(h){var d=!1;try{h.getContext("2d").getImageData(0,0,1,1)}catch{d=!0}return d},t.supportsAddEventListener=function(){return!!(document.documentElement.addEventListener&&document.addEventListener)}(),t.supportsRemoveEventListener=function(){return!!(document.documentElement.removeEventListener&&document.removeEventListener)}(),t.supportsEventListenerOptions=function(){var h=0;if(t.supportsAddEventListener)try{var d={get capture(){return h++,!1},get once(){return h++,!1},get passive(){return h++,!1}};window.addEventListener("test",null,d),window.removeEventListener("test",null,d)}catch{h=0}return h>=3}(),t.getCurrentPixelDensityRatio=function(){if(t.supportsCanvas){var h=document.createElement("canvas").getContext("2d"),d=window.devicePixelRatio||1,p=h.webkitBackingStorePixelRatio||h.mozBackingStorePixelRatio||h.msBackingStorePixelRatio||h.oBackingStorePixelRatio||h.backingStorePixelRatio||1;return Math.max(d,1)/p}else return 1},t.pixelDensityRatio=t.getCurrentPixelDensityRatio()})(i),function(t){t.extend=function(){var p,m,v,x,E,C,O=arguments[0]||{},_=arguments.length,k=!1,I=1;for(typeof O=="boolean"&&(k=O,O=arguments[1]||{},I=2),typeof O!="object"&&!i.isFunction(O)&&(O={}),_===I&&(O=this,--I);I<_;I++)if(p=arguments[I],p!==null||p!==void 0)for(m in p){var G=Object.getOwnPropertyDescriptor(p,m);if(G!==void 0){if(G.get||G.set){Object.defineProperty(O,m,G);continue}x=G.value}else{t.console.warn('Could not copy inherited property "'+m+'".');continue}O!==x&&(k&&x&&(i.isPlainObject(x)||(E=i.isArray(x)))?(v=O[m],E?(E=!1,C=v&&i.isArray(v)?v:[]):C=v&&i.isPlainObject(v)?v:{},O[m]=i.extend(k,C,x)):x!==void 0&&(O[m]=x))}return O};var n=function(){if(typeof navigator!="object")return!1;var p=navigator.userAgent;return typeof p!="string"?!1:p.indexOf("iPhone")!==-1||p.indexOf("iPad")!==-1||p.indexOf("iPod")!==-1};t.extend(t,{DEFAULT_SETTINGS:{xmlPath:null,tileSources:null,tileHost:null,initialPage:0,crossOriginPolicy:!1,ajaxWithCredentials:!1,loadTilesWithAjax:!1,ajaxHeaders:{},splitHashDataForPost:!1,panHorizontal:!0,panVertical:!0,constrainDuringPan:!1,wrapHorizontal:!1,wrapVertical:!1,visibilityRatio:.5,minPixelRatio:.5,defaultZoomLevel:0,minZoomLevel:null,maxZoomLevel:null,homeFillsViewer:!1,clickTimeThreshold:300,clickDistThreshold:5,dblClickTimeThreshold:300,dblClickDistThreshold:20,springStiffness:6.5,animationTime:1.2,gestureSettingsMouse:{dragToPan:!0,scrollToZoom:!0,clickToZoom:!0,dblClickToZoom:!1,dblClickDragToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!0,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsTouch:{dragToPan:!0,scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,dblClickDragToZoom:!0,pinchToZoom:!0,zoomToRefPoint:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsPen:{dragToPan:!0,scrollToZoom:!1,clickToZoom:!0,dblClickToZoom:!1,dblClickDragToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!0,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsUnknown:{dragToPan:!0,scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,dblClickDragToZoom:!1,pinchToZoom:!0,zoomToRefPoint:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},zoomPerClick:2,zoomPerScroll:1.2,zoomPerDblClickDrag:1.2,zoomPerSecond:1,blendTime:0,alwaysBlend:!1,autoHideControls:!0,immediateRender:!1,minZoomImageRatio:.9,maxZoomPixelRatio:1.1,smoothTileEdgesMinZoom:1.1,iOSDevice:n(),pixelsPerWheelLine:40,pixelsPerArrowPress:40,autoResize:!0,preserveImageSizeOnResize:!1,minScrollDeltaTime:50,rotationIncrement:90,showSequenceControl:!0,sequenceControlAnchor:null,preserveViewport:!1,preserveOverlays:!1,navPrevNextWrap:!1,showNavigationControl:!0,navigationControlAnchor:null,showZoomControl:!0,showHomeControl:!0,showFullPageControl:!0,showRotationControl:!1,showFlipControl:!1,controlsFadeDelay:2e3,controlsFadeLength:1500,mouseNavEnabled:!0,showNavigator:!1,navigatorElement:null,navigatorId:null,navigatorPosition:null,navigatorSizeRatio:.2,navigatorMaintainSizeRatio:!1,navigatorTop:null,navigatorLeft:null,navigatorHeight:null,navigatorWidth:null,navigatorAutoResize:!0,navigatorAutoFade:!0,navigatorRotate:!0,navigatorBackground:"#000",navigatorOpacity:.8,navigatorBorderColor:"#555",navigatorDisplayRegionColor:"#900",degrees:0,flipped:!1,opacity:1,preload:!1,compositeOperation:null,imageSmoothingEnabled:!0,placeholderFillStyle:null,subPixelRoundingForTransparency:null,showReferenceStrip:!1,referenceStripScroll:"horizontal",referenceStripElement:null,referenceStripHeight:null,referenceStripWidth:null,referenceStripPosition:"BOTTOM_LEFT",referenceStripSizeRatio:.2,collectionRows:3,collectionColumns:0,collectionLayout:"horizontal",collectionMode:!1,collectionTileSize:800,collectionTileMargin:80,imageLoaderLimit:0,maxImageCacheCount:200,timeout:3e4,useCanvas:!0,tileRetryMax:0,tileRetryDelay:2500,prefixUrl:"/images/",navImages:{zoomIn:{REST:"zoomin_rest.png",GROUP:"zoomin_grouphover.png",HOVER:"zoomin_hover.png",DOWN:"zoomin_pressed.png"},zoomOut:{REST:"zoomout_rest.png",GROUP:"zoomout_grouphover.png",HOVER:"zoomout_hover.png",DOWN:"zoomout_pressed.png"},home:{REST:"home_rest.png",GROUP:"home_grouphover.png",HOVER:"home_hover.png",DOWN:"home_pressed.png"},fullpage:{REST:"fullpage_rest.png",GROUP:"fullpage_grouphover.png",HOVER:"fullpage_hover.png",DOWN:"fullpage_pressed.png"},rotateleft:{REST:"rotateleft_rest.png",GROUP:"rotateleft_grouphover.png",HOVER:"rotateleft_hover.png",DOWN:"rotateleft_pressed.png"},rotateright:{REST:"rotateright_rest.png",GROUP:"rotateright_grouphover.png",HOVER:"rotateright_hover.png",DOWN:"rotateright_pressed.png"},flip:{REST:"flip_rest.png",GROUP:"flip_grouphover.png",HOVER:"flip_hover.png",DOWN:"flip_pressed.png"},previous:{REST:"previous_rest.png",GROUP:"previous_grouphover.png",HOVER:"previous_hover.png",DOWN:"previous_pressed.png"},next:{REST:"next_rest.png",GROUP:"next_grouphover.png",HOVER:"next_hover.png",DOWN:"next_pressed.png"}},debugMode:!1,debugGridColor:["#437AB2","#1B9E77","#D95F02","#7570B3","#E7298A","#66A61E","#E6AB02","#A6761D","#666666"],silenceMultiImageWarnings:!1},SIGNAL:"----seadragon----",delegate:function(p,m){return function(){var v=arguments;return v===void 0&&(v=[]),m.apply(p,v)}},BROWSERS:{UNKNOWN:0,IE:1,FIREFOX:2,SAFARI:3,CHROME:4,OPERA:5,EDGE:6,CHROMEEDGE:7},SUBPIXEL_ROUNDING_OCCURRENCES:{NEVER:0,ONLY_AT_REST:1,ALWAYS:2},_viewers:new Map,getViewer:function(p){return t._viewers.get(this.getElement(p))},getElement:function(p){return typeof p=="string"&&(p=document.getElementById(p)),p},getElementPosition:function(p){var m=new t.Point,v,x;for(p=t.getElement(p),v=t.getElementStyle(p).position==="fixed",x=d(p,v);x;)m.x+=p.offsetLeft,m.y+=p.offsetTop,v&&(m=m.plus(t.getPageScroll())),p=x,v=t.getElementStyle(p).position==="fixed",x=d(p,v);return m},getElementOffset:function(p){p=t.getElement(p);var m=p&&p.ownerDocument,v,x,E={top:0,left:0};return m?(v=m.documentElement,typeof p.getBoundingClientRect<"u"&&(E=p.getBoundingClientRect()),x=m===m.window?m:m.nodeType===9?m.defaultView||m.parentWindow:!1,new t.Point(E.left+(x.pageXOffset||v.scrollLeft)-(v.clientLeft||0),E.top+(x.pageYOffset||v.scrollTop)-(v.clientTop||0))):new t.Point},getElementSize:function(p){return p=t.getElement(p),new t.Point(p.clientWidth,p.clientHeight)},getElementStyle:document.documentElement.currentStyle?function(p){return p=t.getElement(p),p.currentStyle}:function(p){return p=t.getElement(p),window.getComputedStyle(p,"")},getCssPropertyWithVendorPrefix:function(p){var m={};return t.getCssPropertyWithVendorPrefix=function(v){if(m[v]!==void 0)return m[v];var x=document.createElement("div").style,E=null;if(x[v]!==void 0)E=v;else for(var C=["Webkit","Moz","MS","O","webkit","moz","ms","o"],O=t.capitalizeFirstLetter(v),_=0;_<C.length;_++){var k=C[_]+O;if(x[k]!==void 0){E=k;break}}return m[v]=E,E},t.getCssPropertyWithVendorPrefix(p)},capitalizeFirstLetter:function(p){return p.charAt(0).toUpperCase()+p.slice(1)},positiveModulo:function(p,m){var v=p%m;return v<0&&(v+=m),v},pointInElement:function(p,m){p=t.getElement(p);var v=t.getElementOffset(p),x=t.getElementSize(p);return m.x>=v.x&&m.x<v.x+x.x&&m.y<v.y+x.y&&m.y>=v.y},getMousePosition:function(p){if(typeof p.pageX=="number")t.getMousePosition=function(m){var v=new t.Point;return v.x=m.pageX,v.y=m.pageY,v};else if(typeof p.clientX=="number")t.getMousePosition=function(m){var v=new t.Point;return v.x=m.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,v.y=m.clientY+document.body.scrollTop+document.documentElement.scrollTop,v};else throw new Error("Unknown event mouse position, no known technique.");return t.getMousePosition(p)},getPageScroll:function(){var p=document.documentElement||{},m=document.body||{};if(typeof window.pageXOffset=="number")t.getPageScroll=function(){return new t.Point(window.pageXOffset,window.pageYOffset)};else if(m.scrollLeft||m.scrollTop)t.getPageScroll=function(){return new t.Point(document.body.scrollLeft,document.body.scrollTop)};else if(p.scrollLeft||p.scrollTop)t.getPageScroll=function(){return new t.Point(document.documentElement.scrollLeft,document.documentElement.scrollTop)};else return new t.Point(0,0);return t.getPageScroll()},setPageScroll:function(p){if(typeof window.scrollTo<"u")t.setPageScroll=function(x){window.scrollTo(x.x,x.y)};else{var m=t.getPageScroll();if(m.x===p.x&&m.y===p.y)return;document.body.scrollLeft=p.x,document.body.scrollTop=p.y;var v=t.getPageScroll();if(v.x!==m.x&&v.y!==m.y){t.setPageScroll=function(x){document.body.scrollLeft=x.x,document.body.scrollTop=x.y};return}if(document.documentElement.scrollLeft=p.x,document.documentElement.scrollTop=p.y,v=t.getPageScroll(),v.x!==m.x&&v.y!==m.y){t.setPageScroll=function(x){document.documentElement.scrollLeft=x.x,document.documentElement.scrollTop=x.y};return}t.setPageScroll=function(x){}}t.setPageScroll(p)},getWindowSize:function(){var p=document.documentElement||{},m=document.body||{};if(typeof window.innerWidth=="number")t.getWindowSize=function(){return new t.Point(window.innerWidth,window.innerHeight)};else if(p.clientWidth||p.clientHeight)t.getWindowSize=function(){return new t.Point(document.documentElement.clientWidth,document.documentElement.clientHeight)};else if(m.clientWidth||m.clientHeight)t.getWindowSize=function(){return new t.Point(document.body.clientWidth,document.body.clientHeight)};else throw new Error("Unknown window size, no known technique.");return t.getWindowSize()},makeCenteredNode:function(p){p=t.getElement(p);var m=[t.makeNeutralElement("div"),t.makeNeutralElement("div"),t.makeNeutralElement("div")];return t.extend(m[0].style,{display:"table",height:"100%",width:"100%"}),t.extend(m[1].style,{display:"table-row"}),t.extend(m[2].style,{display:"table-cell",verticalAlign:"middle",textAlign:"center"}),m[0].appendChild(m[1]),m[1].appendChild(m[2]),m[2].appendChild(p),m[0]},makeNeutralElement:function(p){var m=document.createElement(p),v=m.style;return v.background="transparent none",v.border="none",v.margin="0px",v.padding="0px",v.position="static",m},now:function(){return Date.now?t.now=Date.now:t.now=function(){return new Date().getTime()},t.now()},makeTransparentImage:function(p){var m=t.makeNeutralElement("img");return m.src=p,m},setElementOpacity:function(p,m,v){var x,E;p=t.getElement(p),v&&!t.Browser.alpha&&(m=Math.round(m)),t.Browser.opacity?p.style.opacity=m<1?m:"":m<1?(x=Math.round(100*m),E="alpha(opacity="+x+")",p.style.filter=E):p.style.filter=""},setElementTouchActionNone:function(p){p=t.getElement(p),typeof p.style.touchAction<"u"?p.style.touchAction="none":typeof p.style.msTouchAction<"u"&&(p.style.msTouchAction="none")},setElementPointerEvents:function(p,m){p=t.getElement(p),typeof p.style<"u"&&typeof p.style.pointerEvents<"u"&&(p.style.pointerEvents=m)},setElementPointerEventsNone:function(p){t.setElementPointerEvents(p,"none")},addClass:function(p,m){p=t.getElement(p),p.className?(" "+p.className+" ").indexOf(" "+m+" ")===-1&&(p.className+=" "+m):p.className=m},indexOf:function(p,m,v){return Array.prototype.indexOf?this.indexOf=function(x,E,C){return x.indexOf(E,C)}:this.indexOf=function(x,E,C){var O,_=C||0,k;if(!x)throw new TypeError;if(k=x.length,k===0||_>=k)return-1;for(_<0&&(_=k-Math.abs(_)),O=_;O<k;O++)if(x[O]===E)return O;return-1},this.indexOf(p,m,v)},removeClass:function(p,m){var v,x=[],E;for(p=t.getElement(p),v=p.className.split(/\s+/),E=0;E<v.length;E++)v[E]&&v[E]!==m&&x.push(v[E]);p.className=x.join(" ")},normalizeEventListenerOptions:function(p){var m;return typeof p<"u"?typeof p=="boolean"?m=t.supportsEventListenerOptions?{capture:p}:p:m=t.supportsEventListenerOptions?p:typeof p.capture<"u"?p.capture:!1:m=t.supportsEventListenerOptions?{capture:!1}:!1,m},addEvent:function(){if(t.supportsAddEventListener)return function(p,m,v,x){x=t.normalizeEventListenerOptions(x),p=t.getElement(p),p.addEventListener(m,v,x)};if(document.documentElement.attachEvent&&document.attachEvent)return function(p,m,v){p=t.getElement(p),p.attachEvent("on"+m,v)};throw new Error("No known event model.")}(),removeEvent:function(){if(t.supportsRemoveEventListener)return function(p,m,v,x){x=t.normalizeEventListenerOptions(x),p=t.getElement(p),p.removeEventListener(m,v,x)};if(document.documentElement.detachEvent&&document.detachEvent)return function(p,m,v){p=t.getElement(p),p.detachEvent("on"+m,v)};throw new Error("No known event model.")}(),cancelEvent:function(p){p.preventDefault()},eventIsCanceled:function(p){return p.defaultPrevented},stopEvent:function(p){p.stopPropagation()},createCallback:function(p,m){var v=[],x;for(x=2;x<arguments.length;x++)v.push(arguments[x]);return function(){var E=v.concat([]),C;for(C=0;C<arguments.length;C++)E.push(arguments[C]);return m.apply(p,E)}},getUrlParameter:function(p){var m=h[p];return m||null},getUrlProtocol:function(p){var m=p.match(/^([a-z]+:)\/\//i);return m===null?window.location.protocol:m[1].toLowerCase()},createAjaxRequest:function(p){var m;try{m=!!new ActiveXObject("Microsoft.XMLHTTP")}catch{m=!1}if(m)window.XMLHttpRequest?t.createAjaxRequest=function(v){return v?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest}:t.createAjaxRequest=function(){return new ActiveXObject("Microsoft.XMLHTTP")};else if(window.XMLHttpRequest)t.createAjaxRequest=function(){return new XMLHttpRequest};else throw new Error("Browser doesn't support XMLHttpRequest.");return t.createAjaxRequest(p)},makeAjaxRequest:function(p,m,v){var x,E,C,O;t.isPlainObject(p)&&(m=p.success,v=p.error,x=p.withCredentials,E=p.headers,C=p.responseType||null,O=p.postData||null,p=p.url);var _=t.getUrlProtocol(p),k=t.createAjaxRequest(_==="file:");if(!t.isFunction(m))throw new Error("makeAjaxRequest requires a success callback");k.onreadystatechange=function(){k.readyState===4&&(k.onreadystatechange=function(){},k.status>=200&&k.status<300||k.status===0&&_!=="http:"&&_!=="https:"?m(k):t.isFunction(v)?v(k):t.console.error("AJAX request returned %d: %s",k.status,p))};var I=O?"POST":"GET";try{if(k.open(I,p,!0),C&&(k.responseType=C),E)for(var G in E)Object.prototype.hasOwnProperty.call(E,G)&&E[G]&&k.setRequestHeader(G,E[G]);x&&(k.withCredentials=!0),k.send(O)}catch(Z){t.console.error("%s while making AJAX request: %s",Z.name,Z.message),k.onreadystatechange=function(){},t.isFunction(v)&&v(k,Z)}return k},jsonp:function(p){var m,v=p.url,x=document.head||document.getElementsByTagName("head")[0]||document.documentElement,E=p.callbackName||"openseadragon"+t.now(),C=window[E],O="$1"+E+"$2",_=p.param||"callback",k=p.callback;v=v.replace(/(=)\?(&|$)|\?\?/i,O),v+=(/\?/.test(v)?"&":"?")+_+"="+E,window[E]=function(I){if(C)window[E]=C;else try{delete window[E]}catch{}k&&t.isFunction(k)&&k(I)},m=document.createElement("script"),(p.async!==void 0||p.async!==!1)&&(m.async="async"),p.scriptCharset&&(m.charset=p.scriptCharset),m.src=v,m.onload=m.onreadystatechange=function(I,G){(G||!m.readyState||/loaded|complete/.test(m.readyState))&&(m.onload=m.onreadystatechange=null,x&&m.parentNode&&x.removeChild(m),m=void 0)},x.insertBefore(m,x.firstChild)},createFromDZI:function(){throw"OpenSeadragon.createFromDZI is deprecated, use Viewer.open."},parseXml:function(p){if(window.DOMParser)t.parseXml=function(m){var v=null,x;return x=new DOMParser,v=x.parseFromString(m,"text/xml"),v};else if(window.ActiveXObject)t.parseXml=function(m){var v=null;return v=new ActiveXObject("Microsoft.XMLDOM"),v.async=!1,v.loadXML(m),v};else throw new Error("Browser doesn't support XML DOM.");return t.parseXml(p)},parseJSON:function(p){return t.parseJSON=window.JSON.parse,t.parseJSON(p)},imageFormatSupported:function(p){return p=p||"",!!u[p.toLowerCase()]},setImageFormatsSupported:function(p){t.extend(u,p)}});var o=function(p){};t.console=window.console||{log:o,debug:o,info:o,warn:o,error:o,assert:o},t.Browser={vendor:t.BROWSERS.UNKNOWN,version:0,alpha:!0};var u={bmp:!1,jpeg:!0,jpg:!0,png:!0,tif:!1,wdp:!1},h={};(function(){var p=navigator.appVersion,m=navigator.userAgent,v;switch(navigator.appName){case"Microsoft Internet Explorer":window.attachEvent&&window.ActiveXObject&&(t.Browser.vendor=t.BROWSERS.IE,t.Browser.version=parseFloat(m.substring(m.indexOf("MSIE")+5,m.indexOf(";",m.indexOf("MSIE")))));break;case"Netscape":window.addEventListener&&(m.indexOf("Edge")>=0?(t.Browser.vendor=t.BROWSERS.EDGE,t.Browser.version=parseFloat(m.substring(m.indexOf("Edge")+5))):m.indexOf("Edg")>=0?(t.Browser.vendor=t.BROWSERS.CHROMEEDGE,t.Browser.version=parseFloat(m.substring(m.indexOf("Edg")+4))):m.indexOf("Firefox")>=0?(t.Browser.vendor=t.BROWSERS.FIREFOX,t.Browser.version=parseFloat(m.substring(m.indexOf("Firefox")+8))):m.indexOf("Safari")>=0?(t.Browser.vendor=m.indexOf("Chrome")>=0?t.BROWSERS.CHROME:t.BROWSERS.SAFARI,t.Browser.version=parseFloat(m.substring(m.substring(0,m.indexOf("Safari")).lastIndexOf("/")+1,m.indexOf("Safari")))):(v=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"),v.exec(m)!==null&&(t.Browser.vendor=t.BROWSERS.IE,t.Browser.version=parseFloat(RegExp.$1))));break;case"Opera":t.Browser.vendor=t.BROWSERS.OPERA,t.Browser.version=parseFloat(p);break}var x=window.location.search.substring(1),E=x.split("&"),C,O,_;for(_=0;_<E.length;_++)if(C=E[_],O=C.indexOf("="),O>0){var k=C.substring(0,O),I=C.substring(O+1);try{h[k]=decodeURIComponent(I)}catch{t.console.error("Ignoring malformed URL parameter: %s=%s",k,I)}}t.Browser.alpha=!(t.Browser.vendor===t.BROWSERS.CHROME&&t.Browser.version<2),t.Browser.opacity=!0,t.Browser.vendor===t.BROWSERS.IE&&t.Browser.version<11&&t.console.error("Internet Explorer versions < 11 are not supported by OpenSeadragon")})(),function(p){var m=p.requestAnimationFrame||p.mozRequestAnimationFrame||p.webkitRequestAnimationFrame||p.msRequestAnimationFrame,v=p.cancelAnimationFrame||p.mozCancelAnimationFrame||p.webkitCancelAnimationFrame||p.msCancelAnimationFrame;if(m&&v)t.requestAnimationFrame=function(){return m.apply(p,arguments)},t.cancelAnimationFrame=function(){return v.apply(p,arguments)};else{var x=[],E=[],C=0,O;t.requestAnimationFrame=function(_){return x.push([++C,_]),O||(O=setInterval(function(){if(x.length){var k=t.now(),I=E;for(E=x,x=I;E.length;)E.shift()[1](k)}else clearInterval(O),O=void 0},1e3/50)),C},t.cancelAnimationFrame=function(_){var k,I;for(k=0,I=x.length;k<I;k+=1)if(x[k][0]===_){x.splice(k,1);return}for(k=0,I=E.length;k<I;k+=1)if(E[k][0]===_){E.splice(k,1);return}}}}(window);function d(p,m){return m&&p!==document.body?document.body:p.offsetParent}}(i),function(t,n){e.exports?e.exports=n():t.OpenSeadragon=n()}(Jn,function(){return i}),function(t){var n={supportsFullScreen:!1,isFullScreen:function(){return!1},getFullScreenElement:function(){return null},requestFullScreen:function(){},exitFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",fullScreenErrorEventName:""};document.exitFullscreen?(n.supportsFullScreen=!0,n.getFullScreenElement=function(){return document.fullscreenElement},n.requestFullScreen=function(o){return o.requestFullscreen()},n.exitFullScreen=function(){document.exitFullscreen()},n.fullScreenEventName="fullscreenchange",n.fullScreenErrorEventName="fullscreenerror"):document.msExitFullscreen?(n.supportsFullScreen=!0,n.getFullScreenElement=function(){return document.msFullscreenElement},n.requestFullScreen=function(o){return o.msRequestFullscreen()},n.exitFullScreen=function(){document.msExitFullscreen()},n.fullScreenEventName="MSFullscreenChange",n.fullScreenErrorEventName="MSFullscreenError"):document.webkitExitFullscreen?(n.supportsFullScreen=!0,n.getFullScreenElement=function(){return document.webkitFullscreenElement},n.requestFullScreen=function(o){return o.webkitRequestFullscreen()},n.exitFullScreen=function(){document.webkitExitFullscreen()},n.fullScreenEventName="webkitfullscreenchange",n.fullScreenErrorEventName="webkitfullscreenerror"):document.webkitCancelFullScreen?(n.supportsFullScreen=!0,n.getFullScreenElement=function(){return document.webkitCurrentFullScreenElement},n.requestFullScreen=function(o){return o.webkitRequestFullScreen()},n.exitFullScreen=function(){document.webkitCancelFullScreen()},n.fullScreenEventName="webkitfullscreenchange",n.fullScreenErrorEventName="webkitfullscreenerror"):document.mozCancelFullScreen&&(n.supportsFullScreen=!0,n.getFullScreenElement=function(){return document.mozFullScreenElement},n.requestFullScreen=function(o){return o.mozRequestFullScreen()},n.exitFullScreen=function(){document.mozCancelFullScreen()},n.fullScreenEventName="mozfullscreenchange",n.fullScreenErrorEventName="mozfullscreenerror"),n.isFullScreen=function(){return n.getFullScreenElement()!==null},n.cancelFullScreen=function(){t.console.error("cancelFullScreen is deprecated. Use exitFullScreen instead."),n.exitFullScreen()},t.extend(t,n)}(i),function(t){t.EventSource=function(){this.events={}},t.EventSource.prototype={addOnceHandler:function(n,o,u,h,d){var p=this;h=h||1;var m=0,v=function(x){return m++,m===h&&p.removeHandler(n,v),o(x)};this.addHandler(n,v,u,d)},addHandler:function(n,o,u,h){var d=this.events[n];if(d||(this.events[n]=d=[]),o&&t.isFunction(o)){var p=d.length,m={handler:o,userData:u||null,priority:h||0};for(d[p]=m;p>0&&d[p-1].priority<d[p].priority;)d[p]=d[p-1],d[p-1]=m,p--}},removeHandler:function(n,o){var u=this.events[n],h=[],d;if(u&&t.isArray(u)){for(d=0;d<u.length;d++)u[d].handler!==o&&h.push(u[d]);this.events[n]=h}},numberOfHandlers:function(n){var o=this.events[n];return o?o.length:0},removeAllHandlers:function(n){if(n)this.events[n]=[];else for(var o in this.events)this.events[o]=[]},getHandler:function(n){var o=this.events[n];return!o||!o.length?null:(o=o.length===1?[o[0]]:Array.apply(null,o),function(u,h){var d,p=o.length;for(d=0;d<p;d++)o[d]&&(h.eventSource=u,h.userData=o[d].userData,o[d].handler(h))})},raiseEvent:function(n,o){var u=this.getHandler(n);if(u)return u(this,o||{})}}}(i),function(t){var n={};t.MouseTracker=function(L){var z=arguments;t.isPlainObject(L)||(L={element:z[0],clickTimeThreshold:z[1],clickDistThreshold:z[2]}),this.hash=Math.random(),this.element=t.getElement(L.element),this.clickTimeThreshold=L.clickTimeThreshold||t.DEFAULT_SETTINGS.clickTimeThreshold,this.clickDistThreshold=L.clickDistThreshold||t.DEFAULT_SETTINGS.clickDistThreshold,this.dblClickTimeThreshold=L.dblClickTimeThreshold||t.DEFAULT_SETTINGS.dblClickTimeThreshold,this.dblClickDistThreshold=L.dblClickDistThreshold||t.DEFAULT_SETTINGS.dblClickDistThreshold,this.userData=L.userData||null,this.stopDelay=L.stopDelay||50,this.preProcessEventHandler=L.preProcessEventHandler||null,this.contextMenuHandler=L.contextMenuHandler||null,this.enterHandler=L.enterHandler||null,this.leaveHandler=L.leaveHandler||null,this.exitHandler=L.exitHandler||null,this.overHandler=L.overHandler||null,this.outHandler=L.outHandler||null,this.pressHandler=L.pressHandler||null,this.nonPrimaryPressHandler=L.nonPrimaryPressHandler||null,this.releaseHandler=L.releaseHandler||null,this.nonPrimaryReleaseHandler=L.nonPrimaryReleaseHandler||null,this.moveHandler=L.moveHandler||null,this.scrollHandler=L.scrollHandler||null,this.clickHandler=L.clickHandler||null,this.dblClickHandler=L.dblClickHandler||null,this.dragHandler=L.dragHandler||null,this.dragEndHandler=L.dragEndHandler||null,this.pinchHandler=L.pinchHandler||null,this.stopHandler=L.stopHandler||null,this.keyDownHandler=L.keyDownHandler||null,this.keyUpHandler=L.keyUpHandler||null,this.keyHandler=L.keyHandler||null,this.focusHandler=L.focusHandler||null,this.blurHandler=L.blurHandler||null;var W=this;n[this.hash]={click:function(X){Z(W,X)},dblclick:function(X){ae(W,X)},keydown:function(X){te(W,X)},keyup:function(X){Q(W,X)},keypress:function(X){le(W,X)},focus:function(X){ce(W,X)},blur:function(X){me(W,X)},contextmenu:function(X){Pe(W,X)},wheel:function(X){be(W,X)},mousewheel:function(X){fe(W,X)},DOMMouseScroll:function(X){fe(W,X)},MozMousePixelScroll:function(X){fe(W,X)},losecapture:function(X){Fe(W,X)},mouseenter:function(X){J(W,X)},mouseleave:function(X){Et(W,X)},mouseover:function(X){yt(W,X)},mouseout:function(X){mt(W,X)},mousedown:function(X){Tt(W,X)},mouseup:function(X){Bt(W,X)},mousemove:function(X){$e(W,X)},touchstart:function(X){Ge(W,X)},touchend:function(X){Te(W,X)},touchmove:function(X){ye(W,X)},touchcancel:function(X){ke(W,X)},gesturestart:function(X){_e(W,X)},gesturechange:function(X){$(W,X)},gotpointercapture:function(X){Le(W,X)},lostpointercapture:function(X){st(W,X)},pointerenter:function(X){J(W,X)},pointerleave:function(X){Et(W,X)},pointerover:function(X){yt(W,X)},pointerout:function(X){mt(W,X)},pointerdown:function(X){Tt(W,X)},pointerup:function(X){Bt(W,X)},pointermove:function(X){$e(W,X)},pointercancel:function(X){tn(W,X)},pointerupcaptured:function(X){At(W,X)},pointermovecaptured:function(X){wt(W,X)},tracking:!1,activePointersLists:[],lastClickPos:null,dblClickTimeOut:null,pinchGPoints:[],lastPinchDist:0,currentPinchDist:0,lastPinchCenter:null,currentPinchCenter:null,sentDragEvent:!1},this.hasGestureHandlers=!!(this.pressHandler||this.nonPrimaryPressHandler||this.releaseHandler||this.nonPrimaryReleaseHandler||this.clickHandler||this.dblClickHandler||this.dragHandler||this.dragEndHandler||this.pinchHandler),this.hasScrollHandler=!!this.scrollHandler,t.MouseTracker.havePointerEvents&&t.setElementPointerEvents(this.element,"auto"),this.exitHandler&&t.console.error("MouseTracker.exitHandler is deprecated. Use MouseTracker.leaveHandler instead."),L.startDisabled||this.setTracking(!0)},t.MouseTracker.prototype={destroy:function(){p(this),this.element=null,n[this.hash]=null,delete n[this.hash]},isTracking:function(){return n[this.hash].tracking},setTracking:function(L){return L?d(this):p(this),this},getActivePointersListByType:function(L){var z=n[this.hash],W,X=z.activePointersLists.length,Se;for(W=0;W<X;W++)if(z.activePointersLists[W].type===L)return z.activePointersLists[W];return Se=new t.MouseTracker.GesturePointList(L),z.activePointersLists.push(Se),Se},getActivePointerCount:function(){var L=n[this.hash],z,W=L.activePointersLists.length,X=0;for(z=0;z<W;z++)X+=L.activePointersLists[z].getLength();return X},preProcessEventHandler:function(){},contextMenuHandler:function(){},enterHandler:function(){},leaveHandler:function(){},exitHandler:function(){},overHandler:function(){},outHandler:function(){},pressHandler:function(){},nonPrimaryPressHandler:function(){},releaseHandler:function(){},nonPrimaryReleaseHandler:function(){},moveHandler:function(){},scrollHandler:function(){},clickHandler:function(){},dblClickHandler:function(){},dragHandler:function(){},dragEndHandler:function(){},pinchHandler:function(){},stopHandler:function(){},keyDownHandler:function(){},keyUpHandler:function(){},keyHandler:function(){},focusHandler:function(){},blurHandler:function(){}};var o=function(){try{return window.self!==window.top}catch{return!0}}();function u(L){try{return L.addEventListener&&L.removeEventListener}catch{return!1}}t.MouseTracker.gesturePointVelocityTracker=function(){var L=[],z=0,W=0,X=function(je,rt){return je.hash.toString()+rt.type+rt.id.toString()},Se=function(){var je,rt=L.length,Cn,Kt,ti=t.now(),ao,Oi,wr;for(ao=ti-W,W=ti,je=0;je<rt;je++)Cn=L[je],Kt=Cn.gPoint,Kt.direction=Math.atan2(Kt.currentPos.y-Cn.lastPos.y,Kt.currentPos.x-Cn.lastPos.x),Oi=Cn.lastPos.distanceTo(Kt.currentPos),Cn.lastPos=Kt.currentPos,wr=1e3*Oi/(ao+1),Kt.speed=.75*wr+.25*Kt.speed},Ue=function(je,rt){var Cn=X(je,rt);L.push({guid:Cn,gPoint:rt,lastPos:rt.currentPos}),L.length===1&&(W=t.now(),z=window.setInterval(Se,50))},ft=function(je,rt){var Cn=X(je,rt),Kt,ti=L.length;for(Kt=0;Kt<ti;Kt++)if(L[Kt].guid===Cn){L.splice(Kt,1),ti--,ti===0&&window.clearInterval(z);break}};return{addPoint:Ue,removePoint:ft}}(),t.MouseTracker.captureElement=document,t.MouseTracker.wheelEventName=t.Browser.vendor===t.BROWSERS.IE&&t.Browser.version>8||"onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==void 0?"mousewheel":"DOMMouseScroll",t.MouseTracker.subscribeEvents=["click","dblclick","keydown","keyup","keypress","focus","blur","contextmenu",t.MouseTracker.wheelEventName],t.MouseTracker.wheelEventName==="DOMMouseScroll"&&t.MouseTracker.subscribeEvents.push("MozMousePixelScroll"),window.PointerEvent?(t.MouseTracker.havePointerEvents=!0,t.MouseTracker.subscribeEvents.push("pointerenter","pointerleave","pointerover","pointerout","pointerdown","pointerup","pointermove","pointercancel"),t.MouseTracker.havePointerCapture=function(){var L=document.createElement("div");return t.isFunction(L.setPointerCapture)&&t.isFunction(L.releasePointerCapture)}(),t.MouseTracker.havePointerCapture&&t.MouseTracker.subscribeEvents.push("gotpointercapture","lostpointercapture")):(t.MouseTracker.havePointerEvents=!1,t.MouseTracker.subscribeEvents.push("mouseenter","mouseleave","mouseover","mouseout","mousedown","mouseup","mousemove"),t.MouseTracker.mousePointerId="legacy-mouse",t.MouseTracker.havePointerCapture=function(){var L=document.createElement("div");return t.isFunction(L.setCapture)&&t.isFunction(L.releaseCapture)}(),t.MouseTracker.havePointerCapture&&t.MouseTracker.subscribeEvents.push("losecapture"),"ontouchstart"in window&&t.MouseTracker.subscribeEvents.push("touchstart","touchend","touchmove","touchcancel"),"ongesturestart"in window&&t.MouseTracker.subscribeEvents.push("gesturestart","gesturechange")),t.MouseTracker.GesturePointList=function(L){this._gPoints=[],this.type=L,this.buttons=0,this.contacts=0,this.clicks=0,this.captureCount=0},t.MouseTracker.GesturePointList.prototype={getLength:function(){return this._gPoints.length},asArray:function(){return this._gPoints},add:function(L){return this._gPoints.push(L)},removeById:function(L){var z,W=this._gPoints.length;for(z=0;z<W;z++)if(this._gPoints[z].id===L){this._gPoints.splice(z,1);break}return this._gPoints.length},getByIndex:function(L){return L<this._gPoints.length?this._gPoints[L]:null},getById:function(L){var z,W=this._gPoints.length;for(z=0;z<W;z++)if(this._gPoints[z].id===L)return this._gPoints[z];return null},getPrimary:function(L){var z,W=this._gPoints.length;for(z=0;z<W;z++)if(this._gPoints[z].isPrimary)return this._gPoints[z];return null},addContact:function(){++this.contacts,this.contacts>1&&(this.type==="mouse"||this.type==="pen")&&(t.console.warn("GesturePointList.addContact() Implausible contacts value"),this.contacts=1)},removeContact:function(){--this.contacts,this.contacts<0&&(this.contacts=0)}};function h(L){var z=n[L.hash],W,X,Se,Ue,ft,je=z.activePointersLists.length;for(W=0;W<je;W++)if(Se=z.activePointersLists[W],Se.getLength()>0){for(ft=[],Ue=Se.asArray(),X=0;X<Ue.length;X++)ft.push(Ue[X]);for(X=0;X<ft.length;X++)Gt(L,Se,ft[X])}for(W=0;W<je;W++)z.activePointersLists.pop();z.sentDragEvent=!1}function d(L){var z=n[L.hash],W,X;if(!z.tracking){for(X=0;X<t.MouseTracker.subscribeEvents.length;X++)W=t.MouseTracker.subscribeEvents[X],t.addEvent(L.element,W,z[W],W===t.MouseTracker.wheelEventName?{passive:!1,capture:!1}:!1);h(L),z.tracking=!0}}function p(L){var z=n[L.hash],W,X;if(z.tracking){for(X=0;X<t.MouseTracker.subscribeEvents.length;X++)W=t.MouseTracker.subscribeEvents[X],t.removeEvent(L.element,W,z[W],!1);h(L),z.tracking=!1}}function m(L,z){var W=n[L.hash];if(z==="pointerevent")return{upName:"pointerup",upHandler:W.pointerupcaptured,moveName:"pointermove",moveHandler:W.pointermovecaptured};if(z==="mouse")return{upName:"pointerup",upHandler:W.pointerupcaptured,moveName:"pointermove",moveHandler:W.pointermovecaptured};if(z==="touch")return{upName:"touchend",upHandler:W.touchendcaptured,moveName:"touchmove",moveHandler:W.touchmovecaptured};throw new Error("MouseTracker.getCaptureEventParams: Unknown pointer type.")}function v(L,z){var W;if(t.MouseTracker.havePointerCapture)if(t.MouseTracker.havePointerEvents)try{L.element.setPointerCapture(z.id)}catch{t.console.warn("setPointerCapture() called on invalid pointer ID");return}else L.element.setCapture(!0);else W=m(L,t.MouseTracker.havePointerEvents?"pointerevent":z.type),o&&u(window.top)&&t.addEvent(window.top,W.upName,W.upHandler,!0),t.addEvent(t.MouseTracker.captureElement,W.upName,W.upHandler,!0),t.addEvent(t.MouseTracker.captureElement,W.moveName,W.moveHandler,!0);we(L,z,!0)}function x(L,z){var W,X,Se;if(t.MouseTracker.havePointerCapture)if(t.MouseTracker.havePointerEvents){if(X=L.getActivePointersListByType(z.type),Se=X.getById(z.id),!Se||!Se.captured)return;try{L.element.releasePointerCapture(z.id)}catch{}}else L.element.releaseCapture();else W=m(L,t.MouseTracker.havePointerEvents?"pointerevent":z.type),o&&u(window.top)&&t.removeEvent(window.top,W.upName,W.upHandler,!0),t.removeEvent(t.MouseTracker.captureElement,W.moveName,W.moveHandler,!0),t.removeEvent(t.MouseTracker.captureElement,W.upName,W.upHandler,!0);we(L,z,!1)}function E(L){return t.MouseTracker.havePointerEvents?L.pointerId:t.MouseTracker.mousePointerId}function C(L){return t.MouseTracker.havePointerEvents?L.pointerType||(t.Browser.vendor===t.BROWSERS.IE?"mouse":""):"mouse"}function O(L){return t.MouseTracker.havePointerEvents?L.isPrimary:!0}function _(L){return t.getMousePosition(L)}function k(L,z){return I(_(L),z)}function I(L,z){var W=t.getElementOffset(z);return L.minus(W)}function G(L,z){return new t.Point((L.x+z.x)/2,(L.y+z.y)/2)}function Z(L,z){var W={originalEvent:z,eventType:"click",pointerType:"mouse",isEmulated:!1};K(L,W),W.preventDefault&&!W.defaultPrevented&&t.cancelEvent(z),W.stopPropagation&&t.stopEvent(z)}function ae(L,z){var W={originalEvent:z,eventType:"dblclick",pointerType:"mouse",isEmulated:!1};K(L,W),W.preventDefault&&!W.defaultPrevented&&t.cancelEvent(z),W.stopPropagation&&t.stopEvent(z)}function te(L,z){var W=null,X={originalEvent:z,eventType:"keydown",pointerType:"",isEmulated:!1};K(L,X),L.keyDownHandler&&!X.preventGesture&&!X.defaultPrevented&&(W={eventSource:L,keyCode:z.keyCode?z.keyCode:z.charCode,ctrl:z.ctrlKey,shift:z.shiftKey,alt:z.altKey,meta:z.metaKey,originalEvent:z,preventDefault:X.preventDefault||X.defaultPrevented,userData:L.userData},L.keyDownHandler(W)),(W&&W.preventDefault||X.preventDefault&&!X.defaultPrevented)&&t.cancelEvent(z),X.stopPropagation&&t.stopEvent(z)}function Q(L,z){var W=null,X={originalEvent:z,eventType:"keyup",pointerType:"",isEmulated:!1};K(L,X),L.keyUpHandler&&!X.preventGesture&&!X.defaultPrevented&&(W={eventSource:L,keyCode:z.keyCode?z.keyCode:z.charCode,ctrl:z.ctrlKey,shift:z.shiftKey,alt:z.altKey,meta:z.metaKey,originalEvent:z,preventDefault:X.preventDefault||X.defaultPrevented,userData:L.userData},L.keyUpHandler(W)),(W&&W.preventDefault||X.preventDefault&&!X.defaultPrevented)&&t.cancelEvent(z),X.stopPropagation&&t.stopEvent(z)}function le(L,z){var W=null,X={originalEvent:z,eventType:"keypress",pointerType:"",isEmulated:!1};K(L,X),L.keyHandler&&!X.preventGesture&&!X.defaultPrevented&&(W={eventSource:L,keyCode:z.keyCode?z.keyCode:z.charCode,ctrl:z.ctrlKey,shift:z.shiftKey,alt:z.altKey,meta:z.metaKey,originalEvent:z,preventDefault:X.preventDefault||X.defaultPrevented,userData:L.userData},L.keyHandler(W)),(W&&W.preventDefault||X.preventDefault&&!X.defaultPrevented)&&t.cancelEvent(z),X.stopPropagation&&t.stopEvent(z)}function ce(L,z){var W={originalEvent:z,eventType:"focus",pointerType:"",isEmulated:!1};K(L,W),L.focusHandler&&!W.preventGesture&&L.focusHandler({eventSource:L,originalEvent:z,userData:L.userData})}function me(L,z){var W={originalEvent:z,eventType:"blur",pointerType:"",isEmulated:!1};K(L,W),L.blurHandler&&!W.preventGesture&&L.blurHandler({eventSource:L,originalEvent:z,userData:L.userData})}function Pe(L,z){var W=null,X={originalEvent:z,eventType:"contextmenu",pointerType:"mouse",isEmulated:!1};K(L,X),L.contextMenuHandler&&!X.preventGesture&&!X.defaultPrevented&&(W={eventSource:L,position:I(_(z),L.element),originalEvent:X.originalEvent,preventDefault:X.preventDefault||X.defaultPrevented,userData:L.userData},L.contextMenuHandler(W)),(W&&W.preventDefault||X.preventDefault&&!X.defaultPrevented)&&t.cancelEvent(z),X.stopPropagation&&t.stopEvent(z)}function be(L,z){ve(L,z,z)}function fe(L,z){var W={target:z.target||z.srcElement,type:"wheel",shiftKey:z.shiftKey||!1,clientX:z.clientX,clientY:z.clientY,pageX:z.pageX?z.pageX:z.clientX,pageY:z.pageY?z.pageY:z.clientY,deltaMode:z.type==="MozMousePixelScroll"?0:1,deltaX:0,deltaZ:0};t.MouseTracker.wheelEventName==="mousewheel"?W.deltaY=-z.wheelDelta/t.DEFAULT_SETTINGS.pixelsPerWheelLine:W.deltaY=z.detail,ve(L,W,z)}function ve(L,z,W){var X=0,Se,Ue=null;X=z.deltaY<0?1:-1,Se={originalEvent:z,eventType:"wheel",pointerType:"mouse",isEmulated:z!==W},K(L,Se),L.scrollHandler&&!Se.preventGesture&&!Se.defaultPrevented&&(Ue={eventSource:L,pointerType:"mouse",position:k(z,L.element),scroll:X,shift:z.shiftKey,isTouchEvent:!1,originalEvent:W,preventDefault:Se.preventDefault||Se.defaultPrevented,userData:L.userData},L.scrollHandler(Ue)),Se.stopPropagation&&t.stopEvent(W),(Ue&&Ue.preventDefault||Se.preventDefault&&!Se.defaultPrevented)&&t.cancelEvent(W)}function Fe(L,z){var W={id:t.MouseTracker.mousePointerId,type:"mouse"},X={originalEvent:z,eventType:"lostpointercapture",pointerType:"mouse",isEmulated:!1};K(L,X),z.target===L.element&&we(L,W,!1),X.stopPropagation&&t.stopEvent(z)}function Ge(L,z){var W,X,Se=z.changedTouches.length,Ue,ft=L.getActivePointersListByType("touch");W=t.now(),ft.getLength()>z.touches.length-Se&&t.console.warn("Tracked touch contact count doesn't match event.touches.length");var je={originalEvent:z,eventType:"pointerdown",pointerType:"touch",isEmulated:!1};for(K(L,je),X=0;X<Se;X++)Ue={id:z.changedTouches[X].identifier,type:"touch",isPrimary:ft.getLength()===0,currentPos:_(z.changedTouches[X]),currentTime:W},ze(L,je,Ue),bt(L,je,Ue,0),we(L,Ue,!0);je.preventDefault&&!je.defaultPrevented&&t.cancelEvent(z),je.stopPropagation&&t.stopEvent(z)}function Te(L,z){var W,X,Se=z.changedTouches.length,Ue;W=t.now();var ft={originalEvent:z,eventType:"pointerup",pointerType:"touch",isEmulated:!1};for(K(L,ft),X=0;X<Se;X++)Ue={id:z.changedTouches[X].identifier,type:"touch",currentPos:_(z.changedTouches[X]),currentTime:W},Rt(L,ft,Ue,0),we(L,Ue,!1),Ne(L,ft,Ue);ft.preventDefault&&!ft.defaultPrevented&&t.cancelEvent(z),ft.stopPropagation&&t.stopEvent(z)}function ye(L,z){var W,X,Se=z.changedTouches.length,Ue;W=t.now();var ft={originalEvent:z,eventType:"pointermove",pointerType:"touch",isEmulated:!1};for(K(L,ft),X=0;X<Se;X++)Ue={id:z.changedTouches[X].identifier,type:"touch",currentPos:_(z.changedTouches[X]),currentTime:W},Dt(L,ft,Ue);ft.preventDefault&&!ft.defaultPrevented&&t.cancelEvent(z),ft.stopPropagation&&t.stopEvent(z)}function ke(L,z){var W=z.changedTouches.length,X,Se,Ue={originalEvent:z,eventType:"pointercancel",pointerType:"touch",isEmulated:!1};for(K(L,Ue),X=0;X<W;X++)Se={id:z.changedTouches[X].identifier,type:"touch"},he(L,Ue,Se);Ue.stopPropagation&&t.stopEvent(z)}function _e(L,z){return t.eventIsCanceled(z)||z.preventDefault(),!1}function $(L,z){return t.eventIsCanceled(z)||z.preventDefault(),!1}function Le(L,z){var W={originalEvent:z,eventType:"gotpointercapture",pointerType:C(z),isEmulated:!1};K(L,W),z.target===L.element&&we(L,{id:z.pointerId,type:C(z)},!0),W.stopPropagation&&t.stopEvent(z)}function st(L,z){var W={originalEvent:z,eventType:"lostpointercapture",pointerType:C(z),isEmulated:!1};K(L,W),z.target===L.element&&we(L,{id:z.pointerId,type:C(z)},!1),W.stopPropagation&&t.stopEvent(z)}function J(L,z){var W={id:E(z),type:C(z),isPrimary:O(z),currentPos:_(z),currentTime:t.now()},X={originalEvent:z,eventType:"pointerenter",pointerType:W.type,isEmulated:!1};K(L,X),ze(L,X,W)}function Et(L,z){var W={id:E(z),type:C(z),isPrimary:O(z),currentPos:_(z),currentTime:t.now()},X={originalEvent:z,eventType:"pointerleave",pointerType:W.type,isEmulated:!1};K(L,X),Ne(L,X,W)}function yt(L,z){var W={id:E(z),type:C(z),isPrimary:O(z),currentPos:_(z),currentTime:t.now()},X={originalEvent:z,eventType:"pointerover",pointerType:W.type,isEmulated:!1};K(L,X),Qe(L,X,W),X.preventDefault&&!X.defaultPrevented&&t.cancelEvent(z),X.stopPropagation&&t.stopEvent(z)}function mt(L,z){var W={id:E(z),type:C(z),isPrimary:O(z),currentPos:_(z),currentTime:t.now()},X={originalEvent:z,eventType:"pointerout",pointerType:W.type,isEmulated:!1};K(L,X),Xe(L,X,W),X.preventDefault&&!X.defaultPrevented&&t.cancelEvent(z),X.stopPropagation&&t.stopEvent(z)}function Tt(L,z){var W={id:E(z),type:C(z),isPrimary:O(z),currentPos:_(z),currentTime:t.now()},X=t.MouseTracker.havePointerEvents&&W.type==="touch"&&t.Browser.vendor!==t.BROWSERS.IE,Se={originalEvent:z,eventType:"pointerdown",pointerType:W.type,isEmulated:!1};K(L,Se),bt(L,Se,W,z.button),Se.preventDefault&&!Se.defaultPrevented&&t.cancelEvent(z),Se.stopPropagation&&t.stopEvent(z),Se.shouldCapture&&(X?we(L,W,!0):v(L,W))}function Bt(L,z){at(L,z)}function At(L,z){var W=L.getActivePointersListByType(C(z));W.getById(z.pointerId)&&at(L,z),t.stopEvent(z)}function at(L,z){var W;W={id:E(z),type:C(z),isPrimary:O(z),currentPos:_(z),currentTime:t.now()};var X={originalEvent:z,eventType:"pointerup",pointerType:W.type,isEmulated:!1};K(L,X),Rt(L,X,W,z.button),X.preventDefault&&!X.defaultPrevented&&t.cancelEvent(z),X.stopPropagation&&t.stopEvent(z),X.shouldReleaseCapture&&(z.target===L.element?x(L,W):we(L,W,!1))}function $e(L,z){Lt(L,z)}function wt(L,z){var W=L.getActivePointersListByType(C(z));W.getById(z.pointerId)&&Lt(L,z),t.stopEvent(z)}function Lt(L,z){var W={id:E(z),type:C(z),isPrimary:O(z),currentPos:_(z),currentTime:t.now()},X={originalEvent:z,eventType:"pointermove",pointerType:W.type,isEmulated:!1};K(L,X),Dt(L,X,W),X.preventDefault&&!X.defaultPrevented&&t.cancelEvent(z),X.stopPropagation&&t.stopEvent(z)}function tn(L,z){var W={id:z.pointerId,type:C(z)},X={originalEvent:z,eventType:"pointercancel",pointerType:W.type,isEmulated:!1};K(L,X),he(L,X,W),X.stopPropagation&&t.stopEvent(z)}function kt(L,z){return z.speed=0,z.direction=0,z.contactPos=z.currentPos,z.contactTime=z.currentTime,z.lastPos=z.currentPos,z.lastTime=z.currentTime,L.add(z)}function Gt(L,z,W){var X,Se=z.getById(W.id);return Se?(Se.captured&&(t.console.warn("stopTrackingPointer() called on captured pointer"),x(L,Se)),z.removeContact(),X=z.removeById(W.id)):X=z.getLength(),X}function D(L,z){switch(z.eventType){case"pointermove":z.isStoppable=!0,z.isCancelable=!0,z.preventDefault=!1,z.preventGesture=!L.hasGestureHandlers,z.stopPropagation=!1;break;case"pointerover":case"pointerout":case"contextmenu":case"keydown":case"keyup":case"keypress":z.isStoppable=!0,z.isCancelable=!0,z.preventDefault=!1,z.preventGesture=!1,z.stopPropagation=!1;break;case"pointerdown":z.isStoppable=!0,z.isCancelable=!0,z.preventDefault=!1,z.preventGesture=!L.hasGestureHandlers,z.stopPropagation=!1;break;case"pointerup":z.isStoppable=!0,z.isCancelable=!0,z.preventDefault=!1,z.preventGesture=!L.hasGestureHandlers,z.stopPropagation=!1;break;case"wheel":z.isStoppable=!0,z.isCancelable=!0,z.preventDefault=!1,z.preventGesture=!L.hasScrollHandler,z.stopPropagation=!1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":z.isStoppable=!0,z.isCancelable=!1,z.preventDefault=!1,z.preventGesture=!1,z.stopPropagation=!1;break;case"click":z.isStoppable=!0,z.isCancelable=!0,z.preventDefault=!!L.clickHandler,z.preventGesture=!1,z.stopPropagation=!1;break;case"dblclick":z.isStoppable=!0,z.isCancelable=!0,z.preventDefault=!!L.dblClickHandler,z.preventGesture=!1,z.stopPropagation=!1;break;case"focus":case"blur":case"pointerenter":case"pointerleave":default:z.isStoppable=!1,z.isCancelable=!1,z.preventDefault=!1,z.preventGesture=!1,z.stopPropagation=!1;break}}function K(L,z){z.eventSource=L,z.eventPhase=z.originalEvent&&typeof z.originalEvent.eventPhase<"u"?z.originalEvent.eventPhase:0,z.defaultPrevented=t.eventIsCanceled(z.originalEvent),z.shouldCapture=!1,z.shouldReleaseCapture=!1,z.userData=L.userData,D(L,z),L.preProcessEventHandler&&L.preProcessEventHandler(z)}function we(L,z,W){var X=L.getActivePointersListByType(z.type),Se=X.getById(z.id);Se?W&&!Se.captured?(Se.captured=!0,X.captureCount++):!W&&Se.captured&&(Se.captured=!1,X.captureCount--,X.captureCount<0&&(X.captureCount=0,t.console.warn("updatePointerCaptured() - pointsList.captureCount went negative"))):t.console.warn("updatePointerCaptured() called on untracked pointer")}function ze(L,z,W){var X=L.getActivePointersListByType(W.type),Se;Se=X.getById(W.id),Se?(Se.insideElement=!0,Se.lastPos=Se.currentPos,Se.lastTime=Se.currentTime,Se.currentPos=W.currentPos,Se.currentTime=W.currentTime,W=Se):(W.captured=!1,W.insideElementPressed=!1,W.insideElement=!0,kt(X,W)),L.enterHandler&&L.enterHandler({eventSource:L,pointerType:W.type,position:I(W.currentPos,L.element),buttons:X.buttons,pointers:L.getActivePointerCount(),insideElementPressed:W.insideElementPressed,buttonDownAny:X.buttons!==0,isTouchEvent:W.type==="touch",originalEvent:z.originalEvent,userData:L.userData})}function Ne(L,z,W){var X=L.getActivePointersListByType(W.type),Se,Ue;Se=X.getById(W.id),Se?(Se.captured?(Se.insideElement=!1,Se.lastPos=Se.currentPos,Se.lastTime=Se.currentTime,Se.currentPos=W.currentPos,Se.currentTime=W.currentTime):Gt(L,X,Se),W=Se):(W.captured=!1,W.insideElementPressed=!1),(L.leaveHandler||L.exitHandler)&&(Ue={eventSource:L,pointerType:W.type,position:W.currentPos&&I(W.currentPos,L.element),buttons:X.buttons,pointers:L.getActivePointerCount(),insideElementPressed:W.insideElementPressed,buttonDownAny:X.buttons!==0,isTouchEvent:W.type==="touch",originalEvent:z.originalEvent,userData:L.userData},L.leaveHandler&&L.leaveHandler(Ue),L.exitHandler&&L.exitHandler(Ue))}function Qe(L,z,W){var X,Se;X=L.getActivePointersListByType(W.type),Se=X.getById(W.id),Se?W=Se:(W.captured=!1,W.insideElementPressed=!1),L.overHandler&&L.overHandler({eventSource:L,pointerType:W.type,position:I(W.currentPos,L.element),buttons:X.buttons,pointers:L.getActivePointerCount(),insideElementPressed:W.insideElementPressed,buttonDownAny:X.buttons!==0,isTouchEvent:W.type==="touch",originalEvent:z.originalEvent,userData:L.userData})}function Xe(L,z,W){var X,Se;X=L.getActivePointersListByType(W.type),Se=X.getById(W.id),Se?W=Se:(W.captured=!1,W.insideElementPressed=!1),L.outHandler&&L.outHandler({eventSource:L,pointerType:W.type,position:W.currentPos&&I(W.currentPos,L.element),buttons:X.buttons,pointers:L.getActivePointerCount(),insideElementPressed:W.insideElementPressed,buttonDownAny:X.buttons!==0,isTouchEvent:W.type==="touch",originalEvent:z.originalEvent,userData:L.userData})}function bt(L,z,W,X){var Se=n[L.hash],Ue=L.getActivePointersListByType(W.type),ft;if(typeof z.originalEvent.buttons<"u"?Ue.buttons=z.originalEvent.buttons:X===0?Ue.buttons|=1:X===1?Ue.buttons|=4:X===2?Ue.buttons|=2:X===3?Ue.buttons|=8:X===4?Ue.buttons|=16:X===5&&(Ue.buttons|=32),X!==0){z.shouldCapture=!1,z.shouldReleaseCapture=!1,L.nonPrimaryPressHandler&&!z.preventGesture&&!z.defaultPrevented&&(z.preventDefault=!0,L.nonPrimaryPressHandler({eventSource:L,pointerType:W.type,position:I(W.currentPos,L.element),button:X,buttons:Ue.buttons,isTouchEvent:W.type==="touch",originalEvent:z.originalEvent,userData:L.userData}));return}ft=Ue.getById(W.id),ft?(ft.insideElementPressed=!0,ft.insideElement=!0,ft.originalTarget=z.originalEvent.target,ft.contactPos=W.currentPos,ft.contactTime=W.currentTime,ft.lastPos=ft.currentPos,ft.lastTime=ft.currentTime,ft.currentPos=W.currentPos,ft.currentTime=W.currentTime,W=ft):(W.captured=!1,W.insideElementPressed=!0,W.insideElement=!0,W.originalTarget=z.originalEvent.target,kt(Ue,W)),Ue.addContact(),!z.preventGesture&&!z.defaultPrevented?(z.shouldCapture=!0,z.shouldReleaseCapture=!1,z.preventDefault=!0,(L.dragHandler||L.dragEndHandler||L.pinchHandler)&&t.MouseTracker.gesturePointVelocityTracker.addPoint(L,W),Ue.contacts===1?L.pressHandler&&!z.preventGesture&&L.pressHandler({eventSource:L,pointerType:W.type,position:I(W.contactPos,L.element),buttons:Ue.buttons,isTouchEvent:W.type==="touch",originalEvent:z.originalEvent,userData:L.userData}):Ue.contacts===2&&L.pinchHandler&&W.type==="touch"&&(Se.pinchGPoints=Ue.asArray(),Se.lastPinchDist=Se.currentPinchDist=Se.pinchGPoints[0].currentPos.distanceTo(Se.pinchGPoints[1].currentPos),Se.lastPinchCenter=Se.currentPinchCenter=G(Se.pinchGPoints[0].currentPos,Se.pinchGPoints[1].currentPos))):(z.shouldCapture=!1,z.shouldReleaseCapture=!1)}function Rt(L,z,W,X){var Se=n[L.hash],Ue=L.getActivePointersListByType(W.type),ft,je,rt,Cn=!1,Kt;if(typeof z.originalEvent.buttons<"u"?Ue.buttons=z.originalEvent.buttons:X===0?Ue.buttons^=-2:X===1?Ue.buttons^=-5:X===2?Ue.buttons^=-3:X===3?Ue.buttons^=-9:X===4?Ue.buttons^=-17:X===5&&(Ue.buttons^=-33),z.shouldCapture=!1,X!==0){z.shouldReleaseCapture=!1,L.nonPrimaryReleaseHandler&&!z.preventGesture&&!z.defaultPrevented&&(z.preventDefault=!0,L.nonPrimaryReleaseHandler({eventSource:L,pointerType:W.type,position:I(W.currentPos,L.element),button:X,buttons:Ue.buttons,isTouchEvent:W.type==="touch",originalEvent:z.originalEvent,userData:L.userData}));return}rt=Ue.getById(W.id),rt?(Ue.removeContact(),rt.captured&&(Cn=!0),rt.lastPos=rt.currentPos,rt.lastTime=rt.currentTime,rt.currentPos=W.currentPos,rt.currentTime=W.currentTime,rt.insideElement||Gt(L,Ue,rt),ft=rt.currentPos,je=rt.currentTime):(W.captured=!1,W.insideElementPressed=!1,W.insideElement=!0,kt(Ue,W),rt=W),!z.preventGesture&&!z.defaultPrevented&&(Cn?(z.shouldReleaseCapture=!0,z.preventDefault=!0,(L.dragHandler||L.dragEndHandler||L.pinchHandler)&&t.MouseTracker.gesturePointVelocityTracker.removePoint(L,rt),Ue.contacts===0?(L.releaseHandler&&ft&&L.releaseHandler({eventSource:L,pointerType:rt.type,position:I(ft,L.element),buttons:Ue.buttons,insideElementPressed:rt.insideElementPressed,insideElementReleased:rt.insideElement,isTouchEvent:rt.type==="touch",originalEvent:z.originalEvent,userData:L.userData}),L.dragEndHandler&&Se.sentDragEvent&&L.dragEndHandler({eventSource:L,pointerType:rt.type,position:I(rt.currentPos,L.element),speed:rt.speed,direction:rt.direction,shift:z.originalEvent.shiftKey,isTouchEvent:rt.type==="touch",originalEvent:z.originalEvent,userData:L.userData}),Se.sentDragEvent=!1,(L.clickHandler||L.dblClickHandler)&&rt.insideElement&&(Kt=je-rt.contactTime<=L.clickTimeThreshold&&rt.contactPos.distanceTo(ft)<=L.clickDistThreshold,L.clickHandler&&L.clickHandler({eventSource:L,pointerType:rt.type,position:I(rt.currentPos,L.element),quick:Kt,shift:z.originalEvent.shiftKey,isTouchEvent:rt.type==="touch",originalEvent:z.originalEvent,originalTarget:rt.originalTarget,userData:L.userData}),L.dblClickHandler&&Kt&&(Ue.clicks++,Ue.clicks===1?(Se.lastClickPos=ft,Se.dblClickTimeOut=setTimeout(function(){Ue.clicks=0},L.dblClickTimeThreshold)):Ue.clicks===2&&(clearTimeout(Se.dblClickTimeOut),Ue.clicks=0,Se.lastClickPos.distanceTo(ft)<=L.dblClickDistThreshold&&L.dblClickHandler({eventSource:L,pointerType:rt.type,position:I(rt.currentPos,L.element),shift:z.originalEvent.shiftKey,isTouchEvent:rt.type==="touch",originalEvent:z.originalEvent,userData:L.userData}),Se.lastClickPos=null)))):Ue.contacts===2&&L.pinchHandler&&rt.type==="touch"&&(Se.pinchGPoints=Ue.asArray(),Se.lastPinchDist=Se.currentPinchDist=Se.pinchGPoints[0].currentPos.distanceTo(Se.pinchGPoints[1].currentPos),Se.lastPinchCenter=Se.currentPinchCenter=G(Se.pinchGPoints[0].currentPos,Se.pinchGPoints[1].currentPos))):(z.shouldReleaseCapture=!1,L.releaseHandler&&ft&&(L.releaseHandler({eventSource:L,pointerType:rt.type,position:I(ft,L.element),buttons:Ue.buttons,insideElementPressed:rt.insideElementPressed,insideElementReleased:rt.insideElement,isTouchEvent:rt.type==="touch",originalEvent:z.originalEvent,userData:L.userData}),z.preventDefault=!0)))}function Dt(L,z,W){var X=n[L.hash],Se=L.getActivePointersListByType(W.type),Ue,ft,je;if(typeof z.originalEvent.buttons<"u"&&(Se.buttons=z.originalEvent.buttons),Ue=Se.getById(W.id),Ue)Ue.lastPos=Ue.currentPos,Ue.lastTime=Ue.currentTime,Ue.currentPos=W.currentPos,Ue.currentTime=W.currentTime;else return;z.shouldCapture=!1,z.shouldReleaseCapture=!1,L.stopHandler&&W.type==="mouse"&&(clearTimeout(L.stopTimeOut),L.stopTimeOut=setTimeout(function(){Ae(L,z.originalEvent,W.type)},L.stopDelay)),Se.contacts===0?L.moveHandler&&L.moveHandler({eventSource:L,pointerType:W.type,position:I(W.currentPos,L.element),buttons:Se.buttons,isTouchEvent:W.type==="touch",originalEvent:z.originalEvent,userData:L.userData}):Se.contacts===1?(L.moveHandler&&(Ue=Se.asArray()[0],L.moveHandler({eventSource:L,pointerType:Ue.type,position:I(Ue.currentPos,L.element),buttons:Se.buttons,isTouchEvent:Ue.type==="touch",originalEvent:z.originalEvent,userData:L.userData})),L.dragHandler&&!z.preventGesture&&!z.defaultPrevented&&(Ue=Se.asArray()[0],je=Ue.currentPos.minus(Ue.lastPos),L.dragHandler({eventSource:L,pointerType:Ue.type,position:I(Ue.currentPos,L.element),buttons:Se.buttons,delta:je,speed:Ue.speed,direction:Ue.direction,shift:z.originalEvent.shiftKey,isTouchEvent:Ue.type==="touch",originalEvent:z.originalEvent,userData:L.userData}),z.preventDefault=!0,X.sentDragEvent=!0)):Se.contacts===2&&(L.moveHandler&&(ft=Se.asArray(),L.moveHandler({eventSource:L,pointerType:ft[0].type,position:I(G(ft[0].currentPos,ft[1].currentPos),L.element),buttons:Se.buttons,isTouchEvent:ft[0].type==="touch",originalEvent:z.originalEvent,userData:L.userData})),L.pinchHandler&&W.type==="touch"&&!z.preventGesture&&!z.defaultPrevented&&(je=X.pinchGPoints[0].currentPos.distanceTo(X.pinchGPoints[1].currentPos),je!==X.currentPinchDist&&(X.lastPinchDist=X.currentPinchDist,X.currentPinchDist=je,X.lastPinchCenter=X.currentPinchCenter,X.currentPinchCenter=G(X.pinchGPoints[0].currentPos,X.pinchGPoints[1].currentPos),L.pinchHandler({eventSource:L,pointerType:"touch",gesturePoints:X.pinchGPoints,lastCenter:I(X.lastPinchCenter,L.element),center:I(X.currentPinchCenter,L.element),lastDistance:X.lastPinchDist,distance:X.currentPinchDist,shift:z.originalEvent.shiftKey,originalEvent:z.originalEvent,userData:L.userData}),z.preventDefault=!0)))}function he(L,z,W){var X=L.getActivePointersListByType(W.type),Se;Se=X.getById(W.id),Se&&Gt(L,X,Se)}function Ae(L,z,W){L.stopHandler&&L.stopHandler({eventSource:L,pointerType:W,position:k(z,L.element),buttons:L.getActivePointersListByType(W).buttons,isTouchEvent:W==="touch",originalEvent:z,userData:L.userData})}}(i),function(t){t.ControlAnchor={NONE:0,TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4,ABSOLUTE:5},t.Control=function(n,o,u){var h=n.parentNode;typeof o=="number"&&(t.console.error("Passing an anchor directly into the OpenSeadragon.Control constructor is deprecated; please use an options object instead.  Support for this deprecated variant is scheduled for removal in December 2013"),o={anchor:o}),o.attachToViewer=typeof o.attachToViewer>"u"?!0:o.attachToViewer,this.autoFade=typeof o.autoFade>"u"?!0:o.autoFade,this.element=n,this.anchor=o.anchor,this.container=u,this.anchor===t.ControlAnchor.ABSOLUTE?(this.wrapper=t.makeNeutralElement("div"),this.wrapper.style.position="absolute",this.wrapper.style.top=typeof o.top=="number"?o.top+"px":o.top,this.wrapper.style.left=typeof o.left=="number"?o.left+"px":o.left,this.wrapper.style.height=typeof o.height=="number"?o.height+"px":o.height,this.wrapper.style.width=typeof o.width=="number"?o.width+"px":o.width,this.wrapper.style.margin="0px",this.wrapper.style.padding="0px",this.element.style.position="relative",this.element.style.top="0px",this.element.style.left="0px",this.element.style.height="100%",this.element.style.width="100%"):(this.wrapper=t.makeNeutralElement("div"),this.wrapper.style.display="inline-block",this.anchor===t.ControlAnchor.NONE&&(this.wrapper.style.width=this.wrapper.style.height="100%")),this.wrapper.appendChild(this.element),o.attachToViewer?this.anchor===t.ControlAnchor.TOP_RIGHT||this.anchor===t.ControlAnchor.BOTTOM_RIGHT?this.container.insertBefore(this.wrapper,this.container.firstChild):this.container.appendChild(this.wrapper):h.appendChild(this.wrapper)},t.Control.prototype={destroy:function(){this.wrapper.removeChild(this.element),this.anchor!==t.ControlAnchor.NONE&&this.container.removeChild(this.wrapper)},isVisible:function(){return this.wrapper.style.display!=="none"},setVisible:function(n){this.wrapper.style.display=n?this.anchor===t.ControlAnchor.ABSOLUTE?"block":"inline-block":"none"},setOpacity:function(n){this.element[t.SIGNAL]&&t.Browser.vendor===t.BROWSERS.IE?t.setElementOpacity(this.element,n,!0):t.setElementOpacity(this.wrapper,n,!0)}}}(i),function(t){t.ControlDock=function(o){var u=["topleft","topright","bottomright","bottomleft"],h,d;for(t.extend(!0,this,{id:"controldock-"+t.now()+"-"+Math.floor(Math.random()*1e6),container:t.makeNeutralElement("div"),controls:[]},o),this.container.onsubmit=function(){return!1},this.element&&(this.element=t.getElement(this.element),this.element.appendChild(this.container),this.element.style.position="relative",this.container.style.width="100%",this.container.style.height="100%"),d=0;d<u.length;d++)h=u[d],this.controls[h]=t.makeNeutralElement("div"),this.controls[h].style.position="absolute",h.match("left")&&(this.controls[h].style.left="0px"),h.match("right")&&(this.controls[h].style.right="0px"),h.match("top")&&(this.controls[h].style.top="0px"),h.match("bottom")&&(this.controls[h].style.bottom="0px");this.container.appendChild(this.controls.topleft),this.container.appendChild(this.controls.topright),this.container.appendChild(this.controls.bottomright),this.container.appendChild(this.controls.bottomleft)},t.ControlDock.prototype={addControl:function(o,u){o=t.getElement(o);var h=null;if(!(n(this,o)>=0)){switch(u.anchor){case t.ControlAnchor.TOP_RIGHT:h=this.controls.topright,o.style.position="relative",o.style.paddingRight="0px",o.style.paddingTop="0px";break;case t.ControlAnchor.BOTTOM_RIGHT:h=this.controls.bottomright,o.style.position="relative",o.style.paddingRight="0px",o.style.paddingBottom="0px";break;case t.ControlAnchor.BOTTOM_LEFT:h=this.controls.bottomleft,o.style.position="relative",o.style.paddingLeft="0px",o.style.paddingBottom="0px";break;case t.ControlAnchor.TOP_LEFT:h=this.controls.topleft,o.style.position="relative",o.style.paddingLeft="0px",o.style.paddingTop="0px";break;case t.ControlAnchor.ABSOLUTE:h=this.container,o.style.margin="0px",o.style.padding="0px";break;default:case t.ControlAnchor.NONE:h=this.container,o.style.margin="0px",o.style.padding="0px";break}this.controls.push(new t.Control(o,u,h)),o.style.display="inline-block"}},removeControl:function(o){o=t.getElement(o);var u=n(this,o);return u>=0&&(this.controls[u].destroy(),this.controls.splice(u,1)),this},clearControls:function(){for(;this.controls.length>0;)this.controls.pop().destroy();return this},areControlsEnabled:function(){var o;for(o=this.controls.length-1;o>=0;o--)if(this.controls[o].isVisible())return!0;return!1},setControlsEnabled:function(o){var u;for(u=this.controls.length-1;u>=0;u--)this.controls[u].setVisible(o);return this}};function n(o,u){var h=o.controls,d;for(d=h.length-1;d>=0;d--)if(h[d].element===u)return d;return-1}}(i),function(t){t.Placement=t.freezeObject({CENTER:0,TOP_LEFT:1,TOP:2,TOP_RIGHT:3,RIGHT:4,BOTTOM_RIGHT:5,BOTTOM:6,BOTTOM_LEFT:7,LEFT:8,properties:{0:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1},1:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},2:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},3:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!0,isVerticallyCentered:!1,isBottom:!1},4:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!0,isBottom:!1},5:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!1,isBottom:!0},6:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},7:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},8:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1}}})}(i),function(t){var n={},o=1;t.Viewer=function(D){var K=arguments,we=this,ze;if(t.isPlainObject(D)||(D={id:K[0],xmlPath:K.length>1?K[1]:void 0,prefixUrl:K.length>2?K[2]:void 0,controls:K.length>3?K[3]:void 0,overlays:K.length>4?K[4]:void 0}),D.config&&(t.extend(!0,D,D.config),delete D.config),t.extend(!0,this,{id:D.id,hash:D.hash||o++,initialPage:0,element:null,container:null,canvas:null,overlays:[],overlaysContainer:null,previousBody:[],customControls:[],source:null,drawer:null,world:null,viewport:null,navigator:null,collectionViewport:null,collectionDrawer:null,navImages:null,buttonGroup:null,profiler:null},t.DEFAULT_SETTINGS,D),typeof this.hash>"u")throw new Error("A hash must be defined, either by specifying options.id or options.hash.");for(typeof n[this.hash]<"u"&&t.console.warn("Hash "+this.hash+" has already been used."),n[this.hash]={fsBoundsDelta:new t.Point(1,1),prevContainerSize:null,animating:!1,forceRedraw:!1,needsResize:!1,forceResize:!1,mouseInside:!1,group:null,zooming:!1,zoomFactor:null,lastZoomTime:null,fullPage:!1,onfullscreenchange:null,lastClickTime:null,draggingToZoom:!1},this._sequenceIndex=0,this._firstOpen=!0,this._updateRequestId=null,this._loadQueue=[],this.currentOverlays=[],this._updatePixelDensityRatioBind=null,this._lastScrollTime=t.now(),t.EventSource.call(this),this.addHandler("open-failed",function(Ne){var Qe=t.getString("Errors.OpenFailed",Ne.eventSource,Ne.message);we._showMessage(Qe)}),t.ControlDock.call(this,D),this.xmlPath&&(this.tileSources=[this.xmlPath]),this.element=this.element||document.getElementById(this.id),this.canvas=t.makeNeutralElement("div"),this.canvas.className="openseadragon-canvas",function(Ne){Ne.width="100%",Ne.height="100%",Ne.overflow="hidden",Ne.position="absolute",Ne.top="0px",Ne.left="0px"}(this.canvas.style),t.setElementTouchActionNone(this.canvas),D.tabIndex!==""&&(this.canvas.tabIndex=D.tabIndex===void 0?0:D.tabIndex),this.container.className="openseadragon-container",function(Ne){Ne.width="100%",Ne.height="100%",Ne.position="relative",Ne.overflow="hidden",Ne.left="0px",Ne.top="0px",Ne.textAlign="left"}(this.container.style),t.setElementTouchActionNone(this.container),this.container.insertBefore(this.canvas,this.container.firstChild),this.element.appendChild(this.container),this.bodyWidth=document.body.style.width,this.bodyHeight=document.body.style.height,this.bodyOverflow=document.body.style.overflow,this.docOverflow=document.documentElement.style.overflow,this.innerTracker=new t.MouseTracker({userData:"Viewer.innerTracker",element:this.canvas,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,contextMenuHandler:t.delegate(this,k),keyDownHandler:t.delegate(this,I),keyHandler:t.delegate(this,G),clickHandler:t.delegate(this,Z),dblClickHandler:t.delegate(this,ae),dragHandler:t.delegate(this,te),dragEndHandler:t.delegate(this,Q),enterHandler:t.delegate(this,le),leaveHandler:t.delegate(this,ce),pressHandler:t.delegate(this,me),releaseHandler:t.delegate(this,Pe),nonPrimaryPressHandler:t.delegate(this,be),nonPrimaryReleaseHandler:t.delegate(this,fe),scrollHandler:t.delegate(this,Te),pinchHandler:t.delegate(this,ve),focusHandler:t.delegate(this,Fe),blurHandler:t.delegate(this,Ge)}),this.outerTracker=new t.MouseTracker({userData:"Viewer.outerTracker",element:this.container,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,enterHandler:t.delegate(this,ye),leaveHandler:t.delegate(this,ke)}),this.toolbar&&(this.toolbar=new t.ControlDock({element:this.toolbar})),this.bindStandardControls(),n[this.hash].prevContainerSize=u(this.container),window.ResizeObserver?(this._autoResizePolling=!1,this._resizeObserver=new ResizeObserver(function(){n[we.hash].needsResize=!0}),this._resizeObserver.observe(this.container,{})):this._autoResizePolling=!0,this.world=new t.World({viewer:this}),this.world.addHandler("add-item",function(Ne){we.source=we.world.getItemAt(0).source,n[we.hash].forceRedraw=!0,we._updateRequestId||(we._updateRequestId=m(we,_e))}),this.world.addHandler("remove-item",function(Ne){we.world.getItemCount()?we.source=we.world.getItemAt(0).source:we.source=null,n[we.hash].forceRedraw=!0}),this.world.addHandler("metrics-change",function(Ne){we.viewport&&we.viewport._setContentBounds(we.world.getHomeBounds(),we.world.getContentFactor())}),this.world.addHandler("item-index-change",function(Ne){we.source=we.world.getItemAt(0).source}),this.viewport=new t.Viewport({containerSize:n[this.hash].prevContainerSize,springStiffness:this.springStiffness,animationTime:this.animationTime,minZoomImageRatio:this.minZoomImageRatio,maxZoomPixelRatio:this.maxZoomPixelRatio,visibilityRatio:this.visibilityRatio,wrapHorizontal:this.wrapHorizontal,wrapVertical:this.wrapVertical,defaultZoomLevel:this.defaultZoomLevel,minZoomLevel:this.minZoomLevel,maxZoomLevel:this.maxZoomLevel,viewer:this,degrees:this.degrees,flipped:this.flipped,navigatorRotate:this.navigatorRotate,homeFillsViewer:this.homeFillsViewer,margins:this.viewportMargins,silenceMultiImageWarnings:this.silenceMultiImageWarnings}),this.viewport._setContentBounds(this.world.getHomeBounds(),this.world.getContentFactor()),this.imageLoader=new t.ImageLoader({jobLimit:this.imageLoaderLimit,timeout:D.timeout,tileRetryMax:this.tileRetryMax,tileRetryDelay:this.tileRetryDelay}),this.tileCache=new t.TileCache({maxImageCacheCount:this.maxImageCacheCount}),this.drawer=new t.Drawer({viewer:this,viewport:this.viewport,element:this.canvas,debugGridColor:this.debugGridColor}),this.overlaysContainer=t.makeNeutralElement("div"),this.canvas.appendChild(this.overlaysContainer),this.drawer.canRotate()||(this.rotateLeft&&(ze=this.buttonGroup.buttons.indexOf(this.rotateLeft),this.buttonGroup.buttons.splice(ze,1),this.buttonGroup.element.removeChild(this.rotateLeft.element)),this.rotateRight&&(ze=this.buttonGroup.buttons.indexOf(this.rotateRight),this.buttonGroup.buttons.splice(ze,1),this.buttonGroup.element.removeChild(this.rotateRight.element))),this._addUpdatePixelDensityRatioEvent(),this.showNavigator&&(this.navigator=new t.Navigator({element:this.navigatorElement,id:this.navigatorId,position:this.navigatorPosition,sizeRatio:this.navigatorSizeRatio,maintainSizeRatio:this.navigatorMaintainSizeRatio,top:this.navigatorTop,left:this.navigatorLeft,width:this.navigatorWidth,height:this.navigatorHeight,autoResize:this.navigatorAutoResize,autoFade:this.navigatorAutoFade,prefixUrl:this.prefixUrl,viewer:this,navigatorRotate:this.navigatorRotate,background:this.navigatorBackground,opacity:this.navigatorOpacity,borderColor:this.navigatorBorderColor,displayRegionColor:this.navigatorDisplayRegionColor,crossOriginPolicy:this.crossOriginPolicy,animationTime:this.animationTime})),this.sequenceMode&&this.bindSequenceControls(),this.tileSources&&this.open(this.tileSources),ze=0;ze<this.customControls.length;ze++)this.addControl(this.customControls[ze].id,{anchor:this.customControls[ze].anchor});t.requestAnimationFrame(function(){x(we)}),this.imageSmoothingEnabled!==void 0&&!this.imageSmoothingEnabled&&this.drawer.setImageSmoothingEnabled(this.imageSmoothingEnabled),t._viewers.set(this.element,this)},t.extend(t.Viewer.prototype,t.EventSource.prototype,t.ControlDock.prototype,{isOpen:function(){return!!this.world.getItemCount()},openDzi:function(D){return t.console.error("[Viewer.openDzi] this function is deprecated; use Viewer.open() instead."),this.open(D)},openTileSource:function(D){return t.console.error("[Viewer.openTileSource] this function is deprecated; use Viewer.open() instead."),this.open(D)},get buttons(){return t.console.warn("Viewer.buttons is deprecated; Please use Viewer.buttonGroup"),this.buttonGroup},open:function(D,K){var we=this;if(this.close(),!D)return this;if(this.sequenceMode&&t.isArray(D))return this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),typeof K<"u"&&!isNaN(K)&&(this.initialPage=K),this.tileSources=D,this._sequenceIndex=Math.max(0,Math.min(this.tileSources.length-1,this.initialPage)),this.tileSources.length&&(this.open(this.tileSources[this._sequenceIndex]),this.showReferenceStrip&&this.addReferenceStrip()),this._updateSequenceButtons(this._sequenceIndex),this;if(t.isArray(D)||(D=[D]),!D.length)return this;this._opening=!0;for(var ze=D.length,Ne=0,Qe=0,Xe,bt=function(){if(Ne+Qe===ze)if(Ne){(we._firstOpen||!we.preserveViewport)&&(we.viewport.goHome(!0),we.viewport.update()),we._firstOpen=!1;var he=D[0];if(he.tileSource&&(he=he.tileSource),we.overlays&&!we.preserveOverlays)for(var Ae=0;Ae<we.overlays.length;Ae++)we.currentOverlays[Ae]=d(we,we.overlays[Ae]);we._drawOverlays(),we._opening=!1,we.raiseEvent("open",{source:he})}else we._opening=!1,we.raiseEvent("open-failed",Xe)},Rt=function(he){(!t.isPlainObject(he)||!he.tileSource)&&(he={tileSource:he}),he.index!==void 0&&(t.console.error("[Viewer.open] setting indexes here is not supported; use addTiledImage instead"),delete he.index),he.collectionImmediately===void 0&&(he.collectionImmediately=!0);var Ae=he.success;he.success=function(z){if(Ne++,he.tileSource.overlays)for(var W=0;W<he.tileSource.overlays.length;W++)we.addOverlay(he.tileSource.overlays[W]);Ae&&Ae(z),bt()};var L=he.error;he.error=function(z){Qe++,Xe||(Xe=z),L&&L(z),bt()},we.addTiledImage(he)},Dt=0;Dt<D.length;Dt++)Rt(D[Dt]);return this},close:function(){return n[this.hash]?(this._opening=!1,this.navigator&&this.navigator.close(),this.preserveOverlays||(this.clearOverlays(),this.overlaysContainer.innerHTML=""),n[this.hash].animating=!1,this.world.removeAll(),this.imageLoader.clear(),this.raiseEvent("close"),this):this},destroy:function(){if(n[this.hash]){if(this.raiseEvent("before-destroy"),this._removeUpdatePixelDensityRatioEvent(),this.close(),this.clearOverlays(),this.overlaysContainer.innerHTML="",this._resizeObserver&&this._resizeObserver.disconnect(),this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),this._updateRequestId!==null&&(t.cancelAnimationFrame(this._updateRequestId),this._updateRequestId=null),this.drawer&&this.drawer.destroy(),this.navigator&&(this.navigator.destroy(),n[this.navigator.hash]=null,delete n[this.navigator.hash],this.navigator=null),this.buttonGroup)this.buttonGroup.destroy();else if(this.customButtons)for(;this.customButtons.length;)this.customButtons.pop().destroy();if(this.paging&&this.paging.destroy(),this.element)for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.container.onsubmit=null,this.clearControls(),this.innerTracker&&this.innerTracker.destroy(),this.outerTracker&&this.outerTracker.destroy(),n[this.hash]=null,delete n[this.hash],this.canvas=null,this.container=null,t._viewers.delete(this.element),this.element=null,this.raiseEvent("destroy"),this.removeAllHandlers()}},isMouseNavEnabled:function(){return this.innerTracker.isTracking()},setMouseNavEnabled:function(D){return this.innerTracker.setTracking(D),this.outerTracker.setTracking(D),this.raiseEvent("mouse-enabled",{enabled:D}),this},areControlsEnabled:function(){var D=this.controls.length,K;for(K=0;K<this.controls.length;K++)D=D&&this.controls[K].isVisible();return D},setControlsEnabled:function(D){return D?C(this):x(this),this.raiseEvent("controls-enabled",{enabled:D}),this},setDebugMode:function(D){for(var K=0;K<this.world.getItemCount();K++)this.world.getItemAt(K).debugMode=D;this.debugMode=D,this.forceRedraw()},setAjaxHeaders:function(D,K){if(D===null&&(D={}),!t.isPlainObject(D)){console.error("[Viewer.setAjaxHeaders] Ignoring invalid headers, must be a plain object");return}if(K===void 0&&(K=!0),this.ajaxHeaders=D,K){for(var we=0;we<this.world.getItemCount();we++)this.world.getItemAt(we)._updateAjaxHeaders(!0);if(this.navigator&&this.navigator.setAjaxHeaders(this.ajaxHeaders,!0),this.referenceStrip&&this.referenceStrip.miniViewers)for(var ze in this.referenceStrip.miniViewers)this.referenceStrip.miniViewers[ze].setAjaxHeaders(this.ajaxHeaders,!0)}},addButton:function(D){this.buttonGroup.addButton(D)},isFullPage:function(){return n[this.hash].fullPage},setFullPage:function(D){var K=document.body,we=K.style,ze=document.documentElement.style,Ne=this,Qe,Xe;if(D===this.isFullPage())return this;var bt={fullPage:D,preventDefaultAction:!1};if(this.raiseEvent("pre-full-page",bt),bt.preventDefaultAction)return this;if(D){for(this.elementSize=t.getElementSize(this.element),this.pageScroll=t.getPageScroll(),this.elementMargin=this.element.style.margin,this.element.style.margin="0",this.elementPadding=this.element.style.padding,this.element.style.padding="0",this.bodyMargin=we.margin,this.docMargin=ze.margin,we.margin="0",ze.margin="0",this.bodyPadding=we.padding,this.docPadding=ze.padding,we.padding="0",ze.padding="0",this.bodyWidth=we.width,this.docWidth=ze.width,we.width="100%",ze.width="100%",this.bodyHeight=we.height,this.docHeight=ze.height,we.height="100%",ze.height="100%",this.bodyDisplay=we.display,we.display="block",this.previousBody=[],n[this.hash].prevElementParent=this.element.parentNode,n[this.hash].prevNextSibling=this.element.nextSibling,n[this.hash].prevElementWidth=this.element.style.width,n[this.hash].prevElementHeight=this.element.style.height,Qe=K.childNodes.length,Xe=0;Xe<Qe;Xe++)this.previousBody.push(K.childNodes[0]),K.removeChild(K.childNodes[0]);this.toolbar&&this.toolbar.element&&(this.toolbar.parentNode=this.toolbar.element.parentNode,this.toolbar.nextSibling=this.toolbar.element.nextSibling,K.appendChild(this.toolbar.element),t.addClass(this.toolbar.element,"fullpage")),t.addClass(this.element,"fullpage"),K.appendChild(this.element),this.element.style.height="100vh",this.element.style.width="100vw",this.toolbar&&this.toolbar.element&&(this.element.style.height=t.getElementSize(this.element).y-t.getElementSize(this.toolbar.element).y+"px"),n[this.hash].fullPage=!0,t.delegate(this,ye)({})}else{for(this.element.style.margin=this.elementMargin,this.element.style.padding=this.elementPadding,we.margin=this.bodyMargin,ze.margin=this.docMargin,we.padding=this.bodyPadding,ze.padding=this.docPadding,we.width=this.bodyWidth,ze.width=this.docWidth,we.height=this.bodyHeight,ze.height=this.docHeight,we.display=this.bodyDisplay,K.removeChild(this.element),Qe=this.previousBody.length,Xe=0;Xe<Qe;Xe++)K.appendChild(this.previousBody.shift());t.removeClass(this.element,"fullpage"),n[this.hash].prevElementParent.insertBefore(this.element,n[this.hash].prevNextSibling),this.toolbar&&this.toolbar.element&&(K.removeChild(this.toolbar.element),t.removeClass(this.toolbar.element,"fullpage"),this.toolbar.parentNode.insertBefore(this.toolbar.element,this.toolbar.nextSibling),delete this.toolbar.parentNode,delete this.toolbar.nextSibling),this.element.style.width=n[this.hash].prevElementWidth,this.element.style.height=n[this.hash].prevElementHeight;var Rt=0,Dt=function(){t.setPageScroll(Ne.pageScroll);var he=t.getPageScroll();Rt++,Rt<10&&(he.x!==Ne.pageScroll.x||he.y!==Ne.pageScroll.y)&&t.requestAnimationFrame(Dt)};t.requestAnimationFrame(Dt),n[this.hash].fullPage=!1,t.delegate(this,ke)({})}return this.navigator&&this.viewport&&this.navigator.update(this.viewport),this.raiseEvent("full-page",{fullPage:D}),this},setFullScreen:function(D){var K=this;if(!t.supportsFullScreen)return this.setFullPage(D);if(t.isFullScreen()===D)return this;var we={fullScreen:D,preventDefaultAction:!1};if(this.raiseEvent("pre-full-screen",we),we.preventDefaultAction)return this;if(D){if(this.setFullPage(!0),!this.isFullPage())return this;this.fullPageStyleWidth=this.element.style.width,this.fullPageStyleHeight=this.element.style.height,this.element.style.width="100%",this.element.style.height="100%";var ze=function(){var Ne=t.isFullScreen();Ne||(t.removeEvent(document,t.fullScreenEventName,ze),t.removeEvent(document,t.fullScreenErrorEventName,ze),K.setFullPage(!1),K.isFullPage()&&(K.element.style.width=K.fullPageStyleWidth,K.element.style.height=K.fullPageStyleHeight)),K.navigator&&K.viewport&&setTimeout(function(){K.navigator.update(K.viewport)}),K.raiseEvent("full-screen",{fullScreen:Ne})};t.addEvent(document,t.fullScreenEventName,ze),t.addEvent(document,t.fullScreenErrorEventName,ze),t.requestFullScreen(document.body)}else t.exitFullScreen();return this},isVisible:function(){return this.container.style.visibility!=="hidden"},isFullScreen:function(){return t.isFullScreen()&&this.isFullPage()},setVisible:function(D){return this.container.style.visibility=D?"":"hidden",this.raiseEvent("visible",{visible:D}),this},addTiledImage:function(D){t.console.assert(D,"[Viewer.addTiledImage] options is required"),t.console.assert(D.tileSource,"[Viewer.addTiledImage] options.tileSource is required"),t.console.assert(!D.replace||D.index>-1&&D.index<this.world.getItemCount(),"[Viewer.addTiledImage] if options.replace is used, options.index must be a valid index in Viewer.world");var K=this;D.replace&&(D.replaceItem=K.world.getItemAt(D.index)),this._hideMessage(),D.placeholderFillStyle===void 0&&(D.placeholderFillStyle=this.placeholderFillStyle),D.opacity===void 0&&(D.opacity=this.opacity),D.preload===void 0&&(D.preload=this.preload),D.compositeOperation===void 0&&(D.compositeOperation=this.compositeOperation),D.crossOriginPolicy===void 0&&(D.crossOriginPolicy=D.tileSource.crossOriginPolicy!==void 0?D.tileSource.crossOriginPolicy:this.crossOriginPolicy),D.ajaxWithCredentials===void 0&&(D.ajaxWithCredentials=this.ajaxWithCredentials),D.loadTilesWithAjax===void 0&&(D.loadTilesWithAjax=this.loadTilesWithAjax),t.isPlainObject(D.ajaxHeaders)||(D.ajaxHeaders={});var we={options:D};function ze(Xe){for(var bt=0;bt<K._loadQueue.length;bt++)if(K._loadQueue[bt]===we){K._loadQueue.splice(bt,1);break}K._loadQueue.length===0&&Ne(we),K.raiseEvent("add-item-failed",Xe),D.error&&D.error(Xe)}function Ne(Xe){K.collectionMode&&(K.world.arrange({immediately:Xe.options.collectionImmediately,rows:K.collectionRows,columns:K.collectionColumns,layout:K.collectionLayout,tileSize:K.collectionTileSize,tileMargin:K.collectionTileMargin}),K.world.setAutoRefigureSizes(!0))}if(t.isArray(D.tileSource)){setTimeout(function(){ze({message:"[Viewer.addTiledImage] Sequences can not be added; add them one at a time instead.",source:D.tileSource,options:D})});return}this._loadQueue.push(we);function Qe(){for(var Xe,bt,Rt;K._loadQueue.length&&(Xe=K._loadQueue[0],!!Xe.tileSource);){if(K._loadQueue.splice(0,1),Xe.options.replace){var Dt=K.world.getIndexOfItem(Xe.options.replaceItem);Dt!==-1&&(Xe.options.index=Dt),K.world.removeItem(Xe.options.replaceItem)}bt=new t.TiledImage({viewer:K,source:Xe.tileSource,viewport:K.viewport,drawer:K.drawer,tileCache:K.tileCache,imageLoader:K.imageLoader,x:Xe.options.x,y:Xe.options.y,width:Xe.options.width,height:Xe.options.height,fitBounds:Xe.options.fitBounds,fitBoundsPlacement:Xe.options.fitBoundsPlacement,clip:Xe.options.clip,placeholderFillStyle:Xe.options.placeholderFillStyle,opacity:Xe.options.opacity,preload:Xe.options.preload,degrees:Xe.options.degrees,flipped:Xe.options.flipped,compositeOperation:Xe.options.compositeOperation,springStiffness:K.springStiffness,animationTime:K.animationTime,minZoomImageRatio:K.minZoomImageRatio,wrapHorizontal:K.wrapHorizontal,wrapVertical:K.wrapVertical,immediateRender:K.immediateRender,blendTime:K.blendTime,alwaysBlend:K.alwaysBlend,minPixelRatio:K.minPixelRatio,smoothTileEdgesMinZoom:K.smoothTileEdgesMinZoom,iOSDevice:K.iOSDevice,crossOriginPolicy:Xe.options.crossOriginPolicy,ajaxWithCredentials:Xe.options.ajaxWithCredentials,loadTilesWithAjax:Xe.options.loadTilesWithAjax,ajaxHeaders:Xe.options.ajaxHeaders,debugMode:K.debugMode,subPixelRoundingForTransparency:K.subPixelRoundingForTransparency}),K.collectionMode&&K.world.setAutoRefigureSizes(!1),K.navigator&&(Rt=t.extend({},Xe.options,{replace:!1,originalTiledImage:bt,tileSource:Xe.tileSource}),K.navigator.addTiledImage(Rt)),K.world.addItem(bt,{index:Xe.options.index}),K._loadQueue.length===0&&Ne(Xe),K.world.getItemCount()===1&&!K.preserveViewport&&K.viewport.goHome(!0),Xe.options.success&&Xe.options.success({item:bt})}}h(this,D.tileSource,D,function(Xe){we.tileSource=Xe,Qe()},function(Xe){Xe.options=D,ze(Xe),Qe()})},addSimpleImage:function(D){t.console.assert(D,"[Viewer.addSimpleImage] options is required"),t.console.assert(D.url,"[Viewer.addSimpleImage] options.url is required");var K=t.extend({},D,{tileSource:{type:"image",url:D.url}});delete K.url,this.addTiledImage(K)},addLayer:function(D){var K=this;t.console.error("[Viewer.addLayer] this function is deprecated; use Viewer.addTiledImage() instead.");var we=t.extend({},D,{success:function(ze){K.raiseEvent("add-layer",{options:D,drawer:ze.item})},error:function(ze){K.raiseEvent("add-layer-failed",ze)}});return this.addTiledImage(we),this},getLayerAtLevel:function(D){return t.console.error("[Viewer.getLayerAtLevel] this function is deprecated; use World.getItemAt() instead."),this.world.getItemAt(D)},getLevelOfLayer:function(D){return t.console.error("[Viewer.getLevelOfLayer] this function is deprecated; use World.getIndexOfItem() instead."),this.world.getIndexOfItem(D)},getLayersCount:function(){return t.console.error("[Viewer.getLayersCount] this function is deprecated; use World.getItemCount() instead."),this.world.getItemCount()},setLayerLevel:function(D,K){return t.console.error("[Viewer.setLayerLevel] this function is deprecated; use World.setItemIndex() instead."),this.world.setItemIndex(D,K)},removeLayer:function(D){return t.console.error("[Viewer.removeLayer] this function is deprecated; use World.removeItem() instead."),this.world.removeItem(D)},forceRedraw:function(){return n[this.hash].forceRedraw=!0,this},forceResize:function(){n[this.hash].needsResize=!0,n[this.hash].forceResize=!0},bindSequenceControls:function(){var D=t.delegate(this,O),K=t.delegate(this,_),we=t.delegate(this,this.goToNextPage),ze=t.delegate(this,this.goToPreviousPage),Ne=this.navImages,Qe=!0;return this.showSequenceControl&&((this.previousButton||this.nextButton)&&(Qe=!1),this.previousButton=new t.Button({element:this.previousButton?t.getElement(this.previousButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:t.getString("Tooltips.PreviousPage"),srcRest:J(this.prefixUrl,Ne.previous.REST),srcGroup:J(this.prefixUrl,Ne.previous.GROUP),srcHover:J(this.prefixUrl,Ne.previous.HOVER),srcDown:J(this.prefixUrl,Ne.previous.DOWN),onRelease:ze,onFocus:D,onBlur:K}),this.nextButton=new t.Button({element:this.nextButton?t.getElement(this.nextButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:t.getString("Tooltips.NextPage"),srcRest:J(this.prefixUrl,Ne.next.REST),srcGroup:J(this.prefixUrl,Ne.next.GROUP),srcHover:J(this.prefixUrl,Ne.next.HOVER),srcDown:J(this.prefixUrl,Ne.next.DOWN),onRelease:we,onFocus:D,onBlur:K}),this.navPrevNextWrap||this.previousButton.disable(),(!this.tileSources||!this.tileSources.length)&&this.nextButton.disable(),Qe&&(this.paging=new t.ButtonGroup({buttons:[this.previousButton,this.nextButton],clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.pagingControl=this.paging.element,this.toolbar?this.toolbar.addControl(this.pagingControl,{anchor:t.ControlAnchor.BOTTOM_RIGHT}):this.addControl(this.pagingControl,{anchor:this.sequenceControlAnchor||t.ControlAnchor.TOP_LEFT}))),this},bindStandardControls:function(){var D=t.delegate(this,Et),K=t.delegate(this,mt),we=t.delegate(this,At),ze=t.delegate(this,yt),Ne=t.delegate(this,at),Qe=t.delegate(this,wt),Xe=t.delegate(this,Lt),bt=t.delegate(this,tn),Rt=t.delegate(this,kt),Dt=t.delegate(this,Gt),he=t.delegate(this,O),Ae=t.delegate(this,_),L=this.navImages,z=[],W=!0;return this.showNavigationControl&&((this.zoomInButton||this.zoomOutButton||this.homeButton||this.fullPageButton||this.rotateLeftButton||this.rotateRightButton||this.flipButton)&&(W=!1),this.showZoomControl&&(z.push(this.zoomInButton=new t.Button({element:this.zoomInButton?t.getElement(this.zoomInButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:t.getString("Tooltips.ZoomIn"),srcRest:J(this.prefixUrl,L.zoomIn.REST),srcGroup:J(this.prefixUrl,L.zoomIn.GROUP),srcHover:J(this.prefixUrl,L.zoomIn.HOVER),srcDown:J(this.prefixUrl,L.zoomIn.DOWN),onPress:D,onRelease:K,onClick:we,onEnter:D,onExit:K,onFocus:he,onBlur:Ae})),z.push(this.zoomOutButton=new t.Button({element:this.zoomOutButton?t.getElement(this.zoomOutButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:t.getString("Tooltips.ZoomOut"),srcRest:J(this.prefixUrl,L.zoomOut.REST),srcGroup:J(this.prefixUrl,L.zoomOut.GROUP),srcHover:J(this.prefixUrl,L.zoomOut.HOVER),srcDown:J(this.prefixUrl,L.zoomOut.DOWN),onPress:ze,onRelease:K,onClick:Ne,onEnter:ze,onExit:K,onFocus:he,onBlur:Ae}))),this.showHomeControl&&z.push(this.homeButton=new t.Button({element:this.homeButton?t.getElement(this.homeButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:t.getString("Tooltips.Home"),srcRest:J(this.prefixUrl,L.home.REST),srcGroup:J(this.prefixUrl,L.home.GROUP),srcHover:J(this.prefixUrl,L.home.HOVER),srcDown:J(this.prefixUrl,L.home.DOWN),onRelease:Qe,onFocus:he,onBlur:Ae})),this.showFullPageControl&&z.push(this.fullPageButton=new t.Button({element:this.fullPageButton?t.getElement(this.fullPageButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:t.getString("Tooltips.FullPage"),srcRest:J(this.prefixUrl,L.fullpage.REST),srcGroup:J(this.prefixUrl,L.fullpage.GROUP),srcHover:J(this.prefixUrl,L.fullpage.HOVER),srcDown:J(this.prefixUrl,L.fullpage.DOWN),onRelease:Xe,onFocus:he,onBlur:Ae})),this.showRotationControl&&(z.push(this.rotateLeftButton=new t.Button({element:this.rotateLeftButton?t.getElement(this.rotateLeftButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:t.getString("Tooltips.RotateLeft"),srcRest:J(this.prefixUrl,L.rotateleft.REST),srcGroup:J(this.prefixUrl,L.rotateleft.GROUP),srcHover:J(this.prefixUrl,L.rotateleft.HOVER),srcDown:J(this.prefixUrl,L.rotateleft.DOWN),onRelease:bt,onFocus:he,onBlur:Ae})),z.push(this.rotateRightButton=new t.Button({element:this.rotateRightButton?t.getElement(this.rotateRightButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:t.getString("Tooltips.RotateRight"),srcRest:J(this.prefixUrl,L.rotateright.REST),srcGroup:J(this.prefixUrl,L.rotateright.GROUP),srcHover:J(this.prefixUrl,L.rotateright.HOVER),srcDown:J(this.prefixUrl,L.rotateright.DOWN),onRelease:Rt,onFocus:he,onBlur:Ae}))),this.showFlipControl&&z.push(this.flipButton=new t.Button({element:this.flipButton?t.getElement(this.flipButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:t.getString("Tooltips.Flip"),srcRest:J(this.prefixUrl,L.flip.REST),srcGroup:J(this.prefixUrl,L.flip.GROUP),srcHover:J(this.prefixUrl,L.flip.HOVER),srcDown:J(this.prefixUrl,L.flip.DOWN),onRelease:Dt,onFocus:he,onBlur:Ae})),W?(this.buttonGroup=new t.ButtonGroup({buttons:z,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.navControl=this.buttonGroup.element,this.addHandler("open",t.delegate(this,$e)),this.toolbar?this.toolbar.addControl(this.navControl,{anchor:this.navigationControlAnchor||t.ControlAnchor.TOP_LEFT}):this.addControl(this.navControl,{anchor:this.navigationControlAnchor||t.ControlAnchor.TOP_LEFT})):this.customButtons=z),this},currentPage:function(){return this._sequenceIndex},goToPage:function(D){return this.tileSources&&D>=0&&D<this.tileSources.length&&(this._sequenceIndex=D,this._updateSequenceButtons(D),this.open(this.tileSources[D]),this.referenceStrip&&this.referenceStrip.setFocus(D),this.raiseEvent("page",{page:D})),this},addOverlay:function(D,K,we,ze){var Ne;if(t.isPlainObject(D)?Ne=D:Ne={element:D,location:K,placement:we,onDraw:ze},D=t.getElement(Ne.element),p(this.currentOverlays,D)>=0)return this;var Qe=d(this,Ne);return this.currentOverlays.push(Qe),Qe.drawHTML(this.overlaysContainer,this.viewport),this.raiseEvent("add-overlay",{element:D,location:Ne.location,placement:Ne.placement}),this},updateOverlay:function(D,K,we){var ze;return D=t.getElement(D),ze=p(this.currentOverlays,D),ze>=0&&(this.currentOverlays[ze].update(K,we),n[this.hash].forceRedraw=!0,this.raiseEvent("update-overlay",{element:D,location:K,placement:we})),this},removeOverlay:function(D){var K;return D=t.getElement(D),K=p(this.currentOverlays,D),K>=0&&(this.currentOverlays[K].destroy(),this.currentOverlays.splice(K,1),n[this.hash].forceRedraw=!0,this.raiseEvent("remove-overlay",{element:D})),this},clearOverlays:function(){for(;this.currentOverlays.length>0;)this.currentOverlays.pop().destroy();return n[this.hash].forceRedraw=!0,this.raiseEvent("clear-overlay",{}),this},getOverlayById:function(D){var K;return D=t.getElement(D),K=p(this.currentOverlays,D),K>=0?this.currentOverlays[K]:null},_updateSequenceButtons:function(D){this.nextButton&&(!this.tileSources||this.tileSources.length-1===D?this.navPrevNextWrap||this.nextButton.disable():this.nextButton.enable()),this.previousButton&&(D>0?this.previousButton.enable():this.navPrevNextWrap||this.previousButton.disable())},_showMessage:function(D){this._hideMessage();var K=t.makeNeutralElement("div");K.appendChild(document.createTextNode(D)),this.messageDiv=t.makeCenteredNode(K),t.addClass(this.messageDiv,"openseadragon-message"),this.container.appendChild(this.messageDiv)},_hideMessage:function(){var D=this.messageDiv;D&&(D.parentNode.removeChild(D),delete this.messageDiv)},gestureSettingsByDeviceType:function(D){switch(D){case"mouse":return this.gestureSettingsMouse;case"touch":return this.gestureSettingsTouch;case"pen":return this.gestureSettingsPen;default:return this.gestureSettingsUnknown}},_drawOverlays:function(){var D,K=this.currentOverlays.length;for(D=0;D<K;D++)this.currentOverlays[D].drawHTML(this.overlaysContainer,this.viewport)},_cancelPendingImages:function(){this._loadQueue=[]},removeReferenceStrip:function(){this.showReferenceStrip=!1,this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null)},addReferenceStrip:function(){if(this.showReferenceStrip=!0,this.sequenceMode){if(this.referenceStrip)return;this.tileSources.length&&this.tileSources.length>1&&(this.referenceStrip=new t.ReferenceStrip({id:this.referenceStripElement,position:this.referenceStripPosition,sizeRatio:this.referenceStripSizeRatio,scroll:this.referenceStripScroll,height:this.referenceStripHeight,width:this.referenceStripWidth,tileSources:this.tileSources,prefixUrl:this.prefixUrl,useCanvas:this.useCanvas,viewer:this}),this.referenceStrip.setFocus(this._sequenceIndex))}else t.console.warn('Attempting to display a reference strip while "sequenceMode" is off.')},_addUpdatePixelDensityRatioEvent:function(){this._updatePixelDensityRatioBind=this._updatePixelDensityRatio.bind(this),t.addEvent(window,"resize",this._updatePixelDensityRatioBind)},_removeUpdatePixelDensityRatioEvent:function(){t.removeEvent(window,"resize",this._updatePixelDensityRatioBind)},_updatePixelDensityRatio:function(){var D=t.pixelDensityRatio,K=t.getCurrentPixelDensityRatio();D!==K&&(t.pixelDensityRatio=K,this.world.resetItems(),this.forceRedraw())},goToPreviousPage:function(){var D=this._sequenceIndex-1;this.navPrevNextWrap&&D<0&&(D+=this.tileSources.length),this.goToPage(D)},goToNextPage:function(){var D=this._sequenceIndex+1;this.navPrevNextWrap&&D>=this.tileSources.length&&(D=0),this.goToPage(D)},isAnimating:function(){return n[this.hash].animating}});function u(D){return D=t.getElement(D),new t.Point(D.clientWidth===0?1:D.clientWidth,D.clientHeight===0?1:D.clientHeight)}function h(D,K,we,ze,Ne){var Qe=D;if(t.type(K)==="string"){if(K.match(/^\s*<.*>\s*$/))K=t.parseXml(K);else if(K.match(/^\s*[{[].*[}\]]\s*$/))try{var Xe=t.parseJSON(K);K=Xe}catch{}}function bt(Rt,Dt){Rt.ready?ze(Rt):(Rt.addHandler("ready",function(){ze(Rt)}),Rt.addHandler("open-failed",function(he){Ne({message:he.message,source:Dt})}))}setTimeout(function(){if(t.type(K)==="string")K=new t.TileSource({url:K,crossOriginPolicy:we.crossOriginPolicy!==void 0?we.crossOriginPolicy:D.crossOriginPolicy,ajaxWithCredentials:D.ajaxWithCredentials,ajaxHeaders:we.ajaxHeaders?we.ajaxHeaders:D.ajaxHeaders,splitHashDataForPost:D.splitHashDataForPost,useCanvas:D.useCanvas,success:function(Ae){ze(Ae.tileSource)}}),K.addHandler("open-failed",function(Ae){Ne(Ae)});else if(t.isPlainObject(K)||K.nodeType)if(K.crossOriginPolicy===void 0&&(we.crossOriginPolicy!==void 0||D.crossOriginPolicy!==void 0)&&(K.crossOriginPolicy=we.crossOriginPolicy!==void 0?we.crossOriginPolicy:D.crossOriginPolicy),K.ajaxWithCredentials===void 0&&(K.ajaxWithCredentials=D.ajaxWithCredentials),K.useCanvas===void 0&&(K.useCanvas=D.useCanvas),t.isFunction(K.getTileUrl)){var Rt=new t.TileSource(K);Rt.getTileUrl=K.getTileUrl,ze(Rt)}else{var Dt=t.TileSource.determineType(Qe,K);if(!Dt){Ne({message:"Unable to load TileSource",source:K});return}var he=Dt.prototype.configure.apply(Qe,[K]);bt(new Dt(he),K)}else bt(K,K)})}function d(D,K){if(K instanceof t.Overlay)return K;var we=null;if(K.element)we=t.getElement(K.element);else{var ze=K.id?K.id:"openseadragon-overlay-"+Math.floor(Math.random()*1e7);we=t.getElement(K.id),we||(we=document.createElement("a"),we.href="#/overlay/"+ze),we.id=ze,t.addClass(we,K.className?K.className:"openseadragon-overlay")}var Ne=K.location,Qe=K.width,Xe=K.height;if(!Ne){var bt=K.x,Rt=K.y;if(K.px!==void 0){var Dt=D.viewport.imageToViewportRectangle(new t.Rect(K.px,K.py,Qe||0,Xe||0));bt=Dt.x,Rt=Dt.y,Qe=Qe!==void 0?Dt.width:void 0,Xe=Xe!==void 0?Dt.height:void 0}Ne=new t.Point(bt,Rt)}var he=K.placement;return he&&t.type(he)==="string"&&(he=t.Placement[K.placement.toUpperCase()]),new t.Overlay({element:we,location:Ne,placement:he,onDraw:K.onDraw,checkResize:K.checkResize,width:Qe,height:Xe,rotationMode:K.rotationMode})}function p(D,K){var we;for(we=D.length-1;we>=0;we--)if(D[we].element===K)return we;return-1}function m(D,K){return t.requestAnimationFrame(function(){K(D)})}function v(D){t.requestAnimationFrame(function(){E(D)})}function x(D){D.autoHideControls&&(D.controlsShouldFade=!0,D.controlsFadeBeginTime=t.now()+D.controlsFadeDelay,window.setTimeout(function(){v(D)},D.controlsFadeDelay))}function E(D){var K,we,ze,Ne;if(D.controlsShouldFade){for(K=t.now(),we=K-D.controlsFadeBeginTime,ze=1-we/D.controlsFadeLength,ze=Math.min(1,ze),ze=Math.max(0,ze),Ne=D.controls.length-1;Ne>=0;Ne--)D.controls[Ne].autoFade&&D.controls[Ne].setOpacity(ze);ze>0&&v(D)}}function C(D){var K;for(D.controlsShouldFade=!1,K=D.controls.length-1;K>=0;K--)D.controls[K].setOpacity(1)}function O(){C(this)}function _(){x(this)}function k(D){var K={tracker:D.eventSource,position:D.position,originalEvent:D.originalEvent,preventDefault:D.preventDefault};this.raiseEvent("canvas-contextmenu",K),D.preventDefault=K.preventDefault}function I(D){var K={originalEvent:D.originalEvent,preventDefaultAction:!1,preventVerticalPan:D.preventVerticalPan||!this.panVertical,preventHorizontalPan:D.preventHorizontalPan||!this.panHorizontal};if(this.raiseEvent("canvas-key",K),!K.preventDefaultAction&&!D.ctrl&&!D.alt&&!D.meta)switch(D.keyCode){case 38:K.preventVerticalPan||(D.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new t.Point(0,-this.pixelsPerArrowPress))),this.viewport.applyConstraints()),D.preventDefault=!0;break;case 40:K.preventVerticalPan||(D.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new t.Point(0,this.pixelsPerArrowPress))),this.viewport.applyConstraints()),D.preventDefault=!0;break;case 37:K.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new t.Point(-this.pixelsPerArrowPress,0))),this.viewport.applyConstraints()),D.preventDefault=!0;break;case 39:K.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new t.Point(this.pixelsPerArrowPress,0))),this.viewport.applyConstraints()),D.preventDefault=!0;break;case 187:this.viewport.zoomBy(1.1),this.viewport.applyConstraints(),D.preventDefault=!0;break;case 189:this.viewport.zoomBy(.9),this.viewport.applyConstraints(),D.preventDefault=!0;break;case 48:this.viewport.goHome(),this.viewport.applyConstraints(),D.preventDefault=!0;break;case 87:K.preventVerticalPan||(D.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new t.Point(0,-40))),this.viewport.applyConstraints()),D.preventDefault=!0;break;case 83:K.preventVerticalPan||(D.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new t.Point(0,40))),this.viewport.applyConstraints()),D.preventDefault=!0;break;case 65:K.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new t.Point(-40,0))),this.viewport.applyConstraints()),D.preventDefault=!0;break;case 68:K.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new t.Point(40,0))),this.viewport.applyConstraints()),D.preventDefault=!0;break;case 82:D.shift?this.viewport.flipped?this.viewport.setRotation(this.viewport.getRotation()+this.rotationIncrement):this.viewport.setRotation(this.viewport.getRotation()-this.rotationIncrement):this.viewport.flipped?this.viewport.setRotation(this.viewport.getRotation()-this.rotationIncrement):this.viewport.setRotation(this.viewport.getRotation()+this.rotationIncrement),this.viewport.applyConstraints(),D.preventDefault=!0;break;case 70:this.viewport.toggleFlip(),D.preventDefault=!0;break;case 74:this.goToPreviousPage();break;case 75:this.goToNextPage();break;default:D.preventDefault=!1;break}else D.preventDefault=!1}function G(D){var K={originalEvent:D.originalEvent};this.raiseEvent("canvas-key-press",K)}function Z(D){var K,we=document.activeElement===this.canvas;we||this.canvas.focus(),this.viewport.flipped&&(D.position.x=this.viewport.getContainerSize().x-D.position.x);var ze={tracker:D.eventSource,position:D.position,quick:D.quick,shift:D.shift,originalEvent:D.originalEvent,originalTarget:D.originalTarget,preventDefaultAction:!1};this.raiseEvent("canvas-click",ze),!ze.preventDefaultAction&&this.viewport&&D.quick&&(K=this.gestureSettingsByDeviceType(D.pointerType),K.clickToZoom===!0&&(this.viewport.zoomBy(D.shift?1/this.zoomPerClick:this.zoomPerClick,K.zoomToRefPoint?this.viewport.pointFromPixel(D.position,!0):null),this.viewport.applyConstraints()),K.dblClickDragToZoom&&(n[this.hash].draggingToZoom===!0?(n[this.hash].lastClickTime=null,n[this.hash].draggingToZoom=!1):n[this.hash].lastClickTime=t.now()))}function ae(D){var K,we={tracker:D.eventSource,position:D.position,shift:D.shift,originalEvent:D.originalEvent,preventDefaultAction:!1};this.raiseEvent("canvas-double-click",we),!we.preventDefaultAction&&this.viewport&&(K=this.gestureSettingsByDeviceType(D.pointerType),K.dblClickToZoom&&(this.viewport.zoomBy(D.shift?1/this.zoomPerClick:this.zoomPerClick,K.zoomToRefPoint?this.viewport.pointFromPixel(D.position,!0):null),this.viewport.applyConstraints()))}function te(D){var K,we={tracker:D.eventSource,pointerType:D.pointerType,position:D.position,delta:D.delta,speed:D.speed,direction:D.direction,shift:D.shift,originalEvent:D.originalEvent,preventDefaultAction:!1};if(this.raiseEvent("canvas-drag",we),K=this.gestureSettingsByDeviceType(D.pointerType),!we.preventDefaultAction&&this.viewport){if(K.dblClickDragToZoom&&n[this.hash].draggingToZoom){var ze=Math.pow(this.zoomPerDblClickDrag,D.delta.y/50);this.viewport.zoomBy(ze)}else if(K.dragToPan&&!n[this.hash].draggingToZoom){if(this.panHorizontal||(D.delta.x=0),this.panVertical||(D.delta.y=0),this.viewport.flipped&&(D.delta.x=-D.delta.x),this.constrainDuringPan){var Ne=this.viewport.deltaPointsFromPixels(D.delta.negate());this.viewport.centerSpringX.target.value+=Ne.x,this.viewport.centerSpringY.target.value+=Ne.y;var Qe=this.viewport.getConstrainedBounds();this.viewport.centerSpringX.target.value-=Ne.x,this.viewport.centerSpringY.target.value-=Ne.y,Qe.xConstrained&&(D.delta.x=0),Qe.yConstrained&&(D.delta.y=0)}this.viewport.panBy(this.viewport.deltaPointsFromPixels(D.delta.negate()),K.flickEnabled&&!this.constrainDuringPan)}}}function Q(D){var K,we={tracker:D.eventSource,pointerType:D.pointerType,position:D.position,speed:D.speed,direction:D.direction,shift:D.shift,originalEvent:D.originalEvent,preventDefaultAction:!1};if(this.raiseEvent("canvas-drag-end",we),K=this.gestureSettingsByDeviceType(D.pointerType),!we.preventDefaultAction&&this.viewport){if(!n[this.hash].draggingToZoom&&K.flickEnabled&&D.speed>=K.flickMinSpeed){var ze=0;this.panHorizontal&&(ze=K.flickMomentum*D.speed*Math.cos(D.direction));var Ne=0;this.panVertical&&(Ne=K.flickMomentum*D.speed*Math.sin(D.direction));var Qe=this.viewport.pixelFromPoint(this.viewport.getCenter(!0)),Xe=this.viewport.pointFromPixel(new t.Point(Qe.x-ze,Qe.y-Ne));this.viewport.panTo(Xe,!1)}this.viewport.applyConstraints()}K.dblClickDragToZoom&&n[this.hash].draggingToZoom===!0&&(n[this.hash].draggingToZoom=!1)}function le(D){this.raiseEvent("canvas-enter",{tracker:D.eventSource,pointerType:D.pointerType,position:D.position,buttons:D.buttons,pointers:D.pointers,insideElementPressed:D.insideElementPressed,buttonDownAny:D.buttonDownAny,originalEvent:D.originalEvent})}function ce(D){this.raiseEvent("canvas-exit",{tracker:D.eventSource,pointerType:D.pointerType,position:D.position,buttons:D.buttons,pointers:D.pointers,insideElementPressed:D.insideElementPressed,buttonDownAny:D.buttonDownAny,originalEvent:D.originalEvent})}function me(D){var K;if(this.raiseEvent("canvas-press",{tracker:D.eventSource,pointerType:D.pointerType,position:D.position,insideElementPressed:D.insideElementPressed,insideElementReleased:D.insideElementReleased,originalEvent:D.originalEvent}),K=this.gestureSettingsByDeviceType(D.pointerType),K.dblClickDragToZoom){var we=n[this.hash].lastClickTime,ze=t.now();if(we===null)return;ze-we<this.dblClickTimeThreshold&&(n[this.hash].draggingToZoom=!0),n[this.hash].lastClickTime=null}}function Pe(D){this.raiseEvent("canvas-release",{tracker:D.eventSource,pointerType:D.pointerType,position:D.position,insideElementPressed:D.insideElementPressed,insideElementReleased:D.insideElementReleased,originalEvent:D.originalEvent})}function be(D){this.raiseEvent("canvas-nonprimary-press",{tracker:D.eventSource,position:D.position,pointerType:D.pointerType,button:D.button,buttons:D.buttons,originalEvent:D.originalEvent})}function fe(D){this.raiseEvent("canvas-nonprimary-release",{tracker:D.eventSource,position:D.position,pointerType:D.pointerType,button:D.button,buttons:D.buttons,originalEvent:D.originalEvent})}function ve(D){var K,we,ze,Ne,Qe={tracker:D.eventSource,pointerType:D.pointerType,gesturePoints:D.gesturePoints,lastCenter:D.lastCenter,center:D.center,lastDistance:D.lastDistance,distance:D.distance,shift:D.shift,originalEvent:D.originalEvent,preventDefaultPanAction:!1,preventDefaultZoomAction:!1,preventDefaultRotateAction:!1};if(this.raiseEvent("canvas-pinch",Qe),this.viewport&&(K=this.gestureSettingsByDeviceType(D.pointerType),K.pinchToZoom&&(!Qe.preventDefaultPanAction||!Qe.preventDefaultZoomAction)&&(we=this.viewport.pointFromPixel(D.center,!0),K.zoomToRefPoint&&!Qe.preventDefaultPanAction&&(ze=this.viewport.pointFromPixel(D.lastCenter,!0),Ne=ze.minus(we),this.panHorizontal||(Ne.x=0),this.panVertical||(Ne.y=0),this.viewport.panBy(Ne,!0)),Qe.preventDefaultZoomAction||this.viewport.zoomBy(D.distance/D.lastDistance,we,!0),this.viewport.applyConstraints()),K.pinchRotate&&!Qe.preventDefaultRotateAction)){var Xe=Math.atan2(D.gesturePoints[0].currentPos.y-D.gesturePoints[1].currentPos.y,D.gesturePoints[0].currentPos.x-D.gesturePoints[1].currentPos.x),bt=Math.atan2(D.gesturePoints[0].lastPos.y-D.gesturePoints[1].lastPos.y,D.gesturePoints[0].lastPos.x-D.gesturePoints[1].lastPos.x);we=this.viewport.pointFromPixel(D.center,!0),this.viewport.rotateTo(this.viewport.getRotation(!0)+(Xe-bt)*(180/Math.PI),we,!0)}}function Fe(D){this.raiseEvent("canvas-focus",{tracker:D.eventSource,originalEvent:D.originalEvent})}function Ge(D){this.raiseEvent("canvas-blur",{tracker:D.eventSource,originalEvent:D.originalEvent})}function Te(D){var K,we,ze,Ne,Qe;Ne=t.now(),Qe=Ne-this._lastScrollTime,Qe>this.minScrollDeltaTime?(this._lastScrollTime=Ne,K={tracker:D.eventSource,position:D.position,scroll:D.scroll,shift:D.shift,originalEvent:D.originalEvent,preventDefaultAction:!1,preventDefault:!0},this.raiseEvent("canvas-scroll",K),!K.preventDefaultAction&&this.viewport&&(this.viewport.flipped&&(D.position.x=this.viewport.getContainerSize().x-D.position.x),we=this.gestureSettingsByDeviceType(D.pointerType),we.scrollToZoom&&(ze=Math.pow(this.zoomPerScroll,D.scroll),this.viewport.zoomBy(ze,we.zoomToRefPoint?this.viewport.pointFromPixel(D.position,!0):null),this.viewport.applyConstraints())),D.preventDefault=K.preventDefault):D.preventDefault=!0}function ye(D){n[this.hash].mouseInside=!0,C(this),this.raiseEvent("container-enter",{tracker:D.eventSource,pointerType:D.pointerType,position:D.position,buttons:D.buttons,pointers:D.pointers,insideElementPressed:D.insideElementPressed,buttonDownAny:D.buttonDownAny,originalEvent:D.originalEvent})}function ke(D){D.pointers<1&&(n[this.hash].mouseInside=!1,n[this.hash].animating||x(this)),this.raiseEvent("container-exit",{tracker:D.eventSource,pointerType:D.pointerType,position:D.position,buttons:D.buttons,pointers:D.pointers,insideElementPressed:D.insideElementPressed,buttonDownAny:D.buttonDownAny,originalEvent:D.originalEvent})}function _e(D){Le(D),D.isOpen()?D._updateRequestId=m(D,_e):D._updateRequestId=!1}function $(D,K){var we=D.viewport,ze=we.getZoom(),Ne=we.getCenter();we.resize(K,D.preserveImageSizeOnResize),we.panTo(Ne,!0);var Qe;if(D.preserveImageSizeOnResize)Qe=n[D.hash].prevContainerSize.x/K.x;else{var Xe=new t.Point(0,0),bt=new t.Point(n[D.hash].prevContainerSize.x,n[D.hash].prevContainerSize.y).distanceTo(Xe),Rt=new t.Point(K.x,K.y).distanceTo(Xe);Qe=Rt/bt*n[D.hash].prevContainerSize.x/K.x}we.zoomTo(ze*Qe,null,!0),n[D.hash].prevContainerSize=K,n[D.hash].forceRedraw=!0,n[D.hash].needsResize=!1,n[D.hash].forceResize=!1}function Le(D){if(!(D._opening||!n[D.hash])){if(D.autoResize||n[D.hash].forceResize){var K;if(D._autoResizePolling){K=u(D.container);var we=n[D.hash].prevContainerSize;K.equals(we)||(n[D.hash].needsResize=!0)}n[D.hash].needsResize&&$(D,K||u(D.container))}var ze=D.viewport.update(),Ne=D.world.update()||ze;ze&&D.raiseEvent("viewport-change"),D.referenceStrip&&(Ne=D.referenceStrip.update(D.viewport)||Ne);var Qe=n[D.hash].animating;!Qe&&Ne&&(D.raiseEvent("animation-start"),C(D));var Xe=Qe&&!Ne;Xe&&(n[D.hash].animating=!1),(Ne||Xe||n[D.hash].forceRedraw||D.world.needsDraw())&&(st(D),D._drawOverlays(),D.navigator&&D.navigator.update(D.viewport),n[D.hash].forceRedraw=!1,Ne&&D.raiseEvent("animation")),Xe&&(D.raiseEvent("animation-finish"),n[D.hash].mouseInside||x(D)),n[D.hash].animating=Ne}}function st(D){D.imageLoader.clear(),D.drawer.clear(),D.world.draw(),D.raiseEvent("update-viewport",{})}function J(D,K){return D?D+K:K}function Et(){n[this.hash].lastZoomTime=t.now(),n[this.hash].zoomFactor=this.zoomPerSecond,n[this.hash].zooming=!0,Tt(this)}function yt(){n[this.hash].lastZoomTime=t.now(),n[this.hash].zoomFactor=1/this.zoomPerSecond,n[this.hash].zooming=!0,Tt(this)}function mt(){n[this.hash].zooming=!1}function Tt(D){t.requestAnimationFrame(t.delegate(D,Bt))}function Bt(){var D,K,we;n[this.hash].zooming&&this.viewport&&(D=t.now(),K=D-n[this.hash].lastZoomTime,we=Math.pow(n[this.hash].zoomFactor,K/1e3),this.viewport.zoomBy(we),this.viewport.applyConstraints(),n[this.hash].lastZoomTime=D,Tt(this))}function At(){this.viewport&&(n[this.hash].zooming=!1,this.viewport.zoomBy(this.zoomPerClick/1),this.viewport.applyConstraints())}function at(){this.viewport&&(n[this.hash].zooming=!1,this.viewport.zoomBy(1/this.zoomPerClick),this.viewport.applyConstraints())}function $e(){this.buttonGroup&&(this.buttonGroup.emulateEnter(),this.buttonGroup.emulateLeave())}function wt(){this.viewport&&this.viewport.goHome()}function Lt(){this.isFullPage()&&!t.isFullScreen()?this.setFullPage(!1):this.setFullScreen(!this.isFullPage()),this.buttonGroup&&this.buttonGroup.emulateLeave(),this.fullPageButton.element.focus(),this.viewport&&this.viewport.applyConstraints()}function tn(){if(this.viewport){var D=this.viewport.getRotation();this.viewport.flipped?D+=this.rotationIncrement:D-=this.rotationIncrement,this.viewport.setRotation(D)}}function kt(){if(this.viewport){var D=this.viewport.getRotation();this.viewport.flipped?D-=this.rotationIncrement:D+=this.rotationIncrement,this.viewport.setRotation(D)}}function Gt(){this.viewport.toggleFlip()}}(i),function(t){t.Navigator=function(m){var v=m.viewer,x=this,E,C;m.element||m.id?(m.element?(m.id&&t.console.warn("Given option.id for Navigator was ignored since option.element was provided and is being used instead."),m.element.id?m.id=m.element.id:m.id="navigator-"+t.now(),this.element=m.element):this.element=document.getElementById(m.id),m.controlOptions={anchor:t.ControlAnchor.NONE,attachToViewer:!1,autoFade:!1}):(m.id="navigator-"+t.now(),this.element=t.makeNeutralElement("div"),m.controlOptions={anchor:t.ControlAnchor.TOP_RIGHT,attachToViewer:!0,autoFade:m.autoFade},m.position&&(m.position==="BOTTOM_RIGHT"?m.controlOptions.anchor=t.ControlAnchor.BOTTOM_RIGHT:m.position==="BOTTOM_LEFT"?m.controlOptions.anchor=t.ControlAnchor.BOTTOM_LEFT:m.position==="TOP_RIGHT"?m.controlOptions.anchor=t.ControlAnchor.TOP_RIGHT:m.position==="TOP_LEFT"?m.controlOptions.anchor=t.ControlAnchor.TOP_LEFT:m.position==="ABSOLUTE"&&(m.controlOptions.anchor=t.ControlAnchor.ABSOLUTE,m.controlOptions.top=m.top,m.controlOptions.left=m.left,m.controlOptions.height=m.height,m.controlOptions.width=m.width))),this.element.id=m.id,this.element.className+=" navigator",m=t.extend(!0,{sizeRatio:t.DEFAULT_SETTINGS.navigatorSizeRatio},m,{element:this.element,tabIndex:-1,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:m.animationTime,autoResize:!1,minZoomImageRatio:1,background:m.background,opacity:m.opacity,borderColor:m.borderColor,displayRegionColor:m.displayRegionColor}),m.minPixelRatio=this.minPixelRatio=v.minPixelRatio,t.setElementTouchActionNone(this.element),this.borderWidth=2,this.fudge=new t.Point(1,1),this.totalBorderWidths=new t.Point(this.borderWidth*2,this.borderWidth*2).minus(this.fudge),m.controlOptions.anchor!==t.ControlAnchor.NONE&&function(k,I){k.margin="0px",k.border=I+"px solid "+m.borderColor,k.padding="0px",k.background=m.background,k.opacity=m.opacity,k.overflow="hidden"}(this.element.style,this.borderWidth),this.displayRegion=t.makeNeutralElement("div"),this.displayRegion.id=this.element.id+"-displayregion",this.displayRegion.className="displayregion",function(k,I){k.position="relative",k.top="0px",k.left="0px",k.fontSize="0px",k.overflow="hidden",k.border=I+"px solid "+m.displayRegionColor,k.margin="0px",k.padding="0px",k.background="transparent",k.float="left",k.cssFloat="left",k.styleFloat="left",k.zIndex=999999999,k.cursor="default",k.boxSizing="content-box"}(this.displayRegion.style,this.borderWidth),t.setElementPointerEventsNone(this.displayRegion),t.setElementTouchActionNone(this.displayRegion),this.displayRegionContainer=t.makeNeutralElement("div"),this.displayRegionContainer.id=this.element.id+"-displayregioncontainer",this.displayRegionContainer.className="displayregioncontainer",this.displayRegionContainer.style.width="100%",this.displayRegionContainer.style.height="100%",t.setElementPointerEventsNone(this.displayRegionContainer),t.setElementTouchActionNone(this.displayRegionContainer),v.addControl(this.element,m.controlOptions),this._resizeWithViewer=m.controlOptions.anchor!==t.ControlAnchor.ABSOLUTE&&m.controlOptions.anchor!==t.ControlAnchor.NONE,m.width&&m.height?(this.setWidth(m.width),this.setHeight(m.height)):this._resizeWithViewer&&(E=t.getElementSize(v.element),this.element.style.height=Math.round(E.y*m.sizeRatio)+"px",this.element.style.width=Math.round(E.x*m.sizeRatio)+"px",this.oldViewerSize=E,C=t.getElementSize(this.element),this.elementArea=C.x*C.y),this.oldContainerSize=new t.Point(0,0),t.Viewer.apply(this,[m]),this.displayRegionContainer.appendChild(this.displayRegion),this.element.getElementsByTagName("div")[0].appendChild(this.displayRegionContainer);function O(k,I){d(x.displayRegionContainer,k),d(x.displayRegion,-k),x.viewport.setRotation(k,I)}if(m.navigatorRotate){var _=m.viewer.viewport?m.viewer.viewport.getRotation():m.viewer.degrees||0;O(_,!0),m.viewer.addHandler("rotate",function(k){O(k.degrees,k.immediately)})}this.innerTracker.destroy(),this.innerTracker=new t.MouseTracker({userData:"Navigator.innerTracker",element:this.element,dragHandler:t.delegate(this,o),clickHandler:t.delegate(this,n),releaseHandler:t.delegate(this,u),scrollHandler:t.delegate(this,h),preProcessEventHandler:function(k){k.eventType==="wheel"&&(k.preventDefault=!0)}}),this.outerTracker.userData="Navigator.outerTracker",t.setElementPointerEventsNone(this.canvas),t.setElementPointerEventsNone(this.container),this.addHandler("reset-size",function(){x.viewport&&x.viewport.goHome(!0)}),v.world.addHandler("item-index-change",function(k){window.setTimeout(function(){var I=x.world.getItemAt(k.previousIndex);x.world.setItemIndex(I,k.newIndex)},1)}),v.world.addHandler("remove-item",function(k){var I=k.item,G=x._getMatchingItem(I);G&&x.world.removeItem(G)}),this.update(v.viewport)},t.extend(t.Navigator.prototype,t.EventSource.prototype,t.Viewer.prototype,{updateSize:function(){if(this.viewport){var m=new t.Point(this.container.clientWidth===0?1:this.container.clientWidth,this.container.clientHeight===0?1:this.container.clientHeight);m.equals(this.oldContainerSize)||(this.viewport.resize(m,!0),this.viewport.goHome(!0),this.oldContainerSize=m,this.drawer.clear(),this.world.draw())}},setWidth:function(m){this.width=m,this.element.style.width=typeof m=="number"?m+"px":m,this._resizeWithViewer=!1,this.updateSize()},setHeight:function(m){this.height=m,this.element.style.height=typeof m=="number"?m+"px":m,this._resizeWithViewer=!1,this.updateSize()},setFlip:function(m){return this.viewport.setFlip(m),this.setDisplayTransform(this.viewer.viewport.getFlip()?"scale(-1,1)":"scale(1,1)"),this},setDisplayTransform:function(m){p(this.displayRegion,m),p(this.canvas,m),p(this.element,m)},update:function(m){var v,x,E,C,O,_;if(v=t.getElementSize(this.viewer.element),this._resizeWithViewer&&v.x&&v.y&&!v.equals(this.oldViewerSize)&&(this.oldViewerSize=v,this.maintainSizeRatio||!this.elementArea?(x=v.x*this.sizeRatio,E=v.y*this.sizeRatio):(x=Math.sqrt(this.elementArea*(v.x/v.y)),E=this.elementArea/x),this.element.style.width=Math.round(x)+"px",this.element.style.height=Math.round(E)+"px",this.elementArea||(this.elementArea=x*E),this.updateSize()),m&&this.viewport){if(C=m.getBoundsNoRotate(!0),O=this.viewport.pixelFromPointNoRotate(C.getTopLeft(),!1),_=this.viewport.pixelFromPointNoRotate(C.getBottomRight(),!1).minus(this.totalBorderWidths),!this.navigatorRotate){var k=m.getRotation(!0);d(this.displayRegion,-k)}var I=this.displayRegion.style;I.display=this.world.getItemCount()?"block":"none",I.top=O.y.toFixed(2)+"px",I.left=O.x.toFixed(2)+"px";var G=_.x-O.x,Z=_.y-O.y;I.width=Math.round(Math.max(G,0))+"px",I.height=Math.round(Math.max(Z,0))+"px"}},addTiledImage:function(m){var v=this,x=m.originalTiledImage;delete m.original;var E=t.extend({},m,{success:function(C){var O=C.item;O._originalForNavigator=x,v._matchBounds(O,x,!0),v._matchOpacity(O,x),v._matchCompositeOperation(O,x);function _(){v._matchBounds(O,x)}function k(){v._matchOpacity(O,x)}function I(){v._matchCompositeOperation(O,x)}x.addHandler("bounds-change",_),x.addHandler("clip-change",_),x.addHandler("opacity-change",k),x.addHandler("composite-operation-change",I)}});return t.Viewer.prototype.addTiledImage.apply(this,[E])},destroy:function(){return t.Viewer.prototype.destroy.apply(this)},_getMatchingItem:function(m){for(var v=this.world.getItemCount(),x,E=0;E<v;E++)if(x=this.world.getItemAt(E),x._originalForNavigator===m)return x;return null},_matchBounds:function(m,v,x){var E=v.getBoundsNoRotate();m.setPosition(E.getTopLeft(),x),m.setWidth(E.width,x),m.setRotation(v.getRotation(),x),m.setClip(v.getClip()),m.setFlip(v.getFlip())},_matchOpacity:function(m,v){m.setOpacity(v.opacity)},_matchCompositeOperation:function(m,v){m.setCompositeOperation(v.compositeOperation)}});function n(m){var v={tracker:m.eventSource,position:m.position,quick:m.quick,shift:m.shift,originalEvent:m.originalEvent,preventDefaultAction:!1};if(this.viewer.raiseEvent("navigator-click",v),!v.preventDefaultAction&&m.quick&&this.viewer.viewport&&(this.panVertical||this.panHorizontal)){this.viewer.viewport.flipped&&(m.position.x=this.viewport.getContainerSize().x-m.position.x);var x=this.viewport.pointFromPixel(m.position);this.panVertical?this.panHorizontal||(x.x=this.viewer.viewport.getCenter(!0).x):x.y=this.viewer.viewport.getCenter(!0).y,this.viewer.viewport.panTo(x),this.viewer.viewport.applyConstraints()}}function o(m){var v={tracker:m.eventSource,position:m.position,delta:m.delta,speed:m.speed,direction:m.direction,shift:m.shift,originalEvent:m.originalEvent,preventDefaultAction:!1};this.viewer.raiseEvent("navigator-drag",v),!v.preventDefaultAction&&this.viewer.viewport&&(this.panHorizontal||(m.delta.x=0),this.panVertical||(m.delta.y=0),this.viewer.viewport.flipped&&(m.delta.x=-m.delta.x),this.viewer.viewport.panBy(this.viewport.deltaPointsFromPixels(m.delta)),this.viewer.constrainDuringPan&&this.viewer.viewport.applyConstraints())}function u(m){m.insideElementPressed&&this.viewer.viewport&&this.viewer.viewport.applyConstraints()}function h(m){var v={tracker:m.eventSource,position:m.position,scroll:m.scroll,shift:m.shift,originalEvent:m.originalEvent,preventDefault:m.preventDefault};this.viewer.raiseEvent("navigator-scroll",v),m.preventDefault=v.preventDefault}function d(m,v){p(m,"rotate("+v+"deg)")}function p(m,v){m.style.webkitTransform=v,m.style.mozTransform=v,m.style.msTransform=v,m.style.oTransform=v,m.style.transform=v}}(i),function(t){var n={Errors:{Dzc:"Sorry, we don't support Deep Zoom Collections!",Dzi:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",Xml:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",ImageFormat:"Sorry, we don't support {0}-based Deep Zoom Images.",Security:"It looks like a security restriction stopped us from loading this Deep Zoom Image.",Status:"This space unintentionally left blank ({0} {1}).",OpenFailed:"Unable to open {0}: {1}"},Tooltips:{FullPage:"Toggle full page",Home:"Go home",ZoomIn:"Zoom in",ZoomOut:"Zoom out",NextPage:"Next page",PreviousPage:"Previous page",RotateLeft:"Rotate left",RotateRight:"Rotate right",Flip:"Flip Horizontally"}};t.extend(t,{getString:function(o){var u=o.split("."),h=null,d=arguments,p=n,m;for(m=0;m<u.length-1;m++)p=p[u[m]]||{};return h=p[u[m]],typeof h!="string"&&(t.console.error("Untranslated source string:",o),h=""),h.replace(/\{\d+\}/g,function(v){var x=parseInt(v.match(/\d+/),10)+1;return x<d.length?d[x]:""})},setString:function(o,u){var h=o.split("."),d=n,p;for(p=0;p<h.length-1;p++)d[h[p]]||(d[h[p]]={}),d=d[h[p]];d[h[p]]=u}})}(i),function(t){t.Point=function(n,o){this.x=typeof n=="number"?n:0,this.y=typeof o=="number"?o:0},t.Point.prototype={clone:function(){return new t.Point(this.x,this.y)},plus:function(n){return new t.Point(this.x+n.x,this.y+n.y)},minus:function(n){return new t.Point(this.x-n.x,this.y-n.y)},times:function(n){return new t.Point(this.x*n,this.y*n)},divide:function(n){return new t.Point(this.x/n,this.y/n)},negate:function(){return new t.Point(-this.x,-this.y)},distanceTo:function(n){return Math.sqrt(Math.pow(this.x-n.x,2)+Math.pow(this.y-n.y,2))},squaredDistanceTo:function(n){return Math.pow(this.x-n.x,2)+Math.pow(this.y-n.y,2)},apply:function(n){return new t.Point(n(this.x),n(this.y))},equals:function(n){return n instanceof t.Point&&this.x===n.x&&this.y===n.y},rotate:function(n,o){o=o||new t.Point(0,0);var u,h;if(n%90===0){var d=t.positiveModulo(n,360);switch(d){case 0:u=1,h=0;break;case 90:u=0,h=1;break;case 180:u=-1,h=0;break;case 270:u=0,h=-1;break}}else{var p=n*Math.PI/180;u=Math.cos(p),h=Math.sin(p)}var m=u*(this.x-o.x)-h*(this.y-o.y)+o.x,v=h*(this.x-o.x)+u*(this.y-o.y)+o.y;return new t.Point(m,v)},toString:function(){return"("+Math.round(this.x*100)/100+","+Math.round(this.y*100)/100+")"}}}(i),function(t){t.TileSource=function(o,u,h,d,p,m){var v=this,x=arguments,E,C;if(t.isPlainObject(o)?E=o:E={width:x[0],height:x[1],tileSize:x[2],tileOverlap:x[3],minLevel:x[4],maxLevel:x[5]},t.EventSource.call(this),t.extend(!0,this,E),!this.success){for(C=0;C<arguments.length;C++)if(t.isFunction(arguments[C])){this.success=arguments[C];break}}this.success&&this.addHandler("ready",function(O){v.success(O)}),t.type(arguments[0])==="string"&&(this.url=arguments[0]),this.url?(this.aspectRatio=1,this.dimensions=new t.Point(10,10),this._tileWidth=0,this._tileHeight=0,this.tileOverlap=0,this.minLevel=0,this.maxLevel=0,this.ready=!1,this.getImageInfo(this.url)):(this.ready=!0,this.aspectRatio=E.width&&E.height?E.width/E.height:1,this.dimensions=new t.Point(E.width,E.height),this.tileSize?(this._tileWidth=this._tileHeight=this.tileSize,delete this.tileSize):(this.tileWidth?(this._tileWidth=this.tileWidth,delete this.tileWidth):this._tileWidth=0,this.tileHeight?(this._tileHeight=this.tileHeight,delete this.tileHeight):this._tileHeight=0),this.tileOverlap=E.tileOverlap?E.tileOverlap:0,this.minLevel=E.minLevel?E.minLevel:0,this.maxLevel=E.maxLevel!==void 0&&E.maxLevel!==null?E.maxLevel:E.width&&E.height?Math.ceil(Math.log(Math.max(E.width,E.height))/Math.log(2)):0,this.success&&t.isFunction(this.success)&&this.success(this))},t.TileSource.prototype={getTileSize:function(o){return t.console.error("[TileSource.getTileSize] is deprecated. Use TileSource.getTileWidth() and TileSource.getTileHeight() instead"),this._tileWidth},getTileWidth:function(o){return this._tileWidth?this._tileWidth:this.getTileSize(o)},getTileHeight:function(o){return this._tileHeight?this._tileHeight:this.getTileSize(o)},setMaxLevel:function(o){this.maxLevel=o,this._memoizeLevelScale()},getLevelScale:function(o){return this._memoizeLevelScale(),this.getLevelScale(o)},_memoizeLevelScale:function(){var o={},u;for(u=0;u<=this.maxLevel;u++)o[u]=1/Math.pow(2,this.maxLevel-u);this.getLevelScale=function(h){return o[h]}},getNumTiles:function(o){var u=this.getLevelScale(o),h=Math.ceil(u*this.dimensions.x/this.getTileWidth(o)),d=Math.ceil(u*this.dimensions.y/this.getTileHeight(o));return new t.Point(h,d)},getPixelRatio:function(o){var u=this.dimensions.times(this.getLevelScale(o)),h=1/u.x*t.pixelDensityRatio,d=1/u.y*t.pixelDensityRatio;return new t.Point(h,d)},getClosestLevel:function(){var o,u;for(o=this.minLevel+1;o<=this.maxLevel&&(u=this.getNumTiles(o),!(u.x>1||u.y>1));o++);return o-1},getTileAtPoint:function(o,u){var h=u.x>=0&&u.x<=1&&u.y>=0&&u.y<=1/this.aspectRatio;t.console.assert(h,"[TileSource.getTileAtPoint] must be called with a valid point.");var d=this.dimensions.x*this.getLevelScale(o),p=u.x*d,m=u.y*d,v=Math.floor(p/this.getTileWidth(o)),x=Math.floor(m/this.getTileHeight(o));u.x>=1&&(v=this.getNumTiles(o).x-1);var E=1e-15;return u.y>=1/this.aspectRatio-E&&(x=this.getNumTiles(o).y-1),new t.Point(v,x)},getTileBounds:function(o,u,h,d){var p=this.dimensions.times(this.getLevelScale(o)),m=this.getTileWidth(o),v=this.getTileHeight(o),x=u===0?0:m*u-this.tileOverlap,E=h===0?0:v*h-this.tileOverlap,C=m+(u===0?1:2)*this.tileOverlap,O=v+(h===0?1:2)*this.tileOverlap,_=1/p.x;return C=Math.min(C,p.x-x),O=Math.min(O,p.y-E),d?new t.Rect(0,0,C,O):new t.Rect(x*_,E*_,C*_,O*_)},getImageInfo:function(o){var u=this,h,d,p,m,v,x,E;o&&(v=o.split("/"),x=v[v.length-1],E=x.lastIndexOf("."),E>-1&&(v[v.length-1]=x.slice(0,E)));var C=null;if(this.splitHashDataForPost){var O=o.indexOf("#");O!==-1&&(C=o.substring(O+1),o=o.substr(0,O))}d=function(_){typeof _=="string"&&(_=t.parseXml(_));var k=t.TileSource.determineType(u,_,o);if(!k){u.raiseEvent("open-failed",{message:"Unable to load TileSource",source:o});return}m=k.prototype.configure.apply(u,[_,o,C]),m.ajaxWithCredentials===void 0&&(m.ajaxWithCredentials=u.ajaxWithCredentials),p=new k(m),u.ready=!0,u.raiseEvent("ready",{tileSource:p})},o.match(/\.js$/)?(h=o.split("/").pop().replace(".js",""),t.jsonp({url:o,async:!1,callbackName:h,callback:d})):t.makeAjaxRequest({url:o,postData:C,withCredentials:this.ajaxWithCredentials,headers:this.ajaxHeaders,success:function(_){var k=n(_);d(k)},error:function(_,k){var I;try{I="HTTP "+_.status+" attempting to load TileSource: "+o}catch{var G;typeof k>"u"||!k.toString?G="Unknown error":G=k.toString(),I=G+" attempting to load TileSource: "+o}t.console.error(I),u.raiseEvent("open-failed",{message:I,source:o,postData:C})}})},supports:function(o,u){return!1},configure:function(o,u,h){throw new Error("Method not implemented.")},getTileUrl:function(o,u,h){throw new Error("Method not implemented.")},getTilePostData:function(o,u,h){return null},getTileAjaxHeaders:function(o,u,h){return{}},getTileHashKey:function(o,u,h,d,p,m){function v(x){return p?x+"+"+JSON.stringify(p):x}return v(typeof d!="string"?o+"/"+u+"_"+h:d)},tileExists:function(o,u,h){var d=this.getNumTiles(o);return o>=this.minLevel&&o<=this.maxLevel&&u>=0&&h>=0&&u<d.x&&h<d.y},hasTransparency:function(o,u,h,d){return!!o||u.match(".png")},downloadTileStart:function(o){var u=o.userData,h=new Image;u.image=h,u.request=null;var d=function(p){if(!h){o.finish(null,u.request,"Image load failed: undefined Image instance.");return}h.onload=h.onerror=h.onabort=null,o.finish(p?null:h,u.request,p)};h.onload=function(){d()},h.onabort=h.onerror=function(){d("Image load aborted.")},o.loadWithAjax?u.request=t.makeAjaxRequest({url:o.src,withCredentials:o.ajaxWithCredentials,headers:o.ajaxHeaders,responseType:"arraybuffer",postData:o.postData,success:function(p){var m;try{m=new window.Blob([p.response])}catch(E){var v=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;if(E.name==="TypeError"&&v){var x=new v;x.append(p.response),m=x.getBlob()}}m.size===0?d("Empty image response."):h.src=(window.URL||window.webkitURL).createObjectURL(m)},error:function(p){d("Image load aborted - XHR error")}}):(o.crossOriginPolicy!==!1&&(h.crossOrigin=o.crossOriginPolicy),h.src=o.src)},downloadTileAbort:function(o){o.userData.request&&o.userData.request.abort();var u=o.userData.image;o.userData.image&&(u.onload=u.onerror=u.onabort=null)},createTileCache:function(o,u,h){o._data=u},destroyTileCache:function(o){o._data=null,o._renderedContext=null},getTileCacheData:function(o){return o._data},getTileCacheDataAsImage:function(o){return o._data},getTileCacheDataAsContext2D:function(o){if(!o._renderedContext){var u=document.createElement("canvas");u.width=o._data.width,u.height=o._data.height,o._renderedContext=u.getContext("2d"),o._renderedContext.drawImage(o._data,0,0),o._data=null}return o._renderedContext}},t.extend(!0,t.TileSource.prototype,t.EventSource.prototype);function n(o){var u=o.responseText,h=o.status,d,p;if(o){if(o.status!==200&&o.status!==0)throw h=o.status,d=h===404?"Not Found":o.statusText,new Error(t.getString("Errors.Status",h,d))}else throw new Error(t.getString("Errors.Security"));if(u.match(/^\s*<.*/))try{p=o.responseXML&&o.responseXML.documentElement?o.responseXML:t.parseXml(u)}catch{p=o.responseText}else if(u.match(/\s*[{[].*/))try{p=t.parseJSON(u)}catch{p=u}else p=u;return p}t.TileSource.determineType=function(o,u,h){var d;for(d in i)if(d.match(/.+TileSource$/)&&t.isFunction(i[d])&&t.isFunction(i[d].prototype.supports)&&i[d].prototype.supports.call(o,u,h))return i[d];return t.console.error("No TileSource was able to open %s %s",h,u),null}}(i),function(t){t.DziTileSource=function(u,h,d,p,m,v,x,E,C){var O,_,k,I;if(t.isPlainObject(u)?I=u:I={width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4],fileFormat:arguments[5],displayRects:arguments[6],minLevel:arguments[7],maxLevel:arguments[8]},this._levelRects={},this.tilesUrl=I.tilesUrl,this.fileFormat=I.fileFormat,this.displayRects=I.displayRects,this.displayRects)for(O=this.displayRects.length-1;O>=0;O--)for(_=this.displayRects[O],k=_.minLevel;k<=_.maxLevel;k++)this._levelRects[k]||(this._levelRects[k]=[]),this._levelRects[k].push(_);t.TileSource.apply(this,[I])},t.extend(t.DziTileSource.prototype,t.TileSource.prototype,{supports:function(u,h){var d;return u.Image?d=u.Image.xmlns:u.documentElement&&(u.documentElement.localName==="Image"||u.documentElement.tagName==="Image")&&(d=u.documentElement.namespaceURI),d=(d||"").toLowerCase(),d.indexOf("schemas.microsoft.com/deepzoom/2008")!==-1||d.indexOf("schemas.microsoft.com/deepzoom/2009")!==-1},configure:function(u,h,d){var p;return t.isPlainObject(u)?p=o(this,u):p=n(this,u),h&&!p.tilesUrl&&(p.tilesUrl=h.replace(/([^/]+?)(\.(dzi|xml|js)?(\?[^/]*)?)?\/?$/,"$1_files/"),h.search(/\.(dzi|xml|js)\?/)!==-1?p.queryParams=h.match(/\?.*/):p.queryParams=""),p},getTileUrl:function(u,h,d){return[this.tilesUrl,u,"/",h,"_",d,".",this.fileFormat,this.queryParams].join("")},tileExists:function(u,h,d){var p=this._levelRects[u],m,v,x,E,C,O,_;if(this.minLevel&&u<this.minLevel||this.maxLevel&&u>this.maxLevel)return!1;if(!p||!p.length)return!0;for(_=p.length-1;_>=0;_--)if(m=p[_],!(u<m.minLevel||u>m.maxLevel)&&(v=this.getLevelScale(u),x=m.x*v,E=m.y*v,C=x+m.width*v,O=E+m.height*v,x=Math.floor(x/this._tileWidth),E=Math.floor(E/this._tileWidth),C=Math.ceil(C/this._tileWidth),O=Math.ceil(O/this._tileWidth),x<=h&&h<C&&E<=d&&d<O))return!0;return!1}});function n(u,h){if(!h||!h.documentElement)throw new Error(t.getString("Errors.Xml"));var d=h.documentElement,p=d.localName||d.tagName,m=h.documentElement.namespaceURI,v=null,x=[],E,C,O,_,k;if(p==="Image")try{if(_=d.getElementsByTagName("Size")[0],_===void 0&&(_=d.getElementsByTagNameNS(m,"Size")[0]),v={Image:{xmlns:"http://schemas.microsoft.com/deepzoom/2008",Url:d.getAttribute("Url"),Format:d.getAttribute("Format"),DisplayRect:null,Overlap:parseInt(d.getAttribute("Overlap"),10),TileSize:parseInt(d.getAttribute("TileSize"),10),Size:{Height:parseInt(_.getAttribute("Height"),10),Width:parseInt(_.getAttribute("Width"),10)}}},!t.imageFormatSupported(v.Image.Format))throw new Error(t.getString("Errors.ImageFormat",v.Image.Format.toUpperCase()));for(E=d.getElementsByTagName("DisplayRect"),E===void 0&&(E=d.getElementsByTagNameNS(m,"DisplayRect")[0]),k=0;k<E.length;k++)C=E[k],O=C.getElementsByTagName("Rect")[0],O===void 0&&(O=C.getElementsByTagNameNS(m,"Rect")[0]),x.push({Rect:{X:parseInt(O.getAttribute("X"),10),Y:parseInt(O.getAttribute("Y"),10),Width:parseInt(O.getAttribute("Width"),10),Height:parseInt(O.getAttribute("Height"),10),MinLevel:parseInt(C.getAttribute("MinLevel"),10),MaxLevel:parseInt(C.getAttribute("MaxLevel"),10)}});return x.length&&(v.Image.DisplayRect=x),o(u,v)}catch(Z){throw Z instanceof Error?Z:new Error(t.getString("Errors.Dzi"))}else{if(p==="Collection")throw new Error(t.getString("Errors.Dzc"));if(p==="Error"){var I=d.getElementsByTagName("Message")[0],G=I.firstChild.nodeValue;throw new Error(G)}}throw new Error(t.getString("Errors.Dzi"))}function o(u,h){var d=h.Image,p=d.Url,m=d.Format,v=d.Size,x=d.DisplayRect||[],E=parseInt(v.Width,10),C=parseInt(v.Height,10),O=parseInt(d.TileSize,10),_=parseInt(d.Overlap,10),k=[],I,G;for(G=0;G<x.length;G++)I=x[G].Rect,k.push(new t.DisplayRect(parseInt(I.X,10),parseInt(I.Y,10),parseInt(I.Width,10),parseInt(I.Height,10),parseInt(I.MinLevel,10),parseInt(I.MaxLevel,10)));return t.extend(!0,{width:E,height:C,tileSize:O,tileOverlap:_,minLevel:null,maxLevel:null,tilesUrl:p,fileFormat:m,displayRects:k},h)}}(i),function(t){t.IIIFTileSource=function(d){if(t.extend(!0,this,d),this._id=this["@id"]||this.id||this.identifier||null,!(this.height&&this.width&&this._id))throw new Error("IIIF required parameters (width, height, or id) not provided.");if(d.tileSizePerScaleFactor={},this.tileFormat=this.tileFormat||"jpg",this.version=d.version,this.tile_width&&this.tile_height)d.tileWidth=this.tile_width,d.tileHeight=this.tile_height;else if(this.tile_width)d.tileSize=this.tile_width;else if(this.tile_height)d.tileSize=this.tile_height;else if(this.tiles)if(this.tiles.length===1)d.tileWidth=this.tiles[0].width,d.tileHeight=this.tiles[0].height||this.tiles[0].width,this.scale_factors=this.tiles[0].scaleFactors;else{this.scale_factors=[];for(var p=0;p<this.tiles.length;p++)for(var m=0;m<this.tiles[p].scaleFactors.length;m++){var v=this.tiles[p].scaleFactors[m];this.scale_factors.push(v),d.tileSizePerScaleFactor[v]={width:this.tiles[p].width,height:this.tiles[p].height||this.tiles[p].width}}}else if(n(d)){for(var x=Math.min(this.height,this.width),E=[256,512,1024],C=[],O=0;O<E.length;O++)E[O]<=x&&C.push(E[O]);C.length>0?d.tileSize=Math.max.apply(null,C):d.tileSize=x}else this.sizes&&this.sizes.length>0?(this.emulateLegacyImagePyramid=!0,d.levels=o(this),t.extend(!0,d,{width:d.levels[d.levels.length-1].width,height:d.levels[d.levels.length-1].height,tileSize:Math.max(d.height,d.width),tileOverlap:0,minLevel:0,maxLevel:d.levels.length-1}),this.levels=d.levels):t.console.error("Nothing in the info.json to construct image pyramids from");if(!d.maxLevel&&!this.emulateLegacyImagePyramid)if(!this.scale_factors)d.maxLevel=Number(Math.round(Math.log(Math.max(this.width,this.height),2)));else{var _=Math.max.apply(null,this.scale_factors);d.maxLevel=Math.round(Math.log(_)*Math.LOG2E)}if(this.sizes){var k=this.sizes.length;(k===d.maxLevel||k===d.maxLevel+1)&&(this.levelSizes=this.sizes,k===d.maxLevel&&this.levelSizes.push({width:this.width,height:this.height}))}t.TileSource.apply(this,[d])},t.extend(t.IIIFTileSource.prototype,t.TileSource.prototype,{supports:function(d,p){return d.protocol&&d.protocol==="http://iiif.io/api/image"||d["@context"]&&(d["@context"]==="http://library.stanford.edu/iiif/image-api/1.1/context.json"||d["@context"]==="http://iiif.io/api/image/1/context.json")||d.profile&&d.profile.indexOf("http://library.stanford.edu/iiif/image-api/compliance.html")===0||d.identifier&&d.width&&d.height?!0:!!(d.documentElement&&d.documentElement.tagName==="info"&&d.documentElement.namespaceURI==="http://library.stanford.edu/iiif/image-api/ns/")},configure:function(d,p,m){if(t.isPlainObject(d)){if(!d["@context"])d["@context"]="http://iiif.io/api/image/1.0/context.json",d["@id"]=p.replace("/info.json",""),d.version=1;else{var v=d["@context"];if(Array.isArray(v)){for(var x=0;x<v.length;x++)if(typeof v[x]=="string"&&(/^http:\/\/iiif\.io\/api\/image\/[1-3]\/context\.json$/.test(v[x])||v[x]==="http://library.stanford.edu/iiif/image-api/1.1/context.json")){v=v[x];break}}switch(v){case"http://iiif.io/api/image/1/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/context.json":d.version=1;break;case"http://iiif.io/api/image/2/context.json":d.version=2;break;case"http://iiif.io/api/image/3/context.json":d.version=3;break;default:t.console.error("Data has a @context property which contains no known IIIF context URI.")}}if(d.preferredFormats){for(var E=0;E<d.preferredFormats.length;E++)if(i.imageFormatSupported(d.preferredFormats[E])){d.tileFormat=d.preferredFormats[E];break}}return d}else{var C=u(d);return C["@context"]="http://iiif.io/api/image/1.0/context.json",C["@id"]=p.replace("/info.xml",""),C.version=1,C}},getTileWidth:function(d){if(this.emulateLegacyImagePyramid)return t.TileSource.prototype.getTileWidth.call(this,d);var p=Math.pow(2,this.maxLevel-d);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[p]?this.tileSizePerScaleFactor[p].width:this._tileWidth},getTileHeight:function(d){if(this.emulateLegacyImagePyramid)return t.TileSource.prototype.getTileHeight.call(this,d);var p=Math.pow(2,this.maxLevel-d);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[p]?this.tileSizePerScaleFactor[p].height:this._tileHeight},getLevelScale:function(d){if(this.emulateLegacyImagePyramid){var p=NaN;return this.levels.length>0&&d>=this.minLevel&&d<=this.maxLevel&&(p=this.levels[d].width/this.levels[this.maxLevel].width),p}return t.TileSource.prototype.getLevelScale.call(this,d)},getNumTiles:function(d){if(this.emulateLegacyImagePyramid){var p=this.getLevelScale(d);return p?new t.Point(1,1):new t.Point(0,0)}if(this.levelSizes){var m=this.levelSizes[d],v=Math.ceil(m.width/this.getTileWidth(d)),x=Math.ceil(m.height/this.getTileHeight(d));return new t.Point(v,x)}else return t.TileSource.prototype.getNumTiles.call(this,d)},getTileAtPoint:function(d,p){if(this.emulateLegacyImagePyramid)return new t.Point(0,0);if(this.levelSizes){var m=p.x>=0&&p.x<=1&&p.y>=0&&p.y<=1/this.aspectRatio;t.console.assert(m,"[TileSource.getTileAtPoint] must be called with a valid point.");var v=this.levelSizes[d].width,x=p.x*v,E=p.y*v,C=Math.floor(x/this.getTileWidth(d)),O=Math.floor(E/this.getTileHeight(d));p.x>=1&&(C=this.getNumTiles(d).x-1);var _=1e-15;return p.y>=1/this.aspectRatio-_&&(O=this.getNumTiles(d).y-1),new t.Point(C,O)}return t.TileSource.prototype.getTileAtPoint.call(this,d,p)},getTileUrl:function(d,p,m){if(this.emulateLegacyImagePyramid){var v=null;return this.levels.length>0&&d>=this.minLevel&&d<=this.maxLevel&&(v=this.levels[d].url),v}var x="0",E=Math.pow(.5,this.maxLevel-d),C,O,_,k,I,G,Z,ae,te,Q,le,ce,me,Pe,be,fe;return this.levelSizes?(C=this.levelSizes[d].width,O=this.levelSizes[d].height):(C=Math.ceil(this.width*E),O=Math.ceil(this.height*E)),_=this.getTileWidth(d),k=this.getTileHeight(d),I=Math.round(_/E),G=Math.round(k/E),this.version===1?be="native."+this.tileFormat:be="default."+this.tileFormat,C<_&&O<k?(this.version===2&&C===this.width?ce="full":this.version===3&&C===this.width&&O===this.height?ce="max":this.version===3?ce=C+","+O:ce=C+",",Z="full"):(ae=p*I,te=m*G,Q=Math.min(I,this.width-ae),le=Math.min(G,this.height-te),p===0&&m===0&&Q===this.width&&le===this.height?Z="full":Z=[ae,te,Q,le].join(","),me=Math.min(_,C-p*_),Pe=Math.min(k,O-m*k),this.version===2&&me===this.width?ce="full":this.version===3&&me===this.width&&Pe===this.height?ce="max":this.version===3?ce=me+","+Pe:ce=me+","),fe=[this._id,Z,ce,x,be].join("/"),fe},__testonly__:{canBeTiled:n,constructLevels:o}});function n(d){var p=["http://library.stanford.edu/iiif/image-api/compliance.html#level0","http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0","http://iiif.io/api/image/2/level0.json","level0","https://iiif.io/api/image/3/level0.json"],m=Array.isArray(d.profile)?d.profile[0]:d.profile,v=p.indexOf(m)!==-1,x=!1;return d.version===2&&d.profile.length>1&&d.profile[1].supports&&(x=d.profile[1].supports.indexOf("sizeByW")!==-1),d.version===3&&d.extraFeatures&&(x=d.extraFeatures.indexOf("sizeByWh")!==-1),!v||x}function o(d){for(var p=[],m=0;m<d.sizes.length;m++)p.push({url:d._id+"/full/"+d.sizes[m].width+","+(d.version===3?d.sizes[m].height:"")+"/0/default."+d.tileFormat,width:d.sizes[m].width,height:d.sizes[m].height});return p.sort(function(v,x){return v.width-x.width})}function u(d){if(!d||!d.documentElement)throw new Error(t.getString("Errors.Xml"));var p=d.documentElement,m=p.tagName,v=null;if(m==="info")try{return v={},h(p,v),v}catch(x){throw x instanceof Error?x:new Error(t.getString("Errors.IIIF"))}throw new Error(t.getString("Errors.IIIF"))}function h(d,p,m){var v,x;if(d.nodeType===3&&m)x=d.nodeValue.trim(),x.match(/^\d*$/)&&(x=Number(x)),p[m]?(t.isArray(p[m])||(p[m]=[p[m]]),p[m].push(x)):p[m]=x;else if(d.nodeType===1)for(v=0;v<d.childNodes.length;v++)h(d.childNodes[v],p,d.nodeName)}}(i),function(t){t.OsmTileSource=function(n,o,u,h,d){var p;t.isPlainObject(n)?p=n:p={width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]},(!p.width||!p.height)&&(p.width=65572864,p.height=65572864),p.tileSize||(p.tileSize=256,p.tileOverlap=0),p.tilesUrl||(p.tilesUrl="http://tile.openstreetmap.org/"),p.minLevel=8,t.TileSource.apply(this,[p])},t.extend(t.OsmTileSource.prototype,t.TileSource.prototype,{supports:function(n,o){return n.type&&n.type==="openstreetmaps"},configure:function(n,o,u){return n},getTileUrl:function(n,o,u){return this.tilesUrl+(n-8)+"/"+o+"/"+u+".png"}})}(i),function(t){t.TmsTileSource=function(n,o,u,h,d){var p;t.isPlainObject(n)?p=n:p={width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]};var m=Math.ceil(p.width/256)*256,v=Math.ceil(p.height/256)*256,x;m>v?x=m/256:x=v/256,p.maxLevel=Math.ceil(Math.log(x)/Math.log(2))-1,p.tileSize=256,p.width=m,p.height=v,t.TileSource.apply(this,[p])},t.extend(t.TmsTileSource.prototype,t.TileSource.prototype,{supports:function(n,o){return n.type&&n.type==="tiledmapservice"},configure:function(n,o,u){return n},getTileUrl:function(n,o,u){var h=this.getNumTiles(n).y-1;return this.tilesUrl+n+"/"+o+"/"+(h-u)+".png"}})}(i),function(t){t.ZoomifyTileSource=function(n){typeof n.tileSize>"u"&&(n.tileSize=256),typeof n.fileFormat>"u"&&(n.fileFormat="jpg",this.fileFormat=n.fileFormat);var o={x:n.width,y:n.height};for(n.imageSizes=[{x:n.width,y:n.height}],n.gridSize=[this._getGridSize(n.width,n.height,n.tileSize)];parseInt(o.x,10)>n.tileSize||parseInt(o.y,10)>n.tileSize;)o.x=Math.floor(o.x/2),o.y=Math.floor(o.y/2),n.imageSizes.push({x:o.x,y:o.y}),n.gridSize.push(this._getGridSize(o.x,o.y,n.tileSize));n.imageSizes.reverse(),n.gridSize.reverse(),n.minLevel=0,n.maxLevel=n.gridSize.length-1,i.TileSource.apply(this,[n])},t.extend(t.ZoomifyTileSource.prototype,t.TileSource.prototype,{_getGridSize:function(n,o,u){return{x:Math.ceil(n/u),y:Math.ceil(o/u)}},_calculateAbsoluteTileNumber:function(n,o,u){for(var h=0,d={},p=0;p<n;p++)d=this.gridSize[p],h+=d.x*d.y;return d=this.gridSize[n],h+=d.x*u+o,h},supports:function(n,o){return n.type&&n.type==="zoomifytileservice"},configure:function(n,o,u){return n},getTileUrl:function(n,o,u){var h=0,d=this._calculateAbsoluteTileNumber(n,o,u);return h=Math.floor(d/256),this.tilesUrl+"TileGroup"+h+"/"+n+"-"+o+"-"+u+"."+this.fileFormat}})}(i),function(t){t.LegacyTileSource=function(h){var d,p,m;t.isArray(h)&&(d={type:"legacy-image-pyramid",levels:h}),d.levels=n(d.levels),d.levels.length>0?(p=d.levels[d.levels.length-1].width,m=d.levels[d.levels.length-1].height):(p=0,m=0,t.console.error("No supported image formats found")),t.extend(!0,d,{width:p,height:m,tileSize:Math.max(m,p),tileOverlap:0,minLevel:0,maxLevel:d.levels.length>0?d.levels.length-1:0}),t.TileSource.apply(this,[d]),this.levels=d.levels},t.extend(t.LegacyTileSource.prototype,t.TileSource.prototype,{supports:function(h,d){return h.type&&h.type==="legacy-image-pyramid"||h.documentElement&&h.documentElement.getAttribute("type")==="legacy-image-pyramid"},configure:function(h,d,p){var m;return t.isPlainObject(h)?m=u(this,h):m=o(this,h),m},getLevelScale:function(h){var d=NaN;return this.levels.length>0&&h>=this.minLevel&&h<=this.maxLevel&&(d=this.levels[h].width/this.levels[this.maxLevel].width),d},getNumTiles:function(h){var d=this.getLevelScale(h);return d?new t.Point(1,1):new t.Point(0,0)},getTileUrl:function(h,d,p){var m=null;return this.levels.length>0&&h>=this.minLevel&&h<=this.maxLevel&&(m=this.levels[h].url),m}});function n(h){var d=[],p,m;for(m=0;m<h.length;m++)p=h[m],p.height&&p.width&&p.url?d.push({url:p.url,width:Number(p.width),height:Number(p.height)}):t.console.error("Unsupported image format: %s",p.url?p.url:"<no URL>");return d.sort(function(v,x){return v.height-x.height})}function o(h,d){if(!d||!d.documentElement)throw new Error(t.getString("Errors.Xml"));var p=d.documentElement,m=p.tagName,v=null,x=[],E,C;if(m==="image")try{for(v={type:p.getAttribute("type"),levels:[]},x=p.getElementsByTagName("level"),C=0;C<x.length;C++)E=x[C],v.levels.push({url:E.getAttribute("url"),width:parseInt(E.getAttribute("width"),10),height:parseInt(E.getAttribute("height"),10)});return u(h,v)}catch(O){throw O instanceof Error?O:new Error("Unknown error parsing Legacy Image Pyramid XML.")}else{if(m==="collection")throw new Error("Legacy Image Pyramid Collections not yet supported.");if(m==="error")throw new Error("Error: "+d)}throw new Error("Unknown element "+m)}function u(h,d){return d.levels}}(i),function(t){t.ImageTileSource=function(n){n=t.extend({buildPyramid:!0,crossOriginPolicy:!1,ajaxWithCredentials:!1,useCanvas:!0},n),t.TileSource.apply(this,[n])},t.extend(t.ImageTileSource.prototype,t.TileSource.prototype,{supports:function(n,o){return n.type&&n.type==="image"},configure:function(n,o,u){return n},getImageInfo:function(n){var o=this._image=new Image,u=this;this.crossOriginPolicy&&(o.crossOrigin=this.crossOriginPolicy),this.ajaxWithCredentials&&(o.useCredentials=this.ajaxWithCredentials),t.addEvent(o,"load",function(){u.width=o.naturalWidth,u.height=o.naturalHeight,u.aspectRatio=u.width/u.height,u.dimensions=new t.Point(u.width,u.height),u._tileWidth=u.width,u._tileHeight=u.height,u.tileOverlap=0,u.minLevel=0,u.levels=u._buildLevels(),u.maxLevel=u.levels.length-1,u.ready=!0,u.raiseEvent("ready",{tileSource:u})}),t.addEvent(o,"error",function(){u.raiseEvent("open-failed",{message:"Error loading image at "+n,source:n})}),o.src=n},getLevelScale:function(n){var o=NaN;return n>=this.minLevel&&n<=this.maxLevel&&(o=this.levels[n].width/this.levels[this.maxLevel].width),o},getNumTiles:function(n){var o=this.getLevelScale(n);return o?new t.Point(1,1):new t.Point(0,0)},getTileUrl:function(n,o,u){var h=null;return n>=this.minLevel&&n<=this.maxLevel&&(h=this.levels[n].url),h},getContext2D:function(n,o,u){var h=null;return n>=this.minLevel&&n<=this.maxLevel&&(h=this.levels[n].context2D),h},destroy:function(){this._freeupCanvasMemory()},_buildLevels:function(){var n=[{url:this._image.src,width:this._image.naturalWidth,height:this._image.naturalHeight}];if(!this.buildPyramid||!t.supportsCanvas||!this.useCanvas)return delete this._image,n;var o=this._image.naturalWidth,u=this._image.naturalHeight,h=document.createElement("canvas"),d=h.getContext("2d");if(h.width=o,h.height=u,d.drawImage(this._image,0,0,o,u),n[0].context2D=d,delete this._image,t.isCanvasTainted(h))return n;for(;o>=2&&u>=2;){o=Math.floor(o/2),u=Math.floor(u/2);var p=document.createElement("canvas"),m=p.getContext("2d");p.width=o,p.height=u,m.drawImage(h,0,0,o,u),n.splice(0,0,{context2D:m,width:o,height:u}),h=p,d=m}return n},_freeupCanvasMemory:function(){for(var n=0;n<this.levels.length;n++)this.levels[n].context2D&&(this.levels[n].context2D.canvas.height=0,this.levels[n].context2D.canvas.width=0)}})}(i),function(t){t.TileSourceCollection=function(n,o,u,h){t.console.error("TileSourceCollection is deprecated; use World instead")}}(i),function(t){t.ButtonState={REST:0,GROUP:1,HOVER:2,DOWN:3},t.Button=function(m){var v=this;t.EventSource.call(this),t.extend(!0,this,{tooltip:null,srcRest:null,srcGroup:null,srcHover:null,srcDown:null,clickTimeThreshold:t.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:t.DEFAULT_SETTINGS.clickDistThreshold,fadeDelay:0,fadeLength:2e3,onPress:null,onRelease:null,onClick:null,onEnter:null,onExit:null,onFocus:null,onBlur:null,userData:null},m),this.element=m.element||t.makeNeutralElement("div"),m.element||(this.imgRest=t.makeTransparentImage(this.srcRest),this.imgGroup=t.makeTransparentImage(this.srcGroup),this.imgHover=t.makeTransparentImage(this.srcHover),this.imgDown=t.makeTransparentImage(this.srcDown),this.imgRest.alt=this.imgGroup.alt=this.imgHover.alt=this.imgDown.alt=this.tooltip,t.setElementPointerEventsNone(this.imgRest),t.setElementPointerEventsNone(this.imgGroup),t.setElementPointerEventsNone(this.imgHover),t.setElementPointerEventsNone(this.imgDown),this.element.style.position="relative",t.setElementTouchActionNone(this.element),this.imgGroup.style.position=this.imgHover.style.position=this.imgDown.style.position="absolute",this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top="0px",this.imgGroup.style.left=this.imgHover.style.left=this.imgDown.style.left="0px",this.imgHover.style.visibility=this.imgDown.style.visibility="hidden",t.Browser.vendor===t.BROWSERS.FIREFOX&&t.Browser.version<3&&(this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top=""),this.element.appendChild(this.imgRest),this.element.appendChild(this.imgGroup),this.element.appendChild(this.imgHover),this.element.appendChild(this.imgDown)),this.addHandler("press",this.onPress),this.addHandler("release",this.onRelease),this.addHandler("click",this.onClick),this.addHandler("enter",this.onEnter),this.addHandler("exit",this.onExit),this.addHandler("focus",this.onFocus),this.addHandler("blur",this.onBlur),this.currentState=t.ButtonState.GROUP,this.fadeBeginTime=null,this.shouldFade=!1,this.element.style.display="inline-block",this.element.style.position="relative",this.element.title=this.tooltip,this.tracker=new t.MouseTracker({userData:"Button.tracker",element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(x){x.insideElementPressed?(d(v,t.ButtonState.DOWN),v.raiseEvent("enter",{originalEvent:x.originalEvent})):x.buttonDownAny||d(v,t.ButtonState.HOVER)},focusHandler:function(x){v.tracker.enterHandler(x),v.raiseEvent("focus",{originalEvent:x.originalEvent})},leaveHandler:function(x){p(v,t.ButtonState.GROUP),x.insideElementPressed&&v.raiseEvent("exit",{originalEvent:x.originalEvent})},blurHandler:function(x){v.tracker.leaveHandler(x),v.raiseEvent("blur",{originalEvent:x.originalEvent})},pressHandler:function(x){d(v,t.ButtonState.DOWN),v.raiseEvent("press",{originalEvent:x.originalEvent})},releaseHandler:function(x){x.insideElementPressed&&x.insideElementReleased?(p(v,t.ButtonState.HOVER),v.raiseEvent("release",{originalEvent:x.originalEvent})):x.insideElementPressed?p(v,t.ButtonState.GROUP):d(v,t.ButtonState.HOVER)},clickHandler:function(x){x.quick&&v.raiseEvent("click",{originalEvent:x.originalEvent})},keyHandler:function(x){x.keyCode===13?(v.raiseEvent("click",{originalEvent:x.originalEvent}),v.raiseEvent("release",{originalEvent:x.originalEvent}),x.preventDefault=!0):x.preventDefault=!1}}),p(this,t.ButtonState.REST)},t.extend(t.Button.prototype,t.EventSource.prototype,{notifyGroupEnter:function(){d(this,t.ButtonState.GROUP)},notifyGroupExit:function(){p(this,t.ButtonState.REST)},disable:function(){this.notifyGroupExit(),this.element.disabled=!0,this.tracker.setTracking(!1),t.setElementOpacity(this.element,.2,!0)},enable:function(){this.element.disabled=!1,this.tracker.setTracking(!0),t.setElementOpacity(this.element,1,!0),this.notifyGroupEnter()},destroy:function(){this.imgRest&&(this.element.removeChild(this.imgRest),this.imgRest=null),this.imgGroup&&(this.element.removeChild(this.imgGroup),this.imgGroup=null),this.imgHover&&(this.element.removeChild(this.imgHover),this.imgHover=null),this.imgDown&&(this.element.removeChild(this.imgDown),this.imgDown=null),this.removeAllHandlers(),this.tracker.destroy(),this.element=null}});function n(m){t.requestAnimationFrame(function(){o(m)})}function o(m){var v,x,E;m.shouldFade&&(v=t.now(),x=v-m.fadeBeginTime,E=1-x/m.fadeLength,E=Math.min(1,E),E=Math.max(0,E),m.imgGroup&&t.setElementOpacity(m.imgGroup,E,!0),E>0&&n(m))}function u(m){m.shouldFade=!0,m.fadeBeginTime=t.now()+m.fadeDelay,window.setTimeout(function(){n(m)},m.fadeDelay)}function h(m){m.shouldFade=!1,m.imgGroup&&t.setElementOpacity(m.imgGroup,1,!0)}function d(m,v){m.element.disabled||(v>=t.ButtonState.GROUP&&m.currentState===t.ButtonState.REST&&(h(m),m.currentState=t.ButtonState.GROUP),v>=t.ButtonState.HOVER&&m.currentState===t.ButtonState.GROUP&&(m.imgHover&&(m.imgHover.style.visibility=""),m.currentState=t.ButtonState.HOVER),v>=t.ButtonState.DOWN&&m.currentState===t.ButtonState.HOVER&&(m.imgDown&&(m.imgDown.style.visibility=""),m.currentState=t.ButtonState.DOWN))}function p(m,v){m.element.disabled||(v<=t.ButtonState.HOVER&&m.currentState===t.ButtonState.DOWN&&(m.imgDown&&(m.imgDown.style.visibility="hidden"),m.currentState=t.ButtonState.HOVER),v<=t.ButtonState.GROUP&&m.currentState===t.ButtonState.HOVER&&(m.imgHover&&(m.imgHover.style.visibility="hidden"),m.currentState=t.ButtonState.GROUP),v<=t.ButtonState.REST&&m.currentState===t.ButtonState.GROUP&&(u(m),m.currentState=t.ButtonState.REST))}}(i),function(t){t.ButtonGroup=function(n){t.extend(!0,this,{buttons:[],clickTimeThreshold:t.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:t.DEFAULT_SETTINGS.clickDistThreshold,labelText:""},n);var o=this.buttons.concat([]),u=this,h;if(this.element=n.element||t.makeNeutralElement("div"),!n.group)for(this.element.style.display="inline-block",h=0;h<o.length;h++)this.element.appendChild(o[h].element);t.setElementTouchActionNone(this.element),this.tracker=new t.MouseTracker({userData:"ButtonGroup.tracker",element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(d){var p;for(p=0;p<u.buttons.length;p++)u.buttons[p].notifyGroupEnter()},leaveHandler:function(d){var p;if(!d.insideElementPressed)for(p=0;p<u.buttons.length;p++)u.buttons[p].notifyGroupExit()}})},t.ButtonGroup.prototype={addButton:function(n){this.buttons.push(n),this.element.appendChild(n.element)},emulateEnter:function(){this.tracker.enterHandler({eventSource:this.tracker})},emulateLeave:function(){this.tracker.leaveHandler({eventSource:this.tracker})},destroy:function(){for(;this.buttons.length;){var n=this.buttons.pop();this.element.removeChild(n.element),n.destroy()}this.tracker.destroy(),this.element=null}}}(i),function(t){t.Rect=function(n,o,u,h,d){this.x=typeof n=="number"?n:0,this.y=typeof o=="number"?o:0,this.width=typeof u=="number"?u:0,this.height=typeof h=="number"?h:0,this.degrees=typeof d=="number"?d:0,this.degrees=t.positiveModulo(this.degrees,360);var p,m;this.degrees>=270?(p=this.getTopRight(),this.x=p.x,this.y=p.y,m=this.height,this.height=this.width,this.width=m,this.degrees-=270):this.degrees>=180?(p=this.getBottomRight(),this.x=p.x,this.y=p.y,this.degrees-=180):this.degrees>=90&&(p=this.getBottomLeft(),this.x=p.x,this.y=p.y,m=this.height,this.height=this.width,this.width=m,this.degrees-=90)},t.Rect.fromSummits=function(n,o,u){var h=n.distanceTo(o),d=n.distanceTo(u),p=o.minus(n),m=Math.atan(p.y/p.x);return p.x<0?m+=Math.PI:p.y<0&&(m+=2*Math.PI),new t.Rect(n.x,n.y,h,d,m/Math.PI*180)},t.Rect.prototype={clone:function(){return new t.Rect(this.x,this.y,this.width,this.height,this.degrees)},getAspectRatio:function(){return this.width/this.height},getTopLeft:function(){return new t.Point(this.x,this.y)},getBottomRight:function(){return new t.Point(this.x+this.width,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getTopRight:function(){return new t.Point(this.x+this.width,this.y).rotate(this.degrees,this.getTopLeft())},getBottomLeft:function(){return new t.Point(this.x,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getCenter:function(){return new t.Point(this.x+this.width/2,this.y+this.height/2).rotate(this.degrees,this.getTopLeft())},getSize:function(){return new t.Point(this.width,this.height)},equals:function(n){return n instanceof t.Rect&&this.x===n.x&&this.y===n.y&&this.width===n.width&&this.height===n.height&&this.degrees===n.degrees},times:function(n){return new t.Rect(this.x*n,this.y*n,this.width*n,this.height*n,this.degrees)},translate:function(n){return new t.Rect(this.x+n.x,this.y+n.y,this.width,this.height,this.degrees)},union:function(n){var o=this.getBoundingBox(),u=n.getBoundingBox(),h=Math.min(o.x,u.x),d=Math.min(o.y,u.y),p=Math.max(o.x+o.width,u.x+u.width),m=Math.max(o.y+o.height,u.y+u.height);return new t.Rect(h,d,p-h,m-d)},intersection:function(n){var o=1e-10,u=[],h=this.getTopLeft();n.containsPoint(h,o)&&u.push(h);var d=this.getTopRight();n.containsPoint(d,o)&&u.push(d);var p=this.getBottomLeft();n.containsPoint(p,o)&&u.push(p);var m=this.getBottomRight();n.containsPoint(m,o)&&u.push(m);var v=n.getTopLeft();this.containsPoint(v,o)&&u.push(v);var x=n.getTopRight();this.containsPoint(x,o)&&u.push(x);var E=n.getBottomLeft();this.containsPoint(E,o)&&u.push(E);var C=n.getBottomRight();this.containsPoint(C,o)&&u.push(C);for(var O=this._getSegments(),_=n._getSegments(),k=0;k<O.length;k++)for(var I=O[k],G=0;G<_.length;G++){var Z=_[G],ae=te(I[0],I[1],Z[0],Z[1]);ae&&u.push(ae)}function te(fe,ve,Fe,Ge){var Te=ve.minus(fe),ye=Ge.minus(Fe),ke=-ye.x*Te.y+Te.x*ye.y;if(ke===0)return null;var _e=(Te.x*(fe.y-Fe.y)-Te.y*(fe.x-Fe.x))/ke,$=(ye.x*(fe.y-Fe.y)-ye.y*(fe.x-Fe.x))/ke;return-1e-10<=_e&&_e<=1-o&&-1e-10<=$&&$<=1-o?new t.Point(fe.x+$*Te.x,fe.y+$*Te.y):null}if(u.length===0)return null;for(var Q=u[0].x,le=u[0].x,ce=u[0].y,me=u[0].y,Pe=1;Pe<u.length;Pe++){var be=u[Pe];be.x<Q&&(Q=be.x),be.x>le&&(le=be.x),be.y<ce&&(ce=be.y),be.y>me&&(me=be.y)}return new t.Rect(Q,ce,le-Q,me-ce)},_getSegments:function(){var n=this.getTopLeft(),o=this.getTopRight(),u=this.getBottomLeft(),h=this.getBottomRight();return[[n,o],[o,h],[h,u],[u,n]]},rotate:function(n,o){if(n=t.positiveModulo(n,360),n===0)return this.clone();o=o||this.getCenter();var u=this.getTopLeft().rotate(n,o),h=this.getTopRight().rotate(n,o),d=h.minus(u);d=d.apply(function(m){var v=1e-15;return Math.abs(m)<v?0:m});var p=Math.atan(d.y/d.x);return d.x<0?p+=Math.PI:d.y<0&&(p+=2*Math.PI),new t.Rect(u.x,u.y,this.width,this.height,p/Math.PI*180)},getBoundingBox:function(){if(this.degrees===0)return this.clone();var n=this.getTopLeft(),o=this.getTopRight(),u=this.getBottomLeft(),h=this.getBottomRight(),d=Math.min(n.x,o.x,u.x,h.x),p=Math.max(n.x,o.x,u.x,h.x),m=Math.min(n.y,o.y,u.y,h.y),v=Math.max(n.y,o.y,u.y,h.y);return new t.Rect(d,m,p-d,v-m)},getIntegerBoundingBox:function(){var n=this.getBoundingBox(),o=Math.floor(n.x),u=Math.floor(n.y),h=Math.ceil(n.width+n.x-o),d=Math.ceil(n.height+n.y-u);return new t.Rect(o,u,h,d)},containsPoint:function(n,o){o=o||0;var u=this.getTopLeft(),h=this.getTopRight(),d=this.getBottomLeft(),p=h.minus(u),m=d.minus(u);return(n.x-u.x)*p.x+(n.y-u.y)*p.y>=-o&&(n.x-h.x)*p.x+(n.y-h.y)*p.y<=o&&(n.x-u.x)*m.x+(n.y-u.y)*m.y>=-o&&(n.x-d.x)*m.x+(n.y-d.y)*m.y<=o},toString:function(){return"["+Math.round(this.x*100)/100+", "+Math.round(this.y*100)/100+", "+Math.round(this.width*100)/100+"x"+Math.round(this.height*100)/100+", "+Math.round(this.degrees*100)/100+"deg]"}}}(i),function(t){var n={};t.ReferenceStrip=function(E){var C=this,O=E.viewer,_=t.getElementSize(O.element),k,I,G;for(E.id||(E.id="referencestrip-"+t.now(),this.element=t.makeNeutralElement("div"),this.element.id=E.id,this.element.className="referencestrip"),E=t.extend(!0,{sizeRatio:t.DEFAULT_SETTINGS.referenceStripSizeRatio,position:t.DEFAULT_SETTINGS.referenceStripPosition,scroll:t.DEFAULT_SETTINGS.referenceStripScroll,clickTimeThreshold:t.DEFAULT_SETTINGS.clickTimeThreshold},E,{element:this.element}),t.extend(this,E),n[this.id]={animating:!1},this.minPixelRatio=this.viewer.minPixelRatio,this.element.tabIndex=0,I=this.element.style,I.marginTop="0px",I.marginRight="0px",I.marginBottom="0px",I.marginLeft="0px",I.left="0px",I.bottom="0px",I.border="0px",I.background="#000",I.position="relative",t.setElementTouchActionNone(this.element),t.setElementOpacity(this.element,.8),this.viewer=O,this.tracker=new t.MouseTracker({userData:"ReferenceStrip.tracker",element:this.element,clickHandler:t.delegate(this,o),dragHandler:t.delegate(this,u),scrollHandler:t.delegate(this,h),enterHandler:t.delegate(this,p),leaveHandler:t.delegate(this,m),keyDownHandler:t.delegate(this,v),keyHandler:t.delegate(this,x),preProcessEventHandler:function(Z){Z.eventType==="wheel"&&(Z.preventDefault=!0)}}),E.width&&E.height?(this.element.style.width=E.width+"px",this.element.style.height=E.height+"px",O.addControl(this.element,{anchor:t.ControlAnchor.BOTTOM_LEFT})):E.scroll==="horizontal"?(this.element.style.width=_.x*E.sizeRatio*O.tileSources.length+12*O.tileSources.length+"px",this.element.style.height=_.y*E.sizeRatio+"px",O.addControl(this.element,{anchor:t.ControlAnchor.BOTTOM_LEFT})):(this.element.style.height=_.y*E.sizeRatio*O.tileSources.length+12*O.tileSources.length+"px",this.element.style.width=_.x*E.sizeRatio+"px",O.addControl(this.element,{anchor:t.ControlAnchor.TOP_LEFT})),this.panelWidth=_.x*this.sizeRatio+8,this.panelHeight=_.y*this.sizeRatio+8,this.panels=[],this.miniViewers={},G=0;G<O.tileSources.length;G++)k=t.makeNeutralElement("div"),k.id=this.element.id+"-"+G,k.style.width=C.panelWidth+"px",k.style.height=C.panelHeight+"px",k.style.display="inline",k.style.float="left",k.style.cssFloat="left",k.style.styleFloat="left",k.style.padding="2px",t.setElementTouchActionNone(k),t.setElementPointerEventsNone(k),this.element.appendChild(k),k.activePanel=!1,this.panels.push(k);d(this,this.scroll==="vertical"?_.y:_.x,0),this.setFocus(0)},t.ReferenceStrip.prototype={setFocus:function(E){var C=this.element.querySelector("#"+this.element.id+"-"+E),O=t.getElementSize(this.viewer.canvas),_=Number(this.element.style.width.replace("px","")),k=Number(this.element.style.height.replace("px","")),I=-Number(this.element.style.marginLeft.replace("px","")),G=-Number(this.element.style.marginTop.replace("px","")),Z;this.currentSelected!==C&&(this.currentSelected&&(this.currentSelected.style.background="#000"),this.currentSelected=C,this.currentSelected.style.background="#999",this.scroll==="horizontal"?(Z=Number(E)*(this.panelWidth+3),Z>I+O.x-this.panelWidth?(Z=Math.min(Z,_-O.x),this.element.style.marginLeft=-Z+"px",d(this,O.x,-Z)):Z<I&&(Z=Math.max(0,Z-O.x/2),this.element.style.marginLeft=-Z+"px",d(this,O.x,-Z))):(Z=Number(E)*(this.panelHeight+3),Z>G+O.y-this.panelHeight?(Z=Math.min(Z,k-O.y),this.element.style.marginTop=-Z+"px",d(this,O.y,-Z)):Z<G&&(Z=Math.max(0,Z-O.y/2),this.element.style.marginTop=-Z+"px",d(this,O.y,-Z))),this.currentPage=E,p.call(this,{eventSource:this.tracker}))},update:function(){return!!n[this.id].animating},destroy:function(){if(this.miniViewers)for(var E in this.miniViewers)this.miniViewers[E].destroy();this.tracker.destroy(),this.element&&this.viewer.removeControl(this.element)}};function o(E){if(E.quick){var C;this.scroll==="horizontal"?C=Math.floor(E.position.x/(this.panelWidth+4)):C=Math.floor(E.position.y/this.panelHeight),this.viewer.goToPage(C)}this.element.focus()}function u(E){if(this.dragging=!0,this.element){var C=Number(this.element.style.marginLeft.replace("px","")),O=Number(this.element.style.marginTop.replace("px","")),_=Number(this.element.style.width.replace("px","")),k=Number(this.element.style.height.replace("px","")),I=t.getElementSize(this.viewer.canvas);this.scroll==="horizontal"?-E.delta.x>0?C>-(_-I.x)&&(this.element.style.marginLeft=C+E.delta.x*2+"px",d(this,I.x,C+E.delta.x*2)):-E.delta.x<0&&C<0&&(this.element.style.marginLeft=C+E.delta.x*2+"px",d(this,I.x,C+E.delta.x*2)):-E.delta.y>0?O>-(k-I.y)&&(this.element.style.marginTop=O+E.delta.y*2+"px",d(this,I.y,O+E.delta.y*2)):-E.delta.y<0&&O<0&&(this.element.style.marginTop=O+E.delta.y*2+"px",d(this,I.y,O+E.delta.y*2))}}function h(E){if(this.element){var C=Number(this.element.style.marginLeft.replace("px","")),O=Number(this.element.style.marginTop.replace("px","")),_=Number(this.element.style.width.replace("px","")),k=Number(this.element.style.height.replace("px","")),I=t.getElementSize(this.viewer.canvas);this.scroll==="horizontal"?E.scroll>0?C>-(_-I.x)&&(this.element.style.marginLeft=C-E.scroll*60+"px",d(this,I.x,C-E.scroll*60)):E.scroll<0&&C<0&&(this.element.style.marginLeft=C-E.scroll*60+"px",d(this,I.x,C-E.scroll*60)):E.scroll<0?O>I.y-k&&(this.element.style.marginTop=O+E.scroll*60+"px",d(this,I.y,O+E.scroll*60)):E.scroll>0&&O<0&&(this.element.style.marginTop=O+E.scroll*60+"px",d(this,I.y,O+E.scroll*60)),E.preventDefault=!0}}function d(E,C,O){var _,k,I,G,Z,ae;for(E.scroll==="horizontal"?_=E.panelWidth:_=E.panelHeight,k=Math.ceil(C/_)+5,I=Math.ceil((Math.abs(O)+C)/_)+1,k=I-k,k=k<0?0:k,Z=k;Z<I&&Z<E.panels.length;Z++)if(ae=E.panels[Z],!ae.activePanel){var te,Q=E.viewer.tileSources[Z];Q.referenceStripThumbnailUrl?te={type:"image",url:Q.referenceStripThumbnailUrl}:te=Q,G=new t.Viewer({id:ae.id,tileSources:[te],element:ae,navigatorSizeRatio:E.sizeRatio,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0,loadTilesWithAjax:E.viewer.loadTilesWithAjax,ajaxHeaders:E.viewer.ajaxHeaders,useCanvas:E.useCanvas}),t.setElementPointerEventsNone(G.canvas),t.setElementPointerEventsNone(G.container),G.innerTracker.setTracking(!1),G.outerTracker.setTracking(!1),E.miniViewers[ae.id]=G,ae.activePanel=!0}}function p(E){var C=E.eventSource.element;this.scroll==="horizontal"?C.style.marginBottom="0px":C.style.marginLeft="0px"}function m(E){var C=E.eventSource.element;this.scroll==="horizontal"?C.style.marginBottom="-"+t.getElementSize(C).y/2+"px":C.style.marginLeft="-"+t.getElementSize(C).x/2+"px"}function v(E){if(!E.ctrl&&!E.alt&&!E.meta)switch(E.keyCode){case 38:h.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),E.preventDefault=!0;break;case 40:h.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),E.preventDefault=!0;break;case 37:h.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),E.preventDefault=!0;break;case 39:h.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),E.preventDefault=!0;break;default:E.preventDefault=!1;break}else E.preventDefault=!1}function x(E){if(!E.ctrl&&!E.alt&&!E.meta)switch(E.keyCode){case 61:h.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),E.preventDefault=!0;break;case 45:h.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),E.preventDefault=!0;break;case 48:case 119:case 87:h.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),E.preventDefault=!0;break;case 115:case 83:h.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),E.preventDefault=!0;break;case 97:h.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),E.preventDefault=!0;break;case 100:h.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),E.preventDefault=!0;break;default:E.preventDefault=!1;break}else E.preventDefault=!1}}(i),function(t){t.DisplayRect=function(n,o,u,h,d,p){t.Rect.apply(this,[n,o,u,h]),this.minLevel=d,this.maxLevel=p},t.extend(t.DisplayRect.prototype,t.Rect.prototype)}(i),function(t){t.Spring=function(o){var u=arguments;typeof o!="object"&&(o={initial:u.length&&typeof u[0]=="number"?u[0]:void 0,springStiffness:u.length>1?u[1].springStiffness:5,animationTime:u.length>1?u[1].animationTime:1.5}),t.console.assert(typeof o.springStiffness=="number"&&o.springStiffness!==0,"[OpenSeadragon.Spring] options.springStiffness must be a non-zero number"),t.console.assert(typeof o.animationTime=="number"&&o.animationTime>=0,"[OpenSeadragon.Spring] options.animationTime must be a number greater than or equal to 0"),o.exponential&&(this._exponential=!0,delete o.exponential),t.extend(!0,this,o),this.current={value:typeof this.initial=="number"?this.initial:this._exponential?0:1,time:t.now()},t.console.assert(!this._exponential||this.current.value!==0,"[OpenSeadragon.Spring] value must be non-zero for exponential springs"),this.start={value:this.current.value,time:this.current.time},this.target={value:this.current.value,time:this.current.time},this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},t.Spring.prototype={resetTo:function(o){t.console.assert(!this._exponential||o!==0,"[OpenSeadragon.Spring.resetTo] target must be non-zero for exponential springs"),this.start.value=this.target.value=this.current.value=o,this.start.time=this.target.time=this.current.time=t.now(),this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},springTo:function(o){t.console.assert(!this._exponential||o!==0,"[OpenSeadragon.Spring.springTo] target must be non-zero for exponential springs"),this.start.value=this.current.value,this.start.time=this.current.time,this.target.value=o,this.target.time=this.start.time+1e3*this.animationTime,this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},shiftBy:function(o){this.start.value+=o,this.target.value+=o,this._exponential&&(t.console.assert(this.target.value!==0&&this.start.value!==0,"[OpenSeadragon.Spring.shiftBy] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},setExponential:function(o){this._exponential=o,this._exponential&&(t.console.assert(this.current.value!==0&&this.target.value!==0&&this.start.value!==0,"[OpenSeadragon.Spring.setExponential] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},update:function(){this.current.time=t.now();var o,u;this._exponential?(o=this.start._logValue,u=this.target._logValue):(o=this.start.value,u=this.target.value);var h=this.current.time>=this.target.time?u:o+(u-o)*n(this.springStiffness,(this.current.time-this.start.time)/(this.target.time-this.start.time)),d=this.current.value;return this._exponential?this.current.value=Math.exp(h):this.current.value=h,d!==this.current.value},isAtTargetValue:function(){return this.current.value===this.target.value}};function n(o,u){return(1-Math.exp(o*-u))/(1-Math.exp(-o))}}(i),function(t){t.ImageJob=function(o){t.extend(!0,this,{timeout:t.DEFAULT_SETTINGS.timeout,jobId:null,tries:0},o),this.data=null,this.userData={},this.errorMsg=null},t.ImageJob.prototype={start:function(){this.tries++;var o=this,u=this.abort;this.jobId=window.setTimeout(function(){o.finish(null,null,"Image load exceeded timeout ("+o.timeout+" ms)")},this.timeout),this.abort=function(){o.source.downloadTileAbort(o),typeof u=="function"&&u()},this.source.downloadTileStart(this)},finish:function(o,u,h){this.data=o,this.request=u,this.errorMsg=h,this.jobId&&window.clearTimeout(this.jobId),this.callback(this)}},t.ImageLoader=function(o){t.extend(!0,this,{jobLimit:t.DEFAULT_SETTINGS.imageLoaderLimit,timeout:t.DEFAULT_SETTINGS.timeout,jobQueue:[],failedTiles:[],jobsInProgress:0},o)},t.ImageLoader.prototype={addJob:function(o){if(!o.source){t.console.error("ImageLoader.prototype.addJob() requires [options.source]. TileSource since new API defines how images are fetched. Creating a dummy TileSource.");var u=t.TileSource.prototype;o.source={downloadTileStart:u.downloadTileStart,downloadTileAbort:u.downloadTileAbort}}var h=this,d=function(v){n(h,v,o.callback)},p={src:o.src,tile:o.tile||{},source:o.source,loadWithAjax:o.loadWithAjax,ajaxHeaders:o.loadWithAjax?o.ajaxHeaders:null,crossOriginPolicy:o.crossOriginPolicy,ajaxWithCredentials:o.ajaxWithCredentials,postData:o.postData,callback:d,abort:o.abort,timeout:this.timeout},m=new t.ImageJob(p);!this.jobLimit||this.jobsInProgress<this.jobLimit?(m.start(),this.jobsInProgress++):this.jobQueue.push(m)},clear:function(){for(var o=0;o<this.jobQueue.length;o++){var u=this.jobQueue[o];typeof u.abort=="function"&&u.abort()}this.jobQueue=[]}};function n(o,u,h){u.errorMsg!==""&&(u.data===null||u.data===void 0)&&u.tries<1+o.tileRetryMax&&o.failedTiles.push(u);var d;o.jobsInProgress--,(!o.jobLimit||o.jobsInProgress<o.jobLimit)&&o.jobQueue.length>0&&(d=o.jobQueue.shift(),d.start(),o.jobsInProgress++),o.tileRetryMax>0&&o.jobQueue.length===0&&(!o.jobLimit||o.jobsInProgress<o.jobLimit)&&o.failedTiles.length>0&&(d=o.failedTiles.shift(),setTimeout(function(){d.start()},o.tileRetryDelay),o.jobsInProgress++),h(u.data,u.errorMsg,u.request)}}(i),function(t){t.Tile=function(n,o,u,h,d,p,m,v,x,E,C,O){this.level=n,this.x=o,this.y=u,this.bounds=h,this.sourceBounds=E,this.exists=d,this._url=p,this.postData=C,this.context2D=m,this.loadWithAjax=v,this.ajaxHeaders=x,O===void 0&&(t.console.warn("Tile constructor needs 'cacheKey' variable: creation tile cache in Tile class is deprecated. TileSource.prototype.getTileHashKey will be used."),O=t.TileSource.prototype.getTileHashKey(n,o,u,p,x,C)),this.cacheKey=O,this.loaded=!1,this.loading=!1,this.element=null,this.imgElement=null,this.style=null,this.position=null,this.size=null,this.flipped=!1,this.blendStart=null,this.opacity=null,this.squaredDistance=null,this.visibility=null,this.hasTransparency=!1,this.beingDrawn=!1,this.lastTouchTime=0,this.isRightMost=!1,this.isBottomMost=!1},t.Tile.prototype={toString:function(){return this.level+"/"+this.x+"_"+this.y},_hasTransparencyChannel:function(){return console.warn("Tile.prototype._hasTransparencyChannel() has been deprecated and will be removed in the future. Use TileSource.prototype.hasTransparency() instead."),!!this.context2D||this.getUrl().match(".png")},drawHTML:function(n){if(!this.cacheImageRecord){t.console.warn("[Tile.drawHTML] attempting to draw tile %s when it's not cached",this.toString());return}if(!this.loaded){t.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString());return}if(!this.element){var o=this.getImage();if(!o)return;this.element=t.makeNeutralElement("div"),this.imgElement=o.cloneNode(),this.imgElement.style.msInterpolationMode="nearest-neighbor",this.imgElement.style.width="100%",this.imgElement.style.height="100%",this.style=this.element.style,this.style.position="absolute"}this.element.parentNode!==n&&n.appendChild(this.element),this.imgElement.parentNode!==this.element&&this.element.appendChild(this.imgElement),this.style.top=this.position.y+"px",this.style.left=this.position.x+"px",this.style.height=this.size.y+"px",this.style.width=this.size.x+"px",this.flipped&&(this.style.transform="scaleX(-1)"),t.setElementOpacity(this.element,this.opacity)},get image(){return t.console.error("[Tile.image] property has been deprecated. Use [Tile.prototype.getImage] instead."),this.getImage()},get url(){return t.console.error("[Tile.url] property has been deprecated. Use [Tile.prototype.getUrl] instead."),this.getUrl()},getImage:function(){return this.cacheImageRecord.getImage()},getUrl:function(){return typeof this._url=="function"?this._url():this._url},getCanvasContext:function(){return this.context2D||this.cacheImageRecord.getRenderedContext()},drawCanvas:function(n,o,u,h,d,p){var m=this.position.times(t.pixelDensityRatio),v=this.size.times(t.pixelDensityRatio),x;if(!this.context2D&&!this.cacheImageRecord){t.console.warn("[Tile.drawCanvas] attempting to draw tile %s when it's not cached",this.toString());return}if(x=this.getCanvasContext(),!this.loaded||!x){t.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString());return}n.save(),n.globalAlpha=this.opacity,typeof u=="number"&&u!==1&&(m=m.times(u),v=v.times(u)),h instanceof t.Point&&(m=m.plus(h)),n.globalAlpha===1&&this.hasTransparency&&(d&&(m.x=Math.round(m.x),m.y=Math.round(m.y),v.x=Math.round(v.x),v.y=Math.round(v.y)),n.clearRect(m.x,m.y,v.x,v.y)),o({context:n,tile:this,rendered:x});var E,C;this.sourceBounds?(E=Math.min(this.sourceBounds.width,x.canvas.width),C=Math.min(this.sourceBounds.height,x.canvas.height)):(E=x.canvas.width,C=x.canvas.height),n.translate(m.x+v.x/2,0),this.flipped&&n.scale(-1,1),n.drawImage(x.canvas,0,0,E,C,-v.x/2,m.y,v.x,v.y),n.restore()},getScaleForEdgeSmoothing:function(){var n;if(this.cacheImageRecord)n=this.cacheImageRecord.getRenderedContext();else if(this.context2D)n=this.context2D;else return t.console.warn("[Tile.drawCanvas] attempting to get tile scale %s when tile's not cached",this.toString()),1;return n.canvas.width/(this.size.x*t.pixelDensityRatio)},getTranslationForEdgeSmoothing:function(n,o,u){var h=Math.max(1,Math.ceil((u.x-o.x)/2)),d=Math.max(1,Math.ceil((u.y-o.y)/2));return new t.Point(h,d).minus(this.position.times(t.pixelDensityRatio).times(n||1).apply(function(p){return p%1}))},unload:function(){this.imgElement&&this.imgElement.parentNode&&this.imgElement.parentNode.removeChild(this.imgElement),this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=null,this.imgElement=null,this.loaded=!1,this.loading=!1}}}(i),function(t){t.OverlayPlacement=t.Placement,t.OverlayRotationMode=t.freezeObject({NO_ROTATION:1,EXACT:2,BOUNDING_BOX:3}),t.Overlay=function(n,o,u){var h;t.isPlainObject(n)?h=n:h={element:n,location:o,placement:u},this.element=h.element,this.style=h.element.style,this._init(h)},t.Overlay.prototype={_init:function(n){this.location=n.location,this.placement=n.placement===void 0?t.Placement.TOP_LEFT:n.placement,this.onDraw=n.onDraw,this.checkResize=n.checkResize===void 0?!0:n.checkResize,this.width=n.width===void 0?null:n.width,this.height=n.height===void 0?null:n.height,this.rotationMode=n.rotationMode||t.OverlayRotationMode.EXACT,this.location instanceof t.Rect&&(this.width=this.location.width,this.height=this.location.height,this.location=this.location.getTopLeft(),this.placement=t.Placement.TOP_LEFT),this.scales=this.width!==null&&this.height!==null,this.bounds=new t.Rect(this.location.x,this.location.y,this.width,this.height),this.position=this.location},adjust:function(n,o){var u=t.Placement.properties[this.placement];u&&(u.isHorizontallyCentered?n.x-=o.x/2:u.isRight&&(n.x-=o.x),u.isVerticallyCentered?n.y-=o.y/2:u.isBottom&&(n.y-=o.y))},destroy:function(){var n=this.element,o=this.style;n.parentNode&&(n.parentNode.removeChild(n),n.prevElementParent&&(o.display="none",document.body.appendChild(n))),this.onDraw=null,o.top="",o.left="",o.position="",this.width!==null&&(o.width=""),this.height!==null&&(o.height="");var u=t.getCssPropertyWithVendorPrefix("transformOrigin"),h=t.getCssPropertyWithVendorPrefix("transform");u&&h&&(o[u]="",o[h]="")},drawHTML:function(n,o){var u=this.element;u.parentNode!==n&&(u.prevElementParent=u.parentNode,u.prevNextSibling=u.nextSibling,n.appendChild(u),this.style.position="absolute",this.size=t.getElementSize(u));var h=this._getOverlayPositionAndSize(o),d=h.position,p=this.size=h.size,m=h.rotate;if(this.onDraw)this.onDraw(d,p,this.element);else{var v=this.style;v.left=d.x+"px",v.top=d.y+"px",this.width!==null&&(v.width=p.x+"px"),this.height!==null&&(v.height=p.y+"px");var x=t.getCssPropertyWithVendorPrefix("transformOrigin"),E=t.getCssPropertyWithVendorPrefix("transform");x&&E&&(m?(v[x]=this._getTransformOrigin(),v[E]="rotate("+m+"deg)"):(v[x]="",v[E]="")),v.display="block"}},_getOverlayPositionAndSize:function(n){var o=n.pixelFromPoint(this.location,!0),u=this._getSizeInPixels(n);this.adjust(o,u);var h=0;if(n.getRotation(!0)&&this.rotationMode!==t.OverlayRotationMode.NO_ROTATION)if(this.rotationMode===t.OverlayRotationMode.BOUNDING_BOX&&this.width!==null&&this.height!==null){var d=new t.Rect(o.x,o.y,u.x,u.y),p=this._getBoundingBox(d,n.getRotation(!0));o=p.getTopLeft(),u=p.getSize()}else h=n.getRotation(!0);return{position:o,size:u,rotate:h}},_getSizeInPixels:function(n){var o=this.size.x,u=this.size.y;if(this.width!==null||this.height!==null){var h=n.deltaPixelsFromPointsNoRotate(new t.Point(this.width||0,this.height||0),!0);this.width!==null&&(o=h.x),this.height!==null&&(u=h.y)}if(this.checkResize&&(this.width===null||this.height===null)){var d=this.size=t.getElementSize(this.element);this.width===null&&(o=d.x),this.height===null&&(u=d.y)}return new t.Point(o,u)},_getBoundingBox:function(n,o){var u=this._getPlacementPoint(n);return n.rotate(o,u).getBoundingBox()},_getPlacementPoint:function(n){var o=new t.Point(n.x,n.y),u=t.Placement.properties[this.placement];return u&&(u.isHorizontallyCentered?o.x+=n.width/2:u.isRight&&(o.x+=n.width),u.isVerticallyCentered?o.y+=n.height/2:u.isBottom&&(o.y+=n.height)),o},_getTransformOrigin:function(){var n="",o=t.Placement.properties[this.placement];return o&&(o.isLeft?n="left":o.isRight&&(n="right"),o.isTop?n+=" top":o.isBottom&&(n+=" bottom")),n},update:function(n,o){var u=t.isPlainObject(n)?n:{location:n,placement:o};this._init({location:u.location||this.location,placement:u.placement!==void 0?u.placement:this.placement,onDraw:u.onDraw||this.onDraw,checkResize:u.checkResize||this.checkResize,width:u.width!==void 0?u.width:this.width,height:u.height!==void 0?u.height:this.height,rotationMode:u.rotationMode||this.rotationMode})},getBounds:function(n){t.console.assert(n,"A viewport must now be passed to Overlay.getBounds.");var o=this.width,u=this.height;if(o===null||u===null){var h=n.deltaPointsFromPixelsNoRotate(this.size,!0);o===null&&(o=h.x),u===null&&(u=h.y)}var d=this.location.clone();return this.adjust(d,new t.Point(o,u)),this._adjustBoundsForRotation(n,new t.Rect(d.x,d.y,o,u))},_adjustBoundsForRotation:function(n,o){if(!n||n.getRotation(!0)===0||this.rotationMode===t.OverlayRotationMode.EXACT)return o;if(this.rotationMode===t.OverlayRotationMode.BOUNDING_BOX){if(this.width===null||this.height===null)return o;var u=this._getOverlayPositionAndSize(n);return n.viewerElementToViewportRectangle(new t.Rect(u.position.x,u.position.y,u.size.x,u.size.y))}return o.rotate(-n.getRotation(!0),this._getPlacementPoint(o))}}}(i),function(t){t.Drawer=function(n){t.console.assert(n.viewer,"[Drawer] options.viewer is required");var o=arguments;if(t.isPlainObject(n)||(n={source:o[0],viewport:o[1],element:o[2]}),t.console.assert(n.viewport,"[Drawer] options.viewport is required"),t.console.assert(n.element,"[Drawer] options.element is required"),n.source&&t.console.error("[Drawer] options.source is no longer accepted; use TiledImage instead"),this.viewer=n.viewer,this.viewport=n.viewport,this.debugGridColor=typeof n.debugGridColor=="string"?[n.debugGridColor]:n.debugGridColor||t.DEFAULT_SETTINGS.debugGridColor,n.opacity&&t.console.error("[Drawer] options.opacity is no longer accepted; set the opacity on the TiledImage instead"),this.useCanvas=t.supportsCanvas&&(this.viewer?this.viewer.useCanvas:!0),this.container=t.getElement(n.element),this.canvas=t.makeNeutralElement(this.useCanvas?"canvas":"div"),this.context=this.useCanvas?this.canvas.getContext("2d"):null,this.sketchCanvas=null,this.sketchContext=null,this.element=this.container,this.container.dir="ltr",this.useCanvas){var u=this._calculateCanvasSize();this.canvas.width=u.x,this.canvas.height=u.y}this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.position="absolute",t.setElementOpacity(this.canvas,this.opacity,!0),t.setElementPointerEventsNone(this.canvas),t.setElementTouchActionNone(this.canvas),this.container.style.textAlign="left",this.container.appendChild(this.canvas),this._imageSmoothingEnabled=!0},t.Drawer.prototype={addOverlay:function(n,o,u,h){return t.console.error("drawer.addOverlay is deprecated. Use viewer.addOverlay instead."),this.viewer.addOverlay(n,o,u,h),this},updateOverlay:function(n,o,u){return t.console.error("drawer.updateOverlay is deprecated. Use viewer.updateOverlay instead."),this.viewer.updateOverlay(n,o,u),this},removeOverlay:function(n){return t.console.error("drawer.removeOverlay is deprecated. Use viewer.removeOverlay instead."),this.viewer.removeOverlay(n),this},clearOverlays:function(){return t.console.error("drawer.clearOverlays is deprecated. Use viewer.clearOverlays instead."),this.viewer.clearOverlays(),this},viewportCoordToDrawerCoord:function(n){var o=this.viewport.pixelFromPointNoRotate(n,!0);return new t.Point(o.x*t.pixelDensityRatio,o.y*t.pixelDensityRatio)},clipWithPolygons:function(n,o){if(this.useCanvas){var u=this._getContext(o);u.beginPath(),n.forEach(function(h){h.forEach(function(d,p){u[p===0?"moveTo":"lineTo"](d.x,d.y)})}),u.clip()}},setOpacity:function(n){t.console.error("drawer.setOpacity is deprecated. Use tiledImage.setOpacity instead.");for(var o=this.viewer.world,u=0;u<o.getItemCount();u++)o.getItemAt(u).setOpacity(n);return this},getOpacity:function(){t.console.error("drawer.getOpacity is deprecated. Use tiledImage.getOpacity instead.");for(var n=this.viewer.world,o=0,u=0;u<n.getItemCount();u++){var h=n.getItemAt(u).getOpacity();h>o&&(o=h)}return o},needsUpdate:function(){return t.console.error("[Drawer.needsUpdate] this function is deprecated. Use World.needsDraw instead."),this.viewer.world.needsDraw()},numTilesLoaded:function(){return t.console.error("[Drawer.numTilesLoaded] this function is deprecated. Use TileCache.numTilesLoaded instead."),this.viewer.tileCache.numTilesLoaded()},reset:function(){return t.console.error("[Drawer.reset] this function is deprecated. Use World.resetItems instead."),this.viewer.world.resetItems(),this},update:function(){return t.console.error("[Drawer.update] this function is deprecated. Use Drawer.clear and World.draw instead."),this.clear(),this.viewer.world.draw(),this},canRotate:function(){return this.useCanvas},destroy:function(){this.canvas.width=1,this.canvas.height=1,this.sketchCanvas=null,this.sketchContext=null},clear:function(){if(this.canvas.innerHTML="",this.useCanvas){var n=this._calculateCanvasSize();if((this.canvas.width!==n.x||this.canvas.height!==n.y)&&(this.canvas.width=n.x,this.canvas.height=n.y,this._updateImageSmoothingEnabled(this.context),this.sketchCanvas!==null)){var o=this._calculateSketchCanvasSize();this.sketchCanvas.width=o.x,this.sketchCanvas.height=o.y,this._updateImageSmoothingEnabled(this.sketchContext)}this._clear()}},_clear:function(n,o){if(this.useCanvas){var u=this._getContext(n);if(o)u.clearRect(o.x,o.y,o.width,o.height);else{var h=u.canvas;u.clearRect(0,0,h.width,h.height)}}},viewportToDrawerRectangle:function(n){var o=this.viewport.pixelFromPointNoRotate(n.getTopLeft(),!0),u=this.viewport.deltaPixelsFromPointsNoRotate(n.getSize(),!0);return new t.Rect(o.x*t.pixelDensityRatio,o.y*t.pixelDensityRatio,u.x*t.pixelDensityRatio,u.y*t.pixelDensityRatio)},drawTile:function(n,o,u,h,d,p,m){if(t.console.assert(n,"[Drawer.drawTile] tile is required"),t.console.assert(o,"[Drawer.drawTile] drawingHandler is required"),this.useCanvas){var v=this._getContext(u);h=h||1,n.drawCanvas(v,o,h,d,p,m)}else n.drawHTML(this.canvas)},_getContext:function(n){var o=this.context;if(n){if(this.sketchCanvas===null){this.sketchCanvas=document.createElement("canvas");var u=this._calculateSketchCanvasSize();if(this.sketchCanvas.width=u.x,this.sketchCanvas.height=u.y,this.sketchContext=this.sketchCanvas.getContext("2d"),this.viewport.getRotation()===0){var h=this;this.viewer.addHandler("rotate",function d(){if(h.viewport.getRotation()!==0){h.viewer.removeHandler("rotate",d);var p=h._calculateSketchCanvasSize();h.sketchCanvas.width=p.x,h.sketchCanvas.height=p.y}})}this._updateImageSmoothingEnabled(this.sketchContext)}o=this.sketchContext}return o},saveContext:function(n){this.useCanvas&&this._getContext(n).save()},restoreContext:function(n){this.useCanvas&&this._getContext(n).restore()},setClip:function(n,o){if(this.useCanvas){var u=this._getContext(o);u.beginPath(),u.rect(n.x,n.y,n.width,n.height),u.clip()}},drawRectangle:function(n,o,u){if(this.useCanvas){var h=this._getContext(u);h.save(),h.fillStyle=o,h.fillRect(n.x,n.y,n.width,n.height),h.restore()}},blendSketch:function(n,o,u,h){var d=n;if(t.isPlainObject(d)||(d={opacity:n,scale:o,translate:u,compositeOperation:h}),!(!this.useCanvas||!this.sketchCanvas)){n=d.opacity,h=d.compositeOperation;var p=d.bounds;if(this.context.save(),this.context.globalAlpha=n,h&&(this.context.globalCompositeOperation=h),p)p.x<0&&(p.width+=p.x,p.x=0),p.x+p.width>this.canvas.width&&(p.width=this.canvas.width-p.x),p.y<0&&(p.height+=p.y,p.y=0),p.y+p.height>this.canvas.height&&(p.height=this.canvas.height-p.y),this.context.drawImage(this.sketchCanvas,p.x,p.y,p.width,p.height,p.x,p.y,p.width,p.height);else{o=d.scale||1,u=d.translate;var m=u instanceof t.Point?u:new t.Point(0,0),v=0,x=0;if(u){var E=this.sketchCanvas.width-this.canvas.width,C=this.sketchCanvas.height-this.canvas.height;v=Math.round(E/2),x=Math.round(C/2)}this.context.drawImage(this.sketchCanvas,m.x-v*o,m.y-x*o,(this.canvas.width+2*v)*o,(this.canvas.height+2*x)*o,-v,-x,this.canvas.width+2*v,this.canvas.height+2*x)}this.context.restore()}},drawDebugInfo:function(n,o,u,h){if(this.useCanvas){var d=this.viewer.world.getIndexOfItem(h)%this.debugGridColor.length,p=this.context;p.save(),p.lineWidth=2*t.pixelDensityRatio,p.font="small-caps bold "+13*t.pixelDensityRatio+"px arial",p.strokeStyle=this.debugGridColor[d],p.fillStyle=this.debugGridColor[d],this.viewport.getRotation(!0)%360!==0&&this._offsetForRotation({degrees:this.viewport.getRotation(!0)}),h.getRotation(!0)%360!==0&&this._offsetForRotation({degrees:h.getRotation(!0),point:h.viewport.pixelFromPointNoRotate(h._getRotationPoint(!0),!0)}),h.viewport.getRotation(!0)%360===0&&h.getRotation(!0)%360===0&&h._drawer.viewer.viewport.getFlip()&&h._drawer._flip(),p.strokeRect(n.position.x*t.pixelDensityRatio,n.position.y*t.pixelDensityRatio,n.size.x*t.pixelDensityRatio,n.size.y*t.pixelDensityRatio);var m=(n.position.x+n.size.x/2)*t.pixelDensityRatio,v=(n.position.y+n.size.y/2)*t.pixelDensityRatio;p.translate(m,v),p.rotate(Math.PI/180*-this.viewport.getRotation(!0)),p.translate(-m,-v),n.x===0&&n.y===0&&(p.fillText("Zoom: "+this.viewport.getZoom(),n.position.x*t.pixelDensityRatio,(n.position.y-30)*t.pixelDensityRatio),p.fillText("Pan: "+this.viewport.getBounds().toString(),n.position.x*t.pixelDensityRatio,(n.position.y-20)*t.pixelDensityRatio)),p.fillText("Level: "+n.level,(n.position.x+10)*t.pixelDensityRatio,(n.position.y+20)*t.pixelDensityRatio),p.fillText("Column: "+n.x,(n.position.x+10)*t.pixelDensityRatio,(n.position.y+30)*t.pixelDensityRatio),p.fillText("Row: "+n.y,(n.position.x+10)*t.pixelDensityRatio,(n.position.y+40)*t.pixelDensityRatio),p.fillText("Order: "+u+" of "+o,(n.position.x+10)*t.pixelDensityRatio,(n.position.y+50)*t.pixelDensityRatio),p.fillText("Size: "+n.size.toString(),(n.position.x+10)*t.pixelDensityRatio,(n.position.y+60)*t.pixelDensityRatio),p.fillText("Position: "+n.position.toString(),(n.position.x+10)*t.pixelDensityRatio,(n.position.y+70)*t.pixelDensityRatio),this.viewport.getRotation(!0)%360!==0&&this._restoreRotationChanges(),h.getRotation(!0)%360!==0&&this._restoreRotationChanges(),h.viewport.getRotation(!0)%360===0&&h.getRotation(!0)%360===0&&h._drawer.viewer.viewport.getFlip()&&h._drawer._flip(),p.restore()}},debugRect:function(n){if(this.useCanvas){var o=this.context;o.save(),o.lineWidth=2*t.pixelDensityRatio,o.strokeStyle=this.debugGridColor[0],o.fillStyle=this.debugGridColor[0],o.strokeRect(n.x*t.pixelDensityRatio,n.y*t.pixelDensityRatio,n.width*t.pixelDensityRatio,n.height*t.pixelDensityRatio),o.restore()}},setImageSmoothingEnabled:function(n){this.useCanvas&&(this._imageSmoothingEnabled=n,this._updateImageSmoothingEnabled(this.context),this.viewer.forceRedraw())},_updateImageSmoothingEnabled:function(n){n.msImageSmoothingEnabled=this._imageSmoothingEnabled,n.imageSmoothingEnabled=this._imageSmoothingEnabled},getCanvasSize:function(n){var o=this._getContext(n).canvas;return new t.Point(o.width,o.height)},getCanvasCenter:function(){return new t.Point(this.canvas.width/2,this.canvas.height/2)},_offsetForRotation:function(n){var o=n.point?n.point.times(t.pixelDensityRatio):this.getCanvasCenter(),u=this._getContext(n.useSketch);u.save(),u.translate(o.x,o.y),this.viewer.viewport.flipped?(u.rotate(Math.PI/180*-n.degrees),u.scale(-1,1)):u.rotate(Math.PI/180*n.degrees),u.translate(-o.x,-o.y)},_flip:function(n){n=n||{};var o=n.point?n.point.times(t.pixelDensityRatio):this.getCanvasCenter(),u=this._getContext(n.useSketch);u.translate(o.x,0),u.scale(-1,1),u.translate(-o.x,0)},_restoreRotationChanges:function(n){var o=this._getContext(n);o.restore()},_calculateCanvasSize:function(){var n=t.pixelDensityRatio,o=this.viewport.getContainerSize();return{x:Math.round(o.x*n),y:Math.round(o.y*n)}},_calculateSketchCanvasSize:function(){var n=this._calculateCanvasSize();if(this.viewport.getRotation()===0)return n;var o=Math.ceil(Math.sqrt(n.x*n.x+n.y*n.y));return{x:o,y:o}}}}(i),function(t){t.Viewport=function(n){var o=arguments;o.length&&o[0]instanceof t.Point&&(n={containerSize:o[0],contentSize:o[1],config:o[2]}),n.config&&(t.extend(!0,n,n.config),delete n.config),this._margins=t.extend({left:0,top:0,right:0,bottom:0},n.margins||{}),delete n.margins,n.initialDegrees=n.degrees,delete n.degrees,t.extend(!0,this,{containerSize:null,contentSize:null,zoomPoint:null,rotationPivot:null,viewer:null,springStiffness:t.DEFAULT_SETTINGS.springStiffness,animationTime:t.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:t.DEFAULT_SETTINGS.minZoomImageRatio,maxZoomPixelRatio:t.DEFAULT_SETTINGS.maxZoomPixelRatio,visibilityRatio:t.DEFAULT_SETTINGS.visibilityRatio,wrapHorizontal:t.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:t.DEFAULT_SETTINGS.wrapVertical,defaultZoomLevel:t.DEFAULT_SETTINGS.defaultZoomLevel,minZoomLevel:t.DEFAULT_SETTINGS.minZoomLevel,maxZoomLevel:t.DEFAULT_SETTINGS.maxZoomLevel,initialDegrees:t.DEFAULT_SETTINGS.degrees,flipped:t.DEFAULT_SETTINGS.flipped,homeFillsViewer:t.DEFAULT_SETTINGS.homeFillsViewer,silenceMultiImageWarnings:t.DEFAULT_SETTINGS.silenceMultiImageWarnings},n),this._updateContainerInnerSize(),this.centerSpringX=new t.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.centerSpringY=new t.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.zoomSpring=new t.Spring({exponential:!0,initial:1,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.degreesSpring=new t.Spring({initial:n.initialDegrees,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,this._oldDegrees=this.degreesSpring.current.value,this._setContentBounds(new t.Rect(0,0,1,1),1),this.goHome(!0),this.update()},t.Viewport.prototype={get degrees(){return t.console.warn("Accessing [Viewport.degrees] is deprecated. Use viewport.getRotation instead."),this.getRotation()},set degrees(n){t.console.warn("Setting [Viewport.degrees] is deprecated. Use viewport.rotateTo, viewport.rotateBy, or viewport.setRotation instead."),this.rotateTo(n)},resetContentSize:function(n){return t.console.assert(n,"[Viewport.resetContentSize] contentSize is required"),t.console.assert(n instanceof t.Point,"[Viewport.resetContentSize] contentSize must be an OpenSeadragon.Point"),t.console.assert(n.x>0,"[Viewport.resetContentSize] contentSize.x must be greater than 0"),t.console.assert(n.y>0,"[Viewport.resetContentSize] contentSize.y must be greater than 0"),this._setContentBounds(new t.Rect(0,0,1,n.y/n.x),n.x),this},setHomeBounds:function(n,o){t.console.error("[Viewport.setHomeBounds] this function is deprecated; The content bounds should not be set manually."),this._setContentBounds(n,o)},_setContentBounds:function(n,o){t.console.assert(n,"[Viewport._setContentBounds] bounds is required"),t.console.assert(n instanceof t.Rect,"[Viewport._setContentBounds] bounds must be an OpenSeadragon.Rect"),t.console.assert(n.width>0,"[Viewport._setContentBounds] bounds.width must be greater than 0"),t.console.assert(n.height>0,"[Viewport._setContentBounds] bounds.height must be greater than 0"),this._contentBoundsNoRotate=n.clone(),this._contentSizeNoRotate=this._contentBoundsNoRotate.getSize().times(o),this._contentBounds=n.rotate(this.getRotation()).getBoundingBox(),this._contentSize=this._contentBounds.getSize().times(o),this._contentAspectRatio=this._contentSize.x/this._contentSize.y,this.viewer&&this.viewer.raiseEvent("reset-size",{contentSize:this._contentSizeNoRotate.clone(),contentFactor:o,homeBounds:this._contentBoundsNoRotate.clone(),contentBounds:this._contentBounds.clone()})},getHomeZoom:function(){if(this.defaultZoomLevel)return this.defaultZoomLevel;var n=this._contentAspectRatio/this.getAspectRatio(),o;return this.homeFillsViewer?o=n>=1?n:1:o=n>=1?1:n,o/this._contentBounds.width},getHomeBounds:function(){return this.getHomeBoundsNoRotate().rotate(-this.getRotation())},getHomeBoundsNoRotate:function(){var n=this._contentBounds.getCenter(),o=1/this.getHomeZoom(),u=o/this.getAspectRatio();return new t.Rect(n.x-o/2,n.y-u/2,o,u)},goHome:function(n){return this.viewer&&this.viewer.raiseEvent("home",{immediately:n}),this.fitBounds(this.getHomeBounds(),n)},getMinZoom:function(){var n=this.getHomeZoom(),o=this.minZoomLevel?this.minZoomLevel:this.minZoomImageRatio*n;return o},getMaxZoom:function(){var n=this.maxZoomLevel;return n||(n=this._contentSize.x*this.maxZoomPixelRatio/this._containerInnerSize.x,n/=this._contentBounds.width),Math.max(n,this.getHomeZoom())},getAspectRatio:function(){return this._containerInnerSize.x/this._containerInnerSize.y},getContainerSize:function(){return new t.Point(this.containerSize.x,this.containerSize.y)},getMargins:function(){return t.extend({},this._margins)},setMargins:function(n){t.console.assert(t.type(n)==="object","[Viewport.setMargins] margins must be an object"),this._margins=t.extend({left:0,top:0,right:0,bottom:0},n),this._updateContainerInnerSize(),this.viewer&&this.viewer.forceRedraw()},getBounds:function(n){return this.getBoundsNoRotate(n).rotate(-this.getRotation(n))},getBoundsNoRotate:function(n){var o=this.getCenter(n),u=1/this.getZoom(n),h=u/this.getAspectRatio();return new t.Rect(o.x-u/2,o.y-h/2,u,h)},getBoundsWithMargins:function(n){return this.getBoundsNoRotateWithMargins(n).rotate(-this.getRotation(n),this.getCenter(n))},getBoundsNoRotateWithMargins:function(n){var o=this.getBoundsNoRotate(n),u=this._containerInnerSize.x*this.getZoom(n);return o.x-=this._margins.left/u,o.y-=this._margins.top/u,o.width+=(this._margins.left+this._margins.right)/u,o.height+=(this._margins.top+this._margins.bottom)/u,o},getCenter:function(n){var o=new t.Point(this.centerSpringX.current.value,this.centerSpringY.current.value),u=new t.Point(this.centerSpringX.target.value,this.centerSpringY.target.value),h,d,p,m,v,x,E,C;return n?o:this.zoomPoint?(h=this.pixelFromPoint(this.zoomPoint,!0),d=this.getZoom(),p=1/d,m=p/this.getAspectRatio(),v=new t.Rect(o.x-p/2,o.y-m/2,p,m),x=this._pixelFromPoint(this.zoomPoint,v),E=x.minus(h).rotate(-this.getRotation(!0)),C=E.divide(this._containerInnerSize.x*d),u.plus(C)):u},getZoom:function(n){return n?this.zoomSpring.current.value:this.zoomSpring.target.value},_applyZoomConstraints:function(n){return Math.max(Math.min(n,this.getMaxZoom()),this.getMinZoom())},_applyBoundaryConstraints:function(n){var o=this.viewportToViewerElementRectangle(n).getBoundingBox(),u=this.viewportToViewerElementRectangle(this._contentBoundsNoRotate).getBoundingBox(),h=!1,d=!1;if(!this.wrapHorizontal){var p=o.x+o.width,m=u.x+u.width,v,x,E;o.width>u.width?v=this.visibilityRatio*u.width:v=this.visibilityRatio*o.width,x=u.x-p+v,E=m-o.x-v,v>u.width?(o.x+=(x+E)/2,h=!0):E<0?(o.x+=E,h=!0):x>0&&(o.x+=x,h=!0)}if(!this.wrapVertical){var C=o.y+o.height,O=u.y+u.height,_,k,I;o.height>u.height?_=this.visibilityRatio*u.height:_=this.visibilityRatio*o.height,k=u.y-C+_,I=O-o.y-_,_>u.height?(o.y+=(k+I)/2,d=!0):I<0?(o.y+=I,d=!0):k>0&&(o.y+=k,d=!0)}var G=h||d,Z=G?this.viewerElementToViewportRectangle(o):n.clone();return Z.xConstrained=h,Z.yConstrained=d,Z.constraintApplied=G,Z},_raiseConstraintsEvent:function(n){this.viewer&&this.viewer.raiseEvent("constrain",{immediately:n})},applyConstraints:function(n){var o=this.getZoom(),u=this._applyZoomConstraints(o);o!==u&&this.zoomTo(u,this.zoomPoint,n);var h=this.getConstrainedBounds(!1);return h.constraintApplied&&(this.fitBounds(h,n),this._raiseConstraintsEvent(n)),this},ensureVisible:function(n){return this.applyConstraints(n)},_fitBounds:function(n,o){o=o||{};var u=o.immediately||!1,h=o.constraints||!1,d=this.getAspectRatio(),p=n.getCenter(),m=new t.Rect(n.x,n.y,n.width,n.height,n.degrees+this.getRotation()).getBoundingBox();m.getAspectRatio()>=d?m.height=m.width/d:m.width=m.height*d,m.x=p.x-m.width/2,m.y=p.y-m.height/2;var v=1/m.width;if(u)return this.panTo(p,!0),this.zoomTo(v,null,!0),h&&this.applyConstraints(!0),this;var x=this.getCenter(!0),E=this.getZoom(!0);this.panTo(x,!0),this.zoomTo(E,null,!0);var C=this.getBounds(),O=this.getZoom();if(O===0||Math.abs(v/O-1)<1e-8)return this.zoomTo(v,null,!0),this.panTo(p,u),h&&this.applyConstraints(!1),this;if(h){this.panTo(p,!1),v=this._applyZoomConstraints(v),this.zoomTo(v,null,!1);var _=this.getConstrainedBounds();this.panTo(x,!0),this.zoomTo(E,null,!0),this.fitBounds(_)}else{var k=m.rotate(-this.getRotation()),I=k.getTopLeft().times(v).minus(C.getTopLeft().times(O)).divide(v-O);this.zoomTo(v,I,u)}return this},fitBounds:function(n,o){return this._fitBounds(n,{immediately:o,constraints:!1})},fitBoundsWithConstraints:function(n,o){return this._fitBounds(n,{immediately:o,constraints:!0})},fitVertically:function(n){var o=new t.Rect(this._contentBounds.x+this._contentBounds.width/2,this._contentBounds.y,0,this._contentBounds.height);return this.fitBounds(o,n)},fitHorizontally:function(n){var o=new t.Rect(this._contentBounds.x,this._contentBounds.y+this._contentBounds.height/2,this._contentBounds.width,0);return this.fitBounds(o,n)},getConstrainedBounds:function(n){var o,u;return o=this.getBounds(n),u=this._applyBoundaryConstraints(o),u},panBy:function(n,o){var u=new t.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return this.panTo(u.plus(n),o)},panTo:function(n,o){return o?(this.centerSpringX.resetTo(n.x),this.centerSpringY.resetTo(n.y)):(this.centerSpringX.springTo(n.x),this.centerSpringY.springTo(n.y)),this.viewer&&this.viewer.raiseEvent("pan",{center:n,immediately:o}),this},zoomBy:function(n,o,u){return this.zoomTo(this.zoomSpring.target.value*n,o,u)},zoomTo:function(n,o,u){var h=this;return this.zoomPoint=o instanceof t.Point&&!isNaN(o.x)&&!isNaN(o.y)?o:null,u?this._adjustCenterSpringsForZoomPoint(function(){h.zoomSpring.resetTo(n)}):this.zoomSpring.springTo(n),this.viewer&&this.viewer.raiseEvent("zoom",{zoom:n,refPoint:o,immediately:u}),this},setRotation:function(n,o){return this.rotateTo(n,null,o)},getRotation:function(n){return n?this.degreesSpring.current.value:this.degreesSpring.target.value},setRotationWithPivot:function(n,o,u){return this.rotateTo(n,o,u)},rotateTo:function(n,o,u){if(!this.viewer||!this.viewer.drawer.canRotate())return this;if(this.degreesSpring.target.value===n&&this.degreesSpring.isAtTargetValue())return this;if(this.rotationPivot=o instanceof t.Point&&!isNaN(o.x)&&!isNaN(o.y)?o:null,u)if(this.rotationPivot){var h=n-this._oldDegrees;if(!h)return this.rotationPivot=null,this;this._rotateAboutPivot(n)}else this.degreesSpring.resetTo(n);else{var d=t.positiveModulo(this.degreesSpring.current.value,360),p=t.positiveModulo(n,360),m=p-d;m>180?p-=360:m<-180&&(p+=360);var v=d-p;this.degreesSpring.resetTo(n+v),this.degreesSpring.springTo(n)}return this._setContentBounds(this.viewer.world.getHomeBounds(),this.viewer.world.getContentFactor()),this.viewer.forceRedraw(),this.viewer.raiseEvent("rotate",{degrees:n,immediately:!!u,pivot:this.rotationPivot||this.getCenter()}),this},rotateBy:function(n,o,u){return this.rotateTo(this.degreesSpring.target.value+n,o,u)},resize:function(n,o){var u=this.getBoundsNoRotate(),h=u,d;this.containerSize.x=n.x,this.containerSize.y=n.y,this._updateContainerInnerSize(),o&&(d=n.x/this.containerSize.x,h.width=u.width*d,h.height=h.width/this.getAspectRatio()),this.viewer&&this.viewer.raiseEvent("resize",{newContainerSize:n,maintain:o});var p=this.fitBounds(h,!0);return this.viewer&&this.viewer.raiseEvent("after-resize",{newContainerSize:n,maintain:o}),p},_updateContainerInnerSize:function(){this._containerInnerSize=new t.Point(Math.max(1,this.containerSize.x-(this._margins.left+this._margins.right)),Math.max(1,this.containerSize.y-(this._margins.top+this._margins.bottom)))},update:function(){var n=this;this._adjustCenterSpringsForZoomPoint(function(){n.zoomSpring.update()}),this.degreesSpring.isAtTargetValue()&&(this.rotationPivot=null),this.centerSpringX.update(),this.centerSpringY.update(),this.rotationPivot?this._rotateAboutPivot(!0):this.degreesSpring.update();var o=this.centerSpringX.current.value!==this._oldCenterX||this.centerSpringY.current.value!==this._oldCenterY||this.zoomSpring.current.value!==this._oldZoom||this.degreesSpring.current.value!==this._oldDegrees;return this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,this._oldDegrees=this.degreesSpring.current.value,o},_rotateAboutPivot:function(n){var o=n===!0,u=this.rotationPivot.minus(this.getCenter());this.centerSpringX.shiftBy(u.x),this.centerSpringY.shiftBy(u.y),o?this.degreesSpring.update():this.degreesSpring.resetTo(n);var h=this.degreesSpring.current.value-this._oldDegrees,d=u.rotate(h*-1).times(-1);this.centerSpringX.shiftBy(d.x),this.centerSpringY.shiftBy(d.y)},_adjustCenterSpringsForZoomPoint:function(n){if(this.zoomPoint){var o=this.pixelFromPoint(this.zoomPoint,!0);n();var u=this.pixelFromPoint(this.zoomPoint,!0),h=u.minus(o),d=this.deltaPointsFromPixels(h,!0);this.centerSpringX.shiftBy(d.x),this.centerSpringY.shiftBy(d.y),this.zoomSpring.isAtTargetValue()&&(this.zoomPoint=null)}else n()},deltaPixelsFromPointsNoRotate:function(n,o){return n.times(this._containerInnerSize.x*this.getZoom(o))},deltaPixelsFromPoints:function(n,o){return this.deltaPixelsFromPointsNoRotate(n.rotate(this.getRotation(o)),o)},deltaPointsFromPixelsNoRotate:function(n,o){return n.divide(this._containerInnerSize.x*this.getZoom(o))},deltaPointsFromPixels:function(n,o){return this.deltaPointsFromPixelsNoRotate(n,o).rotate(-this.getRotation(o))},pixelFromPointNoRotate:function(n,o){return this._pixelFromPointNoRotate(n,this.getBoundsNoRotate(o))},pixelFromPoint:function(n,o){return this._pixelFromPoint(n,this.getBoundsNoRotate(o))},_pixelFromPointNoRotate:function(n,o){return n.minus(o.getTopLeft()).times(this._containerInnerSize.x/o.width).plus(new t.Point(this._margins.left,this._margins.top))},_pixelFromPoint:function(n,o){return this._pixelFromPointNoRotate(n.rotate(this.getRotation(!0),this.getCenter(!0)),o)},pointFromPixelNoRotate:function(n,o){var u=this.getBoundsNoRotate(o);return n.minus(new t.Point(this._margins.left,this._margins.top)).divide(this._containerInnerSize.x/u.width).plus(u.getTopLeft())},pointFromPixel:function(n,o){return this.pointFromPixelNoRotate(n,o).rotate(-this.getRotation(o),this.getCenter(o))},_viewportToImageDelta:function(n,o){var u=this._contentBoundsNoRotate.width;return new t.Point(n*this._contentSizeNoRotate.x/u,o*this._contentSizeNoRotate.x/u)},viewportToImageCoordinates:function(n,o){if(n instanceof t.Point)return this.viewportToImageCoordinates(n.x,n.y);if(this.viewer){var u=this.viewer.world.getItemCount();if(u>1)this.silenceMultiImageWarnings||t.console.error("[Viewport.viewportToImageCoordinates] is not accurate with multi-image; use TiledImage.viewportToImageCoordinates instead.");else if(u===1){var h=this.viewer.world.getItemAt(0);return h.viewportToImageCoordinates(n,o,!0)}}return this._viewportToImageDelta(n-this._contentBoundsNoRotate.x,o-this._contentBoundsNoRotate.y)},_imageToViewportDelta:function(n,o){var u=this._contentBoundsNoRotate.width;return new t.Point(n/this._contentSizeNoRotate.x*u,o/this._contentSizeNoRotate.x*u)},imageToViewportCoordinates:function(n,o){if(n instanceof t.Point)return this.imageToViewportCoordinates(n.x,n.y);if(this.viewer){var u=this.viewer.world.getItemCount();if(u>1)this.silenceMultiImageWarnings||t.console.error("[Viewport.imageToViewportCoordinates] is not accurate with multi-image; use TiledImage.imageToViewportCoordinates instead.");else if(u===1){var h=this.viewer.world.getItemAt(0);return h.imageToViewportCoordinates(n,o,!0)}}var d=this._imageToViewportDelta(n,o);return d.x+=this._contentBoundsNoRotate.x,d.y+=this._contentBoundsNoRotate.y,d},imageToViewportRectangle:function(n,o,u,h){var d=n;if(d instanceof t.Rect||(d=new t.Rect(n,o,u,h)),this.viewer){var p=this.viewer.world.getItemCount();if(p>1)this.silenceMultiImageWarnings||t.console.error("[Viewport.imageToViewportRectangle] is not accurate with multi-image; use TiledImage.imageToViewportRectangle instead.");else if(p===1){var m=this.viewer.world.getItemAt(0);return m.imageToViewportRectangle(n,o,u,h,!0)}}var v=this.imageToViewportCoordinates(d.x,d.y),x=this._imageToViewportDelta(d.width,d.height);return new t.Rect(v.x,v.y,x.x,x.y,d.degrees)},viewportToImageRectangle:function(n,o,u,h){var d=n;if(d instanceof t.Rect||(d=new t.Rect(n,o,u,h)),this.viewer){var p=this.viewer.world.getItemCount();if(p>1)this.silenceMultiImageWarnings||t.console.error("[Viewport.viewportToImageRectangle] is not accurate with multi-image; use TiledImage.viewportToImageRectangle instead.");else if(p===1){var m=this.viewer.world.getItemAt(0);return m.viewportToImageRectangle(n,o,u,h,!0)}}var v=this.viewportToImageCoordinates(d.x,d.y),x=this._viewportToImageDelta(d.width,d.height);return new t.Rect(v.x,v.y,x.x,x.y,d.degrees)},viewerElementToImageCoordinates:function(n){var o=this.pointFromPixel(n,!0);return this.viewportToImageCoordinates(o)},imageToViewerElementCoordinates:function(n){var o=this.imageToViewportCoordinates(n);return this.pixelFromPoint(o,!0)},windowToImageCoordinates:function(n){t.console.assert(this.viewer,"[Viewport.windowToImageCoordinates] the viewport must have a viewer.");var o=n.minus(t.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(o)},imageToWindowCoordinates:function(n){t.console.assert(this.viewer,"[Viewport.imageToWindowCoordinates] the viewport must have a viewer.");var o=this.imageToViewerElementCoordinates(n);return o.plus(t.getElementPosition(this.viewer.element))},viewerElementToViewportCoordinates:function(n){return this.pointFromPixel(n,!0)},viewportToViewerElementCoordinates:function(n){return this.pixelFromPoint(n,!0)},viewerElementToViewportRectangle:function(n){return t.Rect.fromSummits(this.pointFromPixel(n.getTopLeft(),!0),this.pointFromPixel(n.getTopRight(),!0),this.pointFromPixel(n.getBottomLeft(),!0))},viewportToViewerElementRectangle:function(n){return t.Rect.fromSummits(this.pixelFromPoint(n.getTopLeft(),!0),this.pixelFromPoint(n.getTopRight(),!0),this.pixelFromPoint(n.getBottomLeft(),!0))},windowToViewportCoordinates:function(n){t.console.assert(this.viewer,"[Viewport.windowToViewportCoordinates] the viewport must have a viewer.");var o=n.minus(t.getElementPosition(this.viewer.element));return this.viewerElementToViewportCoordinates(o)},viewportToWindowCoordinates:function(n){t.console.assert(this.viewer,"[Viewport.viewportToWindowCoordinates] the viewport must have a viewer.");var o=this.viewportToViewerElementCoordinates(n);return o.plus(t.getElementPosition(this.viewer.element))},viewportToImageZoom:function(n){if(this.viewer){var o=this.viewer.world.getItemCount();if(o>1)this.silenceMultiImageWarnings||t.console.error("[Viewport.viewportToImageZoom] is not accurate with multi-image.");else if(o===1){var u=this.viewer.world.getItemAt(0);return u.viewportToImageZoom(n)}}var h=this._contentSizeNoRotate.x,d=this._containerInnerSize.x,p=this._contentBoundsNoRotate.width,m=d/h*p;return n*m},imageToViewportZoom:function(n){if(this.viewer){var o=this.viewer.world.getItemCount();if(o>1)this.silenceMultiImageWarnings||t.console.error("[Viewport.imageToViewportZoom] is not accurate with multi-image.");else if(o===1){var u=this.viewer.world.getItemAt(0);return u.imageToViewportZoom(n)}}var h=this._contentSizeNoRotate.x,d=this._containerInnerSize.x,p=this._contentBoundsNoRotate.width,m=h/d/p;return n*m},toggleFlip:function(){return this.setFlip(!this.getFlip()),this},getFlip:function(){return this.flipped},setFlip:function(n){return this.flipped===n?this:(this.flipped=n,this.viewer.navigator&&this.viewer.navigator.setFlip(this.getFlip()),this.viewer.forceRedraw(),this.viewer.raiseEvent("flip",{flipped:n}),this)}}}(i),function(t){t.TiledImage=function(d){var p=this;t.console.assert(d.tileCache,"[TiledImage] options.tileCache is required"),t.console.assert(d.drawer,"[TiledImage] options.drawer is required"),t.console.assert(d.viewer,"[TiledImage] options.viewer is required"),t.console.assert(d.imageLoader,"[TiledImage] options.imageLoader is required"),t.console.assert(d.source,"[TiledImage] options.source is required"),t.console.assert(!d.clip||d.clip instanceof t.Rect,"[TiledImage] options.clip must be an OpenSeadragon.Rect if present"),t.EventSource.call(this),this._tileCache=d.tileCache,delete d.tileCache,this._drawer=d.drawer,delete d.drawer,this._imageLoader=d.imageLoader,delete d.imageLoader,d.clip instanceof t.Rect&&(this._clip=d.clip.clone()),delete d.clip;var m=d.x||0;delete d.x;var v=d.y||0;delete d.y,this.normHeight=d.source.dimensions.y/d.source.dimensions.x,this.contentAspectX=d.source.dimensions.x/d.source.dimensions.y;var x=1;d.width?(x=d.width,delete d.width,d.height&&(t.console.error("specifying both width and height to a tiledImage is not supported"),delete d.height)):d.height&&(x=d.height/this.normHeight,delete d.height);var E=d.fitBounds;delete d.fitBounds;var C=d.fitBoundsPlacement||i.Placement.CENTER;delete d.fitBoundsPlacement;var O=d.degrees||0;delete d.degrees;var _=d.ajaxHeaders;delete d.ajaxHeaders,t.extend(!0,this,{viewer:null,tilesMatrix:{},coverage:{},loadingCoverage:{},lastDrawn:[],lastResetTime:0,_midDraw:!1,_needsDraw:!0,_hasOpaqueTile:!1,_tilesLoading:0,springStiffness:t.DEFAULT_SETTINGS.springStiffness,animationTime:t.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:t.DEFAULT_SETTINGS.minZoomImageRatio,wrapHorizontal:t.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:t.DEFAULT_SETTINGS.wrapVertical,immediateRender:t.DEFAULT_SETTINGS.immediateRender,blendTime:t.DEFAULT_SETTINGS.blendTime,alwaysBlend:t.DEFAULT_SETTINGS.alwaysBlend,minPixelRatio:t.DEFAULT_SETTINGS.minPixelRatio,smoothTileEdgesMinZoom:t.DEFAULT_SETTINGS.smoothTileEdgesMinZoom,iOSDevice:t.DEFAULT_SETTINGS.iOSDevice,debugMode:t.DEFAULT_SETTINGS.debugMode,crossOriginPolicy:t.DEFAULT_SETTINGS.crossOriginPolicy,ajaxWithCredentials:t.DEFAULT_SETTINGS.ajaxWithCredentials,placeholderFillStyle:t.DEFAULT_SETTINGS.placeholderFillStyle,opacity:t.DEFAULT_SETTINGS.opacity,preload:t.DEFAULT_SETTINGS.preload,compositeOperation:t.DEFAULT_SETTINGS.compositeOperation,subPixelRoundingForTransparency:t.DEFAULT_SETTINGS.subPixelRoundingForTransparency},d),this._preload=this.preload,delete this.preload,this._fullyLoaded=!1,this._xSpring=new t.Spring({initial:m,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._ySpring=new t.Spring({initial:v,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._scaleSpring=new t.Spring({initial:x,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._degreesSpring=new t.Spring({initial:O,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._updateForScale(),E&&this.fitBounds(E,C,!0),this._drawingHandler=function(k){p.viewer.raiseEvent("tile-drawing",t.extend({tiledImage:p},k))},this._ownAjaxHeaders={},this.setAjaxHeaders(_,!1)},t.extend(t.TiledImage.prototype,t.EventSource.prototype,{needsDraw:function(){return this._needsDraw},getFullyLoaded:function(){return this._fullyLoaded},_setFullyLoaded:function(d){d!==this._fullyLoaded&&(this._fullyLoaded=d,this.raiseEvent("fully-loaded-change",{fullyLoaded:this._fullyLoaded}))},reset:function(){this._tileCache.clearTilesFor(this),this.lastResetTime=t.now(),this._needsDraw=!0},update:function(){var d=this._xSpring.update(),p=this._ySpring.update(),m=this._scaleSpring.update(),v=this._degreesSpring.update();return d||p||m||v?(this._updateForScale(),this._needsDraw=!0,!0):!1},draw:function(){this.opacity!==0||this._preload?(this._midDraw=!0,this._updateViewport(),this._midDraw=!1):this._needsDraw=!1},destroy:function(){this.reset(),this.source.destroy&&this.source.destroy()},getBounds:function(d){return this.getBoundsNoRotate(d).rotate(this.getRotation(d),this._getRotationPoint(d))},getBoundsNoRotate:function(d){return d?new t.Rect(this._xSpring.current.value,this._ySpring.current.value,this._worldWidthCurrent,this._worldHeightCurrent):new t.Rect(this._xSpring.target.value,this._ySpring.target.value,this._worldWidthTarget,this._worldHeightTarget)},getWorldBounds:function(){return t.console.error("[TiledImage.getWorldBounds] is deprecated; use TiledImage.getBounds instead"),this.getBounds()},getClippedBounds:function(d){var p=this.getBoundsNoRotate(d);if(this._clip){var m=d?this._worldWidthCurrent:this._worldWidthTarget,v=m/this.source.dimensions.x,x=this._clip.times(v);p=new t.Rect(p.x+x.x,p.y+x.y,x.width,x.height)}return p.rotate(this.getRotation(d),this._getRotationPoint(d))},getTileBounds:function(d,p,m){var v=this.source.getNumTiles(d),x=(v.x+p%v.x)%v.x,E=(v.y+m%v.y)%v.y,C=this.source.getTileBounds(d,x,E);return this.getFlip()&&(C.x=1-C.x-C.width),C.x+=(p-x)/v.x,C.y+=this._worldHeightCurrent/this._worldWidthCurrent*((m-E)/v.y),C},getContentSize:function(){return new t.Point(this.source.dimensions.x,this.source.dimensions.y)},getSizeInWindowCoordinates:function(){var d=this.imageToWindowCoordinates(new t.Point(0,0)),p=this.imageToWindowCoordinates(this.getContentSize());return new t.Point(p.x-d.x,p.y-d.y)},_viewportToImageDelta:function(d,p,m){var v=m?this._scaleSpring.current.value:this._scaleSpring.target.value;return new t.Point(d*(this.source.dimensions.x/v),p*(this.source.dimensions.y*this.contentAspectX/v))},viewportToImageCoordinates:function(d,p,m){var v;return d instanceof t.Point?(m=p,v=d):v=new t.Point(d,p),v=v.rotate(-this.getRotation(m),this._getRotationPoint(m)),m?this._viewportToImageDelta(v.x-this._xSpring.current.value,v.y-this._ySpring.current.value):this._viewportToImageDelta(v.x-this._xSpring.target.value,v.y-this._ySpring.target.value)},_imageToViewportDelta:function(d,p,m){var v=m?this._scaleSpring.current.value:this._scaleSpring.target.value;return new t.Point(d/this.source.dimensions.x*v,p/this.source.dimensions.y/this.contentAspectX*v)},imageToViewportCoordinates:function(d,p,m){d instanceof t.Point&&(m=p,p=d.y,d=d.x);var v=this._imageToViewportDelta(d,p);return m?(v.x+=this._xSpring.current.value,v.y+=this._ySpring.current.value):(v.x+=this._xSpring.target.value,v.y+=this._ySpring.target.value),v.rotate(this.getRotation(m),this._getRotationPoint(m))},imageToViewportRectangle:function(d,p,m,v,x){var E=d;E instanceof t.Rect?x=p:E=new t.Rect(d,p,m,v);var C=this.imageToViewportCoordinates(E.getTopLeft(),x),O=this._imageToViewportDelta(E.width,E.height,x);return new t.Rect(C.x,C.y,O.x,O.y,E.degrees+this.getRotation(x))},viewportToImageRectangle:function(d,p,m,v,x){var E=d;d instanceof t.Rect?x=p:E=new t.Rect(d,p,m,v);var C=this.viewportToImageCoordinates(E.getTopLeft(),x),O=this._viewportToImageDelta(E.width,E.height,x);return new t.Rect(C.x,C.y,O.x,O.y,E.degrees-this.getRotation(x))},viewerElementToImageCoordinates:function(d){var p=this.viewport.pointFromPixel(d,!0);return this.viewportToImageCoordinates(p)},imageToViewerElementCoordinates:function(d){var p=this.imageToViewportCoordinates(d);return this.viewport.pixelFromPoint(p,!0)},windowToImageCoordinates:function(d){var p=d.minus(i.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(p)},imageToWindowCoordinates:function(d){var p=this.imageToViewerElementCoordinates(d);return p.plus(i.getElementPosition(this.viewer.element))},_viewportToTiledImageRectangle:function(d){var p=this._scaleSpring.current.value;return d=d.rotate(-this.getRotation(!0),this._getRotationPoint(!0)),new t.Rect((d.x-this._xSpring.current.value)/p,(d.y-this._ySpring.current.value)/p,d.width/p,d.height/p,d.degrees)},viewportToImageZoom:function(d){var p=this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x;return p*d},imageToViewportZoom:function(d){var p=this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x;return d/p},setPosition:function(d,p){var m=this._xSpring.target.value===d.x&&this._ySpring.target.value===d.y;if(p){if(m&&this._xSpring.current.value===d.x&&this._ySpring.current.value===d.y)return;this._xSpring.resetTo(d.x),this._ySpring.resetTo(d.y),this._needsDraw=!0}else{if(m)return;this._xSpring.springTo(d.x),this._ySpring.springTo(d.y),this._needsDraw=!0}m||this._raiseBoundsChange()},setWidth:function(d,p){this._setScale(d,p)},setHeight:function(d,p){this._setScale(d/this.normHeight,p)},setCroppingPolygons:function(d){var p=function(v){return v instanceof t.Point||typeof v.x=="number"&&typeof v.y=="number"},m=function(v){return v.map(function(x){try{if(p(x))return{x:x.x,y:x.y};throw new Error}catch{throw new Error("A Provided cropping polygon point is not supported")}})};try{if(!t.isArray(d))throw new Error("Provided cropping polygon is not an array");this._croppingPolygons=d.map(function(v){return m(v)})}catch(v){t.console.error("[TiledImage.setCroppingPolygons] Cropping polygon format not supported"),t.console.error(v),this._croppingPolygons=null}},resetCroppingPolygons:function(){this._croppingPolygons=null},fitBounds:function(d,p,m){p=p||t.Placement.CENTER;var v=t.Placement.properties[p],x=this.contentAspectX,E=0,C=0,O=1,_=1;if(this._clip&&(x=this._clip.getAspectRatio(),O=this._clip.width/this.source.dimensions.x,_=this._clip.height/this.source.dimensions.y,d.getAspectRatio()>x?(E=this._clip.x/this._clip.height*d.height,C=this._clip.y/this._clip.height*d.height):(E=this._clip.x/this._clip.width*d.width,C=this._clip.y/this._clip.width*d.width)),d.getAspectRatio()>x){var k=d.height/_,I=0;v.isHorizontallyCentered?I=(d.width-d.height*x)/2:v.isRight&&(I=d.width-d.height*x),this.setPosition(new t.Point(d.x-E+I,d.y-C),m),this.setHeight(k,m)}else{var G=d.width/O,Z=0;v.isVerticallyCentered?Z=(d.height-d.width/x)/2:v.isBottom&&(Z=d.height-d.width/x),this.setPosition(new t.Point(d.x-E,d.y-C+Z),m),this.setWidth(G,m)}},getClip:function(){return this._clip?this._clip.clone():null},setClip:function(d){t.console.assert(!d||d instanceof t.Rect,"[TiledImage.setClip] newClip must be an OpenSeadragon.Rect or null"),d instanceof t.Rect?this._clip=d.clone():this._clip=null,this._needsDraw=!0,this.raiseEvent("clip-change")},getFlip:function(){return!!this.flipped},setFlip:function(d){this.flipped=!!d,this._needsDraw=!0,this._raiseBoundsChange()},getOpacity:function(){return this.opacity},setOpacity:function(d){d!==this.opacity&&(this.opacity=d,this._needsDraw=!0,this.raiseEvent("opacity-change",{opacity:this.opacity}))},getPreload:function(){return this._preload},setPreload:function(d){this._preload=!!d,this._needsDraw=!0},getRotation:function(d){return d?this._degreesSpring.current.value:this._degreesSpring.target.value},setRotation:function(d,p){this._degreesSpring.target.value===d&&this._degreesSpring.isAtTargetValue()||(p?this._degreesSpring.resetTo(d):this._degreesSpring.springTo(d),this._needsDraw=!0,this._raiseBoundsChange())},_getRotationPoint:function(d){return this.getBoundsNoRotate(d).getCenter()},getCompositeOperation:function(){return this.compositeOperation},setCompositeOperation:function(d){d!==this.compositeOperation&&(this.compositeOperation=d,this._needsDraw=!0,this.raiseEvent("composite-operation-change",{compositeOperation:this.compositeOperation}))},setAjaxHeaders:function(d,p){if(d===null&&(d={}),!t.isPlainObject(d)){console.error("[TiledImage.setAjaxHeaders] Ignoring invalid headers, must be a plain object");return}this._ownAjaxHeaders=d,this._updateAjaxHeaders(p)},_updateAjaxHeaders:function(d){if(d===void 0&&(d=!0),t.isPlainObject(this.viewer.ajaxHeaders)?this.ajaxHeaders=t.extend({},this.viewer.ajaxHeaders,this._ownAjaxHeaders):this.ajaxHeaders=this._ownAjaxHeaders,d){var p,m,v,x;for(var E in this.tilesMatrix){p=this.source.getNumTiles(E);for(var C in this.tilesMatrix[E]){m=(p.x+C%p.x)%p.x;for(var O in this.tilesMatrix[E][C])if(v=(p.y+O%p.y)%p.y,x=this.tilesMatrix[E][C][O],x.loadWithAjax=this.loadTilesWithAjax,x.loadWithAjax){var _=this.source.getTileAjaxHeaders(E,m,v);x.ajaxHeaders=t.extend({},this.ajaxHeaders,_)}else x.ajaxHeaders=null}}for(var k=0;k<this._imageLoader.jobQueue.length;k++){var I=this._imageLoader.jobQueue[k];I.loadWithAjax=I.tile.loadWithAjax,I.ajaxHeaders=I.tile.loadWithAjax?I.tile.ajaxHeaders:null}}},_setScale:function(d,p){var m=this._scaleSpring.target.value===d;if(p){if(m&&this._scaleSpring.current.value===d)return;this._scaleSpring.resetTo(d),this._updateForScale(),this._needsDraw=!0}else{if(m)return;this._scaleSpring.springTo(d),this._updateForScale(),this._needsDraw=!0}m||this._raiseBoundsChange()},_updateForScale:function(){this._worldWidthTarget=this._scaleSpring.target.value,this._worldHeightTarget=this.normHeight*this._scaleSpring.target.value,this._worldWidthCurrent=this._scaleSpring.current.value,this._worldHeightCurrent=this.normHeight*this._scaleSpring.current.value},_raiseBoundsChange:function(){this.raiseEvent("bounds-change")},_isBottomItem:function(){return this.viewer.world.getItemAt(0)===this},_getLevelsInterval:function(){var d=Math.max(this.source.minLevel,Math.floor(Math.log(this.minZoomImageRatio)/Math.log(2))),p=this.viewport.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(0),!0).x*this._scaleSpring.current.value,m=Math.min(Math.abs(this.source.maxLevel),Math.abs(Math.floor(Math.log(p/this.minPixelRatio)/Math.log(2))));return m=Math.max(m,this.source.minLevel||0),d=Math.min(d,m),{lowestLevel:d,highestLevel:m}},_updateViewport:function(){for(this._needsDraw=!1,this._tilesLoading=0,this.loadingCoverage={};this.lastDrawn.length>0;){var d=this.lastDrawn.pop();d.beingDrawn=!1}var p=this.viewport,m=this._viewportToTiledImageRectangle(p.getBoundsWithMargins(!0));if(!this.wrapHorizontal&&!this.wrapVertical){var v=this._viewportToTiledImageRectangle(this.getClippedBounds(!0));if(m=m.intersection(v),m===null)return}for(var x=this._getLevelsInterval(),E=x.lowestLevel,C=x.highestLevel,O=null,_=!1,k=t.now(),I=C;I>=E;I--){var G=!1,Z=p.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(I),!0).x*this._scaleSpring.current.value;if(I===E||!_&&Z>=this.minPixelRatio)G=!0,_=!0;else if(!_)continue;var ae=p.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(I),!1).x*this._scaleSpring.current.value,te=p.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(Math.max(this.source.getClosestLevel(),0)),!1).x*this._scaleSpring.current.value,Q=this.immediateRender?1:te,le=Math.min(1,(Z-.5)/.5),ce=Q/Math.abs(Q-ae);if(O=this._updateLevel(_,G,I,le,ce,m,k,O),this._providesCoverage(this.coverage,I))break}this._drawTiles(this.lastDrawn),O&&!O.context2D?(this._loadTile(O,k),this._needsDraw=!0,this._setFullyLoaded(!1)):this._setFullyLoaded(this._tilesLoading===0)},_getCornerTiles:function(d,p,m){var v,x;this.wrapHorizontal?(v=t.positiveModulo(p.x,1),x=t.positiveModulo(m.x,1)):(v=Math.max(0,p.x),x=Math.min(1,m.x));var E,C,O=1/this.source.aspectRatio;this.wrapVertical?(E=t.positiveModulo(p.y,O),C=t.positiveModulo(m.y,O)):(E=Math.max(0,p.y),C=Math.min(O,m.y));var _=this.source.getTileAtPoint(d,new t.Point(v,E)),k=this.source.getTileAtPoint(d,new t.Point(x,C)),I=this.source.getNumTiles(d);return this.wrapHorizontal&&(_.x+=I.x*Math.floor(p.x),k.x+=I.x*Math.floor(m.x)),this.wrapVertical&&(_.y+=I.y*Math.floor(p.y/O),k.y+=I.y*Math.floor(m.y/O)),{topLeft:_,bottomRight:k}},_updateLevel:function(d,p,m,v,x,E,C,O){var _=E.getBoundingBox().getTopLeft(),k=E.getBoundingBox().getBottomRight();this.viewer&&this.viewer.raiseEvent("update-level",{tiledImage:this,havedrawn:d,level:m,opacity:v,visibility:x,drawArea:E,topleft:_,bottomright:k,currenttime:C,best:O}),this._resetCoverage(this.coverage,m),this._resetCoverage(this.loadingCoverage,m);var I=this._getCornerTiles(m,_,k),G=I.topLeft,Z=I.bottomRight,ae=this.source.getNumTiles(m),te=this.viewport.pixelFromPoint(this.viewport.getCenter());this.getFlip()&&(Z.x+=1,this.wrapHorizontal||(Z.x=Math.min(Z.x,ae.x-1)));for(var Q=G.x;Q<=Z.x;Q++)for(var le=G.y;le<=Z.y;le++){var ce;if(this.getFlip()){var me=(ae.x+Q%ae.x)%ae.x;ce=Q+ae.x-me-me-1}else ce=Q;E.intersection(this.getTileBounds(m,ce,le))!==null&&(O=this._updateTile(p,d,ce,le,m,v,x,te,ae,C,O))}return O},_updateTile:function(d,p,m,v,x,E,C,O,_,k,I){var G=this._getTile(m,v,x,k,_,this._worldWidthCurrent,this._worldHeightCurrent),Z=p;this.viewer&&this.viewer.raiseEvent("update-tile",{tiledImage:this,tile:G}),this._setCoverage(this.coverage,x,m,v,!1);var ae=G.loaded||G.loading||this._isCovered(this.loadingCoverage,x,m,v);if(this._setCoverage(this.loadingCoverage,x,m,v,ae),!G.exists||(d&&!Z&&(this._isCovered(this.coverage,x,m,v)?this._setCoverage(this.coverage,x,m,v,!0):Z=!0),!Z))return I;if(this._positionTile(G,this.source.tileOverlap,this.viewport,O,C),!G.loaded)if(G.context2D)this._setTileLoaded(G);else{var te=this._tileCache.getImageRecord(G.cacheKey);te&&this._setTileLoaded(G,te.getData())}if(G.loaded){var Q=this._blendTile(G,m,v,x,E,k);Q&&(this._needsDraw=!0)}else G.loading?this._tilesLoading++:ae||(I=this._compareTiles(I,G));return I},_getTile:function(d,p,m,v,x,E,C){var O,_,k,I,G,Z,ae,te,Q,le,ce=this.tilesMatrix,me=this.source;return ce[m]||(ce[m]={}),ce[m][d]||(ce[m][d]={}),(!ce[m][d][p]||!ce[m][d][p].flipped!=!this.flipped)&&(O=(x.x+d%x.x)%x.x,_=(x.y+p%x.y)%x.y,k=this.getTileBounds(m,d,p),I=me.getTileBounds(m,O,_,!0),G=me.tileExists(m,O,_),Z=me.getTileUrl(m,O,_),ae=me.getTilePostData(m,O,_),this.loadTilesWithAjax?(te=me.getTileAjaxHeaders(m,O,_),t.isPlainObject(this.ajaxHeaders)&&(te=t.extend({},this.ajaxHeaders,te))):te=null,Q=me.getContext2D?me.getContext2D(m,O,_):void 0,le=new t.Tile(m,d,p,k,G,Z,Q,this.loadTilesWithAjax,te,I,ae,me.getTileHashKey(m,O,_,Z,te,ae)),this.getFlip()?O===0&&(le.isRightMost=!0):O===x.x-1&&(le.isRightMost=!0),_===x.y-1&&(le.isBottomMost=!0),le.flipped=this.flipped,ce[m][d][p]=le),le=ce[m][d][p],le.lastTouchTime=v,le},_loadTile:function(d,p){var m=this;d.loading=!0,this._imageLoader.addJob({src:d.getUrl(),tile:d,source:this.source,postData:d.postData,loadWithAjax:d.loadWithAjax,ajaxHeaders:d.ajaxHeaders,crossOriginPolicy:this.crossOriginPolicy,ajaxWithCredentials:this.ajaxWithCredentials,callback:function(v,x,E){m._onTileLoad(d,p,v,x,E)},abort:function(){d.loading=!1}})},_onTileLoad:function(d,p,m,v,x){if(m)d.exists=!0;else{t.console.error("Tile %s failed to load: %s - error: %s",d,d.getUrl(),v),this.viewer.raiseEvent("tile-load-failed",{tile:d,tiledImage:this,time:p,message:v,tileRequest:x}),d.loading=!1,d.exists=!1;return}if(p<this.lastResetTime){t.console.warn("Ignoring tile %s loaded before reset: %s",d,d.getUrl()),d.loading=!1;return}var E=this,C=function(){var O=E.source,_=O.getClosestLevel();E._setTileLoaded(d,m,_,x)};this._midDraw?window.setTimeout(C,1):C()},_setTileLoaded:function(d,p,m,v){var x=0,E=!1,C=this;function O(){return E&&t.console.error("Event 'tile-loaded' argument getCompletionCallback must be called synchronously. Its return value should be called asynchronously."),x++,_}function _(){x--,x===0&&(d.loading=!1,d.loaded=!0,d.hasTransparency=C.source.hasTransparency(d.context2D,d.getUrl(),d.ajaxHeaders,d.postData),d.context2D||C._tileCache.cacheTile({data:p,tile:d,cutoff:m,tiledImage:C}),C._needsDraw=!0)}var k=O();this.viewer.raiseEvent("tile-loaded",{tile:d,tiledImage:this,tileRequest:v,get image(){return t.console.error("[tile-loaded] event 'image' has been deprecated. Use 'data' property instead."),p},data:p,getCompletionCallback:O}),E=!0,k()},_positionTile:function(d,p,m,v,x){var E=d.bounds.getTopLeft();E.x*=this._scaleSpring.current.value,E.y*=this._scaleSpring.current.value,E.x+=this._xSpring.current.value,E.y+=this._ySpring.current.value;var C=d.bounds.getSize();C.x*=this._scaleSpring.current.value,C.y*=this._scaleSpring.current.value;var O=m.pixelFromPointNoRotate(E,!0),_=m.pixelFromPointNoRotate(E,!1),k=m.deltaPixelsFromPointsNoRotate(C,!0),I=m.deltaPixelsFromPointsNoRotate(C,!1),G=_.plus(I.divide(2)),Z=v.squaredDistanceTo(G);p||(k=k.plus(new t.Point(1,1))),d.isRightMost&&this.wrapHorizontal&&(k.x+=.75),d.isBottomMost&&this.wrapVertical&&(k.y+=.75),d.position=O,d.size=k,d.squaredDistance=Z,d.visibility=x},_blendTile:function(d,p,m,v,x,E){var C=1e3*this.blendTime,O,_;if(d.blendStart||(d.blendStart=E),O=E-d.blendStart,_=C?Math.min(1,O/C):1,this.alwaysBlend&&(_*=x),d.opacity=_,this.lastDrawn.push(d),_===1)this._setCoverage(this.coverage,v,p,m,!0),this._hasOpaqueTile=!0;else if(O<C)return!0;return!1},_compareTiles:function(d,p){return!d||p.visibility>d.visibility||p.visibility===d.visibility&&p.squaredDistance<d.squaredDistance?p:d},_drawTiles:function(d){if(!(this.opacity===0||d.length===0&&!this.placeholderFillStyle)){var p=d[0],m;p&&(m=this.opacity<1||this.compositeOperation&&this.compositeOperation!=="source-over"||!this._isBottomItem()&&this.source.hasTransparency(p.context2D,p.getUrl(),p.ajaxHeaders,p.postData));var v,x,E=this.viewport.getZoom(!0),C=this.viewportToImageZoom(E);d.length>1&&C>this.smoothTileEdgesMinZoom&&!this.iOSDevice&&this.getRotation(!0)%360===0&&t.supportsCanvas&&this.viewer.useCanvas&&(m=!0,v=p.getScaleForEdgeSmoothing(),x=p.getTranslationForEdgeSmoothing(v,this._drawer.getCanvasSize(!1),this._drawer.getCanvasSize(!0)));var O;m&&(v||(O=this.viewport.viewportToViewerElementRectangle(this.getClippedBounds(!0)).getIntegerBoundingBox(),this._drawer.viewer.viewport.getFlip()&&(this.viewport.getRotation(!0)%360!==0||this.getRotation(!0)%360!==0)&&(O.x=this._drawer.viewer.container.clientWidth-(O.x+O.width)),O=O.times(t.pixelDensityRatio)),this._drawer._clear(!0,O)),v||(this.viewport.getRotation(!0)%360!==0&&this._drawer._offsetForRotation({degrees:this.viewport.getRotation(!0),useSketch:m}),this.getRotation(!0)%360!==0&&this._drawer._offsetForRotation({degrees:this.getRotation(!0),point:this.viewport.pixelFromPointNoRotate(this._getRotationPoint(!0),!0),useSketch:m}),this.viewport.getRotation(!0)%360===0&&this.getRotation(!0)%360===0&&this._drawer.viewer.viewport.getFlip()&&this._drawer._flip());var _=!1;if(this._clip){this._drawer.saveContext(m);var k=this.imageToViewportRectangle(this._clip,!0);k=k.rotate(-this.getRotation(!0),this._getRotationPoint(!0));var I=this._drawer.viewportToDrawerRectangle(k);v&&(I=I.times(v)),x&&(I=I.translate(x)),this._drawer.setClip(I,m),_=!0}if(this._croppingPolygons){var G=this;this._drawer.saveContext(m);try{var Z=this._croppingPolygons.map(function(Pe){return Pe.map(function(be){var fe=G.imageToViewportCoordinates(be.x,be.y,!0).rotate(-G.getRotation(!0),G._getRotationPoint(!0)),ve=G._drawer.viewportCoordToDrawerCoord(fe);return v&&(ve=ve.times(v)),x&&(ve=ve.plus(x)),ve})});this._drawer.clipWithPolygons(Z,m)}catch(Pe){t.console.error(Pe)}_=!0}if(this.placeholderFillStyle&&this._hasOpaqueTile===!1){var ae=this._drawer.viewportToDrawerRectangle(this.getBounds(!0));v&&(ae=ae.times(v)),x&&(ae=ae.translate(x));var te=null;typeof this.placeholderFillStyle=="function"?te=this.placeholderFillStyle(this,this._drawer.context):te=this.placeholderFillStyle,this._drawer.drawRectangle(ae,te,m)}var Q=h(this.subPixelRoundingForTransparency),le=!1;if(Q===t.SUBPIXEL_ROUNDING_OCCURRENCES.ALWAYS)le=!0;else if(Q===t.SUBPIXEL_ROUNDING_OCCURRENCES.ONLY_AT_REST){var ce=this.viewer&&this.viewer.isAnimating();le=!ce}for(var me=d.length-1;me>=0;me--)p=d[me],this._drawer.drawTile(p,this._drawingHandler,m,v,x,le,this.source),p.beingDrawn=!0,this.viewer&&this.viewer.raiseEvent("tile-drawn",{tiledImage:this,tile:p});_&&this._drawer.restoreContext(m),v||(this.getRotation(!0)%360!==0&&this._drawer._restoreRotationChanges(m),this.viewport.getRotation(!0)%360!==0&&this._drawer._restoreRotationChanges(m)),m&&(v&&(this.viewport.getRotation(!0)%360!==0&&this._drawer._offsetForRotation({degrees:this.viewport.getRotation(!0),useSketch:!1}),this.getRotation(!0)%360!==0&&this._drawer._offsetForRotation({degrees:this.getRotation(!0),point:this.viewport.pixelFromPointNoRotate(this._getRotationPoint(!0),!0),useSketch:!1})),this._drawer.blendSketch({opacity:this.opacity,scale:v,translate:x,compositeOperation:this.compositeOperation,bounds:O}),v&&(this.getRotation(!0)%360!==0&&this._drawer._restoreRotationChanges(!1),this.viewport.getRotation(!0)%360!==0&&this._drawer._restoreRotationChanges(!1))),v||this.viewport.getRotation(!0)%360===0&&this.getRotation(!0)%360===0&&this._drawer.viewer.viewport.getFlip()&&this._drawer._flip(),this._drawDebugInfo(d)}},_drawDebugInfo:function(d){if(this.debugMode)for(var p=d.length-1;p>=0;p--){var m=d[p];try{this._drawer.drawDebugInfo(m,d.length,p,this)}catch(v){t.console.error(v)}}},_providesCoverage:function(d,p,m,v){var x,E,C,O;if(!d[p])return!1;if(m===void 0||v===void 0){x=d[p];for(C in x)if(Object.prototype.hasOwnProperty.call(x,C)){E=x[C];for(O in E)if(Object.prototype.hasOwnProperty.call(E,O)&&!E[O])return!1}return!0}return d[p][m]===void 0||d[p][m][v]===void 0||d[p][m][v]===!0},_isCovered:function(d,p,m,v){return m===void 0||v===void 0?this._providesCoverage(d,p+1):this._providesCoverage(d,p+1,2*m,2*v)&&this._providesCoverage(d,p+1,2*m,2*v+1)&&this._providesCoverage(d,p+1,2*m+1,2*v)&&this._providesCoverage(d,p+1,2*m+1,2*v+1)},_setCoverage:function(d,p,m,v,x){if(!d[p]){t.console.warn("Setting coverage for a tile before its level's coverage has been reset: %s",p);return}d[p][m]||(d[p][m]={}),d[p][m][v]=x},_resetCoverage:function(d,p){d[p]={}}});var n=t.SUBPIXEL_ROUNDING_OCCURRENCES.NEVER;function o(d){return d!==t.SUBPIXEL_ROUNDING_OCCURRENCES.ALWAYS&&d!==t.SUBPIXEL_ROUNDING_OCCURRENCES.ONLY_AT_REST&&d!==t.SUBPIXEL_ROUNDING_OCCURRENCES.NEVER}function u(d){return o(d)?n:d}function h(d){if(typeof d=="number")return u(d);if(!d||!t.Browser)return n;var p=d[t.Browser.vendor];return o(p)&&(p=d["*"]),u(p)}}(i),function(t){var n=function(u){t.console.assert(u,"[TileCache.cacheTile] options is required"),t.console.assert(u.tile,"[TileCache.cacheTile] options.tile is required"),t.console.assert(u.tiledImage,"[TileCache.cacheTile] options.tiledImage is required"),this.tile=u.tile,this.tiledImage=u.tiledImage},o=function(u){t.console.assert(u,"[ImageRecord] options is required"),t.console.assert(u.data,"[ImageRecord] options.data is required"),this._tiles=[],u.create.apply(null,[this,u.data,u.ownerTile]),this._destroyImplementation=u.destroy.bind(null,this),this.getImage=u.getImage.bind(null,this),this.getData=u.getData.bind(null,this),this.getRenderedContext=u.getRenderedContext.bind(null,this)};o.prototype={destroy:function(){this._destroyImplementation(),this._tiles=null},addTile:function(u){t.console.assert(u,"[ImageRecord.addTile] tile is required"),this._tiles.push(u)},removeTile:function(u){for(var h=0;h<this._tiles.length;h++)if(this._tiles[h]===u){this._tiles.splice(h,1);return}t.console.warn("[ImageRecord.removeTile] trying to remove unknown tile",u)},getTileCount:function(){return this._tiles.length}},t.TileCache=function(u){u=u||{},this._maxImageCacheCount=u.maxImageCacheCount||t.DEFAULT_SETTINGS.maxImageCacheCount,this._tilesLoaded=[],this._imagesLoaded=[],this._imagesLoadedCount=0},t.TileCache.prototype={numTilesLoaded:function(){return this._tilesLoaded.length},cacheTile:function(u){t.console.assert(u,"[TileCache.cacheTile] options is required"),t.console.assert(u.tile,"[TileCache.cacheTile] options.tile is required"),t.console.assert(u.tile.cacheKey,"[TileCache.cacheTile] options.tile.cacheKey is required"),t.console.assert(u.tiledImage,"[TileCache.cacheTile] options.tiledImage is required");var h=u.cutoff||0,d=this._tilesLoaded.length,p=this._imagesLoaded[u.tile.cacheKey];if(p||(u.data||(t.console.error("[TileCache.cacheTile] options.image was renamed to options.data. '.image' attribute has been deprecated and will be removed in the future."),u.data=u.image),t.console.assert(u.data,"[TileCache.cacheTile] options.data is required to create an ImageRecord"),p=this._imagesLoaded[u.tile.cacheKey]=new o({data:u.data,ownerTile:u.tile,create:u.tiledImage.source.createTileCache,destroy:u.tiledImage.source.destroyTileCache,getImage:u.tiledImage.source.getTileCacheDataAsImage,getData:u.tiledImage.source.getTileCacheData,getRenderedContext:u.tiledImage.source.getTileCacheDataAsContext2D}),this._imagesLoadedCount++),p.addTile(u.tile),u.tile.cacheImageRecord=p,this._imagesLoadedCount>this._maxImageCacheCount){for(var m=null,v=-1,x=null,E,C,O,_,k,I,G=this._tilesLoaded.length-1;G>=0;G--)if(I=this._tilesLoaded[G],E=I.tile,!(E.level<=h||E.beingDrawn)){if(!m){m=E,v=G,x=I;continue}_=E.lastTouchTime,C=m.lastTouchTime,k=E.level,O=m.level,(_<C||_===C&&k>O)&&(m=E,v=G,x=I)}m&&v>=0&&(this._unloadTile(x),d=v)}this._tilesLoaded[d]=new n({tile:u.tile,tiledImage:u.tiledImage})},clearTilesFor:function(u){t.console.assert(u,"[TileCache.clearTilesFor] tiledImage is required");for(var h,d=0;d<this._tilesLoaded.length;++d)h=this._tilesLoaded[d],h.tiledImage===u&&(this._unloadTile(h),this._tilesLoaded.splice(d,1),d--)},getImageRecord:function(u){return t.console.assert(u,"[TileCache.getImageRecord] cacheKey is required"),this._imagesLoaded[u]},_unloadTile:function(u){t.console.assert(u,"[TileCache._unloadTile] tileRecord is required");var h=u.tile,d=u.tiledImage;h.unload(),h.cacheImageRecord=null;var p=this._imagesLoaded[h.cacheKey];p.removeTile(h),p.getTileCount()||(p.destroy(),delete this._imagesLoaded[h.cacheKey],this._imagesLoadedCount--),d.viewer.raiseEvent("tile-unloaded",{tile:h,tiledImage:d})}}}(i),function(t){t.World=function(n){var o=this;t.console.assert(n.viewer,"[World] options.viewer is required"),t.EventSource.call(this),this.viewer=n.viewer,this._items=[],this._needsDraw=!1,this._autoRefigureSizes=!0,this._needsSizesFigured=!1,this._delegatedFigureSizes=function(u){o._autoRefigureSizes?o._figureSizes():o._needsSizesFigured=!0},this._figureSizes()},t.extend(t.World.prototype,t.EventSource.prototype,{addItem:function(n,o){if(t.console.assert(n,"[World.addItem] item is required"),t.console.assert(n instanceof t.TiledImage,"[World.addItem] only TiledImages supported at this time"),o=o||{},o.index!==void 0){var u=Math.max(0,Math.min(this._items.length,o.index));this._items.splice(u,0,n)}else this._items.push(n);this._autoRefigureSizes?this._figureSizes():this._needsSizesFigured=!0,this._needsDraw=!0,n.addHandler("bounds-change",this._delegatedFigureSizes),n.addHandler("clip-change",this._delegatedFigureSizes),this.raiseEvent("add-item",{item:n})},getItemAt:function(n){return t.console.assert(n!==void 0,"[World.getItemAt] index is required"),this._items[n]},getIndexOfItem:function(n){return t.console.assert(n,"[World.getIndexOfItem] item is required"),t.indexOf(this._items,n)},getItemCount:function(){return this._items.length},setItemIndex:function(n,o){t.console.assert(n,"[World.setItemIndex] item is required"),t.console.assert(o!==void 0,"[World.setItemIndex] index is required");var u=this.getIndexOfItem(n);if(o>=this._items.length)throw new Error("Index bigger than number of layers.");o===u||u===-1||(this._items.splice(u,1),this._items.splice(o,0,n),this._needsDraw=!0,this.raiseEvent("item-index-change",{item:n,previousIndex:u,newIndex:o}))},removeItem:function(n){t.console.assert(n,"[World.removeItem] item is required");var o=t.indexOf(this._items,n);o!==-1&&(n.removeHandler("bounds-change",this._delegatedFigureSizes),n.removeHandler("clip-change",this._delegatedFigureSizes),n.destroy(),this._items.splice(o,1),this._figureSizes(),this._needsDraw=!0,this._raiseRemoveItem(n))},removeAll:function(){this.viewer._cancelPendingImages();var n,o;for(o=0;o<this._items.length;o++)n=this._items[o],n.removeHandler("bounds-change",this._delegatedFigureSizes),n.removeHandler("clip-change",this._delegatedFigureSizes),n.destroy();var u=this._items;for(this._items=[],this._figureSizes(),this._needsDraw=!0,o=0;o<u.length;o++)n=u[o],this._raiseRemoveItem(n)},resetItems:function(){for(var n=0;n<this._items.length;n++)this._items[n].reset()},update:function(){for(var n=!1,o=0;o<this._items.length;o++)n=this._items[o].update()||n;return n},draw:function(){for(var n=0;n<this._items.length;n++)this._items[n].draw();this._needsDraw=!1},needsDraw:function(){for(var n=0;n<this._items.length;n++)if(this._items[n].needsDraw())return!0;return this._needsDraw},getHomeBounds:function(){return this._homeBounds.clone()},getContentFactor:function(){return this._contentFactor},setAutoRefigureSizes:function(n){this._autoRefigureSizes=n,n&this._needsSizesFigured&&(this._figureSizes(),this._needsSizesFigured=!1)},arrange:function(n){n=n||{};var o=n.immediately||!1,u=n.layout||t.DEFAULT_SETTINGS.collectionLayout,h=n.rows||t.DEFAULT_SETTINGS.collectionRows,d=n.columns||t.DEFAULT_SETTINGS.collectionColumns,p=n.tileSize||t.DEFAULT_SETTINGS.collectionTileSize,m=n.tileMargin||t.DEFAULT_SETTINGS.collectionTileMargin,v=p+m,x;!n.rows&&d?x=d:x=Math.ceil(this._items.length/h);var E=0,C=0,O,_,k,I,G;this.setAutoRefigureSizes(!1);for(var Z=0;Z<this._items.length;Z++)Z&&Z%x===0&&(u==="horizontal"?(C+=v,E=0):(E+=v,C=0)),O=this._items[Z],_=O.getBounds(),_.width>_.height?k=p:k=p*(_.width/_.height),I=k*(_.height/_.width),G=new t.Point(E+(p-k)/2,C+(p-I)/2),O.setPosition(G,o),O.setWidth(k,o),u==="horizontal"?E+=v:C+=v;this.setAutoRefigureSizes(!0)},_figureSizes:function(){var n=this._homeBounds?this._homeBounds.clone():null,o=this._contentSize?this._contentSize.clone():null,u=this._contentFactor||0;if(!this._items.length)this._homeBounds=new t.Rect(0,0,1,1),this._contentSize=new t.Point(1,1),this._contentFactor=1;else{var h=this._items[0],d=h.getBounds();this._contentFactor=h.getContentSize().x/d.width;for(var p=h.getClippedBounds().getBoundingBox(),m=p.x,v=p.y,x=p.x+p.width,E=p.y+p.height,C=1;C<this._items.length;C++)h=this._items[C],d=h.getBounds(),this._contentFactor=Math.max(this._contentFactor,h.getContentSize().x/d.width),p=h.getClippedBounds().getBoundingBox(),m=Math.min(m,p.x),v=Math.min(v,p.y),x=Math.max(x,p.x+p.width),E=Math.max(E,p.y+p.height);this._homeBounds=new t.Rect(m,v,x-m,E-v),this._contentSize=new t.Point(this._homeBounds.width*this._contentFactor,this._homeBounds.height*this._contentFactor)}(this._contentFactor!==u||!this._homeBounds.equals(n)||!this._contentSize.equals(o))&&this.raiseEvent("metrics-change",{})},_raiseRemoveItem:function(n){this.raiseEvent("remove-item",{item:n})}})}(i)})(_T);var i4=_T.exports;const zf=gr(i4);function Xb(e){return JSON.parse(JSON.stringify(e))}const Yb={middle:!1,top:!1,"left-middle":!1,"right-middle":!1,bottom:!1,"left-top":!1,"right-top":!1,"left-bottom":!1,"right-bottom":!1},r4=["tall","extra-tall","wide","full"];function o4(e){return a4(e,[[".",".","."],[".",".","."],[".",".","."]],s4)}function s4(e,i,t,n){switch(e){case"top":i[0][1]=n.id,t==="wide"&&(i[0][2]=n.id),t==="full"&&(i[0][0]=n.id,i[0][2]=n.id);break;case"left-middle":i[1][0]=n.id,t==="tall"?i[2][0]=n.id:t==="wide"&&(i[1][1]=n.id,i[1][2]=n.id);break;case"right-middle":i[1][2]=n.id,t==="tall"&&(i[2][2]=n.id);break;case"bottom":i[2][1]=n.id,t==="wide"&&(i[2][2]=n.id),t==="full"&&(i[2][0]=n.id,i[2][2]=n.id);break;case"left-top":i[0][0]=n.id,t==="tall"?i[1][0]=n.id:t==="wide"&&(i[0][1]=n.id,i[0][2]=n.id);break;case"right-top":i[0][2]=n.id,t==="tall"&&(i[1][2]=n.id);break;case"left-bottom":i[2][0]=n.id,t==="wide"&&(i[2][1]=n.id,i[2][2]=n.id);break;case"right-bottom":i[2][2]=n.id;break;default:i[1][1]=n.id,i[1][2]=n.id,t==="full"&&(i[1][0]=n.id)}}function a4(e,i,t){const n=document.createElement("div");n.innerHTML=e;let o;n.getElementsByTagName("tei-surface").length>0?o=[n.getElementsByTagName("tei-surface")[0]]:o=n.getElementsByTagName("tei-body")[0].children;const u=function(E){const C=E.getAttribute("rend");return Object.keys(Yb).includes(C)?C:"middle"};function h(E){const C=E.getAttribute("style");return r4.includes(C)?C:null}const d=[];let p="",m=0,v=0;try{for(const E of o){const C=Xb(i),O=Xb(Yb),_=E.id,k=E.children,I=E.getAttribute("facs"),G=E.getAttribute("ana");for(const Z of k){const ae=u(Z),te=h(Z);Z.setAttribute("data-entry-id",_),O[ae]?(Z.id=O[ae][0].id,O[ae].push(Z)):(m++,Z.id=`z${m}`,O[ae]=[Z]),t(ae,C,te,Z)}for(const Z of Object.values(O))Z&&(p=p.concat(u4(Z,I,G)));d[v]=Up(C[0],d[v]),d[v+1]=Up(C[1],d[v+1]),d[v+2]=Up(C[2],d[v+2]),v+=1}}catch(E){console.error(E)}const x=l4(d);return{html:p,layout:x}}function l4(e){const i=[...e];e[0]&&e[0][0]==="."&&e[0][1]==="."&&i.shift();let t="";for(const n of i){const o=n.join(" ");t+=` '${o}'`}return t}function u4(e,i,t){const n=e[0],o=n.id,u=n.attributes["data-entry-id"].value;let h="";for(let p=0;p<n.classList.length;p++)h=`${h} ${n.classList.item(p)}`;let d=`<div id="${o}" className="${h}" ana="${t}" data-entry-id="${u}" data-facs="${i||""}">`;for(const p of e)p.getAttribute("facs")&&p.setAttribute("data-facs",p.getAttribute("facs")),p.setAttribute("className","block"),p.name==="div"?d=d.concat(`${p.innerHTML} <br/>`):d=d.concat(`${p.outerHTML}`);return d.concat("</div>")}function Up(e,i){if(i){const t=[];for(let n=0;n<4;n++)e[n]!=="."?t[n]=e[n]:t[n]=i[n];return t}return e}function c4(e){const i=[],t=new DOMParser().parseFromString(e,"text/html").querySelectorAll("tei-div[ana], tei-seg[ana]");for(const n of t){const o=n.getAttribute("ana");if(o){const u=o.split(" ").map(h=>h.slice(1));for(const h of u)i.includes(h)||i.push(h)}}return i}async function d4(e){if(e.loading)return e;e.loading=!0;const i={...e},t=Object.keys(i.annotationURLs),n=Object.fromEntries(t.map(o=>[o,!1]));if(i.image_zoom_url.endsWith(".json")){const o=await(await fetch(i.image_zoom_url)).json();i.tileSource=new zf.IIIFTileSource(o)}else i.tileSource=new zf.ImageTileSource({type:"image",url:i.image_zoom_url});if(t.length>0){for await(const o of t){const{htmlURL:u,xmlURL:h}=i.annotationURLs[o];i.transcription||(i.transcription={}),i.transcription[o]={};try{const d=await fetch(u),p=await fetch(h),m=await d.text(),v=await p.text(),x=c4(m),E=h4(m,v);if(E)i.transcription[o]=E,i.tagIds=x,i.loading=!1,n[o]=!0;else throw new Error(`Unable to load transcription: ${u}`)}catch(d){throw e.loading=!1,d}}if(Object.values(n).filter(o=>!o).length===0)return i}return i.loading=!1,i}function h4(e,i){return{...o4(e),xml:i}}const Mm=e=>e.document,p4=e=>e.glossary;function*f4(e){const i={},t=yield fetch(e);if(!t.ok)return yield Gs("DocumentActions.loadTags",i),null;const n=yield t.text(),o=new DOMParser().parseFromString(n,"text/html").querySelectorAll("tei-category");for(const u of o){const h=u.getAttribute("id");if(h){const d=u.querySelector("tei-catdesc");if(d){const p=d.textContent;i[h]=p}}}yield Gs("DocumentActions.loadTags",i)}function*m4(e){const i=e.payload.params[0].split("/");if(i.length>1)switch(i[1]){case"ec":{yield v4(),yield g4(),yield w4(),yield y4(i);break}}}function*g4(){const e=yield Nc(Mm);e.tags||(yield f4(e.headerUrl))}function*v4(){const e=yield Nc(Mm);if(!e.loaded){if(e.variorum){const t={};for(const o of Object.keys(e.manifestURL)){const u=yield fetch(e.manifestURL[o]);t[o]=yield u.json()}const n={type:"variorum",documentData:t};return yield Gs("DocumentActions.loadDocument",n),n}const i=yield(yield fetch(e.manifestURL)).json();return yield Gs("DocumentActions.loadDocument",i),i}return null}function*y4(e){const i=yield Nc(Mm);if(i.loaded){let t,n,o;e.length>2&&(t=e[2],e.length>4&&(n=e[4],e.length>6&&(o=e[6])));const u=[];u.push(t),n&&n!==t&&u.push(n),o&&o!==t&&o!==n&&u.push(o);for(const h of u){const d=i.folioIndex[h];if(d&&!d.loading){const p=yield d4(d);yield Gs("DocumentActions.loadFolio",p)}}}}function*w4(){const e=yield Nc(p4);if(!e.loaded&&e.URL){const i=yield(yield fetch(e.URL)).json();yield Gs("GlossaryActions.loadGlossary",i)}}function*b4(){yield V3("RouteListenerSaga.userNavigation",m4)}function*x4(){yield o3([b4()])}function S4(e){const i=F3(),t=GE(n4(e),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__(),kH(i));return i.run(x4),t}function jf(e,i,...t){e.dispatch({type:i,payload:{params:t,dispatcher:{dispatch:e.dispatch}}})}function*Gs(e,...i){return yield r3({type:e,payload:{params:i}})}function E4(e,i,t){const n=t.payload&&t.payload.params?t.payload.params:[];return i(e,...n,t.payload.dispatcher)}function T4(e,i){const t=e.split(".");return i[t[1]]}function Wp(e,i,t){const n=[];for(const u of Object.keys(i))n.push(`${e}.${u}`);function o(u=t,h,d=n,p=i){return d.includes(h.type)?E4(u,T4(h.type,p),h):{...u}}return o}function Dr(e){if(typeof e!="string")throw new Error(Us(7));return e.charAt(0).toUpperCase()+e.slice(1)}function hl(){for(var e=arguments.length,i=new Array(e),t=0;t<e;t++)i[t]=arguments[t];return i.reduce(function(n,o){return o==null?n:function(){for(var u=arguments.length,h=new Array(u),d=0;d<u;d++)h[d]=arguments[d];n.apply(this,h),o.apply(this,h)}},function(){})}var C4=function(e){return{root:{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,fontSize:e.typography.pxToRem(24),transition:e.transitions.create("fill",{duration:e.transitions.duration.shorter})},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},colorAction:{color:e.palette.action.active},colorError:{color:e.palette.error.main},colorDisabled:{color:e.palette.action.disabled},fontSizeInherit:{fontSize:"inherit"},fontSizeSmall:{fontSize:e.typography.pxToRem(20)},fontSizeLarge:{fontSize:e.typography.pxToRem(35)}}},kT=B.forwardRef(function(e,i){var t=e.children,n=e.classes,o=e.className,u=e.color,h=u===void 0?"inherit":u,d=e.component,p=d===void 0?"svg":d,m=e.fontSize,v=m===void 0?"medium":m,x=e.htmlColor,E=e.titleAccess,C=e.viewBox,O=C===void 0?"0 0 24 24":C,_=Qt(e,["children","classes","className","color","component","fontSize","htmlColor","titleAccess","viewBox"]);return B.createElement(p,De({className:Tn(n.root,o,h!=="inherit"&&n["color".concat(Dr(h))],v!=="default"&&v!=="medium"&&n["fontSize".concat(Dr(v))]),focusable:"false",viewBox:O,color:x,"aria-hidden":E?void 0:!0,role:E?"img":void 0,ref:i},_),t,E?B.createElement("title",null,E):null)});kT.muiName="SvgIcon";const $b=ei(C4,{name:"MuiSvgIcon"})(kT);function P4(e,i){var t=function(n,o){return xt.createElement($b,De({ref:o},n),e)};return t.muiName=$b.muiName,xt.memo(xt.forwardRef(t))}function RT(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:166,t;function n(){for(var o=arguments.length,u=new Array(o),h=0;h<o;h++)u[h]=arguments[h];var d=this,p=function(){e.apply(d,u)};clearTimeout(t),t=setTimeout(p,i)}return n.clear=function(){clearTimeout(t)},n}function _4(e,i){return B.isValidElement(e)&&i.indexOf(e.type.muiName)!==-1}function Ir(e){return e&&e.ownerDocument||document}function OT(e){var i=Ir(e);return i.defaultView||window}function qs(e,i){typeof e=="function"?e(i):e&&(e.current=i)}function k4(e){var i=e.controlled,t=e.default,n=B.useRef(i!==void 0),o=n.current,u=B.useState(t),h=u[0],d=u[1],p=o?i:h,m=B.useCallback(function(v){o||d(v)},[]);return[p,m]}var R4=typeof window<"u"?B.useLayoutEffect:B.useEffect;function Lo(e){var i=B.useRef(e);return R4(function(){i.current=e}),B.useCallback(function(){return i.current.apply(void 0,arguments)},[])}function Zn(e,i){return B.useMemo(function(){return e==null&&i==null?null:function(t){qs(e,t),qs(i,t)}},[e,i])}var Fc=!0,Hf=!1,Kb=null,O4={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function A4(e){var i=e.type,t=e.tagName;return!!(t==="INPUT"&&O4[i]&&!e.readOnly||t==="TEXTAREA"&&!e.readOnly||e.isContentEditable)}function D4(e){e.metaKey||e.altKey||e.ctrlKey||(Fc=!0)}function Vp(){Fc=!1}function I4(){this.visibilityState==="hidden"&&Hf&&(Fc=!0)}function M4(e){e.addEventListener("keydown",D4,!0),e.addEventListener("mousedown",Vp,!0),e.addEventListener("pointerdown",Vp,!0),e.addEventListener("touchstart",Vp,!0),e.addEventListener("visibilitychange",I4,!0)}function L4(e){var i=e.target;try{return i.matches(":focus-visible")}catch{}return Fc||A4(i)}function N4(){Hf=!0,window.clearTimeout(Kb),Kb=window.setTimeout(function(){Hf=!1},100)}function z4(){var e=B.useCallback(function(i){var t=rr.findDOMNode(i);t!=null&&M4(t.ownerDocument)},[]);return{isFocusVisible:L4,onBlurVisible:N4,ref:e}}const Qb={disabled:!1},xc=xt.createContext(null);var j4=function(e){return e.scrollTop},Xa="unmounted",Ro="exited",Oo="entering",As="entered",Ff="exiting",vr=function(e){Rc(i,e);function i(n,o){var u;u=e.call(this,n,o)||this;var h=o,d=h&&!h.isMounting?n.enter:n.appear,p;return u.appearStatus=null,n.in?d?(p=Ro,u.appearStatus=Oo):p=As:n.unmountOnExit||n.mountOnEnter?p=Xa:p=Ro,u.state={status:p},u.nextCallback=null,u}i.getDerivedStateFromProps=function(n,o){var u=n.in;return u&&o.status===Xa?{status:Ro}:null};var t=i.prototype;return t.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},t.componentDidUpdate=function(n){var o=null;if(n!==this.props){var u=this.state.status;this.props.in?u!==Oo&&u!==As&&(o=Oo):(u===Oo||u===As)&&(o=Ff)}this.updateStatus(!1,o)},t.componentWillUnmount=function(){this.cancelNextCallback()},t.getTimeouts=function(){var n=this.props.timeout,o,u,h;return o=u=h=n,n!=null&&typeof n!="number"&&(o=n.exit,u=n.enter,h=n.appear!==void 0?n.appear:u),{exit:o,enter:u,appear:h}},t.updateStatus=function(n,o){if(n===void 0&&(n=!1),o!==null)if(this.cancelNextCallback(),o===Oo){if(this.props.unmountOnExit||this.props.mountOnEnter){var u=this.props.nodeRef?this.props.nodeRef.current:Ga.findDOMNode(this);u&&j4(u)}this.performEnter(n)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Ro&&this.setState({status:Xa})},t.performEnter=function(n){var o=this,u=this.props.enter,h=this.context?this.context.isMounting:n,d=this.props.nodeRef?[h]:[Ga.findDOMNode(this),h],p=d[0],m=d[1],v=this.getTimeouts(),x=h?v.appear:v.enter;if(!n&&!u||Qb.disabled){this.safeSetState({status:As},function(){o.props.onEntered(p)});return}this.props.onEnter(p,m),this.safeSetState({status:Oo},function(){o.props.onEntering(p,m),o.onTransitionEnd(x,function(){o.safeSetState({status:As},function(){o.props.onEntered(p,m)})})})},t.performExit=function(){var n=this,o=this.props.exit,u=this.getTimeouts(),h=this.props.nodeRef?void 0:Ga.findDOMNode(this);if(!o||Qb.disabled){this.safeSetState({status:Ro},function(){n.props.onExited(h)});return}this.props.onExit(h),this.safeSetState({status:Ff},function(){n.props.onExiting(h),n.onTransitionEnd(u.exit,function(){n.safeSetState({status:Ro},function(){n.props.onExited(h)})})})},t.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},t.safeSetState=function(n,o){o=this.setNextCallback(o),this.setState(n,o)},t.setNextCallback=function(n){var o=this,u=!0;return this.nextCallback=function(h){u&&(u=!1,o.nextCallback=null,n(h))},this.nextCallback.cancel=function(){u=!1},this.nextCallback},t.onTransitionEnd=function(n,o){this.setNextCallback(o);var u=this.props.nodeRef?this.props.nodeRef.current:Ga.findDOMNode(this),h=n==null&&!this.props.addEndListener;if(!u||h){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var d=this.props.nodeRef?[this.nextCallback]:[u,this.nextCallback],p=d[0],m=d[1];this.props.addEndListener(p,m)}n!=null&&setTimeout(this.nextCallback,n)},t.render=function(){var n=this.state.status;if(n===Xa)return null;var o=this.props,u=o.children;o.in,o.mountOnEnter,o.unmountOnExit,o.appear,o.enter,o.exit,o.timeout,o.addEndListener,o.onEnter,o.onEntering,o.onEntered,o.onExit,o.onExiting,o.onExited,o.nodeRef;var h=Bo(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return xt.createElement(xc.Provider,{value:null},typeof u=="function"?u(n,h):xt.cloneElement(xt.Children.only(u),h))},i}(xt.Component);vr.contextType=xc;vr.propTypes={};function Os(){}vr.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Os,onEntering:Os,onEntered:Os,onExit:Os,onExiting:Os,onExited:Os};vr.UNMOUNTED=Xa;vr.EXITED=Ro;vr.ENTERING=Oo;vr.ENTERED=As;vr.EXITING=Ff;function Lm(e,i){var t=function(o){return i&&B.isValidElement(o)?i(o):o},n=Object.create(null);return e&&B.Children.map(e,function(o){return o}).forEach(function(o){n[o.key]=t(o)}),n}function H4(e,i){e=e||{},i=i||{};function t(v){return v in i?i[v]:e[v]}var n=Object.create(null),o=[];for(var u in e)u in i?o.length&&(n[u]=o,o=[]):o.push(u);var h,d={};for(var p in i){if(n[p])for(h=0;h<n[p].length;h++){var m=n[p][h];d[n[p][h]]=t(m)}d[p]=t(p)}for(h=0;h<o.length;h++)d[o[h]]=t(o[h]);return d}function No(e,i,t){return t[i]!=null?t[i]:e.props[i]}function F4(e,i){return Lm(e.children,function(t){return B.cloneElement(t,{onExited:i.bind(null,t),in:!0,appear:No(t,"appear",e),enter:No(t,"enter",e),exit:No(t,"exit",e)})})}function B4(e,i,t){var n=Lm(e.children),o=H4(i,n);return Object.keys(o).forEach(function(u){var h=o[u];if(B.isValidElement(h)){var d=u in i,p=u in n,m=i[u],v=B.isValidElement(m)&&!m.props.in;p&&(!d||v)?o[u]=B.cloneElement(h,{onExited:t.bind(null,h),in:!0,exit:No(h,"exit",e),enter:No(h,"enter",e)}):!p&&d&&!v?o[u]=B.cloneElement(h,{in:!1}):p&&d&&B.isValidElement(m)&&(o[u]=B.cloneElement(h,{onExited:t.bind(null,h),in:m.props.in,exit:No(h,"exit",e),enter:No(h,"enter",e)}))}}),o}var U4=Object.values||function(e){return Object.keys(e).map(function(i){return e[i]})},W4={component:"div",childFactory:function(e){return e}},Nm=function(e){Rc(i,e);function i(n,o){var u;u=e.call(this,n,o)||this;var h=u.handleExited.bind(Ef(u));return u.state={contextValue:{isMounting:!0},handleExited:h,firstRender:!0},u}var t=i.prototype;return t.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},t.componentWillUnmount=function(){this.mounted=!1},i.getDerivedStateFromProps=function(n,o){var u=o.children,h=o.handleExited,d=o.firstRender;return{children:d?F4(n,h):B4(n,u,h),firstRender:!1}},t.handleExited=function(n,o){var u=Lm(this.props.children);n.key in u||(n.props.onExited&&n.props.onExited(o),this.mounted&&this.setState(function(h){var d=De({},h.children);return delete d[n.key],{children:d}}))},t.render=function(){var n=this.props,o=n.component,u=n.childFactory,h=Bo(n,["component","childFactory"]),d=this.state.contextValue,p=U4(this.state.children).map(u);return delete h.appear,delete h.enter,delete h.exit,o===null?xt.createElement(xc.Provider,{value:d},p):xt.createElement(xc.Provider,{value:d},xt.createElement(o,h,p))},i}(xt.Component);Nm.propTypes={};Nm.defaultProps=W4;var AT=function(e){return e.scrollTop};function Sc(e,i){var t=e.timeout,n=e.style,o=n===void 0?{}:n;return{duration:o.transitionDuration||typeof t=="number"?t:t[i.mode]||0,delay:o.transitionDelay}}var V4=function(e){var i={};return e.shadows.forEach(function(t,n){i["elevation".concat(n)]={boxShadow:t}}),De({root:{backgroundColor:e.palette.background.paper,color:e.palette.text.primary,transition:e.transitions.create("box-shadow")},rounded:{borderRadius:e.shape.borderRadius},outlined:{border:"1px solid ".concat(e.palette.divider)}},i)},G4=B.forwardRef(function(e,i){var t=e.classes,n=e.className,o=e.component,u=o===void 0?"div":o,h=e.square,d=h===void 0?!1:h,p=e.elevation,m=p===void 0?1:p,v=e.variant,x=v===void 0?"elevation":v,E=Qt(e,["classes","className","component","square","elevation","variant"]);return B.createElement(u,De({className:Tn(t.root,n,x==="outlined"?t.outlined:t["elevation".concat(m)],!d&&t.rounded),ref:i},E))});const zm=ei(V4,{name:"MuiPaper"})(G4);var q4=typeof window>"u"?B.useEffect:B.useLayoutEffect;function Z4(e){var i=e.classes,t=e.pulsate,n=t===void 0?!1:t,o=e.rippleX,u=e.rippleY,h=e.rippleSize,d=e.in,p=e.onExited,m=p===void 0?function(){}:p,v=e.timeout,x=B.useState(!1),E=x[0],C=x[1],O=Tn(i.ripple,i.rippleVisible,n&&i.ripplePulsate),_={width:h,height:h,top:-(h/2)+u,left:-(h/2)+o},k=Tn(i.child,E&&i.childLeaving,n&&i.childPulsate),I=Lo(m);return q4(function(){if(!d){C(!0);var G=setTimeout(I,v);return function(){clearTimeout(G)}}},[I,d,v]),B.createElement("span",{className:O,style:_},B.createElement("span",{className:k}))}var Bf=550,X4=80,Y4=function(e){return{root:{overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"},ripple:{opacity:0,position:"absolute"},rippleVisible:{opacity:.3,transform:"scale(1)",animation:"$enter ".concat(Bf,"ms ").concat(e.transitions.easing.easeInOut)},ripplePulsate:{animationDuration:"".concat(e.transitions.duration.shorter,"ms")},child:{opacity:1,display:"block",width:"100%",height:"100%",borderRadius:"50%",backgroundColor:"currentColor"},childLeaving:{opacity:0,animation:"$exit ".concat(Bf,"ms ").concat(e.transitions.easing.easeInOut)},childPulsate:{position:"absolute",left:0,top:0,animation:"$pulsate 2500ms ".concat(e.transitions.easing.easeInOut," 200ms infinite")},"@keyframes enter":{"0%":{transform:"scale(0)",opacity:.1},"100%":{transform:"scale(1)",opacity:.3}},"@keyframes exit":{"0%":{opacity:1},"100%":{opacity:0}},"@keyframes pulsate":{"0%":{transform:"scale(1)"},"50%":{transform:"scale(0.92)"},"100%":{transform:"scale(1)"}}}},$4=B.forwardRef(function(e,i){var t=e.center,n=t===void 0?!1:t,o=e.classes,u=e.className,h=Qt(e,["center","classes","className"]),d=B.useState([]),p=d[0],m=d[1],v=B.useRef(0),x=B.useRef(null);B.useEffect(function(){x.current&&(x.current(),x.current=null)},[p]);var E=B.useRef(!1),C=B.useRef(null),O=B.useRef(null),_=B.useRef(null);B.useEffect(function(){return function(){clearTimeout(C.current)}},[]);var k=B.useCallback(function(ae){var te=ae.pulsate,Q=ae.rippleX,le=ae.rippleY,ce=ae.rippleSize,me=ae.cb;m(function(Pe){return[].concat(hm(Pe),[B.createElement(Z4,{key:v.current,classes:o,timeout:Bf,pulsate:te,rippleX:Q,rippleY:le,rippleSize:ce})])}),v.current+=1,x.current=me},[o]),I=B.useCallback(function(){var ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Q=arguments.length>2?arguments[2]:void 0,le=te.pulsate,ce=le===void 0?!1:le,me=te.center,Pe=me===void 0?n||te.pulsate:me,be=te.fakeElement,fe=be===void 0?!1:be;if(ae.type==="mousedown"&&E.current){E.current=!1;return}ae.type==="touchstart"&&(E.current=!0);var ve=fe?null:_.current,Fe=ve?ve.getBoundingClientRect():{width:0,height:0,left:0,top:0},Ge,Te,ye;if(Pe||ae.clientX===0&&ae.clientY===0||!ae.clientX&&!ae.touches)Ge=Math.round(Fe.width/2),Te=Math.round(Fe.height/2);else{var ke=ae.touches?ae.touches[0]:ae,_e=ke.clientX,$=ke.clientY;Ge=Math.round(_e-Fe.left),Te=Math.round($-Fe.top)}if(Pe)ye=Math.sqrt((2*Math.pow(Fe.width,2)+Math.pow(Fe.height,2))/3),ye%2===0&&(ye+=1);else{var Le=Math.max(Math.abs((ve?ve.clientWidth:0)-Ge),Ge)*2+2,st=Math.max(Math.abs((ve?ve.clientHeight:0)-Te),Te)*2+2;ye=Math.sqrt(Math.pow(Le,2)+Math.pow(st,2))}ae.touches?O.current===null&&(O.current=function(){k({pulsate:ce,rippleX:Ge,rippleY:Te,rippleSize:ye,cb:Q})},C.current=setTimeout(function(){O.current&&(O.current(),O.current=null)},X4)):k({pulsate:ce,rippleX:Ge,rippleY:Te,rippleSize:ye,cb:Q})},[n,k]),G=B.useCallback(function(){I({},{pulsate:!0})},[I]),Z=B.useCallback(function(ae,te){if(clearTimeout(C.current),ae.type==="touchend"&&O.current){ae.persist(),O.current(),O.current=null,C.current=setTimeout(function(){Z(ae,te)});return}O.current=null,m(function(Q){return Q.length>0?Q.slice(1):Q}),x.current=te},[]);return B.useImperativeHandle(i,function(){return{pulsate:G,start:I,stop:Z}},[G,I,Z]),B.createElement("span",De({className:Tn(o.root,u),ref:_},h),B.createElement(Nm,{component:null,exit:!0},p))});const K4=ei(Y4,{flip:!1,name:"MuiTouchRipple"})(B.memo($4));var Q4={root:{display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle","-moz-appearance":"none","-webkit-appearance":"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},"&$disabled":{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}},disabled:{},focusVisible:{}},J4=B.forwardRef(function(e,i){var t=e.action,n=e.buttonRef,o=e.centerRipple,u=o===void 0?!1:o,h=e.children,d=e.classes,p=e.className,m=e.component,v=m===void 0?"button":m,x=e.disabled,E=x===void 0?!1:x,C=e.disableRipple,O=C===void 0?!1:C,_=e.disableTouchRipple,k=_===void 0?!1:_,I=e.focusRipple,G=I===void 0?!1:I,Z=e.focusVisibleClassName,ae=e.onBlur,te=e.onClick,Q=e.onFocus,le=e.onFocusVisible,ce=e.onKeyDown,me=e.onKeyUp,Pe=e.onMouseDown,be=e.onMouseLeave,fe=e.onMouseUp,ve=e.onTouchEnd,Fe=e.onTouchMove,Ge=e.onTouchStart,Te=e.onDragLeave,ye=e.tabIndex,ke=ye===void 0?0:ye,_e=e.TouchRippleProps,$=e.type,Le=$===void 0?"button":$,st=Qt(e,["action","buttonRef","centerRipple","children","classes","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","onBlur","onClick","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","onDragLeave","tabIndex","TouchRippleProps","type"]),J=B.useRef(null);function Et(){return rr.findDOMNode(J.current)}var yt=B.useRef(null),mt=B.useState(!1),Tt=mt[0],Bt=mt[1];E&&Tt&&Bt(!1);var At=z4(),at=At.isFocusVisible,$e=At.onBlurVisible,wt=At.ref;B.useImperativeHandle(t,function(){return{focusVisible:function(){Bt(!0),J.current.focus()}}},[]),B.useEffect(function(){Tt&&G&&!O&&yt.current.pulsate()},[O,G,Tt]);function Lt(je,rt){var Cn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:k;return Lo(function(Kt){rt&&rt(Kt);var ti=Cn;return!ti&&yt.current&&yt.current[je](Kt),!0})}var tn=Lt("start",Pe),kt=Lt("stop",Te),Gt=Lt("stop",fe),D=Lt("stop",function(je){Tt&&je.preventDefault(),be&&be(je)}),K=Lt("start",Ge),we=Lt("stop",ve),ze=Lt("stop",Fe),Ne=Lt("stop",function(je){Tt&&($e(je),Bt(!1)),ae&&ae(je)},!1),Qe=Lo(function(je){J.current||(J.current=je.currentTarget),at(je)&&(Bt(!0),le&&le(je)),Q&&Q(je)}),Xe=function(){var je=Et();return v&&v!=="button"&&!(je.tagName==="A"&&je.href)},bt=B.useRef(!1),Rt=Lo(function(je){G&&!bt.current&&Tt&&yt.current&&je.key===" "&&(bt.current=!0,je.persist(),yt.current.stop(je,function(){yt.current.start(je)})),je.target===je.currentTarget&&Xe()&&je.key===" "&&je.preventDefault(),ce&&ce(je),je.target===je.currentTarget&&Xe()&&je.key==="Enter"&&!E&&(je.preventDefault(),te&&te(je))}),Dt=Lo(function(je){G&&je.key===" "&&yt.current&&Tt&&!je.defaultPrevented&&(bt.current=!1,je.persist(),yt.current.stop(je,function(){yt.current.pulsate(je)})),me&&me(je),te&&je.target===je.currentTarget&&Xe()&&je.key===" "&&!je.defaultPrevented&&te(je)}),he=v;he==="button"&&st.href&&(he="a");var Ae={};he==="button"?(Ae.type=Le,Ae.disabled=E):((he!=="a"||!st.href)&&(Ae.role="button"),Ae["aria-disabled"]=E);var L=Zn(n,i),z=Zn(wt,J),W=Zn(L,z),X=B.useState(!1),Se=X[0],Ue=X[1];B.useEffect(function(){Ue(!0)},[]);var ft=Se&&!O&&!E;return B.createElement(he,De({className:Tn(d.root,p,Tt&&[d.focusVisible,Z],E&&d.disabled),onBlur:Ne,onClick:te,onFocus:Qe,onKeyDown:Rt,onKeyUp:Dt,onMouseDown:tn,onMouseLeave:D,onMouseUp:Gt,onDragLeave:kt,onTouchEnd:we,onTouchMove:ze,onTouchStart:K,ref:W,tabIndex:E?-1:ke},Ae,st),h,ft?B.createElement(K4,De({ref:yt,center:u},_e)):null)});const eF=ei(Q4,{name:"MuiButtonBase"})(J4);var tF={entering:{opacity:1},entered:{opacity:1}},nF={enter:mc.enteringScreen,exit:mc.leavingScreen},DT=B.forwardRef(function(e,i){var t=e.children,n=e.disableStrictModeCompat,o=n===void 0?!1:n,u=e.in,h=e.onEnter,d=e.onEntered,p=e.onEntering,m=e.onExit,v=e.onExited,x=e.onExiting,E=e.style,C=e.TransitionComponent,O=C===void 0?vr:C,_=e.timeout,k=_===void 0?nF:_,I=Qt(e,["children","disableStrictModeCompat","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","TransitionComponent","timeout"]),G=ml(),Z=G.unstable_strictMode&&!o,ae=B.useRef(null),te=Zn(t.ref,i),Q=Zn(Z?ae:void 0,te),le=function(Fe){return function(Ge,Te){if(Fe){var ye=Z?[ae.current,Ge]:[Ge,Te],ke=pm(ye,2),_e=ke[0],$=ke[1];$===void 0?Fe(_e):Fe(_e,$)}}},ce=le(p),me=le(function(Fe,Ge){AT(Fe);var Te=Sc({style:E,timeout:k},{mode:"enter"});Fe.style.webkitTransition=G.transitions.create("opacity",Te),Fe.style.transition=G.transitions.create("opacity",Te),h&&h(Fe,Ge)}),Pe=le(d),be=le(x),fe=le(function(Fe){var Ge=Sc({style:E,timeout:k},{mode:"exit"});Fe.style.webkitTransition=G.transitions.create("opacity",Ge),Fe.style.transition=G.transitions.create("opacity",Ge),m&&m(Fe)}),ve=le(v);return B.createElement(O,De({appear:!0,in:u,nodeRef:Z?ae:void 0,onEnter:me,onEntered:Pe,onEntering:ce,onExit:fe,onExited:ve,onExiting:be,timeout:k},I),function(Fe,Ge){return B.cloneElement(t,De({style:De({opacity:0,visibility:Fe==="exited"&&!u?"hidden":void 0},tF[Fe],E,t.props.style),ref:Q},Ge))})}),iF=function(e){return{root:{margin:0},body2:e.typography.body2,body1:e.typography.body1,caption:e.typography.caption,button:e.typography.button,h1:e.typography.h1,h2:e.typography.h2,h3:e.typography.h3,h4:e.typography.h4,h5:e.typography.h5,h6:e.typography.h6,subtitle1:e.typography.subtitle1,subtitle2:e.typography.subtitle2,overline:e.typography.overline,srOnly:{position:"absolute",height:1,width:1,overflow:"hidden"},alignLeft:{textAlign:"left"},alignCenter:{textAlign:"center"},alignRight:{textAlign:"right"},alignJustify:{textAlign:"justify"},noWrap:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},gutterBottom:{marginBottom:"0.35em"},paragraph:{marginBottom:16},colorInherit:{color:"inherit"},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},colorTextPrimary:{color:e.palette.text.primary},colorTextSecondary:{color:e.palette.text.secondary},colorError:{color:e.palette.error.main},displayInline:{display:"inline"},displayBlock:{display:"block"}}},Jb={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p"},rF=B.forwardRef(function(e,i){var t=e.align,n=t===void 0?"inherit":t,o=e.classes,u=e.className,h=e.color,d=h===void 0?"initial":h,p=e.component,m=e.display,v=m===void 0?"initial":m,x=e.gutterBottom,E=x===void 0?!1:x,C=e.noWrap,O=C===void 0?!1:C,_=e.paragraph,k=_===void 0?!1:_,I=e.variant,G=I===void 0?"body1":I,Z=e.variantMapping,ae=Z===void 0?Jb:Z,te=Qt(e,["align","classes","className","color","component","display","gutterBottom","noWrap","paragraph","variant","variantMapping"]),Q=p||(k?"p":ae[G]||Jb[G])||"span";return B.createElement(Q,De({className:Tn(o.root,u,G!=="inherit"&&o[G],d!=="initial"&&o["color".concat(Dr(d))],O&&o.noWrap,E&&o.gutterBottom,k&&o.paragraph,n!=="inherit"&&o["align".concat(Dr(n))],v!=="initial"&&o["display".concat(Dr(v))]),ref:i},te))});const Qn=ei(iF,{name:"MuiTypography"})(rF);var jm=B.createContext();function oF(){return B.useContext(jm)}function IT(){return B.useContext(jm)}function sF(e){return e=typeof e=="function"?e():e,rr.findDOMNode(e)}var Gp=typeof window<"u"?B.useLayoutEffect:B.useEffect,MT=B.forwardRef(function(e,i){var t=e.children,n=e.container,o=e.disablePortal,u=o===void 0?!1:o,h=e.onRendered,d=B.useState(null),p=d[0],m=d[1],v=Zn(B.isValidElement(t)?t.ref:null,i);return Gp(function(){u||m(sF(n)||document.body)},[n,u]),Gp(function(){if(p&&!u)return qs(i,p),function(){qs(i,null)}},[i,p,u]),Gp(function(){h&&(p||u)&&h()},[h,p,u]),u?B.isValidElement(t)?B.cloneElement(t,{ref:v}):t:p&&rr.createPortal(t,p)});function LT(){var e=document.createElement("div");e.style.width="99px",e.style.height="99px",e.style.position="absolute",e.style.top="-9999px",e.style.overflow="scroll",document.body.appendChild(e);var i=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),i}function aF(e){var i=Ir(e);return i.body===e?OT(i).innerWidth>i.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function nl(e,i){i?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function ex(e){return parseInt(window.getComputedStyle(e)["padding-right"],10)||0}function tx(e,i,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[],o=arguments.length>4?arguments[4]:void 0,u=[i,t].concat(hm(n)),h=["TEMPLATE","SCRIPT","STYLE"];[].forEach.call(e.children,function(d){d.nodeType===1&&u.indexOf(d)===-1&&h.indexOf(d.tagName)===-1&&nl(d,o)})}function qp(e,i){var t=-1;return e.some(function(n,o){return i(n)?(t=o,!0):!1}),t}function lF(e,i){var t=[],n=[],o=e.container,u;if(!i.disableScrollLock){if(aF(o)){var h=LT();t.push({value:o.style.paddingRight,key:"padding-right",el:o}),o.style["padding-right"]="".concat(ex(o)+h,"px"),u=Ir(o).querySelectorAll(".mui-fixed"),[].forEach.call(u,function(v){n.push(v.style.paddingRight),v.style.paddingRight="".concat(ex(v)+h,"px")})}var d=o.parentElement,p=d.nodeName==="HTML"&&window.getComputedStyle(d)["overflow-y"]==="scroll"?d:o;t.push({value:p.style.overflow,key:"overflow",el:p}),p.style.overflow="hidden"}var m=function(){u&&[].forEach.call(u,function(v,x){n[x]?v.style.paddingRight=n[x]:v.style.removeProperty("padding-right")}),t.forEach(function(v){var x=v.value,E=v.el,C=v.key;x?E.style.setProperty(C,x):E.style.removeProperty(C)})};return m}function uF(e){var i=[];return[].forEach.call(e.children,function(t){t.getAttribute&&t.getAttribute("aria-hidden")==="true"&&i.push(t)}),i}var cF=function(){function e(){j6(this,e),this.modals=[],this.containers=[]}return fm(e,[{key:"add",value:function(i,t){var n=this.modals.indexOf(i);if(n!==-1)return n;n=this.modals.length,this.modals.push(i),i.modalRef&&nl(i.modalRef,!1);var o=uF(t);tx(t,i.mountNode,i.modalRef,o,!0);var u=qp(this.containers,function(h){return h.container===t});return u!==-1?(this.containers[u].modals.push(i),n):(this.containers.push({modals:[i],container:t,restore:null,hiddenSiblingNodes:o}),n)}},{key:"mount",value:function(i,t){var n=qp(this.containers,function(u){return u.modals.indexOf(i)!==-1}),o=this.containers[n];o.restore||(o.restore=lF(o,t))}},{key:"remove",value:function(i){var t=this.modals.indexOf(i);if(t===-1)return t;var n=qp(this.containers,function(h){return h.modals.indexOf(i)!==-1}),o=this.containers[n];if(o.modals.splice(o.modals.indexOf(i),1),this.modals.splice(t,1),o.modals.length===0)o.restore&&o.restore(),i.modalRef&&nl(i.modalRef,!0),tx(o.container,i.mountNode,i.modalRef,o.hiddenSiblingNodes,!1),this.containers.splice(n,1);else{var u=o.modals[o.modals.length-1];u.modalRef&&nl(u.modalRef,!1)}return t}},{key:"isTopModal",value:function(i){return this.modals.length>0&&this.modals[this.modals.length-1]===i}}]),e}();function dF(e){var i=e.children,t=e.disableAutoFocus,n=t===void 0?!1:t,o=e.disableEnforceFocus,u=o===void 0?!1:o,h=e.disableRestoreFocus,d=h===void 0?!1:h,p=e.getDoc,m=e.isEnabled,v=e.open,x=B.useRef(),E=B.useRef(null),C=B.useRef(null),O=B.useRef(),_=B.useRef(null),k=B.useCallback(function(Z){_.current=rr.findDOMNode(Z)},[]),I=Zn(i.ref,k),G=B.useRef();return B.useEffect(function(){G.current=v},[v]),!G.current&&v&&typeof window<"u"&&(O.current=p().activeElement),B.useEffect(function(){if(v){var Z=Ir(_.current);!n&&_.current&&!_.current.contains(Z.activeElement)&&(_.current.hasAttribute("tabIndex")||_.current.setAttribute("tabIndex",-1),_.current.focus());var ae=function(){var le=_.current;if(le!==null){if(!Z.hasFocus()||u||!m()||x.current){x.current=!1;return}_.current&&!_.current.contains(Z.activeElement)&&_.current.focus()}},te=function(le){u||!m()||le.keyCode!==9||Z.activeElement===_.current&&(x.current=!0,le.shiftKey?C.current.focus():E.current.focus())};Z.addEventListener("focus",ae,!0),Z.addEventListener("keydown",te,!0);var Q=setInterval(function(){ae()},50);return function(){clearInterval(Q),Z.removeEventListener("focus",ae,!0),Z.removeEventListener("keydown",te,!0),d||(O.current&&O.current.focus&&O.current.focus(),O.current=null)}}},[n,u,d,m,v]),B.createElement(B.Fragment,null,B.createElement("div",{tabIndex:0,ref:E,"data-test":"sentinelStart"}),B.cloneElement(i,{ref:I}),B.createElement("div",{tabIndex:0,ref:C,"data-test":"sentinelEnd"}))}var nx={root:{zIndex:-1,position:"fixed",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},invisible:{backgroundColor:"transparent"}},hF=B.forwardRef(function(e,i){var t=e.invisible,n=t===void 0?!1:t,o=e.open,u=Qt(e,["invisible","open"]);return o?B.createElement("div",De({"aria-hidden":!0,ref:i},u,{style:De({},nx.root,n?nx.invisible:{},u.style)})):null});function pF(e){return e=typeof e=="function"?e():e,rr.findDOMNode(e)}function fF(e){return e.children?e.children.props.hasOwnProperty("in"):!1}var mF=new cF,gF=function(e){return{root:{position:"fixed",zIndex:e.zIndex.modal,right:0,bottom:0,top:0,left:0},hidden:{visibility:"hidden"}}},vF=B.forwardRef(function(e,i){var t=Uo(),n=kc({name:"MuiModal",props:De({},e),theme:t}),o=n.BackdropComponent,u=o===void 0?hF:o,h=n.BackdropProps,d=n.children,p=n.closeAfterTransition,m=p===void 0?!1:p,v=n.container,x=n.disableAutoFocus,E=x===void 0?!1:x,C=n.disableBackdropClick,O=C===void 0?!1:C,_=n.disableEnforceFocus,k=_===void 0?!1:_,I=n.disableEscapeKeyDown,G=I===void 0?!1:I,Z=n.disablePortal,ae=Z===void 0?!1:Z,te=n.disableRestoreFocus,Q=te===void 0?!1:te,le=n.disableScrollLock,ce=le===void 0?!1:le,me=n.hideBackdrop,Pe=me===void 0?!1:me,be=n.keepMounted,fe=be===void 0?!1:be,ve=n.manager,Fe=ve===void 0?mF:ve,Ge=n.onBackdropClick,Te=n.onClose,ye=n.onEscapeKeyDown,ke=n.onRendered,_e=n.open,$=Qt(n,["BackdropComponent","BackdropProps","children","closeAfterTransition","container","disableAutoFocus","disableBackdropClick","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onEscapeKeyDown","onRendered","open"]),Le=B.useState(!0),st=Le[0],J=Le[1],Et=B.useRef({}),yt=B.useRef(null),mt=B.useRef(null),Tt=Zn(mt,i),Bt=fF(n),At=function(){return Ir(yt.current)},at=function(){return Et.current.modalRef=mt.current,Et.current.mountNode=yt.current,Et.current},$e=function(){Fe.mount(at(),{disableScrollLock:ce}),mt.current.scrollTop=0},wt=Lo(function(){var Qe=pF(v)||At().body;Fe.add(at(),Qe),mt.current&&$e()}),Lt=B.useCallback(function(){return Fe.isTopModal(at())},[Fe]),tn=Lo(function(Qe){yt.current=Qe,Qe&&(ke&&ke(),_e&&Lt()?$e():nl(mt.current,!0))}),kt=B.useCallback(function(){Fe.remove(at())},[Fe]);if(B.useEffect(function(){return function(){kt()}},[kt]),B.useEffect(function(){_e?wt():(!Bt||!m)&&kt()},[_e,kt,Bt,m,wt]),!fe&&!_e&&(!Bt||st))return null;var Gt=function(){J(!1)},D=function(){J(!0),m&&kt()},K=function(Qe){Qe.target===Qe.currentTarget&&(Ge&&Ge(Qe),!O&&Te&&Te(Qe,"backdropClick"))},we=function(Qe){Qe.key!=="Escape"||!Lt()||(ye&&ye(Qe),G||(Qe.stopPropagation(),Te&&Te(Qe,"escapeKeyDown")))},ze=gF(t||{zIndex:nE}),Ne={};return d.props.tabIndex===void 0&&(Ne.tabIndex=d.props.tabIndex||"-1"),Bt&&(Ne.onEnter=hl(Gt,d.props.onEnter),Ne.onExited=hl(D,d.props.onExited)),B.createElement(MT,{ref:tn,container:v,disablePortal:ae},B.createElement("div",De({ref:Tt,onKeyDown:we,role:"presentation"},$,{style:De({},ze.root,!_e&&st?ze.hidden:{},$.style)}),Pe?null:B.createElement(u,De({open:_e,onClick:K},h)),B.createElement(dF,{disableEnforceFocus:k,disableAutoFocus:E,disableRestoreFocus:Q,getDoc:At,isEnabled:Lt,open:_e},B.cloneElement(d,Ne))))});function Hm(e){var i=e.props,t=e.states,n=e.muiFormControl;return t.reduce(function(o,u){return o[u]=i[u],n&&typeof i[u]>"u"&&(o[u]=n[u]),o},{})}function Ju(e,i){return parseInt(e[i],10)||0}var yF=typeof window<"u"?B.useLayoutEffect:B.useEffect,wF={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}},bF=B.forwardRef(function(e,i){var t=e.onChange,n=e.rows,o=e.rowsMax,u=e.rowsMin,h=e.maxRows,d=e.minRows,p=d===void 0?1:d,m=e.style,v=e.value,x=Qt(e,["onChange","rows","rowsMax","rowsMin","maxRows","minRows","style","value"]),E=h||o,C=n||u||p,O=B.useRef(v!=null),_=O.current,k=B.useRef(null),I=Zn(i,k),G=B.useRef(null),Z=B.useRef(0),ae=B.useState({}),te=ae[0],Q=ae[1],le=B.useCallback(function(){var me=k.current,Pe=window.getComputedStyle(me),be=G.current;be.style.width=Pe.width,be.value=me.value||e.placeholder||"x",be.value.slice(-1)===`
`&&(be.value+=" ");var fe=Pe["box-sizing"],ve=Ju(Pe,"padding-bottom")+Ju(Pe,"padding-top"),Fe=Ju(Pe,"border-bottom-width")+Ju(Pe,"border-top-width"),Ge=be.scrollHeight-ve;be.value="x";var Te=be.scrollHeight-ve,ye=Ge;C&&(ye=Math.max(Number(C)*Te,ye)),E&&(ye=Math.min(Number(E)*Te,ye)),ye=Math.max(ye,Te);var ke=ye+(fe==="border-box"?ve+Fe:0),_e=Math.abs(ye-Ge)<=1;Q(function($){return Z.current<20&&(ke>0&&Math.abs(($.outerHeightStyle||0)-ke)>1||$.overflow!==_e)?(Z.current+=1,{overflow:_e,outerHeightStyle:ke}):$})},[E,C,e.placeholder]);B.useEffect(function(){var me=RT(function(){Z.current=0,le()});return window.addEventListener("resize",me),function(){me.clear(),window.removeEventListener("resize",me)}},[le]),yF(function(){le()}),B.useEffect(function(){Z.current=0},[v]);var ce=function(me){Z.current=0,_||le(),t&&t(me)};return B.createElement(B.Fragment,null,B.createElement("textarea",De({value:v,onChange:ce,ref:I,rows:C,style:De({height:te.outerHeightStyle,overflow:te.overflow?"hidden":null},m)},x)),B.createElement("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:G,tabIndex:-1,style:De({},wF.shadow,m)}))});function ix(e){return e!=null&&!(Array.isArray(e)&&e.length===0)}function NT(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return e&&(ix(e.value)&&e.value!==""||i&&ix(e.defaultValue)&&e.defaultValue!=="")}var xF=function(e){var i=e.palette.type==="light",t={color:"currentColor",opacity:i?.42:.5,transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})},n={opacity:"0 !important"},o={opacity:i?.42:.5};return{"@global":{"@keyframes mui-auto-fill":{},"@keyframes mui-auto-fill-cancel":{}},root:De({},e.typography.body1,{color:e.palette.text.primary,lineHeight:"1.1876em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center","&$disabled":{color:e.palette.text.disabled,cursor:"default"}}),formControl:{},focused:{},disabled:{},adornedStart:{},adornedEnd:{},error:{},marginDense:{},multiline:{padding:"".concat(6,"px 0 ").concat(7,"px"),"&$marginDense":{paddingTop:3}},colorSecondary:{},fullWidth:{width:"100%"},input:{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"".concat(6,"px 0 ").concat(7,"px"),border:0,boxSizing:"content-box",background:"none",height:"1.1876em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":t,"&::-moz-placeholder":t,"&:-ms-input-placeholder":t,"&::-ms-input-placeholder":t,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{"-webkit-appearance":"none"},"label[data-shrink=false] + $formControl &":{"&::-webkit-input-placeholder":n,"&::-moz-placeholder":n,"&:-ms-input-placeholder":n,"&::-ms-input-placeholder":n,"&:focus::-webkit-input-placeholder":o,"&:focus::-moz-placeholder":o,"&:focus:-ms-input-placeholder":o,"&:focus::-ms-input-placeholder":o},"&$disabled":{opacity:1},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},inputMarginDense:{paddingTop:3},inputMultiline:{height:"auto",resize:"none",padding:0},inputTypeSearch:{"-moz-appearance":"textfield","-webkit-appearance":"textfield"},inputAdornedStart:{},inputAdornedEnd:{},inputHiddenLabel:{}}},SF=typeof window>"u"?B.useEffect:B.useLayoutEffect,EF=B.forwardRef(function(e,i){var t=e["aria-describedby"],n=e.autoComplete,o=e.autoFocus,u=e.classes,h=e.className;e.color;var d=e.defaultValue,p=e.disabled,m=e.endAdornment;e.error;var v=e.fullWidth,x=v===void 0?!1:v,E=e.id,C=e.inputComponent,O=C===void 0?"input":C,_=e.inputProps,k=_===void 0?{}:_,I=e.inputRef;e.margin;var G=e.multiline,Z=G===void 0?!1:G,ae=e.name,te=e.onBlur,Q=e.onChange,le=e.onClick,ce=e.onFocus,me=e.onKeyDown,Pe=e.onKeyUp,be=e.placeholder,fe=e.readOnly,ve=e.renderSuffix,Fe=e.rows,Ge=e.rowsMax,Te=e.rowsMin,ye=e.maxRows,ke=e.minRows,_e=e.startAdornment,$=e.type,Le=$===void 0?"text":$,st=e.value,J=Qt(e,["aria-describedby","autoComplete","autoFocus","classes","className","color","defaultValue","disabled","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","rowsMax","rowsMin","maxRows","minRows","startAdornment","type","value"]),Et=k.value!=null?k.value:st,yt=B.useRef(Et!=null),mt=yt.current,Tt=B.useRef(),Bt=B.useCallback(function(he){},[]),At=Zn(k.ref,Bt),at=Zn(I,At),$e=Zn(Tt,at),wt=B.useState(!1),Lt=wt[0],tn=wt[1],kt=oF(),Gt=Hm({props:e,muiFormControl:kt,states:["color","disabled","error","hiddenLabel","margin","required","filled"]});Gt.focused=kt?kt.focused:Lt,B.useEffect(function(){!kt&&p&&Lt&&(tn(!1),te&&te())},[kt,p,Lt,te]);var D=kt&&kt.onFilled,K=kt&&kt.onEmpty,we=B.useCallback(function(he){NT(he)?D&&D():K&&K()},[D,K]);SF(function(){mt&&we({value:Et})},[Et,we,mt]);var ze=function(he){if(Gt.disabled){he.stopPropagation();return}ce&&ce(he),k.onFocus&&k.onFocus(he),kt&&kt.onFocus?kt.onFocus(he):tn(!0)},Ne=function(he){te&&te(he),k.onBlur&&k.onBlur(he),kt&&kt.onBlur?kt.onBlur(he):tn(!1)},Qe=function(he){if(!mt){var Ae=he.target||Tt.current;if(Ae==null)throw new Error(Us(1));we({value:Ae.value})}for(var L=arguments.length,z=new Array(L>1?L-1:0),W=1;W<L;W++)z[W-1]=arguments[W];k.onChange&&k.onChange.apply(k,[he].concat(z)),Q&&Q.apply(void 0,[he].concat(z))};B.useEffect(function(){we(Tt.current)},[]);var Xe=function(he){Tt.current&&he.currentTarget===he.target&&Tt.current.focus(),le&&le(he)},bt=O,Rt=De({},k,{ref:$e});typeof bt!="string"?Rt=De({inputRef:$e,type:Le},Rt,{ref:null}):Z?Fe&&!ye&&!ke&&!Ge&&!Te?bt="textarea":(Rt=De({minRows:Fe||ke,rowsMax:Ge,maxRows:ye},Rt),bt=bF):Rt=De({type:Le},Rt);var Dt=function(he){we(he.animationName==="mui-auto-fill-cancel"?Tt.current:{value:"x"})};return B.useEffect(function(){kt&&kt.setAdornedStart(!!_e)},[kt,_e]),B.createElement("div",De({className:Tn(u.root,u["color".concat(Dr(Gt.color||"primary"))],h,Gt.disabled&&u.disabled,Gt.error&&u.error,x&&u.fullWidth,Gt.focused&&u.focused,kt&&u.formControl,Z&&u.multiline,_e&&u.adornedStart,m&&u.adornedEnd,Gt.margin==="dense"&&u.marginDense),onClick:Xe,ref:i},J),_e,B.createElement(jm.Provider,{value:null},B.createElement(bt,De({"aria-invalid":Gt.error,"aria-describedby":t,autoComplete:n,autoFocus:o,defaultValue:d,disabled:Gt.disabled,id:E,onAnimationStart:Dt,name:ae,placeholder:be,readOnly:fe,required:Gt.required,rows:Fe,value:Et,onKeyDown:me,onKeyUp:Pe},Rt,{className:Tn(u.input,k.className,Gt.disabled&&u.disabled,Z&&u.inputMultiline,Gt.hiddenLabel&&u.inputHiddenLabel,_e&&u.inputAdornedStart,m&&u.inputAdornedEnd,Le==="search"&&u.inputTypeSearch,Gt.margin==="dense"&&u.inputMarginDense),onBlur:Ne,onChange:Qe,onFocus:ze}))),m,ve?ve(De({},Gt,{startAdornment:_e})):null)});const Fm=ei(xF,{name:"MuiInputBase"})(EF);var TF=function(e){var i=e.palette.type==="light",t=i?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",n=i?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.09)";return{root:{position:"relative",backgroundColor:n,borderTopLeftRadius:e.shape.borderRadius,borderTopRightRadius:e.shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:i?"rgba(0, 0, 0, 0.13)":"rgba(255, 255, 255, 0.13)","@media (hover: none)":{backgroundColor:n}},"&$focused":{backgroundColor:i?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.09)"},"&$disabled":{backgroundColor:i?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)"}},colorSecondary:{"&$underline:after":{borderBottomColor:e.palette.secondary.main}},underline:{"&:after":{borderBottom:"2px solid ".concat(e.palette.primary.main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},"&$focused:after":{transform:"scaleX(1)"},"&$error:after":{borderBottomColor:e.palette.error.main,transform:"scaleX(1)"},"&:before":{borderBottom:"1px solid ".concat(t),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},"&:hover:before":{borderBottom:"1px solid ".concat(e.palette.text.primary)},"&$disabled:before":{borderBottomStyle:"dotted"}},focused:{},disabled:{},adornedStart:{paddingLeft:12},adornedEnd:{paddingRight:12},error:{},marginDense:{},multiline:{padding:"27px 12px 10px","&$marginDense":{paddingTop:23,paddingBottom:6}},input:{padding:"27px 12px 10px","&:-webkit-autofill":{WebkitBoxShadow:e.palette.type==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.type==="light"?null:"#fff",caretColor:e.palette.type==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},inputMarginDense:{paddingTop:23,paddingBottom:6},inputHiddenLabel:{paddingTop:18,paddingBottom:19,"&$inputMarginDense":{paddingTop:10,paddingBottom:11}},inputMultiline:{padding:0},inputAdornedStart:{paddingLeft:0},inputAdornedEnd:{paddingRight:0}}},zT=B.forwardRef(function(e,i){var t=e.disableUnderline,n=e.classes,o=e.fullWidth,u=o===void 0?!1:o,h=e.inputComponent,d=h===void 0?"input":h,p=e.multiline,m=p===void 0?!1:p,v=e.type,x=v===void 0?"text":v,E=Qt(e,["disableUnderline","classes","fullWidth","inputComponent","multiline","type"]);return B.createElement(Fm,De({classes:De({},n,{root:Tn(n.root,!t&&n.underline),underline:null}),fullWidth:u,inputComponent:d,multiline:m,ref:i,type:x},E))});zT.muiName="Input";const CF=ei(TF,{name:"MuiFilledInput"})(zT);function Uf(e){return"scale(".concat(e,", ").concat(Math.pow(e,2),")")}var PF={entering:{opacity:1,transform:Uf(1)},entered:{opacity:1,transform:"none"}},jT=B.forwardRef(function(e,i){var t=e.children,n=e.disableStrictModeCompat,o=n===void 0?!1:n,u=e.in,h=e.onEnter,d=e.onEntered,p=e.onEntering,m=e.onExit,v=e.onExited,x=e.onExiting,E=e.style,C=e.timeout,O=C===void 0?"auto":C,_=e.TransitionComponent,k=_===void 0?vr:_,I=Qt(e,["children","disableStrictModeCompat","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"]),G=B.useRef(),Z=B.useRef(),ae=ml(),te=ae.unstable_strictMode&&!o,Q=B.useRef(null),le=Zn(t.ref,i),ce=Zn(te?Q:void 0,le),me=function(ye){return function(ke,_e){if(ye){var $=te?[Q.current,ke]:[ke,_e],Le=pm($,2),st=Le[0],J=Le[1];J===void 0?ye(st):ye(st,J)}}},Pe=me(p),be=me(function(ye,ke){AT(ye);var _e=Sc({style:E,timeout:O},{mode:"enter"}),$=_e.duration,Le=_e.delay,st;O==="auto"?(st=ae.transitions.getAutoHeightDuration(ye.clientHeight),Z.current=st):st=$,ye.style.transition=[ae.transitions.create("opacity",{duration:st,delay:Le}),ae.transitions.create("transform",{duration:st*.666,delay:Le})].join(","),h&&h(ye,ke)}),fe=me(d),ve=me(x),Fe=me(function(ye){var ke=Sc({style:E,timeout:O},{mode:"exit"}),_e=ke.duration,$=ke.delay,Le;O==="auto"?(Le=ae.transitions.getAutoHeightDuration(ye.clientHeight),Z.current=Le):Le=_e,ye.style.transition=[ae.transitions.create("opacity",{duration:Le,delay:$}),ae.transitions.create("transform",{duration:Le*.666,delay:$||Le*.333})].join(","),ye.style.opacity="0",ye.style.transform=Uf(.75),m&&m(ye)}),Ge=me(v),Te=function(ye,ke){var _e=te?ye:ke;O==="auto"&&(G.current=setTimeout(_e,Z.current||0))};return B.useEffect(function(){return function(){clearTimeout(G.current)}},[]),B.createElement(k,De({appear:!0,in:u,nodeRef:te?Q:void 0,onEnter:be,onEntered:fe,onEntering:Pe,onExit:Fe,onExited:Ge,onExiting:ve,addEndListener:Te,timeout:O==="auto"?null:O},I),function(ye,ke){return B.cloneElement(t,De({style:De({opacity:0,transform:Uf(.75),visibility:ye==="exited"&&!u?"hidden":void 0},PF[ye],E,t.props.style),ref:ce},ke))})});jT.muiSupportAuto=!0;var _F=function(e){var i=e.palette.type==="light",t=i?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return{root:{position:"relative"},formControl:{"label + &":{marginTop:16}},focused:{},disabled:{},colorSecondary:{"&$underline:after":{borderBottomColor:e.palette.secondary.main}},underline:{"&:after":{borderBottom:"2px solid ".concat(e.palette.primary.main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},"&$focused:after":{transform:"scaleX(1)"},"&$error:after":{borderBottomColor:e.palette.error.main,transform:"scaleX(1)"},"&:before":{borderBottom:"1px solid ".concat(t),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},"&:hover:not($disabled):before":{borderBottom:"2px solid ".concat(e.palette.text.primary),"@media (hover: none)":{borderBottom:"1px solid ".concat(t)}},"&$disabled:before":{borderBottomStyle:"dotted"}},error:{},marginDense:{},multiline:{},fullWidth:{},input:{},inputMarginDense:{},inputMultiline:{},inputTypeSearch:{}}},HT=B.forwardRef(function(e,i){var t=e.disableUnderline,n=e.classes,o=e.fullWidth,u=o===void 0?!1:o,h=e.inputComponent,d=h===void 0?"input":h,p=e.multiline,m=p===void 0?!1:p,v=e.type,x=v===void 0?"text":v,E=Qt(e,["disableUnderline","classes","fullWidth","inputComponent","multiline","type"]);return B.createElement(Fm,De({classes:De({},n,{root:Tn(n.root,!t&&n.underline),underline:null}),fullWidth:u,inputComponent:d,multiline:m,ref:i,type:x},E))});HT.muiName="Input";const FT=ei(_F,{name:"MuiInput"})(HT);var il=B.createContext({}),kF={root:{listStyle:"none",margin:0,padding:0,position:"relative"},padding:{paddingTop:8,paddingBottom:8},dense:{},subheader:{paddingTop:0}},RF=B.forwardRef(function(e,i){var t=e.children,n=e.classes,o=e.className,u=e.component,h=u===void 0?"ul":u,d=e.dense,p=d===void 0?!1:d,m=e.disablePadding,v=m===void 0?!1:m,x=e.subheader,E=Qt(e,["children","classes","className","component","dense","disablePadding","subheader"]),C=B.useMemo(function(){return{dense:p}},[p]);return B.createElement(il.Provider,{value:C},B.createElement(h,De({className:Tn(n.root,o,p&&n.dense,!v&&n.padding,x&&n.subheader),ref:i},E),x,t))});const BT=ei(kF,{name:"MuiList"})(RF);var OF=function(e){return{root:{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,"&$focusVisible":{backgroundColor:e.palette.action.selected},"&$selected, &$selected:hover":{backgroundColor:e.palette.action.selected},"&$disabled":{opacity:.5}},container:{position:"relative"},focusVisible:{},dense:{paddingTop:4,paddingBottom:4},alignItemsFlexStart:{alignItems:"flex-start"},disabled:{},divider:{borderBottom:"1px solid ".concat(e.palette.divider),backgroundClip:"padding-box"},gutters:{paddingLeft:16,paddingRight:16},button:{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:e.palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}},secondaryAction:{paddingRight:48},selected:{}}},AF=typeof window>"u"?B.useEffect:B.useLayoutEffect,DF=B.forwardRef(function(e,i){var t=e.alignItems,n=t===void 0?"center":t,o=e.autoFocus,u=o===void 0?!1:o,h=e.button,d=h===void 0?!1:h,p=e.children,m=e.classes,v=e.className,x=e.component,E=e.ContainerComponent,C=E===void 0?"li":E,O=e.ContainerProps;O=O===void 0?{}:O;var _=O.className,k=Qt(O,["className"]),I=e.dense,G=I===void 0?!1:I,Z=e.disabled,ae=Z===void 0?!1:Z,te=e.disableGutters,Q=te===void 0?!1:te,le=e.divider,ce=le===void 0?!1:le,me=e.focusVisibleClassName,Pe=e.selected,be=Pe===void 0?!1:Pe,fe=Qt(e,["alignItems","autoFocus","button","children","classes","className","component","ContainerComponent","ContainerProps","dense","disabled","disableGutters","divider","focusVisibleClassName","selected"]),ve=B.useContext(il),Fe={dense:G||ve.dense||!1,alignItems:n},Ge=B.useRef(null);AF(function(){u&&(Ge.current&&Ge.current.focus())},[u]);var Te=B.Children.toArray(p),ye=Te.length&&_4(Te[Te.length-1],["ListItemSecondaryAction"]),ke=B.useCallback(function(st){Ge.current=rr.findDOMNode(st)},[]),_e=Zn(ke,i),$=De({className:Tn(m.root,v,Fe.dense&&m.dense,!Q&&m.gutters,ce&&m.divider,ae&&m.disabled,d&&m.button,n!=="center"&&m.alignItemsFlexStart,ye&&m.secondaryAction,be&&m.selected),disabled:ae},fe),Le=x||"li";return d&&($.component=x||"div",$.focusVisibleClassName=Tn(m.focusVisible,me),Le=eF),ye?(Le=!$.component&&!x?"div":Le,C==="li"&&(Le==="li"?Le="div":$.component==="li"&&($.component="div")),B.createElement(il.Provider,{value:Fe},B.createElement(C,De({className:Tn(m.container,_),ref:_e},k),B.createElement(Le,$,Te),Te.pop()))):B.createElement(il.Provider,{value:Fe},B.createElement(Le,De({ref:_e},$),Te))});const Ds=ei(OF,{name:"MuiListItem"})(DF);var IF={root:{flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},multiline:{marginTop:6,marginBottom:6},dense:{},inset:{paddingLeft:56},primary:{},secondary:{}},MF=B.forwardRef(function(e,i){var t=e.children,n=e.classes,o=e.className,u=e.disableTypography,h=u===void 0?!1:u,d=e.inset,p=d===void 0?!1:d,m=e.primary,v=e.primaryTypographyProps,x=e.secondary,E=e.secondaryTypographyProps,C=Qt(e,["children","classes","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"]),O=B.useContext(il),_=O.dense,k=m??t;k!=null&&k.type!==Qn&&!h&&(k=B.createElement(Qn,De({variant:_?"body2":"body1",className:n.primary,component:"span",display:"block"},v),k));var I=x;return I!=null&&I.type!==Qn&&!h&&(I=B.createElement(Qn,De({variant:"body2",className:n.secondary,color:"textSecondary",display:"block"},E),I)),B.createElement("div",De({className:Tn(n.root,o,_&&n.dense,p&&n.inset,k&&I&&n.multiline),ref:i},C),k,I)});const Ba=ei(IF,{name:"MuiListItemText"})(MF);function rx(e,i){var t=0;return typeof i=="number"?t=i:i==="center"?t=e.height/2:i==="bottom"&&(t=e.height),t}function ox(e,i){var t=0;return typeof i=="number"?t=i:i==="center"?t=e.width/2:i==="right"&&(t=e.width),t}function sx(e){return[e.horizontal,e.vertical].map(function(i){return typeof i=="number"?"".concat(i,"px"):i}).join(" ")}function LF(e,i){for(var t=i,n=0;t&&t!==e;)t=t.parentElement,n+=t.scrollTop;return n}function Zp(e){return typeof e=="function"?e():e}var NF={root:{},paper:{position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}},zF=B.forwardRef(function(e,i){var t=e.action,n=e.anchorEl,o=e.anchorOrigin,u=o===void 0?{vertical:"top",horizontal:"left"}:o,h=e.anchorPosition,d=e.anchorReference,p=d===void 0?"anchorEl":d,m=e.children,v=e.classes,x=e.className,E=e.container,C=e.elevation,O=C===void 0?8:C,_=e.getContentAnchorEl,k=e.marginThreshold,I=k===void 0?16:k,G=e.onEnter,Z=e.onEntered,ae=e.onEntering,te=e.onExit,Q=e.onExited,le=e.onExiting,ce=e.open,me=e.PaperProps,Pe=me===void 0?{}:me,be=e.transformOrigin,fe=be===void 0?{vertical:"top",horizontal:"left"}:be,ve=e.TransitionComponent,Fe=ve===void 0?jT:ve,Ge=e.transitionDuration,Te=Ge===void 0?"auto":Ge,ye=e.TransitionProps,ke=ye===void 0?{}:ye,_e=Qt(e,["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","classes","className","container","elevation","getContentAnchorEl","marginThreshold","onEnter","onEntered","onEntering","onExit","onExited","onExiting","open","PaperProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps"]),$=B.useRef(),Le=B.useCallback(function(at){if(p==="anchorPosition")return h;var $e=Zp(n),wt=$e&&$e.nodeType===1?$e:Ir($.current).body,Lt=wt.getBoundingClientRect(),tn=at===0?u.vertical:"center";return{top:Lt.top+rx(Lt,tn),left:Lt.left+ox(Lt,u.horizontal)}},[n,u.horizontal,u.vertical,h,p]),st=B.useCallback(function(at){var $e=0;if(_&&p==="anchorEl"){var wt=_(at);if(wt&&at.contains(wt)){var Lt=LF(at,wt);$e=wt.offsetTop+wt.clientHeight/2-Lt||0}}return $e},[u.vertical,p,_]),J=B.useCallback(function(at){var $e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return{vertical:rx(at,fe.vertical)+$e,horizontal:ox(at,fe.horizontal)}},[fe.horizontal,fe.vertical]),Et=B.useCallback(function(at){var $e=st(at),wt={width:at.offsetWidth,height:at.offsetHeight},Lt=J(wt,$e);if(p==="none")return{top:null,left:null,transformOrigin:sx(Lt)};var tn=Le($e),kt=tn.top-Lt.vertical,Gt=tn.left-Lt.horizontal,D=kt+wt.height,K=Gt+wt.width,we=OT(Zp(n)),ze=we.innerHeight-I,Ne=we.innerWidth-I;if(kt<I){var Qe=kt-I;kt-=Qe,Lt.vertical+=Qe}else if(D>ze){var Xe=D-ze;kt-=Xe,Lt.vertical+=Xe}if(Gt<I){var bt=Gt-I;Gt-=bt,Lt.horizontal+=bt}else if(K>Ne){var Rt=K-Ne;Gt-=Rt,Lt.horizontal+=Rt}return{top:"".concat(Math.round(kt),"px"),left:"".concat(Math.round(Gt),"px"),transformOrigin:sx(Lt)}},[n,p,Le,st,J,I]),yt=B.useCallback(function(){var at=$.current;if(at){var $e=Et(at);$e.top!==null&&(at.style.top=$e.top),$e.left!==null&&(at.style.left=$e.left),at.style.transformOrigin=$e.transformOrigin}},[Et]),mt=function(at,$e){ae&&ae(at,$e),yt()},Tt=B.useCallback(function(at){$.current=rr.findDOMNode(at)},[]);B.useEffect(function(){ce&&yt()}),B.useImperativeHandle(t,function(){return ce?{updatePosition:function(){yt()}}:null},[ce,yt]),B.useEffect(function(){if(ce){var at=RT(function(){yt()});return window.addEventListener("resize",at),function(){at.clear(),window.removeEventListener("resize",at)}}},[ce,yt]);var Bt=Te;Te==="auto"&&!Fe.muiSupportAuto&&(Bt=void 0);var At=E||(n?Ir(Zp(n)).body:void 0);return B.createElement(vF,De({container:At,open:ce,ref:i,BackdropProps:{invisible:!0},className:Tn(v.root,x)},_e),B.createElement(Fe,De({appear:!0,in:ce,onEnter:G,onEntered:Z,onExit:te,onExited:Q,onExiting:le,timeout:Bt},ke,{onEntering:hl(mt,ke.onEntering)}),B.createElement(zm,De({elevation:O,ref:Tt},Pe,{className:Tn(v.paper,Pe.className)}),m)))});const UT=ei(NF,{name:"MuiPopover"})(zF);function Xp(e,i,t){return e===i?e.firstChild:i&&i.nextElementSibling?i.nextElementSibling:t?null:e.firstChild}function ax(e,i,t){return e===i?t?e.firstChild:e.lastChild:i&&i.previousElementSibling?i.previousElementSibling:t?null:e.lastChild}function WT(e,i){if(i===void 0)return!0;var t=e.innerText;return t===void 0&&(t=e.textContent),t=t.trim().toLowerCase(),t.length===0?!1:i.repeating?t[0]===i.keys[0]:t.indexOf(i.keys.join(""))===0}function Ua(e,i,t,n,o,u){for(var h=!1,d=o(e,i,i?t:!1);d;){if(d===e.firstChild){if(h)return;h=!0}var p=n?!1:d.disabled||d.getAttribute("aria-disabled")==="true";if(!d.hasAttribute("tabindex")||!WT(d,u)||p)d=o(e,d,t);else{d.focus();return}}}var jF=typeof window>"u"?B.useEffect:B.useLayoutEffect,HF=B.forwardRef(function(e,i){var t=e.actions,n=e.autoFocus,o=n===void 0?!1:n,u=e.autoFocusItem,h=u===void 0?!1:u,d=e.children,p=e.className,m=e.disabledItemsFocusable,v=m===void 0?!1:m,x=e.disableListWrap,E=x===void 0?!1:x,C=e.onKeyDown,O=e.variant,_=O===void 0?"selectedMenu":O,k=Qt(e,["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"]),I=B.useRef(null),G=B.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});jF(function(){o&&I.current.focus()},[o]),B.useImperativeHandle(t,function(){return{adjustStyleForScrollbar:function(ce,me){var Pe=!I.current.style.width;if(ce.clientHeight<I.current.clientHeight&&Pe){var be="".concat(LT(),"px");I.current.style[me.direction==="rtl"?"paddingLeft":"paddingRight"]=be,I.current.style.width="calc(100% + ".concat(be,")")}return I.current}}},[]);var Z=function(ce){var me=I.current,Pe=ce.key,be=Ir(me).activeElement;if(Pe==="ArrowDown")ce.preventDefault(),Ua(me,be,E,v,Xp);else if(Pe==="ArrowUp")ce.preventDefault(),Ua(me,be,E,v,ax);else if(Pe==="Home")ce.preventDefault(),Ua(me,null,E,v,Xp);else if(Pe==="End")ce.preventDefault(),Ua(me,null,E,v,ax);else if(Pe.length===1){var fe=G.current,ve=Pe.toLowerCase(),Fe=performance.now();fe.keys.length>0&&(Fe-fe.lastTime>500?(fe.keys=[],fe.repeating=!0,fe.previousKeyMatched=!0):fe.repeating&&ve!==fe.keys[0]&&(fe.repeating=!1)),fe.lastTime=Fe,fe.keys.push(ve);var Ge=be&&!fe.repeating&&WT(be,fe);fe.previousKeyMatched&&(Ge||Ua(me,be,!1,v,Xp,fe))?ce.preventDefault():fe.previousKeyMatched=!1}C&&C(ce)},ae=B.useCallback(function(ce){I.current=rr.findDOMNode(ce)},[]),te=Zn(ae,i),Q=-1;B.Children.forEach(d,function(ce,me){B.isValidElement(ce)&&(ce.props.disabled||(_==="selectedMenu"&&ce.props.selected||Q===-1)&&(Q=me))});var le=B.Children.map(d,function(ce,me){if(me===Q){var Pe={};return h&&(Pe.autoFocus=!0),ce.props.tabIndex===void 0&&_==="selectedMenu"&&(Pe.tabIndex=0),B.cloneElement(ce,Pe)}return ce});return B.createElement(BT,De({role:"menu",ref:te,className:p,onKeyDown:Z,tabIndex:o?0:-1},k),le)}),lx={vertical:"top",horizontal:"right"},ux={vertical:"top",horizontal:"left"},FF={paper:{maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"},list:{outline:0}},BF=B.forwardRef(function(e,i){var t=e.autoFocus,n=t===void 0?!0:t,o=e.children,u=e.classes,h=e.disableAutoFocusItem,d=h===void 0?!1:h,p=e.MenuListProps,m=p===void 0?{}:p,v=e.onClose,x=e.onEntering,E=e.open,C=e.PaperProps,O=C===void 0?{}:C,_=e.PopoverClasses,k=e.transitionDuration,I=k===void 0?"auto":k,G=e.TransitionProps;G=G===void 0?{}:G;var Z=G.onEntering,ae=Qt(G,["onEntering"]),te=e.variant,Q=te===void 0?"selectedMenu":te,le=Qt(e,["autoFocus","children","classes","disableAutoFocusItem","MenuListProps","onClose","onEntering","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant"]),ce=ml(),me=n&&!d&&E,Pe=B.useRef(null),be=B.useRef(null),fe=function(){return be.current},ve=function(ye,ke){Pe.current&&Pe.current.adjustStyleForScrollbar(ye,ce),x&&x(ye,ke),Z&&Z(ye,ke)},Fe=function(ye){ye.key==="Tab"&&(ye.preventDefault(),v&&v(ye,"tabKeyDown"))},Ge=-1;B.Children.map(o,function(ye,ke){B.isValidElement(ye)&&(ye.props.disabled||(Q!=="menu"&&ye.props.selected||Ge===-1)&&(Ge=ke))});var Te=B.Children.map(o,function(ye,ke){return ke===Ge?B.cloneElement(ye,{ref:function(_e){be.current=rr.findDOMNode(_e),qs(ye.ref,_e)}}):ye});return B.createElement(UT,De({getContentAnchorEl:fe,classes:_,onClose:v,TransitionProps:De({onEntering:ve},ae),anchorOrigin:ce.direction==="rtl"?lx:ux,transformOrigin:ce.direction==="rtl"?lx:ux,PaperProps:De({},O,{classes:De({},O.classes,{root:u.paper})}),open:E,ref:i,transitionDuration:I},le),B.createElement(HF,De({onKeyDown:Fe,actions:Pe,autoFocus:n&&(Ge===-1||d),autoFocusItem:me,variant:Q},m,{className:Tn(u.list,m.className)}),Te))});const UF=ei(FF,{name:"MuiMenu"})(BF);var WF=function(e){return{root:De({},e.typography.body1,zs({minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",width:"auto",overflow:"hidden",whiteSpace:"nowrap"},e.breakpoints.up("sm"),{minHeight:"auto"})),gutters:{},selected:{},dense:De({},e.typography.body2,{minHeight:"auto"})}},VF=B.forwardRef(function(e,i){var t=e.classes,n=e.className,o=e.component,u=o===void 0?"li":o,h=e.disableGutters,d=h===void 0?!1:h,p=e.ListItemClasses,m=e.role,v=m===void 0?"menuitem":m,x=e.selected,E=e.tabIndex,C=Qt(e,["classes","className","component","disableGutters","ListItemClasses","role","selected","tabIndex"]),O;return e.disabled||(O=E!==void 0?E:-1),B.createElement(Ds,De({button:!0,role:v,tabIndex:O,component:u,selected:x,disableGutters:d,classes:De({dense:t.dense},p),className:Tn(t.root,n,x&&t.selected,!d&&t.gutters),ref:i},C))});const Ao=ei(WF,{name:"MuiMenuItem"})(VF);var VT=B.forwardRef(function(e,i){var t=e.classes,n=e.className,o=e.disabled,u=e.IconComponent,h=e.inputRef,d=e.variant,p=d===void 0?"standard":d,m=Qt(e,["classes","className","disabled","IconComponent","inputRef","variant"]);return B.createElement(B.Fragment,null,B.createElement("select",De({className:Tn(t.root,t.select,t[p],n,o&&t.disabled),disabled:o,ref:h||i},m)),e.multiple?null:B.createElement(u,{className:Tn(t.icon,t["icon".concat(Dr(p))],o&&t.disabled)}))});const GT=P4(B.createElement("path",{d:"M7 10l5 5 5-5z"}));var qT=function(e){return{root:{},select:{"-moz-appearance":"none","-webkit-appearance":"none",userSelect:"none",borderRadius:0,minWidth:16,cursor:"pointer","&:focus":{backgroundColor:e.palette.type==="light"?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)",borderRadius:0},"&::-ms-expand":{display:"none"},"&$disabled":{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:e.palette.background.paper},"&&":{paddingRight:24}},filled:{"&&":{paddingRight:32}},outlined:{borderRadius:e.shape.borderRadius,"&&":{paddingRight:32}},selectMenu:{height:"auto",minHeight:"1.1876em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},disabled:{},icon:{position:"absolute",right:0,top:"calc(50% - 12px)",pointerEvents:"none",color:e.palette.action.active,"&$disabled":{color:e.palette.action.disabled}},iconOpen:{transform:"rotate(180deg)"},iconFilled:{right:7},iconOutlined:{right:7},nativeInput:{bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%"}}},GF=B.createElement(FT,null),ZT=B.forwardRef(function(e,i){var t=e.children,n=e.classes,o=e.IconComponent,u=o===void 0?GT:o,h=e.input,d=h===void 0?GF:h,p=e.inputProps;e.variant;var m=Qt(e,["children","classes","IconComponent","input","inputProps","variant"]),v=IT(),x=Hm({props:e,muiFormControl:v,states:["variant"]});return B.cloneElement(d,De({inputComponent:VT,inputProps:De({children:t,classes:n,IconComponent:u,variant:x.variant,type:void 0},p,d?d.props.inputProps:{}),ref:i},m))});ZT.muiName="Select";ei(qT,{name:"MuiNativeSelect"})(ZT);var qF=function(e){return{root:{position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden"},legend:{textAlign:"left",padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})},legendLabelled:{display:"block",width:"auto",textAlign:"left",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),"& > span":{paddingLeft:5,paddingRight:5,display:"inline-block"}},legendNotched:{maxWidth:1e3,transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})}}},ZF=B.forwardRef(function(e,i){e.children;var t=e.classes,n=e.className,o=e.label,u=e.labelWidth,h=e.notched,d=e.style,p=Qt(e,["children","classes","className","label","labelWidth","notched","style"]),m=ml(),v=m.direction==="rtl"?"right":"left";if(o!==void 0)return B.createElement("fieldset",De({"aria-hidden":!0,className:Tn(t.root,n),ref:i,style:d},p),B.createElement("legend",{className:Tn(t.legendLabelled,h&&t.legendNotched)},o?B.createElement("span",null,o):B.createElement("span",{dangerouslySetInnerHTML:{__html:"&#8203;"}})));var x=u>0?u*.75+8:.01;return B.createElement("fieldset",De({"aria-hidden":!0,style:De(zs({},"padding".concat(Dr(v)),8),d),className:Tn(t.root,n),ref:i},p),B.createElement("legend",{className:t.legend,style:{width:h?x:.01}},B.createElement("span",{dangerouslySetInnerHTML:{__html:"&#8203;"}})))});const XF=ei(qF,{name:"PrivateNotchedOutline"})(ZF);var YF=function(e){var i=e.palette.type==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{root:{position:"relative",borderRadius:e.shape.borderRadius,"&:hover $notchedOutline":{borderColor:e.palette.text.primary},"@media (hover: none)":{"&:hover $notchedOutline":{borderColor:i}},"&$focused $notchedOutline":{borderColor:e.palette.primary.main,borderWidth:2},"&$error $notchedOutline":{borderColor:e.palette.error.main},"&$disabled $notchedOutline":{borderColor:e.palette.action.disabled}},colorSecondary:{"&$focused $notchedOutline":{borderColor:e.palette.secondary.main}},focused:{},disabled:{},adornedStart:{paddingLeft:14},adornedEnd:{paddingRight:14},error:{},marginDense:{},multiline:{padding:"18.5px 14px","&$marginDense":{paddingTop:10.5,paddingBottom:10.5}},notchedOutline:{borderColor:i},input:{padding:"18.5px 14px","&:-webkit-autofill":{WebkitBoxShadow:e.palette.type==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.type==="light"?null:"#fff",caretColor:e.palette.type==="light"?null:"#fff",borderRadius:"inherit"}},inputMarginDense:{paddingTop:10.5,paddingBottom:10.5},inputMultiline:{padding:0},inputAdornedStart:{paddingLeft:0},inputAdornedEnd:{paddingRight:0}}},XT=B.forwardRef(function(e,i){var t=e.classes,n=e.fullWidth,o=n===void 0?!1:n,u=e.inputComponent,h=u===void 0?"input":u,d=e.label,p=e.labelWidth,m=p===void 0?0:p,v=e.multiline,x=v===void 0?!1:v,E=e.notched,C=e.type,O=C===void 0?"text":C,_=Qt(e,["classes","fullWidth","inputComponent","label","labelWidth","multiline","notched","type"]);return B.createElement(Fm,De({renderSuffix:function(k){return B.createElement(XF,{className:t.notchedOutline,label:d,labelWidth:m,notched:typeof E<"u"?E:!!(k.startAdornment||k.filled||k.focused)})},classes:De({},t,{root:Tn(t.root,t.underline),notchedOutline:null}),fullWidth:o,inputComponent:h,multiline:x,ref:i,type:O},_))});XT.muiName="Input";const $F=ei(YF,{name:"MuiOutlinedInput"})(XT);/**!
 * @fileOverview Kickass library to create and place poppers near their reference elements.
 * @version 1.16.1-lts
 * @license
 * Copyright (c) 2016 Federico Zivolo and contributors
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */var wl=typeof window<"u"&&typeof document<"u"&&typeof navigator<"u",KF=function(){for(var e=["Edge","Trident","Firefox"],i=0;i<e.length;i+=1)if(wl&&navigator.userAgent.indexOf(e[i])>=0)return 1;return 0}();function QF(e){var i=!1;return function(){i||(i=!0,window.Promise.resolve().then(function(){i=!1,e()}))}}function JF(e){var i=!1;return function(){i||(i=!0,setTimeout(function(){i=!1,e()},KF))}}var e5=wl&&window.Promise,t5=e5?QF:JF;function YT(e){var i={};return e&&i.toString.call(e)==="[object Function]"}function Vo(e,i){if(e.nodeType!==1)return[];var t=e.ownerDocument.defaultView,n=t.getComputedStyle(e,null);return i?n[i]:n}function Bm(e){return e.nodeName==="HTML"?e:e.parentNode||e.host}function bl(e){if(!e)return document.body;switch(e.nodeName){case"HTML":case"BODY":return e.ownerDocument.body;case"#document":return e.body}var i=Vo(e),t=i.overflow,n=i.overflowX,o=i.overflowY;return/(auto|scroll|overlay)/.test(t+o+n)?e:bl(Bm(e))}function $T(e){return e&&e.referenceNode?e.referenceNode:e}var cx=wl&&!!(window.MSInputMethodContext&&document.documentMode),dx=wl&&/MSIE 10/.test(navigator.userAgent);function Js(e){return e===11?cx:e===10?dx:cx||dx}function Zs(e){if(!e)return document.documentElement;for(var i=Js(10)?document.body:null,t=e.offsetParent||null;t===i&&e.nextElementSibling;)t=(e=e.nextElementSibling).offsetParent;var n=t&&t.nodeName;return!n||n==="BODY"||n==="HTML"?e?e.ownerDocument.documentElement:document.documentElement:["TH","TD","TABLE"].indexOf(t.nodeName)!==-1&&Vo(t,"position")==="static"?Zs(t):t}function n5(e){var i=e.nodeName;return i==="BODY"?!1:i==="HTML"||Zs(e.firstElementChild)===e}function Wf(e){return e.parentNode!==null?Wf(e.parentNode):e}function Ec(e,i){if(!e||!e.nodeType||!i||!i.nodeType)return document.documentElement;var t=e.compareDocumentPosition(i)&Node.DOCUMENT_POSITION_FOLLOWING,n=t?e:i,o=t?i:e,u=document.createRange();u.setStart(n,0),u.setEnd(o,0);var h=u.commonAncestorContainer;if(e!==h&&i!==h||n.contains(o))return n5(h)?h:Zs(h);var d=Wf(e);return d.host?Ec(d.host,i):Ec(e,Wf(i).host)}function Xs(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"top",t=i==="top"?"scrollTop":"scrollLeft",n=e.nodeName;if(n==="BODY"||n==="HTML"){var o=e.ownerDocument.documentElement,u=e.ownerDocument.scrollingElement||o;return u[t]}return e[t]}function i5(e,i){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=Xs(i,"top"),o=Xs(i,"left"),u=t?-1:1;return e.top+=n*u,e.bottom+=n*u,e.left+=o*u,e.right+=o*u,e}function hx(e,i){var t=i==="x"?"Left":"Top",n=t==="Left"?"Right":"Bottom";return parseFloat(e["border"+t+"Width"])+parseFloat(e["border"+n+"Width"])}function px(e,i,t,n){return Math.max(i["offset"+e],i["scroll"+e],t["client"+e],t["offset"+e],t["scroll"+e],Js(10)?parseInt(t["offset"+e])+parseInt(n["margin"+(e==="Height"?"Top":"Left")])+parseInt(n["margin"+(e==="Height"?"Bottom":"Right")]):0)}function KT(e){var i=e.body,t=e.documentElement,n=Js(10)&&getComputedStyle(t);return{height:px("Height",i,t,n),width:px("Width",i,t,n)}}var r5=function(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")},o5=function(){function e(i,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(i,o.key,o)}}return function(i,t,n){return t&&e(i.prototype,t),n&&e(i,n),i}}(),Ys=function(e,i,t){return i in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e},Xi=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var t=arguments[i];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e};function eo(e){return Xi({},e,{right:e.left+e.width,bottom:e.top+e.height})}function Vf(e){var i={};try{if(Js(10)){i=e.getBoundingClientRect();var t=Xs(e,"top"),n=Xs(e,"left");i.top+=t,i.left+=n,i.bottom+=t,i.right+=n}else i=e.getBoundingClientRect()}catch{}var o={left:i.left,top:i.top,width:i.right-i.left,height:i.bottom-i.top},u=e.nodeName==="HTML"?KT(e.ownerDocument):{},h=u.width||e.clientWidth||o.width,d=u.height||e.clientHeight||o.height,p=e.offsetWidth-h,m=e.offsetHeight-d;if(p||m){var v=Vo(e);p-=hx(v,"x"),m-=hx(v,"y"),o.width-=p,o.height-=m}return eo(o)}function Um(e,i){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=Js(10),o=i.nodeName==="HTML",u=Vf(e),h=Vf(i),d=bl(e),p=Vo(i),m=parseFloat(p.borderTopWidth),v=parseFloat(p.borderLeftWidth);t&&o&&(h.top=Math.max(h.top,0),h.left=Math.max(h.left,0));var x=eo({top:u.top-h.top-m,left:u.left-h.left-v,width:u.width,height:u.height});if(x.marginTop=0,x.marginLeft=0,!n&&o){var E=parseFloat(p.marginTop),C=parseFloat(p.marginLeft);x.top-=m-E,x.bottom-=m-E,x.left-=v-C,x.right-=v-C,x.marginTop=E,x.marginLeft=C}return(n&&!t?i.contains(d):i===d&&d.nodeName!=="BODY")&&(x=i5(x,i)),x}function s5(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=e.ownerDocument.documentElement,n=Um(e,t),o=Math.max(t.clientWidth,window.innerWidth||0),u=Math.max(t.clientHeight,window.innerHeight||0),h=i?0:Xs(t),d=i?0:Xs(t,"left"),p={top:h-n.top+n.marginTop,left:d-n.left+n.marginLeft,width:o,height:u};return eo(p)}function QT(e){var i=e.nodeName;if(i==="BODY"||i==="HTML")return!1;if(Vo(e,"position")==="fixed")return!0;var t=Bm(e);return t?QT(t):!1}function JT(e){if(!e||!e.parentElement||Js())return document.documentElement;for(var i=e.parentElement;i&&Vo(i,"transform")==="none";)i=i.parentElement;return i||document.documentElement}function Wm(e,i,t,n){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,u={top:0,left:0},h=o?JT(e):Ec(e,$T(i));if(n==="viewport")u=s5(h,o);else{var d=void 0;n==="scrollParent"?(d=bl(Bm(i)),d.nodeName==="BODY"&&(d=e.ownerDocument.documentElement)):n==="window"?d=e.ownerDocument.documentElement:d=n;var p=Um(d,h,o);if(d.nodeName==="HTML"&&!QT(h)){var m=KT(e.ownerDocument),v=m.height,x=m.width;u.top+=p.top-p.marginTop,u.bottom=v+p.top,u.left+=p.left-p.marginLeft,u.right=x+p.left}else u=p}t=t||0;var E=typeof t=="number";return u.left+=E?t:t.left||0,u.top+=E?t:t.top||0,u.right-=E?t:t.right||0,u.bottom-=E?t:t.bottom||0,u}function a5(e){var i=e.width,t=e.height;return i*t}function eC(e,i,t,n,o){var u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0;if(e.indexOf("auto")===-1)return e;var h=Wm(t,n,u,o),d={top:{width:h.width,height:i.top-h.top},right:{width:h.right-i.right,height:h.height},bottom:{width:h.width,height:h.bottom-i.bottom},left:{width:i.left-h.left,height:h.height}},p=Object.keys(d).map(function(E){return Xi({key:E},d[E],{area:a5(d[E])})}).sort(function(E,C){return C.area-E.area}),m=p.filter(function(E){var C=E.width,O=E.height;return C>=t.clientWidth&&O>=t.clientHeight}),v=m.length>0?m[0].key:p[0].key,x=e.split("-")[1];return v+(x?"-"+x:"")}function tC(e,i,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,o=n?JT(i):Ec(i,$T(t));return Um(t,o,n)}function nC(e){var i=e.ownerDocument.defaultView,t=i.getComputedStyle(e),n=parseFloat(t.marginTop||0)+parseFloat(t.marginBottom||0),o=parseFloat(t.marginLeft||0)+parseFloat(t.marginRight||0),u={width:e.offsetWidth+o,height:e.offsetHeight+n};return u}function Tc(e){var i={left:"right",right:"left",bottom:"top",top:"bottom"};return e.replace(/left|right|bottom|top/g,function(t){return i[t]})}function iC(e,i,t){t=t.split("-")[0];var n=nC(e),o={width:n.width,height:n.height},u=["right","left"].indexOf(t)!==-1,h=u?"top":"left",d=u?"left":"top",p=u?"height":"width",m=u?"width":"height";return o[h]=i[h]+i[p]/2-n[p]/2,t===d?o[d]=i[d]-n[m]:o[d]=i[Tc(d)],o}function xl(e,i){return Array.prototype.find?e.find(i):e.filter(i)[0]}function l5(e,i,t){if(Array.prototype.findIndex)return e.findIndex(function(o){return o[i]===t});var n=xl(e,function(o){return o[i]===t});return e.indexOf(n)}function rC(e,i,t){var n=t===void 0?e:e.slice(0,l5(e,"name",t));return n.forEach(function(o){o.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var u=o.function||o.fn;o.enabled&&YT(u)&&(i.offsets.popper=eo(i.offsets.popper),i.offsets.reference=eo(i.offsets.reference),i=u(i,o))}),i}function u5(){if(!this.state.isDestroyed){var e={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};e.offsets.reference=tC(this.state,this.popper,this.reference,this.options.positionFixed),e.placement=eC(this.options.placement,e.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),e.originalPlacement=e.placement,e.positionFixed=this.options.positionFixed,e.offsets.popper=iC(this.popper,e.offsets.reference,e.placement),e.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",e=rC(this.modifiers,e),this.state.isCreated?this.options.onUpdate(e):(this.state.isCreated=!0,this.options.onCreate(e))}}function oC(e,i){return e.some(function(t){var n=t.name,o=t.enabled;return o&&n===i})}function Vm(e){for(var i=[!1,"ms","Webkit","Moz","O"],t=e.charAt(0).toUpperCase()+e.slice(1),n=0;n<i.length;n++){var o=i[n],u=o?""+o+t:e;if(typeof document.body.style[u]<"u")return u}return null}function c5(){return this.state.isDestroyed=!0,oC(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[Vm("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function sC(e){var i=e.ownerDocument;return i?i.defaultView:window}function aC(e,i,t,n){var o=e.nodeName==="BODY",u=o?e.ownerDocument.defaultView:e;u.addEventListener(i,t,{passive:!0}),o||aC(bl(u.parentNode),i,t,n),n.push(u)}function d5(e,i,t,n){t.updateBound=n,sC(e).addEventListener("resize",t.updateBound,{passive:!0});var o=bl(e);return aC(o,"scroll",t.updateBound,t.scrollParents),t.scrollElement=o,t.eventsEnabled=!0,t}function h5(){this.state.eventsEnabled||(this.state=d5(this.reference,this.options,this.state,this.scheduleUpdate))}function p5(e,i){return sC(e).removeEventListener("resize",i.updateBound),i.scrollParents.forEach(function(t){t.removeEventListener("scroll",i.updateBound)}),i.updateBound=null,i.scrollParents=[],i.scrollElement=null,i.eventsEnabled=!1,i}function f5(){this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=p5(this.reference,this.state))}function Gm(e){return e!==""&&!isNaN(parseFloat(e))&&isFinite(e)}function Gf(e,i){Object.keys(i).forEach(function(t){var n="";["width","height","top","right","bottom","left"].indexOf(t)!==-1&&Gm(i[t])&&(n="px"),e.style[t]=i[t]+n})}function m5(e,i){Object.keys(i).forEach(function(t){var n=i[t];n!==!1?e.setAttribute(t,i[t]):e.removeAttribute(t)})}function g5(e){return Gf(e.instance.popper,e.styles),m5(e.instance.popper,e.attributes),e.arrowElement&&Object.keys(e.arrowStyles).length&&Gf(e.arrowElement,e.arrowStyles),e}function v5(e,i,t,n,o){var u=tC(o,i,e,t.positionFixed),h=eC(t.placement,u,i,e,t.modifiers.flip.boundariesElement,t.modifiers.flip.padding);return i.setAttribute("x-placement",h),Gf(i,{position:t.positionFixed?"fixed":"absolute"}),t}function y5(e,i){var t=e.offsets,n=t.popper,o=t.reference,u=Math.round,h=Math.floor,d=function(k){return k},p=u(o.width),m=u(n.width),v=["left","right"].indexOf(e.placement)!==-1,x=e.placement.indexOf("-")!==-1,E=p%2===m%2,C=p%2===1&&m%2===1,O=i?v||x||E?u:h:d,_=i?u:d;return{left:O(C&&!x&&i?n.left-1:n.left),top:_(n.top),bottom:_(n.bottom),right:O(n.right)}}var w5=wl&&/Firefox/i.test(navigator.userAgent);function b5(e,i){var t=i.x,n=i.y,o=e.offsets.popper,u=xl(e.instance.modifiers,function(Z){return Z.name==="applyStyle"}).gpuAcceleration;u!==void 0&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var h=u!==void 0?u:i.gpuAcceleration,d=Zs(e.instance.popper),p=Vf(d),m={position:o.position},v=y5(e,window.devicePixelRatio<2||!w5),x=t==="bottom"?"top":"bottom",E=n==="right"?"left":"right",C=Vm("transform"),O=void 0,_=void 0;if(x==="bottom"?d.nodeName==="HTML"?_=-d.clientHeight+v.bottom:_=-p.height+v.bottom:_=v.top,E==="right"?d.nodeName==="HTML"?O=-d.clientWidth+v.right:O=-p.width+v.right:O=v.left,h&&C)m[C]="translate3d("+O+"px, "+_+"px, 0)",m[x]=0,m[E]=0,m.willChange="transform";else{var k=x==="bottom"?-1:1,I=E==="right"?-1:1;m[x]=_*k,m[E]=O*I,m.willChange=x+", "+E}var G={"x-placement":e.placement};return e.attributes=Xi({},G,e.attributes),e.styles=Xi({},m,e.styles),e.arrowStyles=Xi({},e.offsets.arrow,e.arrowStyles),e}function lC(e,i,t){var n=xl(e,function(d){var p=d.name;return p===i}),o=!!n&&e.some(function(d){return d.name===t&&d.enabled&&d.order<n.order});if(!o){var u="`"+i+"`",h="`"+t+"`";console.warn(h+" modifier is required by "+u+" modifier in order to work, be sure to include it before "+u+"!")}return o}function x5(e,i){var t;if(!lC(e.instance.modifiers,"arrow","keepTogether"))return e;var n=i.element;if(typeof n=="string"){if(n=e.instance.popper.querySelector(n),!n)return e}else if(!e.instance.popper.contains(n))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),e;var o=e.placement.split("-")[0],u=e.offsets,h=u.popper,d=u.reference,p=["left","right"].indexOf(o)!==-1,m=p?"height":"width",v=p?"Top":"Left",x=v.toLowerCase(),E=p?"left":"top",C=p?"bottom":"right",O=nC(n)[m];d[C]-O<h[x]&&(e.offsets.popper[x]-=h[x]-(d[C]-O)),d[x]+O>h[C]&&(e.offsets.popper[x]+=d[x]+O-h[C]),e.offsets.popper=eo(e.offsets.popper);var _=d[x]+d[m]/2-O/2,k=Vo(e.instance.popper),I=parseFloat(k["margin"+v]),G=parseFloat(k["border"+v+"Width"]),Z=_-e.offsets.popper[x]-I-G;return Z=Math.max(Math.min(h[m]-O,Z),0),e.arrowElement=n,e.offsets.arrow=(t={},Ys(t,x,Math.round(Z)),Ys(t,E,""),t),e}function S5(e){return e==="end"?"start":e==="start"?"end":e}var uC=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],Yp=uC.slice(3);function fx(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=Yp.indexOf(e),n=Yp.slice(t+1).concat(Yp.slice(0,t));return i?n.reverse():n}var $p={FLIP:"flip",CLOCKWISE:"clockwise",COUNTERCLOCKWISE:"counterclockwise"};function E5(e,i){if(oC(e.instance.modifiers,"inner")||e.flipped&&e.placement===e.originalPlacement)return e;var t=Wm(e.instance.popper,e.instance.reference,i.padding,i.boundariesElement,e.positionFixed),n=e.placement.split("-")[0],o=Tc(n),u=e.placement.split("-")[1]||"",h=[];switch(i.behavior){case $p.FLIP:h=[n,o];break;case $p.CLOCKWISE:h=fx(n);break;case $p.COUNTERCLOCKWISE:h=fx(n,!0);break;default:h=i.behavior}return h.forEach(function(d,p){if(n!==d||h.length===p+1)return e;n=e.placement.split("-")[0],o=Tc(n);var m=e.offsets.popper,v=e.offsets.reference,x=Math.floor,E=n==="left"&&x(m.right)>x(v.left)||n==="right"&&x(m.left)<x(v.right)||n==="top"&&x(m.bottom)>x(v.top)||n==="bottom"&&x(m.top)<x(v.bottom),C=x(m.left)<x(t.left),O=x(m.right)>x(t.right),_=x(m.top)<x(t.top),k=x(m.bottom)>x(t.bottom),I=n==="left"&&C||n==="right"&&O||n==="top"&&_||n==="bottom"&&k,G=["top","bottom"].indexOf(n)!==-1,Z=!!i.flipVariations&&(G&&u==="start"&&C||G&&u==="end"&&O||!G&&u==="start"&&_||!G&&u==="end"&&k),ae=!!i.flipVariationsByContent&&(G&&u==="start"&&O||G&&u==="end"&&C||!G&&u==="start"&&k||!G&&u==="end"&&_),te=Z||ae;(E||I||te)&&(e.flipped=!0,(E||I)&&(n=h[p+1]),te&&(u=S5(u)),e.placement=n+(u?"-"+u:""),e.offsets.popper=Xi({},e.offsets.popper,iC(e.instance.popper,e.offsets.reference,e.placement)),e=rC(e.instance.modifiers,e,"flip"))}),e}function T5(e){var i=e.offsets,t=i.popper,n=i.reference,o=e.placement.split("-")[0],u=Math.floor,h=["top","bottom"].indexOf(o)!==-1,d=h?"right":"bottom",p=h?"left":"top",m=h?"width":"height";return t[d]<u(n[p])&&(e.offsets.popper[p]=u(n[p])-t[m]),t[p]>u(n[d])&&(e.offsets.popper[p]=u(n[d])),e}function C5(e,i,t,n){var o=e.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),u=+o[1],h=o[2];if(!u)return e;if(h.indexOf("%")===0){var d=void 0;switch(h){case"%p":d=t;break;case"%":case"%r":default:d=n}var p=eo(d);return p[i]/100*u}else if(h==="vh"||h==="vw"){var m=void 0;return h==="vh"?m=Math.max(document.documentElement.clientHeight,window.innerHeight||0):m=Math.max(document.documentElement.clientWidth,window.innerWidth||0),m/100*u}else return u}function P5(e,i,t,n){var o=[0,0],u=["right","left"].indexOf(n)!==-1,h=e.split(/(\+|\-)/).map(function(v){return v.trim()}),d=h.indexOf(xl(h,function(v){return v.search(/,|\s/)!==-1}));h[d]&&h[d].indexOf(",")===-1&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var p=/\s*,\s*|\s+/,m=d!==-1?[h.slice(0,d).concat([h[d].split(p)[0]]),[h[d].split(p)[1]].concat(h.slice(d+1))]:[h];return m=m.map(function(v,x){var E=(x===1?!u:u)?"height":"width",C=!1;return v.reduce(function(O,_){return O[O.length-1]===""&&["+","-"].indexOf(_)!==-1?(O[O.length-1]=_,C=!0,O):C?(O[O.length-1]+=_,C=!1,O):O.concat(_)},[]).map(function(O){return C5(O,E,i,t)})}),m.forEach(function(v,x){v.forEach(function(E,C){Gm(E)&&(o[x]+=E*(v[C-1]==="-"?-1:1))})}),o}function _5(e,i){var t=i.offset,n=e.placement,o=e.offsets,u=o.popper,h=o.reference,d=n.split("-")[0],p=void 0;return Gm(+t)?p=[+t,0]:p=P5(t,u,h,d),d==="left"?(u.top+=p[0],u.left-=p[1]):d==="right"?(u.top+=p[0],u.left+=p[1]):d==="top"?(u.left+=p[0],u.top-=p[1]):d==="bottom"&&(u.left+=p[0],u.top+=p[1]),e.popper=u,e}function k5(e,i){var t=i.boundariesElement||Zs(e.instance.popper);e.instance.reference===t&&(t=Zs(t));var n=Vm("transform"),o=e.instance.popper.style,u=o.top,h=o.left,d=o[n];o.top="",o.left="",o[n]="";var p=Wm(e.instance.popper,e.instance.reference,i.padding,t,e.positionFixed);o.top=u,o.left=h,o[n]=d,i.boundaries=p;var m=i.priority,v=e.offsets.popper,x={primary:function(E){var C=v[E];return v[E]<p[E]&&!i.escapeWithReference&&(C=Math.max(v[E],p[E])),Ys({},E,C)},secondary:function(E){var C=E==="right"?"left":"top",O=v[C];return v[E]>p[E]&&!i.escapeWithReference&&(O=Math.min(v[C],p[E]-(E==="right"?v.width:v.height))),Ys({},C,O)}};return m.forEach(function(E){var C=["left","top"].indexOf(E)!==-1?"primary":"secondary";v=Xi({},v,x[C](E))}),e.offsets.popper=v,e}function R5(e){var i=e.placement,t=i.split("-")[0],n=i.split("-")[1];if(n){var o=e.offsets,u=o.reference,h=o.popper,d=["bottom","top"].indexOf(t)!==-1,p=d?"left":"top",m=d?"width":"height",v={start:Ys({},p,u[p]),end:Ys({},p,u[p]+u[m]-h[m])};e.offsets.popper=Xi({},h,v[n])}return e}function O5(e){if(!lC(e.instance.modifiers,"hide","preventOverflow"))return e;var i=e.offsets.reference,t=xl(e.instance.modifiers,function(n){return n.name==="preventOverflow"}).boundaries;if(i.bottom<t.top||i.left>t.right||i.top>t.bottom||i.right<t.left){if(e.hide===!0)return e;e.hide=!0,e.attributes["x-out-of-boundaries"]=""}else{if(e.hide===!1)return e;e.hide=!1,e.attributes["x-out-of-boundaries"]=!1}return e}function A5(e){var i=e.placement,t=i.split("-")[0],n=e.offsets,o=n.popper,u=n.reference,h=["left","right"].indexOf(t)!==-1,d=["top","left"].indexOf(t)===-1;return o[h?"left":"top"]=u[t]-(d?o[h?"width":"height"]:0),e.placement=Tc(i),e.offsets.popper=eo(o),e}var D5={shift:{order:100,enabled:!0,fn:R5},offset:{order:200,enabled:!0,fn:_5,offset:0},preventOverflow:{order:300,enabled:!0,fn:k5,priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:T5},arrow:{order:500,enabled:!0,fn:x5,element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:E5,behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:A5},hide:{order:800,enabled:!0,fn:O5},computeStyle:{order:850,enabled:!0,fn:b5,gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:g5,onLoad:v5,gpuAcceleration:void 0}},I5={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:D5},Bc=function(){function e(i,t){var n=this,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};r5(this,e),this.scheduleUpdate=function(){return requestAnimationFrame(n.update)},this.update=t5(this.update.bind(this)),this.options=Xi({},e.Defaults,o),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=i&&i.jquery?i[0]:i,this.popper=t&&t.jquery?t[0]:t,this.options.modifiers={},Object.keys(Xi({},e.Defaults.modifiers,o.modifiers)).forEach(function(h){n.options.modifiers[h]=Xi({},e.Defaults.modifiers[h]||{},o.modifiers?o.modifiers[h]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(h){return Xi({name:h},n.options.modifiers[h])}).sort(function(h,d){return h.order-d.order}),this.modifiers.forEach(function(h){h.enabled&&YT(h.onLoad)&&h.onLoad(n.reference,n.popper,n.options,h,n.state)}),this.update();var u=this.options.eventsEnabled;u&&this.enableEventListeners(),this.state.eventsEnabled=u}return o5(e,[{key:"update",value:function(){return u5.call(this)}},{key:"destroy",value:function(){return c5.call(this)}},{key:"enableEventListeners",value:function(){return h5.call(this)}},{key:"disableEventListeners",value:function(){return f5.call(this)}}]),e}();Bc.Utils=(typeof window<"u"?window:global).PopperUtils;Bc.placements=uC;Bc.Defaults=I5;function M5(e,i){var t=i&&i.direction||"ltr";if(t==="ltr")return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}function mx(e){return typeof e=="function"?e():e}var L5=typeof window<"u"?B.useLayoutEffect:B.useEffect,N5={},cC=B.forwardRef(function(e,i){var t=e.anchorEl,n=e.children,o=e.container,u=e.disablePortal,h=u===void 0?!1:u,d=e.keepMounted,p=d===void 0?!1:d,m=e.modifiers,v=e.open,x=e.placement,E=x===void 0?"bottom":x,C=e.popperOptions,O=C===void 0?N5:C,_=e.popperRef,k=e.style,I=e.transition,G=I===void 0?!1:I,Z=Qt(e,["anchorEl","children","container","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition"]),ae=B.useRef(null),te=Zn(ae,i),Q=B.useRef(null),le=Zn(Q,_),ce=B.useRef(le);L5(function(){ce.current=le},[le]),B.useImperativeHandle(_,function(){return Q.current},[]);var me=B.useState(!0),Pe=me[0],be=me[1],fe=Uo(),ve=M5(E,fe),Fe=B.useState(ve),Ge=Fe[0],Te=Fe[1];B.useEffect(function(){Q.current&&Q.current.update()});var ye=B.useCallback(function(){if(!(!ae.current||!t||!v)){Q.current&&(Q.current.destroy(),ce.current(null));var J=function(yt){Te(yt.placement)};mx(t);var Et=new Bc(mx(t),ae.current,De({placement:ve},O,{modifiers:De({},h?{}:{preventOverflow:{boundariesElement:"window"}},m,O.modifiers),onCreate:hl(J,O.onCreate),onUpdate:hl(J,O.onUpdate)}));ce.current(Et)}},[t,h,m,v,ve,O]),ke=B.useCallback(function(J){qs(te,J),ye()},[te,ye]),_e=function(){be(!1)},$=function(){Q.current&&(Q.current.destroy(),ce.current(null))},Le=function(){be(!0),$()};if(B.useEffect(function(){return function(){$()}},[]),B.useEffect(function(){!v&&!G&&$()},[v,G]),!p&&!v&&(!G||Pe))return null;var st={placement:Ge};return G&&(st.TransitionProps={in:v,onEnter:_e,onExited:Le}),B.createElement(MT,{disablePortal:h,container:o},B.createElement("div",De({ref:ke,role:"tooltip"},Z,{style:De({position:"fixed",top:0,left:0,display:!v&&p&&!G?"none":null},k)}),typeof n=="function"?n(st):n))});function gx(e,i){return Fo(i)==="object"&&i!==null?e===i:String(e)===String(i)}function z5(e){return e==null||typeof e=="string"&&!e.trim()}var j5=B.forwardRef(function(e,i){var t=e["aria-label"],n=e.autoFocus,o=e.autoWidth,u=e.children,h=e.classes,d=e.className,p=e.defaultValue,m=e.disabled,v=e.displayEmpty,x=e.IconComponent,E=e.inputRef,C=e.labelId,O=e.MenuProps,_=O===void 0?{}:O,k=e.multiple,I=e.name,G=e.onBlur,Z=e.onChange,ae=e.onClose,te=e.onFocus,Q=e.onOpen,le=e.open,ce=e.readOnly,me=e.renderValue,Pe=e.SelectDisplayProps,be=Pe===void 0?{}:Pe,fe=e.tabIndex;e.type;var ve=e.value,Fe=e.variant,Ge=Fe===void 0?"standard":Fe,Te=Qt(e,["aria-label","autoFocus","autoWidth","children","classes","className","defaultValue","disabled","displayEmpty","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"]),ye=k4({controlled:ve,default:p}),ke=pm(ye,2),_e=ke[0],$=ke[1],Le=B.useRef(null),st=B.useState(null),J=st[0],Et=st[1],yt=B.useRef(le!=null),mt=yt.current,Tt=B.useState(),Bt=Tt[0],At=Tt[1],at=B.useState(!1),$e=at[0],wt=at[1],Lt=Zn(i,E);B.useImperativeHandle(Lt,function(){return{focus:function(){J.focus()},node:Le.current,value:_e}},[J,_e]),B.useEffect(function(){n&&J&&J.focus()},[n,J]),B.useEffect(function(){if(J){var W=Ir(J).getElementById(C);if(W){var X=function(){getSelection().isCollapsed&&J.focus()};return W.addEventListener("click",X),function(){W.removeEventListener("click",X)}}}},[C,J]);var tn=function(W,X){W?Q&&Q(X):ae&&ae(X),mt||(At(o?null:J.clientWidth),wt(W))},kt=function(W){W.button===0&&(W.preventDefault(),J.focus(),tn(!0,W))},Gt=function(W){tn(!1,W)},D=B.Children.toArray(u),K=function(W){var X=D.map(function(Ue){return Ue.props.value}).indexOf(W.target.value);if(X!==-1){var Se=D[X];$(Se.props.value),Z&&Z(W,Se)}},we=function(W){return function(X){k||tn(!1,X);var Se;if(k){Se=Array.isArray(_e)?_e.slice():[];var Ue=_e.indexOf(W.props.value);Ue===-1?Se.push(W.props.value):Se.splice(Ue,1)}else Se=W.props.value;W.props.onClick&&W.props.onClick(X),_e!==Se&&($(Se),Z&&(X.persist(),Object.defineProperty(X,"target",{writable:!0,value:{value:Se,name:I}}),Z(X,W)))}},ze=function(W){if(!ce){var X=[" ","ArrowUp","ArrowDown","Enter"];X.indexOf(W.key)!==-1&&(W.preventDefault(),tn(!0,W))}},Ne=J!==null&&(mt?le:$e),Qe=function(W){!Ne&&G&&(W.persist(),Object.defineProperty(W,"target",{writable:!0,value:{value:_e,name:I}}),G(W))};delete Te["aria-invalid"];var Xe,bt,Rt=[],Dt=!1;(NT({value:_e})||v)&&(me?Xe=me(_e):Dt=!0);var he=D.map(function(W){if(!B.isValidElement(W))return null;var X;if(k){if(!Array.isArray(_e))throw new Error(Us(2));X=_e.some(function(Se){return gx(Se,W.props.value)}),X&&Dt&&Rt.push(W.props.children)}else X=gx(_e,W.props.value),X&&Dt&&(bt=W.props.children);return B.cloneElement(W,{"aria-selected":X?"true":void 0,onClick:we(W),onKeyUp:function(Se){Se.key===" "&&Se.preventDefault(),W.props.onKeyUp&&W.props.onKeyUp(Se)},role:"option",selected:X,value:void 0,"data-value":W.props.value})});Dt&&(Xe=k?Rt.join(", "):bt);var Ae=Bt;!o&&mt&&J&&(Ae=J.clientWidth);var L;typeof fe<"u"?L=fe:L=m?null:0;var z=be.id||(I?"mui-component-select-".concat(I):void 0);return B.createElement(B.Fragment,null,B.createElement("div",De({className:Tn(h.root,h.select,h.selectMenu,h[Ge],d,m&&h.disabled),ref:Et,tabIndex:L,role:"button","aria-disabled":m?"true":void 0,"aria-expanded":Ne?"true":void 0,"aria-haspopup":"listbox","aria-label":t,"aria-labelledby":[C,z].filter(Boolean).join(" ")||void 0,onKeyDown:ze,onMouseDown:m||ce?null:kt,onBlur:Qe,onFocus:te},be,{id:z}),z5(Xe)?B.createElement("span",{dangerouslySetInnerHTML:{__html:"&#8203;"}}):Xe),B.createElement("input",De({value:Array.isArray(_e)?_e.join(","):_e,name:I,ref:Le,"aria-hidden":!0,onChange:K,tabIndex:-1,className:h.nativeInput,autoFocus:n},Te)),B.createElement(x,{className:Tn(h.icon,h["icon".concat(Dr(Ge))],Ne&&h.iconOpen,m&&h.disabled)}),B.createElement(UF,De({id:"menu-".concat(I||""),anchorEl:J,open:Ne,onClose:Gt},_,{MenuListProps:De({"aria-labelledby":C,role:"listbox",disableListWrap:!0},_.MenuListProps),PaperProps:De({},_.PaperProps,{style:De({minWidth:Ae},_.PaperProps!=null?_.PaperProps.style:null)})}),he))}),H5=qT,F5=B.createElement(FT,null),B5=B.createElement(CF,null),dC=B.forwardRef(function e(i,t){var n=i.autoWidth,o=n===void 0?!1:n,u=i.children,h=i.classes,d=i.displayEmpty,p=d===void 0?!1:d,m=i.IconComponent,v=m===void 0?GT:m,x=i.id,E=i.input,C=i.inputProps,O=i.label,_=i.labelId,k=i.labelWidth,I=k===void 0?0:k,G=i.MenuProps,Z=i.multiple,ae=Z===void 0?!1:Z,te=i.native,Q=te===void 0?!1:te,le=i.onClose,ce=i.onOpen,me=i.open,Pe=i.renderValue,be=i.SelectDisplayProps,fe=i.variant,ve=fe===void 0?"standard":fe,Fe=Qt(i,["autoWidth","children","classes","displayEmpty","IconComponent","id","input","inputProps","label","labelId","labelWidth","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"]),Ge=Q?VT:j5,Te=IT(),ye=Hm({props:i,muiFormControl:Te,states:["variant"]}),ke=ye.variant||ve,_e=E||{standard:F5,outlined:B.createElement($F,{label:O,labelWidth:I}),filled:B5}[ke];return B.cloneElement(_e,De({inputComponent:Ge,inputProps:De({children:u,IconComponent:v,variant:ke,type:void 0,multiple:ae},Q?{id:x}:{autoWidth:o,displayEmpty:p,labelId:_,MenuProps:G,onClose:le,onOpen:ce,open:me,renderValue:Pe,SelectDisplayProps:De({id:x},be)},C,{classes:C?wm({baseClasses:h,newClasses:C.classes,Component:e}):h},E?E.props.inputProps:{}),ref:t},Fe))});dC.muiName="Select";const qf=ei(H5,{name:"MuiSelect"})(dC);var qm={},Zm={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Doctype=e.CDATA=e.Tag=e.Style=e.Script=e.Comment=e.Directive=e.Text=e.Root=e.isTag=e.ElementType=void 0;var i;(function(n){n.Root="root",n.Text="text",n.Directive="directive",n.Comment="comment",n.Script="script",n.Style="style",n.Tag="tag",n.CDATA="cdata",n.Doctype="doctype"})(i=e.ElementType||(e.ElementType={}));function t(n){return n.type===i.Tag||n.type===i.Script||n.type===i.Style}e.isTag=t,e.Root=i.Root,e.Text=i.Text,e.Directive=i.Directive,e.Comment=i.Comment,e.Script=i.Script,e.Style=i.Style,e.Tag=i.Tag,e.CDATA=i.CDATA,e.Doctype=i.Doctype})(Zm);var en={},ro=Jn&&Jn.__extends||function(){var e=function(i,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var u in o)Object.prototype.hasOwnProperty.call(o,u)&&(n[u]=o[u])},e(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(i,t);function n(){this.constructor=i}i.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),rl=Jn&&Jn.__assign||function(){return rl=Object.assign||function(e){for(var i,t=1,n=arguments.length;t<n;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},rl.apply(this,arguments)};Object.defineProperty(en,"__esModule",{value:!0});en.cloneNode=en.hasChildren=en.isDocument=en.isDirective=en.isComment=en.isText=en.isCDATA=en.isTag=en.Element=en.Document=en.CDATA=en.NodeWithChildren=en.ProcessingInstruction=en.Comment=en.Text=en.DataNode=en.Node=void 0;var _i=Zm,Xm=function(){function e(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent},set:function(i){this.parent=i},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return this.prev},set:function(i){this.prev=i},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return this.next},set:function(i){this.next=i},enumerable:!1,configurable:!0}),e.prototype.cloneNode=function(i){return i===void 0&&(i=!1),Ym(this,i)},e}();en.Node=Xm;var Uc=function(e){ro(i,e);function i(t){var n=e.call(this)||this;return n.data=t,n}return Object.defineProperty(i.prototype,"nodeValue",{get:function(){return this.data},set:function(t){this.data=t},enumerable:!1,configurable:!0}),i}(Xm);en.DataNode=Uc;var hC=function(e){ro(i,e);function i(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=_i.ElementType.Text,t}return Object.defineProperty(i.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),i}(Uc);en.Text=hC;var pC=function(e){ro(i,e);function i(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=_i.ElementType.Comment,t}return Object.defineProperty(i.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),i}(Uc);en.Comment=pC;var fC=function(e){ro(i,e);function i(t,n){var o=e.call(this,n)||this;return o.name=t,o.type=_i.ElementType.Directive,o}return Object.defineProperty(i.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),i}(Uc);en.ProcessingInstruction=fC;var Wc=function(e){ro(i,e);function i(t){var n=e.call(this)||this;return n.children=t,n}return Object.defineProperty(i.prototype,"firstChild",{get:function(){var t;return(t=this.children[0])!==null&&t!==void 0?t:null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"childNodes",{get:function(){return this.children},set:function(t){this.children=t},enumerable:!1,configurable:!0}),i}(Xm);en.NodeWithChildren=Wc;var mC=function(e){ro(i,e);function i(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=_i.ElementType.CDATA,t}return Object.defineProperty(i.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),i}(Wc);en.CDATA=mC;var gC=function(e){ro(i,e);function i(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=_i.ElementType.Root,t}return Object.defineProperty(i.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),i}(Wc);en.Document=gC;var vC=function(e){ro(i,e);function i(t,n,o,u){o===void 0&&(o=[]),u===void 0&&(u=t==="script"?_i.ElementType.Script:t==="style"?_i.ElementType.Style:_i.ElementType.Tag);var h=e.call(this,o)||this;return h.name=t,h.attribs=n,h.type=u,h}return Object.defineProperty(i.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tagName",{get:function(){return this.name},set:function(t){this.name=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"attributes",{get:function(){var t=this;return Object.keys(this.attribs).map(function(n){var o,u;return{name:n,value:t.attribs[n],namespace:(o=t["x-attribsNamespace"])===null||o===void 0?void 0:o[n],prefix:(u=t["x-attribsPrefix"])===null||u===void 0?void 0:u[n]}})},enumerable:!1,configurable:!0}),i}(Wc);en.Element=vC;function yC(e){return(0,_i.isTag)(e)}en.isTag=yC;function wC(e){return e.type===_i.ElementType.CDATA}en.isCDATA=wC;function bC(e){return e.type===_i.ElementType.Text}en.isText=bC;function xC(e){return e.type===_i.ElementType.Comment}en.isComment=xC;function SC(e){return e.type===_i.ElementType.Directive}en.isDirective=SC;function EC(e){return e.type===_i.ElementType.Root}en.isDocument=EC;function U5(e){return Object.prototype.hasOwnProperty.call(e,"children")}en.hasChildren=U5;function Ym(e,i){i===void 0&&(i=!1);var t;if(bC(e))t=new hC(e.data);else if(xC(e))t=new pC(e.data);else if(yC(e)){var n=i?Kp(e.children):[],o=new vC(e.name,rl({},e.attribs),n);n.forEach(function(p){return p.parent=o}),e.namespace!=null&&(o.namespace=e.namespace),e["x-attribsNamespace"]&&(o["x-attribsNamespace"]=rl({},e["x-attribsNamespace"])),e["x-attribsPrefix"]&&(o["x-attribsPrefix"]=rl({},e["x-attribsPrefix"])),t=o}else if(wC(e)){var n=i?Kp(e.children):[],u=new mC(n);n.forEach(function(m){return m.parent=u}),t=u}else if(EC(e)){var n=i?Kp(e.children):[],h=new gC(n);n.forEach(function(m){return m.parent=h}),e["x-mode"]&&(h["x-mode"]=e["x-mode"]),t=h}else if(SC(e)){var d=new fC(e.name,e.data);e["x-name"]!=null&&(d["x-name"]=e["x-name"],d["x-publicId"]=e["x-publicId"],d["x-systemId"]=e["x-systemId"]),t=d}else throw new Error("Not implemented yet: ".concat(e.type));return t.startIndex=e.startIndex,t.endIndex=e.endIndex,e.sourceCodeLocation!=null&&(t.sourceCodeLocation=e.sourceCodeLocation),t}en.cloneNode=Ym;function Kp(e){for(var i=e.map(function(n){return Ym(n,!0)}),t=1;t<i.length;t++)i[t].prev=i[t-1],i[t-1].next=i[t];return i}(function(e){var i=Jn&&Jn.__createBinding||(Object.create?function(d,p,m,v){v===void 0&&(v=m);var x=Object.getOwnPropertyDescriptor(p,m);(!x||("get"in x?!p.__esModule:x.writable||x.configurable))&&(x={enumerable:!0,get:function(){return p[m]}}),Object.defineProperty(d,v,x)}:function(d,p,m,v){v===void 0&&(v=m),d[v]=p[m]}),t=Jn&&Jn.__exportStar||function(d,p){for(var m in d)m!=="default"&&!Object.prototype.hasOwnProperty.call(p,m)&&i(p,d,m)};Object.defineProperty(e,"__esModule",{value:!0}),e.DomHandler=void 0;var n=Zm,o=en;t(en,e);var u={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},h=function(){function d(p,m,v){this.dom=[],this.root=new o.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof m=="function"&&(v=m,m=u),typeof p=="object"&&(m=p,p=void 0),this.callback=p??null,this.options=m??u,this.elementCB=v??null}return d.prototype.onparserinit=function(p){this.parser=p},d.prototype.onreset=function(){this.dom=[],this.root=new o.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},d.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},d.prototype.onerror=function(p){this.handleCallback(p)},d.prototype.onclosetag=function(){this.lastNode=null;var p=this.tagStack.pop();this.options.withEndIndices&&(p.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(p)},d.prototype.onopentag=function(p,m){var v=this.options.xmlMode?n.ElementType.Tag:void 0,x=new o.Element(p,m,void 0,v);this.addNode(x),this.tagStack.push(x)},d.prototype.ontext=function(p){var m=this.lastNode;if(m&&m.type===n.ElementType.Text)m.data+=p,this.options.withEndIndices&&(m.endIndex=this.parser.endIndex);else{var v=new o.Text(p);this.addNode(v),this.lastNode=v}},d.prototype.oncomment=function(p){if(this.lastNode&&this.lastNode.type===n.ElementType.Comment){this.lastNode.data+=p;return}var m=new o.Comment(p);this.addNode(m),this.lastNode=m},d.prototype.oncommentend=function(){this.lastNode=null},d.prototype.oncdatastart=function(){var p=new o.Text(""),m=new o.CDATA([p]);this.addNode(m),p.parent=m,this.lastNode=p},d.prototype.oncdataend=function(){this.lastNode=null},d.prototype.onprocessinginstruction=function(p,m){var v=new o.ProcessingInstruction(p,m);this.addNode(v)},d.prototype.handleCallback=function(p){if(typeof this.callback=="function")this.callback(p,this.dom);else if(p)throw p},d.prototype.addNode=function(p){var m=this.tagStack[this.tagStack.length-1],v=m.children[m.children.length-1];this.options.withStartIndices&&(p.startIndex=this.parser.startIndex),this.options.withEndIndices&&(p.endIndex=this.parser.endIndex),m.children.push(p),v&&(p.prev=v,v.next=p),p.parent=m,this.lastNode=null},d}();e.DomHandler=h,e.default=h})(qm);var vx="html",yx="head",ec="body",W5=/<([a-zA-Z]+[0-9]?)/,wx=/<head[^]*>/i,bx=/<body[^]*>/i,Cc=function(){throw new Error("This browser does not support `document.implementation.createHTMLDocument`")},Zf=function(){throw new Error("This browser does not support `DOMParser.prototype.parseFromString`")},xx=typeof window=="object"&&window.DOMParser;if(typeof xx=="function"){var V5=new xx,G5="text/html";Zf=function(e,i){return i&&(e="<"+i+">"+e+"</"+i+">"),V5.parseFromString(e,G5)},Cc=Zf}if(typeof document=="object"&&document.implementation){var tc=document.implementation.createHTMLDocument();Cc=function(e,i){if(i){var t=tc.documentElement.querySelector(i);return t.innerHTML=e,tc}return tc.documentElement.innerHTML=e,tc}}var Qp=typeof document=="object"?document.createElement("template"):{},Xf;Qp.content&&(Xf=function(e){return Qp.innerHTML=e,Qp.content.childNodes});function q5(e){var i,t=e.match(W5);t&&t[1]&&(i=t[1].toLowerCase());var n,o,u;switch(i){case vx:return n=Zf(e),wx.test(e)||(o=n.querySelector(yx),o&&o.parentNode.removeChild(o)),bx.test(e)||(o=n.querySelector(ec),o&&o.parentNode.removeChild(o)),n.querySelectorAll(vx);case yx:case ec:return n=Cc(e),u=n.querySelectorAll(i),bx.test(e)&&wx.test(e)?u[0].parentNode.childNodes:u;default:return Xf?Xf(e):(o=Cc(e,ec).querySelector(ec),o.childNodes)}}var Z5=q5,$m={},TC={};TC.CASE_SENSITIVE_TAG_NAMES=["animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","linearGradient","radialGradient","textPath"];var Vc=qm,X5=TC,Sx=X5.CASE_SENSITIVE_TAG_NAMES,Y5=Vc.Comment,$5=Vc.Element,K5=Vc.ProcessingInstruction,Q5=Vc.Text,CC={},Jp;for(var ef=0,J5=Sx.length;ef<J5;ef++)Jp=Sx[ef],CC[Jp.toLowerCase()]=Jp;function eB(e){return CC[e]}function PC(e){for(var i={},t,n=0,o=e.length;n<o;n++)t=e[n],i[t.name]=t.value;return i}function tB(e){e=e.toLowerCase();var i=eB(e);return i||e}function _C(e,i,t){i=i||null;for(var n=[],o,u=0,h=e.length;u<h;u++){var d=e[u],p;switch(d.nodeType){case 1:o=tB(d.nodeName),p=new $5(o,PC(d.attributes)),p.children=_C(o==="template"?d.content.childNodes:d.childNodes,p);break;case 3:p=new Q5(d.nodeValue);break;case 8:p=new Y5(d.nodeValue);break;default:continue}var m=n[u-1]||null;m&&(m.next=p),p.parent=i,p.prev=m,p.next=null,n.push(p)}return t&&(p=new K5(t.substring(0,t.indexOf(" ")).toLowerCase(),t),p.next=n[0]||null,p.parent=i,n.unshift(p),n[1]&&(n[1].prev=n[0])),n}$m.formatAttributes=PC;$m.formatDOM=_C;var nB=Z5,iB=$m,rB=iB.formatDOM,oB=/<(![a-zA-Z\s]+)>/;function sB(e){if(typeof e!="string")throw new TypeError("First argument must be a string");if(e==="")return[];var i=e.match(oB),t;return i&&i[1]&&(t=i[1]),rB(nB(e),null,t)}var aB=sB,$i={},Gc={},lB=0;Gc.SAME=lB;var uB=1;Gc.CAMELCASE=uB;Gc.possibleStandardNames={accept:0,acceptCharset:1,"accept-charset":"acceptCharset",accessKey:1,action:0,allowFullScreen:1,alt:0,as:0,async:0,autoCapitalize:1,autoComplete:1,autoCorrect:1,autoFocus:1,autoPlay:1,autoSave:1,capture:0,cellPadding:1,cellSpacing:1,challenge:0,charSet:1,checked:0,children:0,cite:0,class:"className",classID:1,className:1,cols:0,colSpan:1,content:0,contentEditable:1,contextMenu:1,controls:0,controlsList:1,coords:0,crossOrigin:1,dangerouslySetInnerHTML:1,data:0,dateTime:1,default:0,defaultChecked:1,defaultValue:1,defer:0,dir:0,disabled:0,disablePictureInPicture:1,disableRemotePlayback:1,download:0,draggable:0,encType:1,enterKeyHint:1,for:"htmlFor",form:0,formMethod:1,formAction:1,formEncType:1,formNoValidate:1,formTarget:1,frameBorder:1,headers:0,height:0,hidden:0,high:0,href:0,hrefLang:1,htmlFor:1,httpEquiv:1,"http-equiv":"httpEquiv",icon:0,id:0,innerHTML:1,inputMode:1,integrity:0,is:0,itemID:1,itemProp:1,itemRef:1,itemScope:1,itemType:1,keyParams:1,keyType:1,kind:0,label:0,lang:0,list:0,loop:0,low:0,manifest:0,marginWidth:1,marginHeight:1,max:0,maxLength:1,media:0,mediaGroup:1,method:0,min:0,minLength:1,multiple:0,muted:0,name:0,noModule:1,nonce:0,noValidate:1,open:0,optimum:0,pattern:0,placeholder:0,playsInline:1,poster:0,preload:0,profile:0,radioGroup:1,readOnly:1,referrerPolicy:1,rel:0,required:0,reversed:0,role:0,rows:0,rowSpan:1,sandbox:0,scope:0,scoped:0,scrolling:0,seamless:0,selected:0,shape:0,size:0,sizes:0,span:0,spellCheck:1,src:0,srcDoc:1,srcLang:1,srcSet:1,start:0,step:0,style:0,summary:0,tabIndex:1,target:0,title:0,type:0,useMap:1,value:0,width:0,wmode:0,wrap:0,about:0,accentHeight:1,"accent-height":"accentHeight",accumulate:0,additive:0,alignmentBaseline:1,"alignment-baseline":"alignmentBaseline",allowReorder:1,alphabetic:0,amplitude:0,arabicForm:1,"arabic-form":"arabicForm",ascent:0,attributeName:1,attributeType:1,autoReverse:1,azimuth:0,baseFrequency:1,baselineShift:1,"baseline-shift":"baselineShift",baseProfile:1,bbox:0,begin:0,bias:0,by:0,calcMode:1,capHeight:1,"cap-height":"capHeight",clip:0,clipPath:1,"clip-path":"clipPath",clipPathUnits:1,clipRule:1,"clip-rule":"clipRule",color:0,colorInterpolation:1,"color-interpolation":"colorInterpolation",colorInterpolationFilters:1,"color-interpolation-filters":"colorInterpolationFilters",colorProfile:1,"color-profile":"colorProfile",colorRendering:1,"color-rendering":"colorRendering",contentScriptType:1,contentStyleType:1,cursor:0,cx:0,cy:0,d:0,datatype:0,decelerate:0,descent:0,diffuseConstant:1,direction:0,display:0,divisor:0,dominantBaseline:1,"dominant-baseline":"dominantBaseline",dur:0,dx:0,dy:0,edgeMode:1,elevation:0,enableBackground:1,"enable-background":"enableBackground",end:0,exponent:0,externalResourcesRequired:1,fill:0,fillOpacity:1,"fill-opacity":"fillOpacity",fillRule:1,"fill-rule":"fillRule",filter:0,filterRes:1,filterUnits:1,floodOpacity:1,"flood-opacity":"floodOpacity",floodColor:1,"flood-color":"floodColor",focusable:0,fontFamily:1,"font-family":"fontFamily",fontSize:1,"font-size":"fontSize",fontSizeAdjust:1,"font-size-adjust":"fontSizeAdjust",fontStretch:1,"font-stretch":"fontStretch",fontStyle:1,"font-style":"fontStyle",fontVariant:1,"font-variant":"fontVariant",fontWeight:1,"font-weight":"fontWeight",format:0,from:0,fx:0,fy:0,g1:0,g2:0,glyphName:1,"glyph-name":"glyphName",glyphOrientationHorizontal:1,"glyph-orientation-horizontal":"glyphOrientationHorizontal",glyphOrientationVertical:1,"glyph-orientation-vertical":"glyphOrientationVertical",glyphRef:1,gradientTransform:1,gradientUnits:1,hanging:0,horizAdvX:1,"horiz-adv-x":"horizAdvX",horizOriginX:1,"horiz-origin-x":"horizOriginX",ideographic:0,imageRendering:1,"image-rendering":"imageRendering",in2:0,in:0,inlist:0,intercept:0,k1:0,k2:0,k3:0,k4:0,k:0,kernelMatrix:1,kernelUnitLength:1,kerning:0,keyPoints:1,keySplines:1,keyTimes:1,lengthAdjust:1,letterSpacing:1,"letter-spacing":"letterSpacing",lightingColor:1,"lighting-color":"lightingColor",limitingConeAngle:1,local:0,markerEnd:1,"marker-end":"markerEnd",markerHeight:1,markerMid:1,"marker-mid":"markerMid",markerStart:1,"marker-start":"markerStart",markerUnits:1,markerWidth:1,mask:0,maskContentUnits:1,maskUnits:1,mathematical:0,mode:0,numOctaves:1,offset:0,opacity:0,operator:0,order:0,orient:0,orientation:0,origin:0,overflow:0,overlinePosition:1,"overline-position":"overlinePosition",overlineThickness:1,"overline-thickness":"overlineThickness",paintOrder:1,"paint-order":"paintOrder",panose1:0,"panose-1":"panose1",pathLength:1,patternContentUnits:1,patternTransform:1,patternUnits:1,pointerEvents:1,"pointer-events":"pointerEvents",points:0,pointsAtX:1,pointsAtY:1,pointsAtZ:1,prefix:0,preserveAlpha:1,preserveAspectRatio:1,primitiveUnits:1,property:0,r:0,radius:0,refX:1,refY:1,renderingIntent:1,"rendering-intent":"renderingIntent",repeatCount:1,repeatDur:1,requiredExtensions:1,requiredFeatures:1,resource:0,restart:0,result:0,results:0,rotate:0,rx:0,ry:0,scale:0,security:0,seed:0,shapeRendering:1,"shape-rendering":"shapeRendering",slope:0,spacing:0,specularConstant:1,specularExponent:1,speed:0,spreadMethod:1,startOffset:1,stdDeviation:1,stemh:0,stemv:0,stitchTiles:1,stopColor:1,"stop-color":"stopColor",stopOpacity:1,"stop-opacity":"stopOpacity",strikethroughPosition:1,"strikethrough-position":"strikethroughPosition",strikethroughThickness:1,"strikethrough-thickness":"strikethroughThickness",string:0,stroke:0,strokeDasharray:1,"stroke-dasharray":"strokeDasharray",strokeDashoffset:1,"stroke-dashoffset":"strokeDashoffset",strokeLinecap:1,"stroke-linecap":"strokeLinecap",strokeLinejoin:1,"stroke-linejoin":"strokeLinejoin",strokeMiterlimit:1,"stroke-miterlimit":"strokeMiterlimit",strokeWidth:1,"stroke-width":"strokeWidth",strokeOpacity:1,"stroke-opacity":"strokeOpacity",suppressContentEditableWarning:1,suppressHydrationWarning:1,surfaceScale:1,systemLanguage:1,tableValues:1,targetX:1,targetY:1,textAnchor:1,"text-anchor":"textAnchor",textDecoration:1,"text-decoration":"textDecoration",textLength:1,textRendering:1,"text-rendering":"textRendering",to:0,transform:0,typeof:0,u1:0,u2:0,underlinePosition:1,"underline-position":"underlinePosition",underlineThickness:1,"underline-thickness":"underlineThickness",unicode:0,unicodeBidi:1,"unicode-bidi":"unicodeBidi",unicodeRange:1,"unicode-range":"unicodeRange",unitsPerEm:1,"units-per-em":"unitsPerEm",unselectable:0,vAlphabetic:1,"v-alphabetic":"vAlphabetic",values:0,vectorEffect:1,"vector-effect":"vectorEffect",version:0,vertAdvY:1,"vert-adv-y":"vertAdvY",vertOriginX:1,"vert-origin-x":"vertOriginX",vertOriginY:1,"vert-origin-y":"vertOriginY",vHanging:1,"v-hanging":"vHanging",vIdeographic:1,"v-ideographic":"vIdeographic",viewBox:1,viewTarget:1,visibility:0,vMathematical:1,"v-mathematical":"vMathematical",vocab:0,widths:0,wordSpacing:1,"word-spacing":"wordSpacing",writingMode:1,"writing-mode":"writingMode",x1:0,x2:0,x:0,xChannelSelector:1,xHeight:1,"x-height":"xHeight",xlinkActuate:1,"xlink:actuate":"xlinkActuate",xlinkArcrole:1,"xlink:arcrole":"xlinkArcrole",xlinkHref:1,"xlink:href":"xlinkHref",xlinkRole:1,"xlink:role":"xlinkRole",xlinkShow:1,"xlink:show":"xlinkShow",xlinkTitle:1,"xlink:title":"xlinkTitle",xlinkType:1,"xlink:type":"xlinkType",xmlBase:1,"xml:base":"xmlBase",xmlLang:1,"xml:lang":"xmlLang",xmlns:0,"xml:space":"xmlSpace",xmlnsXlink:1,"xmlns:xlink":"xmlnsXlink",xmlSpace:1,y1:0,y2:0,y:0,yChannelSelector:1,z:0,zoomAndPan:1};Object.defineProperty($i,"__esModule",{value:!0});function cB(e,i){return dB(e)||hB(e,i)||pB(e,i)||fB()}function dB(e){if(Array.isArray(e))return e}function hB(e,i){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var n=[],o=!0,u=!1,h,d;try{for(t=t.call(e);!(o=(h=t.next()).done)&&(n.push(h.value),!(i&&n.length===i));o=!0);}catch(p){u=!0,d=p}finally{try{!o&&t.return!=null&&t.return()}finally{if(u)throw d}}return n}}function pB(e,i){if(e){if(typeof e=="string")return Ex(e,i);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Ex(e,i)}}function Ex(e,i){(i==null||i>e.length)&&(i=e.length);for(var t=0,n=new Array(i);t<i;t++)n[t]=e[t];return n}function fB(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var kC=0,oo=1,qc=2,Zc=3,Km=4,RC=5,OC=6;function mB(e){return ui.hasOwnProperty(e)?ui[e]:null}function bi(e,i,t,n,o,u,h){this.acceptsBooleans=i===qc||i===Zc||i===Km,this.attributeName=n,this.attributeNamespace=o,this.mustUseProperty=t,this.propertyName=e,this.type=i,this.sanitizeURL=u,this.removeEmptyString=h}var ui={},gB=["children","dangerouslySetInnerHTML","defaultValue","defaultChecked","innerHTML","suppressContentEditableWarning","suppressHydrationWarning","style"];gB.forEach(function(e){ui[e]=new bi(e,kC,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var i=cB(e,2),t=i[0],n=i[1];ui[t]=new bi(t,oo,!1,n,null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ui[e]=new bi(e,qc,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ui[e]=new bi(e,qc,!1,e,null,!1,!1)});["allowFullScreen","async","autoFocus","autoPlay","controls","default","defer","disabled","disablePictureInPicture","disableRemotePlayback","formNoValidate","hidden","loop","noModule","noValidate","open","playsInline","readOnly","required","reversed","scoped","seamless","itemScope"].forEach(function(e){ui[e]=new bi(e,Zc,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ui[e]=new bi(e,Zc,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ui[e]=new bi(e,Km,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ui[e]=new bi(e,OC,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ui[e]=new bi(e,RC,!1,e.toLowerCase(),null,!1,!1)});var Qm=/[\-\:]([a-z])/g,Jm=function(e){return e[1].toUpperCase()};["accent-height","alignment-baseline","arabic-form","baseline-shift","cap-height","clip-path","clip-rule","color-interpolation","color-interpolation-filters","color-profile","color-rendering","dominant-baseline","enable-background","fill-opacity","fill-rule","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","glyph-name","glyph-orientation-horizontal","glyph-orientation-vertical","horiz-adv-x","horiz-origin-x","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","overline-position","overline-thickness","paint-order","panose-1","pointer-events","rendering-intent","shape-rendering","stop-color","stop-opacity","strikethrough-position","strikethrough-thickness","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-rendering","underline-position","underline-thickness","unicode-bidi","unicode-range","units-per-em","v-alphabetic","v-hanging","v-ideographic","v-mathematical","vector-effect","vert-adv-y","vert-origin-x","vert-origin-y","word-spacing","writing-mode","xmlns:xlink","x-height"].forEach(function(e){var i=e.replace(Qm,Jm);ui[i]=new bi(i,oo,!1,e,null,!1,!1)});["xlink:actuate","xlink:arcrole","xlink:role","xlink:show","xlink:title","xlink:type"].forEach(function(e){var i=e.replace(Qm,Jm);ui[i]=new bi(i,oo,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var i=e.replace(Qm,Jm);ui[i]=new bi(i,oo,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ui[e]=new bi(e,oo,!1,e.toLowerCase(),null,!1,!1)});var vB="xlinkHref";ui[vB]=new bi("xlinkHref",oo,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ui[e]=new bi(e,oo,!1,e.toLowerCase(),null,!0,!0)});var eg=Gc,yB=eg.CAMELCASE,wB=eg.SAME,Tx=eg.possibleStandardNames,bB=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",xB=bB+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",SB=RegExp.prototype.test.bind(new RegExp("^(data|aria)-["+xB+"]*$")),EB=Object.keys(Tx).reduce(function(e,i){var t=Tx[i];return t===wB?e[i]=i:t===yB?e[i.toLowerCase()]=i:e[i]=t,e},{});$i.BOOLEAN=Zc;$i.BOOLEANISH_STRING=qc;$i.NUMERIC=RC;$i.OVERLOADED_BOOLEAN=Km;$i.POSITIVE_NUMERIC=OC;$i.RESERVED=kC;$i.STRING=oo;$i.getPropertyInfo=mB;$i.isCustomAttribute=SB;$i.possibleStandardNames=EB;var tg={},ng={exports:{}},Cx=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,TB=/\n/g,CB=/^\s*/,PB=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,_B=/^:\s*/,kB=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,RB=/^[;\s]*/,OB=/^\s+|\s+$/g,AB=`
`,Px="/",_x="*",Mo="",DB="comment",IB="declaration",MB=function(e,i){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];i=i||{};var t=1,n=1;function o(O){var _=O.match(TB);_&&(t+=_.length);var k=O.lastIndexOf(AB);n=~k?O.length-k:n+O.length}function u(){var O={line:t,column:n};return function(_){return _.position=new h(O),m(),_}}function h(O){this.start=O,this.end={line:t,column:n},this.source=i.source}h.prototype.content=e;function d(O){var _=new Error(i.source+":"+t+":"+n+": "+O);if(_.reason=O,_.filename=i.source,_.line=t,_.column=n,_.source=e,!i.silent)throw _}function p(O){var _=O.exec(e);if(_){var k=_[0];return o(k),e=e.slice(k.length),_}}function m(){p(CB)}function v(O){var _;for(O=O||[];_=x();)_!==!1&&O.push(_);return O}function x(){var O=u();if(!(Px!=e.charAt(0)||_x!=e.charAt(1))){for(var _=2;Mo!=e.charAt(_)&&(_x!=e.charAt(_)||Px!=e.charAt(_+1));)++_;if(_+=2,Mo===e.charAt(_-1))return d("End of comment missing");var k=e.slice(2,_-2);return n+=2,o(k),e=e.slice(_),n+=2,O({type:DB,comment:k})}}function E(){var O=u(),_=p(PB);if(_){if(x(),!p(_B))return d("property missing ':'");var k=p(kB),I=O({type:IB,property:kx(_[0].replace(Cx,Mo)),value:k?kx(k[0].replace(Cx,Mo)):Mo});return p(RB),I}}function C(){var O=[];v(O);for(var _;_=E();)_!==!1&&(O.push(_),v(O));return O}return m(),C()};function kx(e){return e?e.replace(OB,Mo):Mo}var LB=MB;function AC(e,i){var t=null;if(!e||typeof e!="string")return t;for(var n,o=LB(e),u=typeof i=="function",h,d,p=0,m=o.length;p<m;p++)n=o[p],h=n.property,d=n.value,u?i(h,d,n):d&&(t||(t={}),t[h]=d);return t}ng.exports=AC;ng.exports.default=AC;var NB=ng.exports;const DC=gr(NB),zB=Object.freeze(Object.defineProperty({__proto__:null,default:DC},Symbol.toStringTag,{value:"Module"})),jB=YS(zB);var Xc={};Object.defineProperty(Xc,"__esModule",{value:!0});Xc.camelCase=void 0;var HB=/^--[a-zA-Z0-9-]+$/,FB=/-([a-z])/g,BB=/^[^-]+$/,UB=/^-(webkit|moz|ms|o|khtml)-/,WB=/^-(ms)-/,VB=function(e){return!e||BB.test(e)||HB.test(e)},GB=function(e,i){return i.toUpperCase()},Rx=function(e,i){return"".concat(i,"-")},qB=function(e,i){return i===void 0&&(i={}),VB(e)?e:(e=e.toLowerCase(),i.reactCompat?e=e.replace(WB,Rx):e=e.replace(UB,Rx),e.replace(FB,GB))};Xc.camelCase=qB;var ZB=Jn&&Jn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(tg,"__esModule",{value:!0});var XB=ZB(jB),YB=Xc;function $B(e,i){var t={};return!e||typeof e!="string"||(0,XB.default)(e,function(n,o){n&&o&&(t[(0,YB.camelCase)(n,i)]=o)}),t}tg.default=$B;var KB=xt,QB=tg.default;function JB(e,i){if(!e||typeof e!="object")throw new TypeError("First argument must be an object");var t=typeof i=="function",n={},o={};for(var u in e){var h=e[u];if(t&&(n=i(u,h),n&&n.length===2)){o[n[0]]=n[1];continue}typeof h=="string"&&(o[h]=u)}return o}var e1=new Set(["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"]);function t1(e,i){return e.indexOf("-")===-1?i&&typeof i.is=="string":!e1.has(e)}var n1={reactCompat:!0};function i1(e,i){if(e!=null)try{i.style=QB(e,n1)}catch{i.style={}}}var r1=KB.version.split(".")[0]>=16,IC=new Set(["tr","tbody","thead","tfoot","colgroup","table","head","html","frameset"]);function o1(e){return!IC.has(e.name)}function s1(e){return e}var MC={PRESERVE_CUSTOM_ATTRIBUTES:r1,ELEMENTS_WITH_NO_TEXT_CHILDREN:IC,invertObject:JB,isCustomComponent:t1,setStyleProp:i1,canTextBeChildOfNode:o1,returnFirstArg:s1},Ya=$i,Ox=MC,a1=["checked","value"],l1=["input","select","textarea"],u1={reset:!0,submit:!0},LC=function(e,i){e=e||{};var t,n,o,u,h,d={},p=e.type&&u1[e.type];for(t in e){if(o=e[t],Ya.isCustomAttribute(t)){d[t]=o;continue}if(n=t.toLowerCase(),u=Ax(n),u){switch(h=Ya.getPropertyInfo(u),a1.indexOf(u)!==-1&&l1.indexOf(i)!==-1&&!p&&(u=Ax("default"+n)),d[u]=o,h&&h.type){case Ya.BOOLEAN:d[u]=!0;break;case Ya.OVERLOADED_BOOLEAN:o===""&&(d[u]=!0);break}continue}Ox.PRESERVE_CUSTOM_ATTRIBUTES&&(d[t]=o)}return Ox.setStyleProp(e.style,d),d};function Ax(e){return Ya.possibleStandardNames[e]}var c1=xt,d1=LC,pl=MC,h1=pl.setStyleProp,p1=pl.canTextBeChildOfNode;function NC(e,i){i=i||{};for(var t=i.library||c1,n=t.cloneElement,o=t.createElement,u=t.isValidElement,h=[],d,p,m=typeof i.replace=="function",v=i.transform||pl.returnFirstArg,x,E,C,O=i.trim,_=0,k=e.length;_<k;_++){if(d=e[_],m&&(x=i.replace(d),u(x))){k>1&&(x=n(x,{key:x.key||_})),h.push(v(x,d,_));continue}if(d.type==="text"){if(p=!d.data.trim().length,p&&d.parent&&!p1(d.parent)||O&&p)continue;h.push(v(d.data,d,_));continue}switch(E=d.attribs,f1(d)?h1(E.style,E):E&&(E=d1(E,d.name)),C=null,d.type){case"script":case"style":d.children[0]&&(E.dangerouslySetInnerHTML={__html:d.children[0].data});break;case"tag":d.name==="textarea"&&d.children[0]?E.defaultValue=d.children[0].data:d.children&&d.children.length&&(C=NC(d.children,i));break;default:continue}k>1&&(E.key=_),h.push(v(o(d.name,E,C),d,_))}return h.length===1?h[0]:h}function f1(e){return pl.PRESERVE_CUSTOM_ATTRIBUTES&&e.type==="tag"&&pl.isCustomComponent(e.name,e.attribs)}var m1=NC,Yc=qm,Ls=aB,g1=LC,zC=m1;Ls=typeof Ls.default=="function"?Ls.default:Ls;var v1={lowerCaseAttributeNames:!1};function fr(e,i){if(typeof e!="string")throw new TypeError("First argument must be a string");return e===""?[]:(i=i||{},zC(Ls(e,i.htmlparser2||v1),i))}fr.domToReact=zC;fr.htmlToDOM=Ls;fr.attributesToProps=g1;fr.Comment=Yc.Comment;fr.Element=Yc.Element;fr.ProcessingInstruction=Yc.ProcessingInstruction;fr.Text=Yc.Text;var y1=fr;fr.default=fr;const Hi=gr(y1);Hi.domToReact;Hi.htmlToDOM;Hi.attributesToProps;Hi.Comment;Hi.Element;Hi.ProcessingInstruction;Hi.Text;const Dx=["http","https","mailto","tel"];function w1(e){const i=(e||"").trim(),t=i.charAt(0);if(t==="#"||t==="/")return i;const n=i.indexOf(":");if(n===-1)return i;let o=-1;for(;++o<Dx.length;){const u=Dx[o];if(n===u.length&&i.slice(0,u.length).toLowerCase()===u)return i}return o=i.indexOf("?"),o!==-1&&n>o||(o=i.indexOf("#"),o!==-1&&n>o)?i:"javascript:void(0)"}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var b1=function(e){return e!=null&&e.constructor!=null&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)};const jC=gr(b1);function ol(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Ix(e.position):"start"in e||"end"in e?Ix(e):"line"in e||"column"in e?Yf(e):""}function Yf(e){return Mx(e&&e.line)+":"+Mx(e&&e.column)}function Ix(e){return Yf(e&&e.start)+"-"+Yf(e&&e.end)}function Mx(e){return e&&typeof e=="number"?e:1}class Ki extends Error{constructor(i,t,n){const o=[null,null];let u={start:{line:null,column:null},end:{line:null,column:null}};if(super(),typeof t=="string"&&(n=t,t=void 0),typeof n=="string"){const h=n.indexOf(":");h===-1?o[1]=n:(o[0]=n.slice(0,h),o[1]=n.slice(h+1))}t&&("type"in t||"position"in t?t.position&&(u=t.position):"start"in t||"end"in t?u=t:("line"in t||"column"in t)&&(u.start=t)),this.name=ol(t)||"1:1",this.message=typeof i=="object"?i.message:i,this.stack="",typeof i=="object"&&i.stack&&(this.stack=i.stack),this.reason=this.message,this.fatal,this.line=u.start.line,this.column=u.start.column,this.position=u,this.source=o[0],this.ruleId=o[1],this.file,this.actual,this.expected,this.url,this.note}}Ki.prototype.file="";Ki.prototype.name="";Ki.prototype.reason="";Ki.prototype.message="";Ki.prototype.stack="";Ki.prototype.fatal=null;Ki.prototype.column=null;Ki.prototype.line=null;Ki.prototype.source=null;Ki.prototype.ruleId=null;Ki.prototype.position=null;const dr={basename:x1,dirname:S1,extname:E1,join:T1,sep:"/"};function x1(e,i){if(i!==void 0&&typeof i!="string")throw new TypeError('"ext" argument must be a string');Sl(e);let t=0,n=-1,o=e.length,u;if(i===void 0||i.length===0||i.length>e.length){for(;o--;)if(e.charCodeAt(o)===47){if(u){t=o+1;break}}else n<0&&(u=!0,n=o+1);return n<0?"":e.slice(t,n)}if(i===e)return"";let h=-1,d=i.length-1;for(;o--;)if(e.charCodeAt(o)===47){if(u){t=o+1;break}}else h<0&&(u=!0,h=o+1),d>-1&&(e.charCodeAt(o)===i.charCodeAt(d--)?d<0&&(n=o):(d=-1,n=h));return t===n?n=h:n<0&&(n=e.length),e.slice(t,n)}function S1(e){if(Sl(e),e.length===0)return".";let i=-1,t=e.length,n;for(;--t;)if(e.charCodeAt(t)===47){if(n){i=t;break}}else n||(n=!0);return i<0?e.charCodeAt(0)===47?"/":".":i===1&&e.charCodeAt(0)===47?"//":e.slice(0,i)}function E1(e){Sl(e);let i=e.length,t=-1,n=0,o=-1,u=0,h;for(;i--;){const d=e.charCodeAt(i);if(d===47){if(h){n=i+1;break}continue}t<0&&(h=!0,t=i+1),d===46?o<0?o=i:u!==1&&(u=1):o>-1&&(u=-1)}return o<0||t<0||u===0||u===1&&o===t-1&&o===n+1?"":e.slice(o,t)}function T1(...e){let i=-1,t;for(;++i<e.length;)Sl(e[i]),e[i]&&(t=t===void 0?e[i]:t+"/"+e[i]);return t===void 0?".":C1(t)}function C1(e){Sl(e);const i=e.charCodeAt(0)===47;let t=P1(e,!i);return t.length===0&&!i&&(t="."),t.length>0&&e.charCodeAt(e.length-1)===47&&(t+="/"),i?"/"+t:t}function P1(e,i){let t="",n=0,o=-1,u=0,h=-1,d,p;for(;++h<=e.length;){if(h<e.length)d=e.charCodeAt(h);else{if(d===47)break;d=47}if(d===47){if(!(o===h-1||u===1))if(o!==h-1&&u===2){if(t.length<2||n!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){if(p=t.lastIndexOf("/"),p!==t.length-1){p<0?(t="",n=0):(t=t.slice(0,p),n=t.length-1-t.lastIndexOf("/")),o=h,u=0;continue}}else if(t.length>0){t="",n=0,o=h,u=0;continue}}i&&(t=t.length>0?t+"/..":"..",n=2)}else t.length>0?t+="/"+e.slice(o+1,h):t=e.slice(o+1,h),n=h-o-1;o=h,u=0}else d===46&&u>-1?u++:u=-1}return t}function Sl(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const _1={cwd:k1};function k1(){return"/"}function $f(e){return e!==null&&typeof e=="object"&&e.href&&e.origin}function R1(e){if(typeof e=="string")e=new URL(e);else if(!$f(e)){const i=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw i.code="ERR_INVALID_ARG_TYPE",i}if(e.protocol!=="file:"){const i=new TypeError("The URL must be of scheme file");throw i.code="ERR_INVALID_URL_SCHEME",i}return O1(e)}function O1(e){if(e.hostname!==""){const n=new TypeError('File URL host must be "localhost" or empty on darwin');throw n.code="ERR_INVALID_FILE_URL_HOST",n}const i=e.pathname;let t=-1;for(;++t<i.length;)if(i.charCodeAt(t)===37&&i.charCodeAt(t+1)===50){const n=i.charCodeAt(t+2);if(n===70||n===102){const o=new TypeError("File URL path must not include encoded / characters");throw o.code="ERR_INVALID_FILE_URL_PATH",o}}return decodeURIComponent(i)}const tf=["history","path","basename","stem","extname","dirname"];class HC{constructor(i){let t;i?typeof i=="string"||A1(i)?t={value:i}:$f(i)?t={path:i}:t=i:t={},this.data={},this.messages=[],this.history=[],this.cwd=_1.cwd(),this.value,this.stored,this.result,this.map;let n=-1;for(;++n<tf.length;){const u=tf[n];u in t&&t[u]!==void 0&&t[u]!==null&&(this[u]=u==="history"?[...t[u]]:t[u])}let o;for(o in t)tf.includes(o)||(this[o]=t[o])}get path(){return this.history[this.history.length-1]}set path(i){$f(i)&&(i=R1(i)),rf(i,"path"),this.path!==i&&this.history.push(i)}get dirname(){return typeof this.path=="string"?dr.dirname(this.path):void 0}set dirname(i){Lx(this.basename,"dirname"),this.path=dr.join(i||"",this.basename)}get basename(){return typeof this.path=="string"?dr.basename(this.path):void 0}set basename(i){rf(i,"basename"),nf(i,"basename"),this.path=dr.join(this.dirname||"",i)}get extname(){return typeof this.path=="string"?dr.extname(this.path):void 0}set extname(i){if(nf(i,"extname"),Lx(this.dirname,"extname"),i){if(i.charCodeAt(0)!==46)throw new Error("`extname` must start with `.`");if(i.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=dr.join(this.dirname,this.stem+(i||""))}get stem(){return typeof this.path=="string"?dr.basename(this.path,this.extname):void 0}set stem(i){rf(i,"stem"),nf(i,"stem"),this.path=dr.join(this.dirname||"",i+(this.extname||""))}toString(i){return(this.value||"").toString(i||void 0)}message(i,t,n){const o=new Ki(i,t,n);return this.path&&(o.name=this.path+":"+o.name,o.file=this.path),o.fatal=!1,this.messages.push(o),o}info(i,t,n){const o=this.message(i,t,n);return o.fatal=null,o}fail(i,t,n){const o=this.message(i,t,n);throw o.fatal=!0,o}}function nf(e,i){if(e&&e.includes(dr.sep))throw new Error("`"+i+"` cannot be a path: did not expect `"+dr.sep+"`")}function rf(e,i){if(!e)throw new Error("`"+i+"` cannot be empty")}function Lx(e,i){if(!e)throw new Error("Setting `"+i+"` requires `path` to be set too")}function A1(e){return jC(e)}function Nx(e){if(e)throw e}var hc=Object.prototype.hasOwnProperty,FC=Object.prototype.toString,zx=Object.defineProperty,jx=Object.getOwnPropertyDescriptor,Hx=function(e){return typeof Array.isArray=="function"?Array.isArray(e):FC.call(e)==="[object Array]"},Fx=function(e){if(!e||FC.call(e)!=="[object Object]")return!1;var i=hc.call(e,"constructor"),t=e.constructor&&e.constructor.prototype&&hc.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!i&&!t)return!1;var n;for(n in e);return typeof n>"u"||hc.call(e,n)},Bx=function(e,i){zx&&i.name==="__proto__"?zx(e,i.name,{enumerable:!0,configurable:!0,value:i.newValue,writable:!0}):e[i.name]=i.newValue},Ux=function(e,i){if(i==="__proto__")if(hc.call(e,i)){if(jx)return jx(e,i).value}else return;return e[i]},D1=function e(){var i,t,n,o,u,h,d=arguments[0],p=1,m=arguments.length,v=!1;for(typeof d=="boolean"&&(v=d,d=arguments[1]||{},p=2),(d==null||typeof d!="object"&&typeof d!="function")&&(d={});p<m;++p)if(i=arguments[p],i!=null)for(t in i)n=Ux(d,t),o=Ux(i,t),d!==o&&(v&&o&&(Fx(o)||(u=Hx(o)))?(u?(u=!1,h=n&&Hx(n)?n:[]):h=n&&Fx(n)?n:{},Bx(d,{name:t,newValue:e(v,h,o)})):typeof o<"u"&&Bx(d,{name:t,newValue:o}));return d};const Wx=gr(D1);function Kf(e){if(typeof e!="object"||e===null)return!1;const i=Object.getPrototypeOf(e);return(i===null||i===Object.prototype||Object.getPrototypeOf(i)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function I1(){const e=[],i={run:t,use:n};return i;function t(...o){let u=-1;const h=o.pop();if(typeof h!="function")throw new TypeError("Expected function as last argument, not "+h);d(null,...o);function d(p,...m){const v=e[++u];let x=-1;if(p){h(p);return}for(;++x<o.length;)(m[x]===null||m[x]===void 0)&&(m[x]=o[x]);o=m,v?M1(v,d)(...m):h(null,...m)}}function n(o){if(typeof o!="function")throw new TypeError("Expected `middelware` to be a function, not "+o);return e.push(o),i}}function M1(e,i){let t;return n;function n(...h){const d=e.length>h.length;let p;d&&h.push(o);try{p=e.apply(this,h)}catch(m){const v=m;if(d&&t)throw v;return o(v)}d||(p&&p.then&&typeof p.then=="function"?p.then(u,o):p instanceof Error?o(p):u(p))}function o(h,...d){t||(t=!0,i(h,...d))}function u(h){o(null,h)}}const L1=UC().freeze(),BC={}.hasOwnProperty;function UC(){const e=I1(),i=[];let t={},n,o=-1;return u.data=h,u.Parser=void 0,u.Compiler=void 0,u.freeze=d,u.attachers=i,u.use=p,u.parse=m,u.stringify=v,u.run=x,u.runSync=E,u.process=C,u.processSync=O,u;function u(){const _=UC();let k=-1;for(;++k<i.length;)_.use(...i[k]);return _.data(Wx(!0,{},t)),_}function h(_,k){return typeof _=="string"?arguments.length===2?(af("data",n),t[_]=k,u):BC.call(t,_)&&t[_]||null:_?(af("data",n),t=_,u):t}function d(){if(n)return u;for(;++o<i.length;){const[_,...k]=i[o];if(k[0]===!1)continue;k[0]===!0&&(k[0]=void 0);const I=_.call(u,...k);typeof I=="function"&&e.use(I)}return n=!0,o=Number.POSITIVE_INFINITY,u}function p(_,...k){let I;if(af("use",n),_!=null)if(typeof _=="function")te(_,...k);else if(typeof _=="object")Array.isArray(_)?ae(_):Z(_);else throw new TypeError("Expected usable value, not `"+_+"`");return I&&(t.settings=Object.assign(t.settings||{},I)),u;function G(Q){if(typeof Q=="function")te(Q);else if(typeof Q=="object")if(Array.isArray(Q)){const[le,...ce]=Q;te(le,...ce)}else Z(Q);else throw new TypeError("Expected usable value, not `"+Q+"`")}function Z(Q){ae(Q.plugins),Q.settings&&(I=Object.assign(I||{},Q.settings))}function ae(Q){let le=-1;if(Q!=null)if(Array.isArray(Q))for(;++le<Q.length;){const ce=Q[le];G(ce)}else throw new TypeError("Expected a list of plugins, not `"+Q+"`")}function te(Q,le){let ce=-1,me;for(;++ce<i.length;)if(i[ce][0]===Q){me=i[ce];break}me?(Kf(me[1])&&Kf(le)&&(le=Wx(!0,me[1],le)),me[1]=le):i.push([...arguments])}}function m(_){u.freeze();const k=Wa(_),I=u.Parser;return of("parse",I),Vx(I,"parse")?new I(String(k),k).parse():I(String(k),k)}function v(_,k){u.freeze();const I=Wa(k),G=u.Compiler;return sf("stringify",G),Gx(_),Vx(G,"compile")?new G(_,I).compile():G(_,I)}function x(_,k,I){if(Gx(_),u.freeze(),!I&&typeof k=="function"&&(I=k,k=void 0),!I)return new Promise(G);G(null,I);function G(Z,ae){e.run(_,Wa(k),te);function te(Q,le,ce){le=le||_,Q?ae(Q):Z?Z(le):I(null,le,ce)}}}function E(_,k){let I,G;return u.run(_,k,Z),qx("runSync","run",G),I;function Z(ae,te){Nx(ae),I=te,G=!0}}function C(_,k){if(u.freeze(),of("process",u.Parser),sf("process",u.Compiler),!k)return new Promise(I);I(null,k);function I(G,Z){const ae=Wa(_);u.run(u.parse(ae),ae,(Q,le,ce)=>{if(Q||!le||!ce)te(Q);else{const me=u.stringify(le,ce);me==null||(j1(me)?ce.value=me:ce.result=me),te(Q,ce)}});function te(Q,le){Q||!le?Z(Q):G?G(le):k(null,le)}}}function O(_){let k;u.freeze(),of("processSync",u.Parser),sf("processSync",u.Compiler);const I=Wa(_);return u.process(I,G),qx("processSync","process",k),I;function G(Z){k=!0,Nx(Z)}}}function Vx(e,i){return typeof e=="function"&&e.prototype&&(N1(e.prototype)||i in e.prototype)}function N1(e){let i;for(i in e)if(BC.call(e,i))return!0;return!1}function of(e,i){if(typeof i!="function")throw new TypeError("Cannot `"+e+"` without `Parser`")}function sf(e,i){if(typeof i!="function")throw new TypeError("Cannot `"+e+"` without `Compiler`")}function af(e,i){if(i)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Gx(e){if(!Kf(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function qx(e,i,t){if(!t)throw new Error("`"+e+"` finished async. Use `"+i+"` instead")}function Wa(e){return z1(e)?e:new HC(e)}function z1(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function j1(e){return typeof e=="string"||jC(e)}const H1={};function F1(e,i){const t=H1,n=typeof t.includeImageAlt=="boolean"?t.includeImageAlt:!0,o=typeof t.includeHtml=="boolean"?t.includeHtml:!0;return WC(e,n,o)}function WC(e,i,t){if(B1(e)){if("value"in e)return e.type==="html"&&!t?"":e.value;if(i&&"alt"in e&&e.alt)return e.alt;if("children"in e)return Zx(e.children,i,t)}return Array.isArray(e)?Zx(e,i,t):""}function Zx(e,i,t){const n=[];let o=-1;for(;++o<e.length;)n[o]=WC(e[o],i,t);return n.join("")}function B1(e){return!!(e&&typeof e=="object")}function mr(e,i,t,n){const o=e.length;let u=0,h;if(i<0?i=-i>o?0:o+i:i=i>o?o:i,t=t>0?t:0,n.length<1e4)h=Array.from(n),h.unshift(i,t),e.splice(...h);else for(t&&e.splice(i,t);u<n.length;)h=n.slice(u,u+1e4),h.unshift(i,0),e.splice(...h),u+=1e4,i+=1e4}function Zi(e,i){return e.length>0?(mr(e,e.length,0,i),e):i}const Xx={}.hasOwnProperty;function U1(e){const i={};let t=-1;for(;++t<e.length;)W1(i,e[t]);return i}function W1(e,i){let t;for(t in i){const n=(Xx.call(e,t)?e[t]:void 0)||(e[t]={}),o=i[t];let u;if(o)for(u in o){Xx.call(n,u)||(n[u]=[]);const h=o[u];V1(n[u],Array.isArray(h)?h:h?[h]:[])}}}function V1(e,i){let t=-1;const n=[];for(;++t<i.length;)(i[t].add==="after"?e:n).push(i[t]);mr(e,0,0,n)}const G1=/[!-\/:-@\[-`\{-~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,pr=so(/[A-Za-z]/),Fi=so(/[\dA-Za-z]/),q1=so(/[#-'*+\--9=?A-Z^-~]/);function Qf(e){return e!==null&&(e<32||e===127)}const Jf=so(/\d/),Z1=so(/[\dA-Fa-f]/),X1=so(/[!-/:-@[-`{-~]/);function Ft(e){return e!==null&&e<-2}function ki(e){return e!==null&&(e<0||e===32)}function pn(e){return e===-2||e===-1||e===32}const Y1=so(G1),$1=so(/\s/);function so(e){return i;function i(t){return t!==null&&e.test(String.fromCharCode(t))}}function Rn(e,i,t,n){const o=n?n-1:Number.POSITIVE_INFINITY;let u=0;return h;function h(p){return pn(p)?(e.enter(t),d(p)):i(p)}function d(p){return pn(p)&&u++<o?(e.consume(p),d):(e.exit(t),i(p))}}const K1={tokenize:Q1};function Q1(e){const i=e.attempt(this.parser.constructs.contentInitial,n,o);let t;return i;function n(d){if(d===null){e.consume(d);return}return e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),Rn(e,i,"linePrefix")}function o(d){return e.enter("paragraph"),u(d)}function u(d){const p=e.enter("chunkText",{contentType:"text",previous:t});return t&&(t.next=p),t=p,h(d)}function h(d){if(d===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(d);return}return Ft(d)?(e.consume(d),e.exit("chunkText"),u):(e.consume(d),h)}}const J1={tokenize:eU},Yx={tokenize:tU};function eU(e){const i=this,t=[];let n=0,o,u,h;return d;function d(Z){if(n<t.length){const ae=t[n];return i.containerState=ae[1],e.attempt(ae[0].continuation,p,m)(Z)}return m(Z)}function p(Z){if(n++,i.containerState._closeFlow){i.containerState._closeFlow=void 0,o&&G();const ae=i.events.length;let te=ae,Q;for(;te--;)if(i.events[te][0]==="exit"&&i.events[te][1].type==="chunkFlow"){Q=i.events[te][1].end;break}I(n);let le=ae;for(;le<i.events.length;)i.events[le][1].end=Object.assign({},Q),le++;return mr(i.events,te+1,0,i.events.slice(ae)),i.events.length=le,m(Z)}return d(Z)}function m(Z){if(n===t.length){if(!o)return E(Z);if(o.currentConstruct&&o.currentConstruct.concrete)return O(Z);i.interrupt=!!(o.currentConstruct&&!o._gfmTableDynamicInterruptHack)}return i.containerState={},e.check(Yx,v,x)(Z)}function v(Z){return o&&G(),I(n),E(Z)}function x(Z){return i.parser.lazy[i.now().line]=n!==t.length,h=i.now().offset,O(Z)}function E(Z){return i.containerState={},e.attempt(Yx,C,O)(Z)}function C(Z){return n++,t.push([i.currentConstruct,i.containerState]),E(Z)}function O(Z){if(Z===null){o&&G(),I(0),e.consume(Z);return}return o=o||i.parser.flow(i.now()),e.enter("chunkFlow",{contentType:"flow",previous:u,_tokenizer:o}),_(Z)}function _(Z){if(Z===null){k(e.exit("chunkFlow"),!0),I(0),e.consume(Z);return}return Ft(Z)?(e.consume(Z),k(e.exit("chunkFlow")),n=0,i.interrupt=void 0,d):(e.consume(Z),_)}function k(Z,ae){const te=i.sliceStream(Z);if(ae&&te.push(null),Z.previous=u,u&&(u.next=Z),u=Z,o.defineSkip(Z.start),o.write(te),i.parser.lazy[Z.start.line]){let Q=o.events.length;for(;Q--;)if(o.events[Q][1].start.offset<h&&(!o.events[Q][1].end||o.events[Q][1].end.offset>h))return;const le=i.events.length;let ce=le,me,Pe;for(;ce--;)if(i.events[ce][0]==="exit"&&i.events[ce][1].type==="chunkFlow"){if(me){Pe=i.events[ce][1].end;break}me=!0}for(I(n),Q=le;Q<i.events.length;)i.events[Q][1].end=Object.assign({},Pe),Q++;mr(i.events,ce+1,0,i.events.slice(le)),i.events.length=Q}}function I(Z){let ae=t.length;for(;ae-- >Z;){const te=t[ae];i.containerState=te[1],te[0].exit.call(i,e)}t.length=Z}function G(){o.write([null]),u=void 0,o=void 0,i.containerState._closeFlow=void 0}}function tU(e,i,t){return Rn(e,e.attempt(this.parser.constructs.document,i,t),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function $x(e){if(e===null||ki(e)||$1(e))return 1;if(Y1(e))return 2}function ig(e,i,t){const n=[];let o=-1;for(;++o<e.length;){const u=e[o].resolveAll;u&&!n.includes(u)&&(i=u(i,t),n.push(u))}return i}const em={name:"attention",tokenize:iU,resolveAll:nU};function nU(e,i){let t=-1,n,o,u,h,d,p,m,v;for(;++t<e.length;)if(e[t][0]==="enter"&&e[t][1].type==="attentionSequence"&&e[t][1]._close){for(n=t;n--;)if(e[n][0]==="exit"&&e[n][1].type==="attentionSequence"&&e[n][1]._open&&i.sliceSerialize(e[n][1]).charCodeAt(0)===i.sliceSerialize(e[t][1]).charCodeAt(0)){if((e[n][1]._close||e[t][1]._open)&&(e[t][1].end.offset-e[t][1].start.offset)%3&&!((e[n][1].end.offset-e[n][1].start.offset+e[t][1].end.offset-e[t][1].start.offset)%3))continue;p=e[n][1].end.offset-e[n][1].start.offset>1&&e[t][1].end.offset-e[t][1].start.offset>1?2:1;const x=Object.assign({},e[n][1].end),E=Object.assign({},e[t][1].start);Kx(x,-p),Kx(E,p),h={type:p>1?"strongSequence":"emphasisSequence",start:x,end:Object.assign({},e[n][1].end)},d={type:p>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[t][1].start),end:E},u={type:p>1?"strongText":"emphasisText",start:Object.assign({},e[n][1].end),end:Object.assign({},e[t][1].start)},o={type:p>1?"strong":"emphasis",start:Object.assign({},h.start),end:Object.assign({},d.end)},e[n][1].end=Object.assign({},h.start),e[t][1].start=Object.assign({},d.end),m=[],e[n][1].end.offset-e[n][1].start.offset&&(m=Zi(m,[["enter",e[n][1],i],["exit",e[n][1],i]])),m=Zi(m,[["enter",o,i],["enter",h,i],["exit",h,i],["enter",u,i]]),m=Zi(m,ig(i.parser.constructs.insideSpan.null,e.slice(n+1,t),i)),m=Zi(m,[["exit",u,i],["enter",d,i],["exit",d,i],["exit",o,i]]),e[t][1].end.offset-e[t][1].start.offset?(v=2,m=Zi(m,[["enter",e[t][1],i],["exit",e[t][1],i]])):v=0,mr(e,n-1,t-n+3,m),t=n+m.length-v-2;break}}for(t=-1;++t<e.length;)e[t][1].type==="attentionSequence"&&(e[t][1].type="data");return e}function iU(e,i){const t=this.parser.constructs.attentionMarkers.null,n=this.previous,o=$x(n);let u;return h;function h(p){return u=p,e.enter("attentionSequence"),d(p)}function d(p){if(p===u)return e.consume(p),d;const m=e.exit("attentionSequence"),v=$x(p),x=!v||v===2&&o||t.includes(p),E=!o||o===2&&v||t.includes(n);return m._open=!!(u===42?x:x&&(o||!E)),m._close=!!(u===42?E:E&&(v||!x)),i(p)}}function Kx(e,i){e.column+=i,e.offset+=i,e._bufferIndex+=i}const rU={name:"autolink",tokenize:oU};function oU(e,i,t){let n=0;return o;function o(C){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(C),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),u}function u(C){return pr(C)?(e.consume(C),h):m(C)}function h(C){return C===43||C===45||C===46||Fi(C)?(n=1,d(C)):m(C)}function d(C){return C===58?(e.consume(C),n=0,p):(C===43||C===45||C===46||Fi(C))&&n++<32?(e.consume(C),d):(n=0,m(C))}function p(C){return C===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(C),e.exit("autolinkMarker"),e.exit("autolink"),i):C===null||C===32||C===60||Qf(C)?t(C):(e.consume(C),p)}function m(C){return C===64?(e.consume(C),v):q1(C)?(e.consume(C),m):t(C)}function v(C){return Fi(C)?x(C):t(C)}function x(C){return C===46?(e.consume(C),n=0,v):C===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(C),e.exit("autolinkMarker"),e.exit("autolink"),i):E(C)}function E(C){if((C===45||Fi(C))&&n++<63){const O=C===45?E:x;return e.consume(C),O}return t(C)}}const $c={tokenize:sU,partial:!0};function sU(e,i,t){return n;function n(u){return pn(u)?Rn(e,o,"linePrefix")(u):o(u)}function o(u){return u===null||Ft(u)?i(u):t(u)}}const VC={name:"blockQuote",tokenize:aU,continuation:{tokenize:lU},exit:uU};function aU(e,i,t){const n=this;return o;function o(h){if(h===62){const d=n.containerState;return d.open||(e.enter("blockQuote",{_container:!0}),d.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(h),e.exit("blockQuoteMarker"),u}return t(h)}function u(h){return pn(h)?(e.enter("blockQuotePrefixWhitespace"),e.consume(h),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),i):(e.exit("blockQuotePrefix"),i(h))}}function lU(e,i,t){const n=this;return o;function o(h){return pn(h)?Rn(e,u,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(h):u(h)}function u(h){return e.attempt(VC,i,t)(h)}}function uU(e){e.exit("blockQuote")}const GC={name:"characterEscape",tokenize:cU};function cU(e,i,t){return n;function n(u){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(u),e.exit("escapeMarker"),o}function o(u){return X1(u)?(e.enter("characterEscapeValue"),e.consume(u),e.exit("characterEscapeValue"),e.exit("characterEscape"),i):t(u)}}const Qx=document.createElement("i");function rg(e){const i="&"+e+";";Qx.innerHTML=i;const t=Qx.textContent;return t.charCodeAt(t.length-1)===59&&e!=="semi"||t===i?!1:t}const qC={name:"characterReference",tokenize:dU};function dU(e,i,t){const n=this;let o=0,u,h;return d;function d(x){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(x),e.exit("characterReferenceMarker"),p}function p(x){return x===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(x),e.exit("characterReferenceMarkerNumeric"),m):(e.enter("characterReferenceValue"),u=31,h=Fi,v(x))}function m(x){return x===88||x===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(x),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),u=6,h=Z1,v):(e.enter("characterReferenceValue"),u=7,h=Jf,v(x))}function v(x){if(x===59&&o){const E=e.exit("characterReferenceValue");return h===Fi&&!rg(n.sliceSerialize(E))?t(x):(e.enter("characterReferenceMarker"),e.consume(x),e.exit("characterReferenceMarker"),e.exit("characterReference"),i)}return h(x)&&o++<u?(e.consume(x),v):t(x)}}const Jx={tokenize:pU,partial:!0},eS={name:"codeFenced",tokenize:hU,concrete:!0};function hU(e,i,t){const n=this,o={tokenize:te,partial:!0};let u=0,h=0,d;return p;function p(Q){return m(Q)}function m(Q){const le=n.events[n.events.length-1];return u=le&&le[1].type==="linePrefix"?le[2].sliceSerialize(le[1],!0).length:0,d=Q,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),v(Q)}function v(Q){return Q===d?(h++,e.consume(Q),v):h<3?t(Q):(e.exit("codeFencedFenceSequence"),pn(Q)?Rn(e,x,"whitespace")(Q):x(Q))}function x(Q){return Q===null||Ft(Q)?(e.exit("codeFencedFence"),n.interrupt?i(Q):e.check(Jx,_,ae)(Q)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),E(Q))}function E(Q){return Q===null||Ft(Q)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),x(Q)):pn(Q)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Rn(e,C,"whitespace")(Q)):Q===96&&Q===d?t(Q):(e.consume(Q),E)}function C(Q){return Q===null||Ft(Q)?x(Q):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),O(Q))}function O(Q){return Q===null||Ft(Q)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),x(Q)):Q===96&&Q===d?t(Q):(e.consume(Q),O)}function _(Q){return e.attempt(o,ae,k)(Q)}function k(Q){return e.enter("lineEnding"),e.consume(Q),e.exit("lineEnding"),I}function I(Q){return u>0&&pn(Q)?Rn(e,G,"linePrefix",u+1)(Q):G(Q)}function G(Q){return Q===null||Ft(Q)?e.check(Jx,_,ae)(Q):(e.enter("codeFlowValue"),Z(Q))}function Z(Q){return Q===null||Ft(Q)?(e.exit("codeFlowValue"),G(Q)):(e.consume(Q),Z)}function ae(Q){return e.exit("codeFenced"),i(Q)}function te(Q,le,ce){let me=0;return Pe;function Pe(Ge){return Q.enter("lineEnding"),Q.consume(Ge),Q.exit("lineEnding"),be}function be(Ge){return Q.enter("codeFencedFence"),pn(Ge)?Rn(Q,fe,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Ge):fe(Ge)}function fe(Ge){return Ge===d?(Q.enter("codeFencedFenceSequence"),ve(Ge)):ce(Ge)}function ve(Ge){return Ge===d?(me++,Q.consume(Ge),ve):me>=h?(Q.exit("codeFencedFenceSequence"),pn(Ge)?Rn(Q,Fe,"whitespace")(Ge):Fe(Ge)):ce(Ge)}function Fe(Ge){return Ge===null||Ft(Ge)?(Q.exit("codeFencedFence"),le(Ge)):ce(Ge)}}}function pU(e,i,t){const n=this;return o;function o(h){return h===null?t(h):(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),u)}function u(h){return n.parser.lazy[n.now().line]?t(h):i(h)}}const lf={name:"codeIndented",tokenize:mU},fU={tokenize:gU,partial:!0};function mU(e,i,t){const n=this;return o;function o(m){return e.enter("codeIndented"),Rn(e,u,"linePrefix",5)(m)}function u(m){const v=n.events[n.events.length-1];return v&&v[1].type==="linePrefix"&&v[2].sliceSerialize(v[1],!0).length>=4?h(m):t(m)}function h(m){return m===null?p(m):Ft(m)?e.attempt(fU,h,p)(m):(e.enter("codeFlowValue"),d(m))}function d(m){return m===null||Ft(m)?(e.exit("codeFlowValue"),h(m)):(e.consume(m),d)}function p(m){return e.exit("codeIndented"),i(m)}}function gU(e,i,t){const n=this;return o;function o(h){return n.parser.lazy[n.now().line]?t(h):Ft(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),o):Rn(e,u,"linePrefix",5)(h)}function u(h){const d=n.events[n.events.length-1];return d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?i(h):Ft(h)?o(h):t(h)}}const vU={name:"codeText",tokenize:bU,resolve:yU,previous:wU};function yU(e){let i=e.length-4,t=3,n,o;if((e[t][1].type==="lineEnding"||e[t][1].type==="space")&&(e[i][1].type==="lineEnding"||e[i][1].type==="space")){for(n=t;++n<i;)if(e[n][1].type==="codeTextData"){e[t][1].type="codeTextPadding",e[i][1].type="codeTextPadding",t+=2,i-=2;break}}for(n=t-1,i++;++n<=i;)o===void 0?n!==i&&e[n][1].type!=="lineEnding"&&(o=n):(n===i||e[n][1].type==="lineEnding")&&(e[o][1].type="codeTextData",n!==o+2&&(e[o][1].end=e[n-1][1].end,e.splice(o+2,n-o-2),i-=n-o-2,n=o+2),o=void 0);return e}function wU(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function bU(e,i,t){let n=0,o,u;return h;function h(x){return e.enter("codeText"),e.enter("codeTextSequence"),d(x)}function d(x){return x===96?(e.consume(x),n++,d):(e.exit("codeTextSequence"),p(x))}function p(x){return x===null?t(x):x===32?(e.enter("space"),e.consume(x),e.exit("space"),p):x===96?(u=e.enter("codeTextSequence"),o=0,v(x)):Ft(x)?(e.enter("lineEnding"),e.consume(x),e.exit("lineEnding"),p):(e.enter("codeTextData"),m(x))}function m(x){return x===null||x===32||x===96||Ft(x)?(e.exit("codeTextData"),p(x)):(e.consume(x),m)}function v(x){return x===96?(e.consume(x),o++,v):o===n?(e.exit("codeTextSequence"),e.exit("codeText"),i(x)):(u.type="codeTextData",m(x))}}function ZC(e){const i={};let t=-1,n,o,u,h,d,p,m;for(;++t<e.length;){for(;t in i;)t=i[t];if(n=e[t],t&&n[1].type==="chunkFlow"&&e[t-1][1].type==="listItemPrefix"&&(p=n[1]._tokenizer.events,u=0,u<p.length&&p[u][1].type==="lineEndingBlank"&&(u+=2),u<p.length&&p[u][1].type==="content"))for(;++u<p.length&&p[u][1].type!=="content";)p[u][1].type==="chunkText"&&(p[u][1]._isInFirstContentOfListItem=!0,u++);if(n[0]==="enter")n[1].contentType&&(Object.assign(i,xU(e,t)),t=i[t],m=!0);else if(n[1]._container){for(u=t,o=void 0;u--&&(h=e[u],h[1].type==="lineEnding"||h[1].type==="lineEndingBlank");)h[0]==="enter"&&(o&&(e[o][1].type="lineEndingBlank"),h[1].type="lineEnding",o=u);o&&(n[1].end=Object.assign({},e[o][1].start),d=e.slice(o,t),d.unshift(n),mr(e,o,t-o+1,d))}}return!m}function xU(e,i){const t=e[i][1],n=e[i][2];let o=i-1;const u=[],h=t._tokenizer||n.parser[t.contentType](t.start),d=h.events,p=[],m={};let v,x,E=-1,C=t,O=0,_=0;const k=[_];for(;C;){for(;e[++o][1]!==C;);u.push(o),C._tokenizer||(v=n.sliceStream(C),C.next||v.push(null),x&&h.defineSkip(C.start),C._isInFirstContentOfListItem&&(h._gfmTasklistFirstContentOfListItem=!0),h.write(v),C._isInFirstContentOfListItem&&(h._gfmTasklistFirstContentOfListItem=void 0)),x=C,C=C.next}for(C=t;++E<d.length;)d[E][0]==="exit"&&d[E-1][0]==="enter"&&d[E][1].type===d[E-1][1].type&&d[E][1].start.line!==d[E][1].end.line&&(_=E+1,k.push(_),C._tokenizer=void 0,C.previous=void 0,C=C.next);for(h.events=[],C?(C._tokenizer=void 0,C.previous=void 0):k.pop(),E=k.length;E--;){const I=d.slice(k[E],k[E+1]),G=u.pop();p.unshift([G,G+I.length-1]),mr(e,G,2,I)}for(E=-1;++E<p.length;)m[O+p[E][0]]=O+p[E][1],O+=p[E][1]-p[E][0]-1;return m}const SU={tokenize:CU,resolve:TU},EU={tokenize:PU,partial:!0};function TU(e){return ZC(e),e}function CU(e,i){let t;return n;function n(d){return e.enter("content"),t=e.enter("chunkContent",{contentType:"content"}),o(d)}function o(d){return d===null?u(d):Ft(d)?e.check(EU,h,u)(d):(e.consume(d),o)}function u(d){return e.exit("chunkContent"),e.exit("content"),i(d)}function h(d){return e.consume(d),e.exit("chunkContent"),t.next=e.enter("chunkContent",{contentType:"content",previous:t}),t=t.next,o}}function PU(e,i,t){const n=this;return o;function o(h){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),Rn(e,u,"linePrefix")}function u(h){if(h===null||Ft(h))return t(h);const d=n.events[n.events.length-1];return!n.parser.constructs.disable.null.includes("codeIndented")&&d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?i(h):e.interrupt(n.parser.constructs.flow,t,i)(h)}}function XC(e,i,t,n,o,u,h,d,p){const m=p||Number.POSITIVE_INFINITY;let v=0;return x;function x(I){return I===60?(e.enter(n),e.enter(o),e.enter(u),e.consume(I),e.exit(u),E):I===null||I===32||I===41||Qf(I)?t(I):(e.enter(n),e.enter(h),e.enter(d),e.enter("chunkString",{contentType:"string"}),_(I))}function E(I){return I===62?(e.enter(u),e.consume(I),e.exit(u),e.exit(o),e.exit(n),i):(e.enter(d),e.enter("chunkString",{contentType:"string"}),C(I))}function C(I){return I===62?(e.exit("chunkString"),e.exit(d),E(I)):I===null||I===60||Ft(I)?t(I):(e.consume(I),I===92?O:C)}function O(I){return I===60||I===62||I===92?(e.consume(I),C):C(I)}function _(I){return!v&&(I===null||I===41||ki(I))?(e.exit("chunkString"),e.exit(d),e.exit(h),e.exit(n),i(I)):v<m&&I===40?(e.consume(I),v++,_):I===41?(e.consume(I),v--,_):I===null||I===32||I===40||Qf(I)?t(I):(e.consume(I),I===92?k:_)}function k(I){return I===40||I===41||I===92?(e.consume(I),_):_(I)}}function YC(e,i,t,n,o,u){const h=this;let d=0,p;return m;function m(C){return e.enter(n),e.enter(o),e.consume(C),e.exit(o),e.enter(u),v}function v(C){return d>999||C===null||C===91||C===93&&!p||C===94&&!d&&"_hiddenFootnoteSupport"in h.parser.constructs?t(C):C===93?(e.exit(u),e.enter(o),e.consume(C),e.exit(o),e.exit(n),i):Ft(C)?(e.enter("lineEnding"),e.consume(C),e.exit("lineEnding"),v):(e.enter("chunkString",{contentType:"string"}),x(C))}function x(C){return C===null||C===91||C===93||Ft(C)||d++>999?(e.exit("chunkString"),v(C)):(e.consume(C),p||(p=!pn(C)),C===92?E:x)}function E(C){return C===91||C===92||C===93?(e.consume(C),d++,x):x(C)}}function $C(e,i,t,n,o,u){let h;return d;function d(E){return E===34||E===39||E===40?(e.enter(n),e.enter(o),e.consume(E),e.exit(o),h=E===40?41:E,p):t(E)}function p(E){return E===h?(e.enter(o),e.consume(E),e.exit(o),e.exit(n),i):(e.enter(u),m(E))}function m(E){return E===h?(e.exit(u),p(h)):E===null?t(E):Ft(E)?(e.enter("lineEnding"),e.consume(E),e.exit("lineEnding"),Rn(e,m,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),v(E))}function v(E){return E===h||E===null||Ft(E)?(e.exit("chunkString"),m(E)):(e.consume(E),E===92?x:v)}function x(E){return E===h||E===92?(e.consume(E),v):v(E)}}function sl(e,i){let t;return n;function n(o){return Ft(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),t=!0,n):pn(o)?Rn(e,n,t?"linePrefix":"lineSuffix")(o):i(o)}}function Hs(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const _U={name:"definition",tokenize:RU},kU={tokenize:OU,partial:!0};function RU(e,i,t){const n=this;let o;return u;function u(C){return e.enter("definition"),h(C)}function h(C){return YC.call(n,e,d,t,"definitionLabel","definitionLabelMarker","definitionLabelString")(C)}function d(C){return o=Hs(n.sliceSerialize(n.events[n.events.length-1][1]).slice(1,-1)),C===58?(e.enter("definitionMarker"),e.consume(C),e.exit("definitionMarker"),p):t(C)}function p(C){return ki(C)?sl(e,m)(C):m(C)}function m(C){return XC(e,v,t,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(C)}function v(C){return e.attempt(kU,x,x)(C)}function x(C){return pn(C)?Rn(e,E,"whitespace")(C):E(C)}function E(C){return C===null||Ft(C)?(e.exit("definition"),n.parser.defined.push(o),i(C)):t(C)}}function OU(e,i,t){return n;function n(d){return ki(d)?sl(e,o)(d):t(d)}function o(d){return $C(e,u,t,"definitionTitle","definitionTitleMarker","definitionTitleString")(d)}function u(d){return pn(d)?Rn(e,h,"whitespace")(d):h(d)}function h(d){return d===null||Ft(d)?i(d):t(d)}}const AU={name:"hardBreakEscape",tokenize:DU};function DU(e,i,t){return n;function n(u){return e.enter("hardBreakEscape"),e.consume(u),o}function o(u){return Ft(u)?(e.exit("hardBreakEscape"),i(u)):t(u)}}const IU={name:"headingAtx",tokenize:LU,resolve:MU};function MU(e,i){let t=e.length-2,n=3,o,u;return e[n][1].type==="whitespace"&&(n+=2),t-2>n&&e[t][1].type==="whitespace"&&(t-=2),e[t][1].type==="atxHeadingSequence"&&(n===t-1||t-4>n&&e[t-2][1].type==="whitespace")&&(t-=n+1===t?2:4),t>n&&(o={type:"atxHeadingText",start:e[n][1].start,end:e[t][1].end},u={type:"chunkText",start:e[n][1].start,end:e[t][1].end,contentType:"text"},mr(e,n,t-n+1,[["enter",o,i],["enter",u,i],["exit",u,i],["exit",o,i]])),e}function LU(e,i,t){let n=0;return o;function o(v){return e.enter("atxHeading"),u(v)}function u(v){return e.enter("atxHeadingSequence"),h(v)}function h(v){return v===35&&n++<6?(e.consume(v),h):v===null||ki(v)?(e.exit("atxHeadingSequence"),d(v)):t(v)}function d(v){return v===35?(e.enter("atxHeadingSequence"),p(v)):v===null||Ft(v)?(e.exit("atxHeading"),i(v)):pn(v)?Rn(e,d,"whitespace")(v):(e.enter("atxHeadingText"),m(v))}function p(v){return v===35?(e.consume(v),p):(e.exit("atxHeadingSequence"),d(v))}function m(v){return v===null||v===35||ki(v)?(e.exit("atxHeadingText"),d(v)):(e.consume(v),m)}}const NU=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],tS=["pre","script","style","textarea"],zU={name:"htmlFlow",tokenize:BU,resolveTo:FU,concrete:!0},jU={tokenize:WU,partial:!0},HU={tokenize:UU,partial:!0};function FU(e){let i=e.length;for(;i--&&!(e[i][0]==="enter"&&e[i][1].type==="htmlFlow"););return i>1&&e[i-2][1].type==="linePrefix"&&(e[i][1].start=e[i-2][1].start,e[i+1][1].start=e[i-2][1].start,e.splice(i-2,2)),e}function BU(e,i,t){const n=this;let o,u,h,d,p;return m;function m(J){return v(J)}function v(J){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(J),x}function x(J){return J===33?(e.consume(J),E):J===47?(e.consume(J),u=!0,_):J===63?(e.consume(J),o=3,n.interrupt?i:$):pr(J)?(e.consume(J),h=String.fromCharCode(J),k):t(J)}function E(J){return J===45?(e.consume(J),o=2,C):J===91?(e.consume(J),o=5,d=0,O):pr(J)?(e.consume(J),o=4,n.interrupt?i:$):t(J)}function C(J){return J===45?(e.consume(J),n.interrupt?i:$):t(J)}function O(J){const Et="CDATA[";return J===Et.charCodeAt(d++)?(e.consume(J),d===Et.length?n.interrupt?i:fe:O):t(J)}function _(J){return pr(J)?(e.consume(J),h=String.fromCharCode(J),k):t(J)}function k(J){if(J===null||J===47||J===62||ki(J)){const Et=J===47,yt=h.toLowerCase();return!Et&&!u&&tS.includes(yt)?(o=1,n.interrupt?i(J):fe(J)):NU.includes(h.toLowerCase())?(o=6,Et?(e.consume(J),I):n.interrupt?i(J):fe(J)):(o=7,n.interrupt&&!n.parser.lazy[n.now().line]?t(J):u?G(J):Z(J))}return J===45||Fi(J)?(e.consume(J),h+=String.fromCharCode(J),k):t(J)}function I(J){return J===62?(e.consume(J),n.interrupt?i:fe):t(J)}function G(J){return pn(J)?(e.consume(J),G):Pe(J)}function Z(J){return J===47?(e.consume(J),Pe):J===58||J===95||pr(J)?(e.consume(J),ae):pn(J)?(e.consume(J),Z):Pe(J)}function ae(J){return J===45||J===46||J===58||J===95||Fi(J)?(e.consume(J),ae):te(J)}function te(J){return J===61?(e.consume(J),Q):pn(J)?(e.consume(J),te):Z(J)}function Q(J){return J===null||J===60||J===61||J===62||J===96?t(J):J===34||J===39?(e.consume(J),p=J,le):pn(J)?(e.consume(J),Q):ce(J)}function le(J){return J===p?(e.consume(J),p=null,me):J===null||Ft(J)?t(J):(e.consume(J),le)}function ce(J){return J===null||J===34||J===39||J===47||J===60||J===61||J===62||J===96||ki(J)?te(J):(e.consume(J),ce)}function me(J){return J===47||J===62||pn(J)?Z(J):t(J)}function Pe(J){return J===62?(e.consume(J),be):t(J)}function be(J){return J===null||Ft(J)?fe(J):pn(J)?(e.consume(J),be):t(J)}function fe(J){return J===45&&o===2?(e.consume(J),Te):J===60&&o===1?(e.consume(J),ye):J===62&&o===4?(e.consume(J),Le):J===63&&o===3?(e.consume(J),$):J===93&&o===5?(e.consume(J),_e):Ft(J)&&(o===6||o===7)?(e.exit("htmlFlowData"),e.check(jU,st,ve)(J)):J===null||Ft(J)?(e.exit("htmlFlowData"),ve(J)):(e.consume(J),fe)}function ve(J){return e.check(HU,Fe,st)(J)}function Fe(J){return e.enter("lineEnding"),e.consume(J),e.exit("lineEnding"),Ge}function Ge(J){return J===null||Ft(J)?ve(J):(e.enter("htmlFlowData"),fe(J))}function Te(J){return J===45?(e.consume(J),$):fe(J)}function ye(J){return J===47?(e.consume(J),h="",ke):fe(J)}function ke(J){if(J===62){const Et=h.toLowerCase();return tS.includes(Et)?(e.consume(J),Le):fe(J)}return pr(J)&&h.length<8?(e.consume(J),h+=String.fromCharCode(J),ke):fe(J)}function _e(J){return J===93?(e.consume(J),$):fe(J)}function $(J){return J===62?(e.consume(J),Le):J===45&&o===2?(e.consume(J),$):fe(J)}function Le(J){return J===null||Ft(J)?(e.exit("htmlFlowData"),st(J)):(e.consume(J),Le)}function st(J){return e.exit("htmlFlow"),i(J)}}function UU(e,i,t){const n=this;return o;function o(h){return Ft(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),u):t(h)}function u(h){return n.parser.lazy[n.now().line]?t(h):i(h)}}function WU(e,i,t){return n;function n(o){return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),e.attempt($c,i,t)}}const VU={name:"htmlText",tokenize:GU};function GU(e,i,t){const n=this;let o,u,h;return d;function d($){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume($),p}function p($){return $===33?(e.consume($),m):$===47?(e.consume($),te):$===63?(e.consume($),Z):pr($)?(e.consume($),ce):t($)}function m($){return $===45?(e.consume($),v):$===91?(e.consume($),u=0,O):pr($)?(e.consume($),G):t($)}function v($){return $===45?(e.consume($),C):t($)}function x($){return $===null?t($):$===45?(e.consume($),E):Ft($)?(h=x,ye($)):(e.consume($),x)}function E($){return $===45?(e.consume($),C):x($)}function C($){return $===62?Te($):$===45?E($):x($)}function O($){const Le="CDATA[";return $===Le.charCodeAt(u++)?(e.consume($),u===Le.length?_:O):t($)}function _($){return $===null?t($):$===93?(e.consume($),k):Ft($)?(h=_,ye($)):(e.consume($),_)}function k($){return $===93?(e.consume($),I):_($)}function I($){return $===62?Te($):$===93?(e.consume($),I):_($)}function G($){return $===null||$===62?Te($):Ft($)?(h=G,ye($)):(e.consume($),G)}function Z($){return $===null?t($):$===63?(e.consume($),ae):Ft($)?(h=Z,ye($)):(e.consume($),Z)}function ae($){return $===62?Te($):Z($)}function te($){return pr($)?(e.consume($),Q):t($)}function Q($){return $===45||Fi($)?(e.consume($),Q):le($)}function le($){return Ft($)?(h=le,ye($)):pn($)?(e.consume($),le):Te($)}function ce($){return $===45||Fi($)?(e.consume($),ce):$===47||$===62||ki($)?me($):t($)}function me($){return $===47?(e.consume($),Te):$===58||$===95||pr($)?(e.consume($),Pe):Ft($)?(h=me,ye($)):pn($)?(e.consume($),me):Te($)}function Pe($){return $===45||$===46||$===58||$===95||Fi($)?(e.consume($),Pe):be($)}function be($){return $===61?(e.consume($),fe):Ft($)?(h=be,ye($)):pn($)?(e.consume($),be):me($)}function fe($){return $===null||$===60||$===61||$===62||$===96?t($):$===34||$===39?(e.consume($),o=$,ve):Ft($)?(h=fe,ye($)):pn($)?(e.consume($),fe):(e.consume($),Fe)}function ve($){return $===o?(e.consume($),o=void 0,Ge):$===null?t($):Ft($)?(h=ve,ye($)):(e.consume($),ve)}function Fe($){return $===null||$===34||$===39||$===60||$===61||$===96?t($):$===47||$===62||ki($)?me($):(e.consume($),Fe)}function Ge($){return $===47||$===62||ki($)?me($):t($)}function Te($){return $===62?(e.consume($),e.exit("htmlTextData"),e.exit("htmlText"),i):t($)}function ye($){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume($),e.exit("lineEnding"),ke}function ke($){return pn($)?Rn(e,_e,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)($):_e($)}function _e($){return e.enter("htmlTextData"),h($)}}const og={name:"labelEnd",tokenize:KU,resolveTo:$U,resolveAll:YU},qU={tokenize:QU},ZU={tokenize:JU},XU={tokenize:e8};function YU(e){let i=-1;for(;++i<e.length;){const t=e[i][1];(t.type==="labelImage"||t.type==="labelLink"||t.type==="labelEnd")&&(e.splice(i+1,t.type==="labelImage"?4:2),t.type="data",i++)}return e}function $U(e,i){let t=e.length,n=0,o,u,h,d;for(;t--;)if(o=e[t][1],u){if(o.type==="link"||o.type==="labelLink"&&o._inactive)break;e[t][0]==="enter"&&o.type==="labelLink"&&(o._inactive=!0)}else if(h){if(e[t][0]==="enter"&&(o.type==="labelImage"||o.type==="labelLink")&&!o._balanced&&(u=t,o.type!=="labelLink")){n=2;break}}else o.type==="labelEnd"&&(h=t);const p={type:e[u][1].type==="labelLink"?"link":"image",start:Object.assign({},e[u][1].start),end:Object.assign({},e[e.length-1][1].end)},m={type:"label",start:Object.assign({},e[u][1].start),end:Object.assign({},e[h][1].end)},v={type:"labelText",start:Object.assign({},e[u+n+2][1].end),end:Object.assign({},e[h-2][1].start)};return d=[["enter",p,i],["enter",m,i]],d=Zi(d,e.slice(u+1,u+n+3)),d=Zi(d,[["enter",v,i]]),d=Zi(d,ig(i.parser.constructs.insideSpan.null,e.slice(u+n+4,h-3),i)),d=Zi(d,[["exit",v,i],e[h-2],e[h-1],["exit",m,i]]),d=Zi(d,e.slice(h+1)),d=Zi(d,[["exit",p,i]]),mr(e,u,e.length,d),e}function KU(e,i,t){const n=this;let o=n.events.length,u,h;for(;o--;)if((n.events[o][1].type==="labelImage"||n.events[o][1].type==="labelLink")&&!n.events[o][1]._balanced){u=n.events[o][1];break}return d;function d(E){return u?u._inactive?x(E):(h=n.parser.defined.includes(Hs(n.sliceSerialize({start:u.end,end:n.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(E),e.exit("labelMarker"),e.exit("labelEnd"),p):t(E)}function p(E){return E===40?e.attempt(qU,v,h?v:x)(E):E===91?e.attempt(ZU,v,h?m:x)(E):h?v(E):x(E)}function m(E){return e.attempt(XU,v,x)(E)}function v(E){return i(E)}function x(E){return u._balanced=!0,t(E)}}function QU(e,i,t){return n;function n(x){return e.enter("resource"),e.enter("resourceMarker"),e.consume(x),e.exit("resourceMarker"),o}function o(x){return ki(x)?sl(e,u)(x):u(x)}function u(x){return x===41?v(x):XC(e,h,d,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(x)}function h(x){return ki(x)?sl(e,p)(x):v(x)}function d(x){return t(x)}function p(x){return x===34||x===39||x===40?$C(e,m,t,"resourceTitle","resourceTitleMarker","resourceTitleString")(x):v(x)}function m(x){return ki(x)?sl(e,v)(x):v(x)}function v(x){return x===41?(e.enter("resourceMarker"),e.consume(x),e.exit("resourceMarker"),e.exit("resource"),i):t(x)}}function JU(e,i,t){const n=this;return o;function o(d){return YC.call(n,e,u,h,"reference","referenceMarker","referenceString")(d)}function u(d){return n.parser.defined.includes(Hs(n.sliceSerialize(n.events[n.events.length-1][1]).slice(1,-1)))?i(d):t(d)}function h(d){return t(d)}}function e8(e,i,t){return n;function n(u){return e.enter("reference"),e.enter("referenceMarker"),e.consume(u),e.exit("referenceMarker"),o}function o(u){return u===93?(e.enter("referenceMarker"),e.consume(u),e.exit("referenceMarker"),e.exit("reference"),i):t(u)}}const t8={name:"labelStartImage",tokenize:n8,resolveAll:og.resolveAll};function n8(e,i,t){const n=this;return o;function o(d){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(d),e.exit("labelImageMarker"),u}function u(d){return d===91?(e.enter("labelMarker"),e.consume(d),e.exit("labelMarker"),e.exit("labelImage"),h):t(d)}function h(d){return d===94&&"_hiddenFootnoteSupport"in n.parser.constructs?t(d):i(d)}}const i8={name:"labelStartLink",tokenize:r8,resolveAll:og.resolveAll};function r8(e,i,t){const n=this;return o;function o(h){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(h),e.exit("labelMarker"),e.exit("labelLink"),u}function u(h){return h===94&&"_hiddenFootnoteSupport"in n.parser.constructs?t(h):i(h)}}const uf={name:"lineEnding",tokenize:o8};function o8(e,i){return t;function t(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),Rn(e,i,"linePrefix")}}const pc={name:"thematicBreak",tokenize:s8};function s8(e,i,t){let n=0,o;return u;function u(m){return e.enter("thematicBreak"),h(m)}function h(m){return o=m,d(m)}function d(m){return m===o?(e.enter("thematicBreakSequence"),p(m)):n>=3&&(m===null||Ft(m))?(e.exit("thematicBreak"),i(m)):t(m)}function p(m){return m===o?(e.consume(m),n++,p):(e.exit("thematicBreakSequence"),pn(m)?Rn(e,d,"whitespace")(m):d(m))}}const Pi={name:"list",tokenize:u8,continuation:{tokenize:c8},exit:h8},a8={tokenize:p8,partial:!0},l8={tokenize:d8,partial:!0};function u8(e,i,t){const n=this,o=n.events[n.events.length-1];let u=o&&o[1].type==="linePrefix"?o[2].sliceSerialize(o[1],!0).length:0,h=0;return d;function d(C){const O=n.containerState.type||(C===42||C===43||C===45?"listUnordered":"listOrdered");if(O==="listUnordered"?!n.containerState.marker||C===n.containerState.marker:Jf(C)){if(n.containerState.type||(n.containerState.type=O,e.enter(O,{_container:!0})),O==="listUnordered")return e.enter("listItemPrefix"),C===42||C===45?e.check(pc,t,m)(C):m(C);if(!n.interrupt||C===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),p(C)}return t(C)}function p(C){return Jf(C)&&++h<10?(e.consume(C),p):(!n.interrupt||h<2)&&(n.containerState.marker?C===n.containerState.marker:C===41||C===46)?(e.exit("listItemValue"),m(C)):t(C)}function m(C){return e.enter("listItemMarker"),e.consume(C),e.exit("listItemMarker"),n.containerState.marker=n.containerState.marker||C,e.check($c,n.interrupt?t:v,e.attempt(a8,E,x))}function v(C){return n.containerState.initialBlankLine=!0,u++,E(C)}function x(C){return pn(C)?(e.enter("listItemPrefixWhitespace"),e.consume(C),e.exit("listItemPrefixWhitespace"),E):t(C)}function E(C){return n.containerState.size=u+n.sliceSerialize(e.exit("listItemPrefix"),!0).length,i(C)}}function c8(e,i,t){const n=this;return n.containerState._closeFlow=void 0,e.check($c,o,u);function o(d){return n.containerState.furtherBlankLines=n.containerState.furtherBlankLines||n.containerState.initialBlankLine,Rn(e,i,"listItemIndent",n.containerState.size+1)(d)}function u(d){return n.containerState.furtherBlankLines||!pn(d)?(n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,h(d)):(n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,e.attempt(l8,i,h)(d))}function h(d){return n.containerState._closeFlow=!0,n.interrupt=void 0,Rn(e,e.attempt(Pi,i,t),"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(d)}}function d8(e,i,t){const n=this;return Rn(e,o,"listItemIndent",n.containerState.size+1);function o(u){const h=n.events[n.events.length-1];return h&&h[1].type==="listItemIndent"&&h[2].sliceSerialize(h[1],!0).length===n.containerState.size?i(u):t(u)}}function h8(e){e.exit(this.containerState.type)}function p8(e,i,t){const n=this;return Rn(e,o,"listItemPrefixWhitespace",n.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function o(u){const h=n.events[n.events.length-1];return!pn(u)&&h&&h[1].type==="listItemPrefixWhitespace"?i(u):t(u)}}const nS={name:"setextUnderline",tokenize:m8,resolveTo:f8};function f8(e,i){let t=e.length,n,o,u;for(;t--;)if(e[t][0]==="enter"){if(e[t][1].type==="content"){n=t;break}e[t][1].type==="paragraph"&&(o=t)}else e[t][1].type==="content"&&e.splice(t,1),!u&&e[t][1].type==="definition"&&(u=t);const h={type:"setextHeading",start:Object.assign({},e[o][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[o][1].type="setextHeadingText",u?(e.splice(o,0,["enter",h,i]),e.splice(u+1,0,["exit",e[n][1],i]),e[n][1].end=Object.assign({},e[u][1].end)):e[n][1]=h,e.push(["exit",h,i]),e}function m8(e,i,t){const n=this;let o;return u;function u(m){let v=n.events.length,x;for(;v--;)if(n.events[v][1].type!=="lineEnding"&&n.events[v][1].type!=="linePrefix"&&n.events[v][1].type!=="content"){x=n.events[v][1].type==="paragraph";break}return!n.parser.lazy[n.now().line]&&(n.interrupt||x)?(e.enter("setextHeadingLine"),o=m,h(m)):t(m)}function h(m){return e.enter("setextHeadingLineSequence"),d(m)}function d(m){return m===o?(e.consume(m),d):(e.exit("setextHeadingLineSequence"),pn(m)?Rn(e,p,"lineSuffix")(m):p(m))}function p(m){return m===null||Ft(m)?(e.exit("setextHeadingLine"),i(m)):t(m)}}const g8={tokenize:v8};function v8(e){const i=this,t=e.attempt($c,n,e.attempt(this.parser.constructs.flowInitial,o,Rn(e,e.attempt(this.parser.constructs.flow,o,e.attempt(SU,o)),"linePrefix")));return t;function n(u){if(u===null){e.consume(u);return}return e.enter("lineEndingBlank"),e.consume(u),e.exit("lineEndingBlank"),i.currentConstruct=void 0,t}function o(u){if(u===null){e.consume(u);return}return e.enter("lineEnding"),e.consume(u),e.exit("lineEnding"),i.currentConstruct=void 0,t}}const y8={resolveAll:QC()},w8=KC("string"),b8=KC("text");function KC(e){return{tokenize:i,resolveAll:QC(e==="text"?x8:void 0)};function i(t){const n=this,o=this.parser.constructs[e],u=t.attempt(o,h,d);return h;function h(v){return m(v)?u(v):d(v)}function d(v){if(v===null){t.consume(v);return}return t.enter("data"),t.consume(v),p}function p(v){return m(v)?(t.exit("data"),u(v)):(t.consume(v),p)}function m(v){if(v===null)return!0;const x=o[v];let E=-1;if(x)for(;++E<x.length;){const C=x[E];if(!C.previous||C.previous.call(n,n.previous))return!0}return!1}}}function QC(e){return i;function i(t,n){let o=-1,u;for(;++o<=t.length;)u===void 0?t[o]&&t[o][1].type==="data"&&(u=o,o++):(!t[o]||t[o][1].type!=="data")&&(o!==u+2&&(t[u][1].end=t[o-1][1].end,t.splice(u+2,o-u-2),o=u+2),u=void 0);return e?e(t,n):t}}function x8(e,i){let t=0;for(;++t<=e.length;)if((t===e.length||e[t][1].type==="lineEnding")&&e[t-1][1].type==="data"){const n=e[t-1][1],o=i.sliceStream(n);let u=o.length,h=-1,d=0,p;for(;u--;){const m=o[u];if(typeof m=="string"){for(h=m.length;m.charCodeAt(h-1)===32;)d++,h--;if(h)break;h=-1}else if(m===-2)p=!0,d++;else if(m!==-1){u++;break}}if(d){const m={type:t===e.length||p||d<2?"lineSuffix":"hardBreakTrailing",start:{line:n.end.line,column:n.end.column-d,offset:n.end.offset-d,_index:n.start._index+u,_bufferIndex:u?h:n.start._bufferIndex+h},end:Object.assign({},n.end)};n.end=Object.assign({},m.start),n.start.offset===n.end.offset?Object.assign(n,m):(e.splice(t,0,["enter",m,i],["exit",m,i]),t+=2)}t++}return e}function S8(e,i,t){let n=Object.assign(t?Object.assign({},t):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const o={},u=[];let h=[],d=[];const p={consume:G,enter:Z,exit:ae,attempt:le(te),check:le(Q),interrupt:le(Q,{interrupt:!0})},m={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:C,sliceSerialize:E,now:O,defineSkip:_,write:x};let v=i.tokenize.call(m,p);return i.resolveAll&&u.push(i),m;function x(be){return h=Zi(h,be),k(),h[h.length-1]!==null?[]:(ce(i,0),m.events=ig(u,m.events,m),m.events)}function E(be,fe){return T8(C(be),fe)}function C(be){return E8(h,be)}function O(){const{line:be,column:fe,offset:ve,_index:Fe,_bufferIndex:Ge}=n;return{line:be,column:fe,offset:ve,_index:Fe,_bufferIndex:Ge}}function _(be){o[be.line]=be.column,Pe()}function k(){let be;for(;n._index<h.length;){const fe=h[n._index];if(typeof fe=="string")for(be=n._index,n._bufferIndex<0&&(n._bufferIndex=0);n._index===be&&n._bufferIndex<fe.length;)I(fe.charCodeAt(n._bufferIndex));else I(fe)}}function I(be){v=v(be)}function G(be){Ft(be)?(n.line++,n.column=1,n.offset+=be===-3?2:1,Pe()):be!==-1&&(n.column++,n.offset++),n._bufferIndex<0?n._index++:(n._bufferIndex++,n._bufferIndex===h[n._index].length&&(n._bufferIndex=-1,n._index++)),m.previous=be}function Z(be,fe){const ve=fe||{};return ve.type=be,ve.start=O(),m.events.push(["enter",ve,m]),d.push(ve),ve}function ae(be){const fe=d.pop();return fe.end=O(),m.events.push(["exit",fe,m]),fe}function te(be,fe){ce(be,fe.from)}function Q(be,fe){fe.restore()}function le(be,fe){return ve;function ve(Fe,Ge,Te){let ye,ke,_e,$;return Array.isArray(Fe)?st(Fe):"tokenize"in Fe?st([Fe]):Le(Fe);function Le(mt){return Tt;function Tt(Bt){const At=Bt!==null&&mt[Bt],at=Bt!==null&&mt.null,$e=[...Array.isArray(At)?At:At?[At]:[],...Array.isArray(at)?at:at?[at]:[]];return st($e)(Bt)}}function st(mt){return ye=mt,ke=0,mt.length===0?Te:J(mt[ke])}function J(mt){return Tt;function Tt(Bt){return $=me(),_e=mt,mt.partial||(m.currentConstruct=mt),mt.name&&m.parser.constructs.disable.null.includes(mt.name)?yt():mt.tokenize.call(fe?Object.assign(Object.create(m),fe):m,p,Et,yt)(Bt)}}function Et(mt){return be(_e,$),Ge}function yt(mt){return $.restore(),++ke<ye.length?J(ye[ke]):Te}}}function ce(be,fe){be.resolveAll&&!u.includes(be)&&u.push(be),be.resolve&&mr(m.events,fe,m.events.length-fe,be.resolve(m.events.slice(fe),m)),be.resolveTo&&(m.events=be.resolveTo(m.events,m))}function me(){const be=O(),fe=m.previous,ve=m.currentConstruct,Fe=m.events.length,Ge=Array.from(d);return{restore:Te,from:Fe};function Te(){n=be,m.previous=fe,m.currentConstruct=ve,m.events.length=Fe,d=Ge,Pe()}}function Pe(){n.line in o&&n.column<2&&(n.column=o[n.line],n.offset+=o[n.line]-1)}}function E8(e,i){const t=i.start._index,n=i.start._bufferIndex,o=i.end._index,u=i.end._bufferIndex;let h;if(t===o)h=[e[t].slice(n,u)];else{if(h=e.slice(t,o),n>-1){const d=h[0];typeof d=="string"?h[0]=d.slice(n):h.shift()}u>0&&h.push(e[o].slice(0,u))}return h}function T8(e,i){let t=-1;const n=[];let o;for(;++t<e.length;){const u=e[t];let h;if(typeof u=="string")h=u;else switch(u){case-5:{h="\r";break}case-4:{h=`
`;break}case-3:{h=`\r
`;break}case-2:{h=i?" ":"	";break}case-1:{if(!i&&o)continue;h=" ";break}default:h=String.fromCharCode(u)}o=u===-2,n.push(h)}return n.join("")}const C8={42:Pi,43:Pi,45:Pi,48:Pi,49:Pi,50:Pi,51:Pi,52:Pi,53:Pi,54:Pi,55:Pi,56:Pi,57:Pi,62:VC},P8={91:_U},_8={[-2]:lf,[-1]:lf,32:lf},k8={35:IU,42:pc,45:[nS,pc],60:zU,61:nS,95:pc,96:eS,126:eS},R8={38:qC,92:GC},O8={[-5]:uf,[-4]:uf,[-3]:uf,33:t8,38:qC,42:em,60:[rU,VU],91:i8,92:[AU,GC],93:og,95:em,96:vU},A8={null:[em,y8]},D8={null:[42,95]},I8={null:[]},M8=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:D8,contentInitial:P8,disable:I8,document:C8,flow:k8,flowInitial:_8,insideSpan:A8,string:R8,text:O8},Symbol.toStringTag,{value:"Module"}));function L8(e){const i=U1([M8,...(e||{}).extensions||[]]),t={defined:[],lazy:{},constructs:i,content:n(K1),document:n(J1),flow:n(g8),string:n(w8),text:n(b8)};return t;function n(o){return u;function u(h){return S8(t,o,h)}}}const iS=/[\0\t\n\r]/g;function N8(){let e=1,i="",t=!0,n;return o;function o(u,h,d){const p=[];let m,v,x,E,C;for(u=i+u.toString(h),x=0,i="",t&&(u.charCodeAt(0)===65279&&x++,t=void 0);x<u.length;){if(iS.lastIndex=x,m=iS.exec(u),E=m&&m.index!==void 0?m.index:u.length,C=u.charCodeAt(E),!m){i=u.slice(x);break}if(C===10&&x===E&&n)p.push(-3),n=void 0;else switch(n&&(p.push(-5),n=void 0),x<E&&(p.push(u.slice(x,E)),e+=E-x),C){case 0:{p.push(65533),e++;break}case 9:{for(v=Math.ceil(e/4)*4,p.push(-2);e++<v;)p.push(-1);break}case 10:{p.push(-4),e=1;break}default:n=!0,e=1}x=E+1}return d&&(n&&p.push(-5),i&&p.push(i),p.push(null)),p}}function z8(e){for(;!ZC(e););return e}function JC(e,i){const t=Number.parseInt(e,i);return t<9||t===11||t>13&&t<32||t>126&&t<160||t>55295&&t<57344||t>64975&&t<65008||(t&65535)===65535||(t&65535)===65534||t>1114111?"�":String.fromCharCode(t)}const j8=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function H8(e){return e.replace(j8,F8)}function F8(e,i,t){if(i)return i;if(t.charCodeAt(0)===35){const n=t.charCodeAt(1),o=n===120||n===88;return JC(t.slice(o?2:1),o?16:10)}return rg(t)||e}const eP={}.hasOwnProperty,B8=function(e,i,t){return typeof i!="string"&&(t=i,i=void 0),U8(t)(z8(L8(t).document().write(N8()(e,i,!0))))};function U8(e){const i={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:d(ze),autolinkProtocol:be,autolinkEmail:be,atxHeading:d(Gt),blockQuote:d($e),characterEscape:be,characterReference:be,codeFenced:d(wt),codeFencedFenceInfo:p,codeFencedFenceMeta:p,codeIndented:d(wt,p),codeText:d(Lt,p),codeTextData:be,data:be,codeFlowValue:be,definition:d(tn),definitionDestinationString:p,definitionLabelString:p,definitionTitleString:p,emphasis:d(kt),hardBreakEscape:d(D),hardBreakTrailing:d(D),htmlFlow:d(K,p),htmlFlowData:be,htmlText:d(K,p),htmlTextData:be,image:d(we),label:p,link:d(ze),listItem:d(Qe),listItemValue:O,listOrdered:d(Ne,C),listUnordered:d(Ne),paragraph:d(Xe),reference:yt,referenceString:p,resourceDestinationString:p,resourceTitleString:p,setextHeading:d(Gt),strong:d(bt),thematicBreak:d(Dt)},exit:{atxHeading:v(),atxHeadingSequence:le,autolink:v(),autolinkEmail:at,autolinkProtocol:At,blockQuote:v(),characterEscapeValue:fe,characterReferenceMarkerHexadecimal:Tt,characterReferenceMarkerNumeric:Tt,characterReferenceValue:Bt,codeFenced:v(G),codeFencedFence:I,codeFencedFenceInfo:_,codeFencedFenceMeta:k,codeFlowValue:fe,codeIndented:v(Z),codeText:v(ye),codeTextData:fe,data:fe,definition:v(),definitionDestinationString:Q,definitionLabelString:ae,definitionTitleString:te,emphasis:v(),hardBreakEscape:v(Fe),hardBreakTrailing:v(Fe),htmlFlow:v(Ge),htmlFlowData:fe,htmlText:v(Te),htmlTextData:fe,image:v(_e),label:Le,labelText:$,lineEnding:ve,link:v(ke),listItem:v(),listOrdered:v(),listUnordered:v(),paragraph:v(),referenceString:mt,resourceDestinationString:st,resourceTitleString:J,resource:Et,setextHeading:v(Pe),setextHeadingLineSequence:me,setextHeadingText:ce,strong:v(),thematicBreak:v()}};tP(i,(e||{}).mdastExtensions||[]);const t={};return n;function n(he){let Ae={type:"root",children:[]};const L={stack:[Ae],tokenStack:[],config:i,enter:m,exit:x,buffer:p,resume:E,setData:u,getData:h},z=[];let W=-1;for(;++W<he.length;)if(he[W][1].type==="listOrdered"||he[W][1].type==="listUnordered")if(he[W][0]==="enter")z.push(W);else{const X=z.pop();W=o(he,X,W)}for(W=-1;++W<he.length;){const X=i[he[W][0]];eP.call(X,he[W][1].type)&&X[he[W][1].type].call(Object.assign({sliceSerialize:he[W][2].sliceSerialize},L),he[W][1])}if(L.tokenStack.length>0){const X=L.tokenStack[L.tokenStack.length-1];(X[1]||rS).call(L,void 0,X[0])}for(Ae.position={start:qr(he.length>0?he[0][1].start:{line:1,column:1,offset:0}),end:qr(he.length>0?he[he.length-2][1].end:{line:1,column:1,offset:0})},W=-1;++W<i.transforms.length;)Ae=i.transforms[W](Ae)||Ae;return Ae}function o(he,Ae,L){let z=Ae-1,W=-1,X=!1,Se,Ue,ft,je;for(;++z<=L;){const rt=he[z];if(rt[1].type==="listUnordered"||rt[1].type==="listOrdered"||rt[1].type==="blockQuote"?(rt[0]==="enter"?W++:W--,je=void 0):rt[1].type==="lineEndingBlank"?rt[0]==="enter"&&(Se&&!je&&!W&&!ft&&(ft=z),je=void 0):rt[1].type==="linePrefix"||rt[1].type==="listItemValue"||rt[1].type==="listItemMarker"||rt[1].type==="listItemPrefix"||rt[1].type==="listItemPrefixWhitespace"||(je=void 0),!W&&rt[0]==="enter"&&rt[1].type==="listItemPrefix"||W===-1&&rt[0]==="exit"&&(rt[1].type==="listUnordered"||rt[1].type==="listOrdered")){if(Se){let Cn=z;for(Ue=void 0;Cn--;){const Kt=he[Cn];if(Kt[1].type==="lineEnding"||Kt[1].type==="lineEndingBlank"){if(Kt[0]==="exit")continue;Ue&&(he[Ue][1].type="lineEndingBlank",X=!0),Kt[1].type="lineEnding",Ue=Cn}else if(!(Kt[1].type==="linePrefix"||Kt[1].type==="blockQuotePrefix"||Kt[1].type==="blockQuotePrefixWhitespace"||Kt[1].type==="blockQuoteMarker"||Kt[1].type==="listItemIndent"))break}ft&&(!Ue||ft<Ue)&&(Se._spread=!0),Se.end=Object.assign({},Ue?he[Ue][1].start:rt[1].end),he.splice(Ue||z,0,["exit",Se,rt[2]]),z++,L++}rt[1].type==="listItemPrefix"&&(Se={type:"listItem",_spread:!1,start:Object.assign({},rt[1].start),end:void 0},he.splice(z,0,["enter",Se,rt[2]]),z++,L++,ft=void 0,je=!0)}}return he[Ae][1]._spread=X,L}function u(he,Ae){t[he]=Ae}function h(he){return t[he]}function d(he,Ae){return L;function L(z){m.call(this,he(z),z),Ae&&Ae.call(this,z)}}function p(){this.stack.push({type:"fragment",children:[]})}function m(he,Ae,L){return this.stack[this.stack.length-1].children.push(he),this.stack.push(he),this.tokenStack.push([Ae,L]),he.position={start:qr(Ae.start)},he}function v(he){return Ae;function Ae(L){he&&he.call(this,L),x.call(this,L)}}function x(he,Ae){const L=this.stack.pop(),z=this.tokenStack.pop();if(z)z[0].type!==he.type&&(Ae?Ae.call(this,he,z[0]):(z[1]||rS).call(this,he,z[0]));else throw new Error("Cannot close `"+he.type+"` ("+ol({start:he.start,end:he.end})+"): it’s not open");return L.position.end=qr(he.end),L}function E(){return F1(this.stack.pop())}function C(){u("expectingFirstListItemValue",!0)}function O(he){if(h("expectingFirstListItemValue")){const Ae=this.stack[this.stack.length-2];Ae.start=Number.parseInt(this.sliceSerialize(he),10),u("expectingFirstListItemValue")}}function _(){const he=this.resume(),Ae=this.stack[this.stack.length-1];Ae.lang=he}function k(){const he=this.resume(),Ae=this.stack[this.stack.length-1];Ae.meta=he}function I(){h("flowCodeInside")||(this.buffer(),u("flowCodeInside",!0))}function G(){const he=this.resume(),Ae=this.stack[this.stack.length-1];Ae.value=he.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),u("flowCodeInside")}function Z(){const he=this.resume(),Ae=this.stack[this.stack.length-1];Ae.value=he.replace(/(\r?\n|\r)$/g,"")}function ae(he){const Ae=this.resume(),L=this.stack[this.stack.length-1];L.label=Ae,L.identifier=Hs(this.sliceSerialize(he)).toLowerCase()}function te(){const he=this.resume(),Ae=this.stack[this.stack.length-1];Ae.title=he}function Q(){const he=this.resume(),Ae=this.stack[this.stack.length-1];Ae.url=he}function le(he){const Ae=this.stack[this.stack.length-1];if(!Ae.depth){const L=this.sliceSerialize(he).length;Ae.depth=L}}function ce(){u("setextHeadingSlurpLineEnding",!0)}function me(he){const Ae=this.stack[this.stack.length-1];Ae.depth=this.sliceSerialize(he).charCodeAt(0)===61?1:2}function Pe(){u("setextHeadingSlurpLineEnding")}function be(he){const Ae=this.stack[this.stack.length-1];let L=Ae.children[Ae.children.length-1];(!L||L.type!=="text")&&(L=Rt(),L.position={start:qr(he.start)},Ae.children.push(L)),this.stack.push(L)}function fe(he){const Ae=this.stack.pop();Ae.value+=this.sliceSerialize(he),Ae.position.end=qr(he.end)}function ve(he){const Ae=this.stack[this.stack.length-1];if(h("atHardBreak")){const L=Ae.children[Ae.children.length-1];L.position.end=qr(he.end),u("atHardBreak");return}!h("setextHeadingSlurpLineEnding")&&i.canContainEols.includes(Ae.type)&&(be.call(this,he),fe.call(this,he))}function Fe(){u("atHardBreak",!0)}function Ge(){const he=this.resume(),Ae=this.stack[this.stack.length-1];Ae.value=he}function Te(){const he=this.resume(),Ae=this.stack[this.stack.length-1];Ae.value=he}function ye(){const he=this.resume(),Ae=this.stack[this.stack.length-1];Ae.value=he}function ke(){const he=this.stack[this.stack.length-1];if(h("inReference")){const Ae=h("referenceType")||"shortcut";he.type+="Reference",he.referenceType=Ae,delete he.url,delete he.title}else delete he.identifier,delete he.label;u("referenceType")}function _e(){const he=this.stack[this.stack.length-1];if(h("inReference")){const Ae=h("referenceType")||"shortcut";he.type+="Reference",he.referenceType=Ae,delete he.url,delete he.title}else delete he.identifier,delete he.label;u("referenceType")}function $(he){const Ae=this.sliceSerialize(he),L=this.stack[this.stack.length-2];L.label=H8(Ae),L.identifier=Hs(Ae).toLowerCase()}function Le(){const he=this.stack[this.stack.length-1],Ae=this.resume(),L=this.stack[this.stack.length-1];if(u("inReference",!0),L.type==="link"){const z=he.children;L.children=z}else L.alt=Ae}function st(){const he=this.resume(),Ae=this.stack[this.stack.length-1];Ae.url=he}function J(){const he=this.resume(),Ae=this.stack[this.stack.length-1];Ae.title=he}function Et(){u("inReference")}function yt(){u("referenceType","collapsed")}function mt(he){const Ae=this.resume(),L=this.stack[this.stack.length-1];L.label=Ae,L.identifier=Hs(this.sliceSerialize(he)).toLowerCase(),u("referenceType","full")}function Tt(he){u("characterReferenceType",he.type)}function Bt(he){const Ae=this.sliceSerialize(he),L=h("characterReferenceType");let z;L?(z=JC(Ae,L==="characterReferenceMarkerNumeric"?10:16),u("characterReferenceType")):z=rg(Ae);const W=this.stack.pop();W.value+=z,W.position.end=qr(he.end)}function At(he){fe.call(this,he);const Ae=this.stack[this.stack.length-1];Ae.url=this.sliceSerialize(he)}function at(he){fe.call(this,he);const Ae=this.stack[this.stack.length-1];Ae.url="mailto:"+this.sliceSerialize(he)}function $e(){return{type:"blockquote",children:[]}}function wt(){return{type:"code",lang:null,meta:null,value:""}}function Lt(){return{type:"inlineCode",value:""}}function tn(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function kt(){return{type:"emphasis",children:[]}}function Gt(){return{type:"heading",depth:void 0,children:[]}}function D(){return{type:"break"}}function K(){return{type:"html",value:""}}function we(){return{type:"image",title:null,url:"",alt:null}}function ze(){return{type:"link",title:null,url:"",children:[]}}function Ne(he){return{type:"list",ordered:he.type==="listOrdered",start:null,spread:he._spread,children:[]}}function Qe(he){return{type:"listItem",spread:he._spread,checked:null,children:[]}}function Xe(){return{type:"paragraph",children:[]}}function bt(){return{type:"strong",children:[]}}function Rt(){return{type:"text",value:""}}function Dt(){return{type:"thematicBreak"}}}function qr(e){return{line:e.line,column:e.column,offset:e.offset}}function tP(e,i){let t=-1;for(;++t<i.length;){const n=i[t];Array.isArray(n)?tP(e,n):W8(e,n)}}function W8(e,i){let t;for(t in i)if(eP.call(i,t)){if(t==="canContainEols"){const n=i[t];n&&e[t].push(...n)}else if(t==="transforms"){const n=i[t];n&&e[t].push(...n)}else if(t==="enter"||t==="exit"){const n=i[t];n&&Object.assign(e[t],n)}}}function rS(e,i){throw e?new Error("Cannot close `"+e.type+"` ("+ol({start:e.start,end:e.end})+"): a different token (`"+i.type+"`, "+ol({start:i.start,end:i.end})+") is open"):new Error("Cannot close document, a token (`"+i.type+"`, "+ol({start:i.start,end:i.end})+") is still open")}function V8(e){Object.assign(this,{Parser:i=>{const t=this.data("settings");return B8(i,Object.assign({},t,e,{extensions:this.data("micromarkExtensions")||[],mdastExtensions:this.data("fromMarkdownExtensions")||[]}))}})}function G8(e,i){const t={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(i),!0)};return e.patch(i,t),e.applyData(i,t)}function q8(e,i){const t={type:"element",tagName:"br",properties:{},children:[]};return e.patch(i,t),[e.applyData(i,t),{type:"text",value:`
`}]}function Z8(e,i){const t=i.value?i.value+`
`:"",n=i.lang?i.lang.match(/^[^ \t]+(?=[ \t]|$)/):null,o={};n&&(o.className=["language-"+n]);let u={type:"element",tagName:"code",properties:o,children:[{type:"text",value:t}]};return i.meta&&(u.data={meta:i.meta}),e.patch(i,u),u=e.applyData(i,u),u={type:"element",tagName:"pre",properties:{},children:[u]},e.patch(i,u),u}function X8(e,i){const t={type:"element",tagName:"del",properties:{},children:e.all(i)};return e.patch(i,t),e.applyData(i,t)}function Y8(e,i){const t={type:"element",tagName:"em",properties:{},children:e.all(i)};return e.patch(i,t),e.applyData(i,t)}function ea(e){const i=[];let t=-1,n=0,o=0;for(;++t<e.length;){const u=e.charCodeAt(t);let h="";if(u===37&&Fi(e.charCodeAt(t+1))&&Fi(e.charCodeAt(t+2)))o=2;else if(u<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(u))||(h=String.fromCharCode(u));else if(u>55295&&u<57344){const d=e.charCodeAt(t+1);u<56320&&d>56319&&d<57344?(h=String.fromCharCode(u,d),o=1):h="�"}else h=String.fromCharCode(u);h&&(i.push(e.slice(n,t),encodeURIComponent(h)),n=t+o+1,h=""),o&&(t+=o,o=0)}return i.join("")+e.slice(n)}function nP(e,i){const t=String(i.identifier).toUpperCase(),n=ea(t.toLowerCase()),o=e.footnoteOrder.indexOf(t);let u;o===-1?(e.footnoteOrder.push(t),e.footnoteCounts[t]=1,u=e.footnoteOrder.length):(e.footnoteCounts[t]++,u=o+1);const h=e.footnoteCounts[t],d={type:"element",tagName:"a",properties:{href:"#"+e.clobberPrefix+"fn-"+n,id:e.clobberPrefix+"fnref-"+n+(h>1?"-"+h:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(u)}]};e.patch(i,d);const p={type:"element",tagName:"sup",properties:{},children:[d]};return e.patch(i,p),e.applyData(i,p)}function $8(e,i){const t=e.footnoteById;let n=1;for(;n in t;)n++;const o=String(n);return t[o]={type:"footnoteDefinition",identifier:o,children:[{type:"paragraph",children:i.children}],position:i.position},nP(e,{type:"footnoteReference",identifier:o,position:i.position})}function K8(e,i){const t={type:"element",tagName:"h"+i.depth,properties:{},children:e.all(i)};return e.patch(i,t),e.applyData(i,t)}function Q8(e,i){if(e.dangerous){const t={type:"raw",value:i.value};return e.patch(i,t),e.applyData(i,t)}return null}function iP(e,i){const t=i.referenceType;let n="]";if(t==="collapsed"?n+="[]":t==="full"&&(n+="["+(i.label||i.identifier)+"]"),i.type==="imageReference")return{type:"text",value:"!["+i.alt+n};const o=e.all(i),u=o[0];u&&u.type==="text"?u.value="["+u.value:o.unshift({type:"text",value:"["});const h=o[o.length-1];return h&&h.type==="text"?h.value+=n:o.push({type:"text",value:n}),o}function J8(e,i){const t=e.definition(i.identifier);if(!t)return iP(e,i);const n={src:ea(t.url||""),alt:i.alt};t.title!==null&&t.title!==void 0&&(n.title=t.title);const o={type:"element",tagName:"img",properties:n,children:[]};return e.patch(i,o),e.applyData(i,o)}function e7(e,i){const t={src:ea(i.url)};i.alt!==null&&i.alt!==void 0&&(t.alt=i.alt),i.title!==null&&i.title!==void 0&&(t.title=i.title);const n={type:"element",tagName:"img",properties:t,children:[]};return e.patch(i,n),e.applyData(i,n)}function t7(e,i){const t={type:"text",value:i.value.replace(/\r?\n|\r/g," ")};e.patch(i,t);const n={type:"element",tagName:"code",properties:{},children:[t]};return e.patch(i,n),e.applyData(i,n)}function n7(e,i){const t=e.definition(i.identifier);if(!t)return iP(e,i);const n={href:ea(t.url||"")};t.title!==null&&t.title!==void 0&&(n.title=t.title);const o={type:"element",tagName:"a",properties:n,children:e.all(i)};return e.patch(i,o),e.applyData(i,o)}function i7(e,i){const t={href:ea(i.url)};i.title!==null&&i.title!==void 0&&(t.title=i.title);const n={type:"element",tagName:"a",properties:t,children:e.all(i)};return e.patch(i,n),e.applyData(i,n)}function r7(e,i,t){const n=e.all(i),o=t?o7(t):rP(i),u={},h=[];if(typeof i.checked=="boolean"){const v=n[0];let x;v&&v.type==="element"&&v.tagName==="p"?x=v:(x={type:"element",tagName:"p",properties:{},children:[]},n.unshift(x)),x.children.length>0&&x.children.unshift({type:"text",value:" "}),x.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:i.checked,disabled:!0},children:[]}),u.className=["task-list-item"]}let d=-1;for(;++d<n.length;){const v=n[d];(o||d!==0||v.type!=="element"||v.tagName!=="p")&&h.push({type:"text",value:`
`}),v.type==="element"&&v.tagName==="p"&&!o?h.push(...v.children):h.push(v)}const p=n[n.length-1];p&&(o||p.type!=="element"||p.tagName!=="p")&&h.push({type:"text",value:`
`});const m={type:"element",tagName:"li",properties:u,children:h};return e.patch(i,m),e.applyData(i,m)}function o7(e){let i=!1;if(e.type==="list"){i=e.spread||!1;const t=e.children;let n=-1;for(;!i&&++n<t.length;)i=rP(t[n])}return i}function rP(e){return e.spread??e.children.length>1}function s7(e,i){const t={},n=e.all(i);let o=-1;for(typeof i.start=="number"&&i.start!==1&&(t.start=i.start);++o<n.length;){const h=n[o];if(h.type==="element"&&h.tagName==="li"&&h.properties&&Array.isArray(h.properties.className)&&h.properties.className.includes("task-list-item")){t.className=["contains-task-list"];break}}const u={type:"element",tagName:i.ordered?"ol":"ul",properties:t,children:e.wrap(n,!0)};return e.patch(i,u),e.applyData(i,u)}function a7(e,i){const t={type:"element",tagName:"p",properties:{},children:e.all(i)};return e.patch(i,t),e.applyData(i,t)}function l7(e,i){const t={type:"root",children:e.wrap(e.all(i))};return e.patch(i,t),e.applyData(i,t)}function u7(e,i){const t={type:"element",tagName:"strong",properties:{},children:e.all(i)};return e.patch(i,t),e.applyData(i,t)}const sg=oP("start"),ag=oP("end");function c7(e){return{start:sg(e),end:ag(e)}}function oP(e){return i;function i(t){const n=t&&t.position&&t.position[e]||{};return{line:n.line||null,column:n.column||null,offset:n.offset>-1?n.offset:null}}}function d7(e,i){const t=e.all(i),n=t.shift(),o=[];if(n){const h={type:"element",tagName:"thead",properties:{},children:e.wrap([n],!0)};e.patch(i.children[0],h),o.push(h)}if(t.length>0){const h={type:"element",tagName:"tbody",properties:{},children:e.wrap(t,!0)},d=sg(i.children[1]),p=ag(i.children[i.children.length-1]);d.line&&p.line&&(h.position={start:d,end:p}),o.push(h)}const u={type:"element",tagName:"table",properties:{},children:e.wrap(o,!0)};return e.patch(i,u),e.applyData(i,u)}function h7(e,i,t){const n=t?t.children:void 0,o=(n?n.indexOf(i):1)===0?"th":"td",u=t&&t.type==="table"?t.align:void 0,h=u?u.length:i.children.length;let d=-1;const p=[];for(;++d<h;){const v=i.children[d],x={},E=u?u[d]:void 0;E&&(x.align=E);let C={type:"element",tagName:o,properties:x,children:[]};v&&(C.children=e.all(v),e.patch(v,C),C=e.applyData(i,C)),p.push(C)}const m={type:"element",tagName:"tr",properties:{},children:e.wrap(p,!0)};return e.patch(i,m),e.applyData(i,m)}function p7(e,i){const t={type:"element",tagName:"td",properties:{},children:e.all(i)};return e.patch(i,t),e.applyData(i,t)}const oS=9,sS=32;function f7(e){const i=String(e),t=/\r?\n|\r/g;let n=t.exec(i),o=0;const u=[];for(;n;)u.push(aS(i.slice(o,n.index),o>0,!0),n[0]),o=n.index+n[0].length,n=t.exec(i);return u.push(aS(i.slice(o),o>0,!1)),u.join("")}function aS(e,i,t){let n=0,o=e.length;if(i){let u=e.codePointAt(n);for(;u===oS||u===sS;)n++,u=e.codePointAt(n)}if(t){let u=e.codePointAt(o-1);for(;u===oS||u===sS;)o--,u=e.codePointAt(o-1)}return o>n?e.slice(n,o):""}function m7(e,i){const t={type:"text",value:f7(String(i.value))};return e.patch(i,t),e.applyData(i,t)}function g7(e,i){const t={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(i,t),e.applyData(i,t)}const v7={blockquote:G8,break:q8,code:Z8,delete:X8,emphasis:Y8,footnoteReference:nP,footnote:$8,heading:K8,html:Q8,imageReference:J8,image:e7,inlineCode:t7,linkReference:n7,link:i7,listItem:r7,list:s7,paragraph:a7,root:l7,strong:u7,table:d7,tableCell:p7,tableRow:h7,text:m7,thematicBreak:g7,toml:nc,yaml:nc,definition:nc,footnoteDefinition:nc};function nc(){return null}const sP=function(e){if(e==null)return x7;if(typeof e=="string")return b7(e);if(typeof e=="object")return Array.isArray(e)?y7(e):w7(e);if(typeof e=="function")return Kc(e);throw new Error("Expected function, string, or object as test")};function y7(e){const i=[];let t=-1;for(;++t<e.length;)i[t]=sP(e[t]);return Kc(n);function n(...o){let u=-1;for(;++u<i.length;)if(i[u].call(this,...o))return!0;return!1}}function w7(e){return Kc(i);function i(t){let n;for(n in e)if(t[n]!==e[n])return!1;return!0}}function b7(e){return Kc(i);function i(t){return t&&t.type===e}}function Kc(e){return i;function i(t,...n){return!!(t&&typeof t=="object"&&"type"in t&&e.call(this,t,...n))}}function x7(){return!0}const S7=!0,lS=!1,E7="skip",T7=function(e,i,t,n){typeof i=="function"&&typeof t!="function"&&(n=t,t=i,i=null);const o=sP(i),u=n?-1:1;h(e,void 0,[])();function h(d,p,m){const v=d&&typeof d=="object"?d:{};if(typeof v.type=="string"){const E=typeof v.tagName=="string"?v.tagName:typeof v.name=="string"?v.name:void 0;Object.defineProperty(x,"name",{value:"node ("+(d.type+(E?"<"+E+">":""))+")"})}return x;function x(){let E=[],C,O,_;if((!i||o(d,p,m[m.length-1]||null))&&(E=C7(t(d,m)),E[0]===lS))return E;if(d.children&&E[0]!==E7)for(O=(n?d.children.length:-1)+u,_=m.concat(d);O>-1&&O<d.children.length;){if(C=h(d.children[O],O,_)(),C[0]===lS)return C;O=typeof C[1]=="number"?C[1]:O+u}return E}}};function C7(e){return Array.isArray(e)?e:typeof e=="number"?[S7,e]:[e]}const aP=function(e,i,t,n){typeof i=="function"&&typeof t!="function"&&(n=t,t=i,i=null),T7(e,i,o,n);function o(u,h){const d=h[h.length-1];return t(u,d?d.children.indexOf(u):null,d)}};function P7(e){return!e||!e.position||!e.position.start||!e.position.start.line||!e.position.start.column||!e.position.end||!e.position.end.line||!e.position.end.column}const uS={}.hasOwnProperty;function _7(e){const i=Object.create(null);if(!e||!e.type)throw new Error("mdast-util-definitions expected node");return aP(e,"definition",n=>{const o=cS(n.identifier);o&&!uS.call(i,o)&&(i[o]=n)}),t;function t(n){const o=cS(n);return o&&uS.call(i,o)?i[o]:null}}function cS(e){return String(e||"").toUpperCase()}const Pc={}.hasOwnProperty;function k7(e,i){const t=i||{},n=t.allowDangerousHtml||!1,o={};return h.dangerous=n,h.clobberPrefix=t.clobberPrefix===void 0||t.clobberPrefix===null?"user-content-":t.clobberPrefix,h.footnoteLabel=t.footnoteLabel||"Footnotes",h.footnoteLabelTagName=t.footnoteLabelTagName||"h2",h.footnoteLabelProperties=t.footnoteLabelProperties||{className:["sr-only"]},h.footnoteBackLabel=t.footnoteBackLabel||"Back to content",h.unknownHandler=t.unknownHandler,h.passThrough=t.passThrough,h.handlers={...v7,...t.handlers},h.definition=_7(e),h.footnoteById=o,h.footnoteOrder=[],h.footnoteCounts={},h.patch=R7,h.applyData=O7,h.one=d,h.all=p,h.wrap=D7,h.augment=u,aP(e,"footnoteDefinition",m=>{const v=String(m.identifier).toUpperCase();Pc.call(o,v)||(o[v]=m)}),h;function u(m,v){if(m&&"data"in m&&m.data){const x=m.data;x.hName&&(v.type!=="element"&&(v={type:"element",tagName:"",properties:{},children:[]}),v.tagName=x.hName),v.type==="element"&&x.hProperties&&(v.properties={...v.properties,...x.hProperties}),"children"in v&&v.children&&x.hChildren&&(v.children=x.hChildren)}if(m){const x="type"in m?m:{position:m};P7(x)||(v.position={start:sg(x),end:ag(x)})}return v}function h(m,v,x,E){return Array.isArray(x)&&(E=x,x={}),u(m,{type:"element",tagName:v,properties:x||{},children:E||[]})}function d(m,v){return lP(h,m,v)}function p(m){return lg(h,m)}}function R7(e,i){e.position&&(i.position=c7(e))}function O7(e,i){let t=i;if(e&&e.data){const n=e.data.hName,o=e.data.hChildren,u=e.data.hProperties;typeof n=="string"&&(t.type==="element"?t.tagName=n:t={type:"element",tagName:n,properties:{},children:[]}),t.type==="element"&&u&&(t.properties={...t.properties,...u}),"children"in t&&t.children&&o!==null&&o!==void 0&&(t.children=o)}return t}function lP(e,i,t){const n=i&&i.type;if(!n)throw new Error("Expected node, got `"+i+"`");return Pc.call(e.handlers,n)?e.handlers[n](e,i,t):e.passThrough&&e.passThrough.includes(n)?"children"in i?{...i,children:lg(e,i)}:i:e.unknownHandler?e.unknownHandler(e,i,t):A7(e,i)}function lg(e,i){const t=[];if("children"in i){const n=i.children;let o=-1;for(;++o<n.length;){const u=lP(e,n[o],i);if(u){if(o&&n[o-1].type==="break"&&(!Array.isArray(u)&&u.type==="text"&&(u.value=u.value.replace(/^\s+/,"")),!Array.isArray(u)&&u.type==="element")){const h=u.children[0];h&&h.type==="text"&&(h.value=h.value.replace(/^\s+/,""))}Array.isArray(u)?t.push(...u):t.push(u)}}}return t}function A7(e,i){const t=i.data||{},n="value"in i&&!(Pc.call(t,"hProperties")||Pc.call(t,"hChildren"))?{type:"text",value:i.value}:{type:"element",tagName:"div",properties:{},children:lg(e,i)};return e.patch(i,n),e.applyData(i,n)}function D7(e,i){const t=[];let n=-1;for(i&&t.push({type:"text",value:`
`});++n<e.length;)n&&t.push({type:"text",value:`
`}),t.push(e[n]);return i&&e.length>0&&t.push({type:"text",value:`
`}),t}function I7(e){const i=[];let t=-1;for(;++t<e.footnoteOrder.length;){const n=e.footnoteById[e.footnoteOrder[t]];if(!n)continue;const o=e.all(n),u=String(n.identifier).toUpperCase(),h=ea(u.toLowerCase());let d=0;const p=[];for(;++d<=e.footnoteCounts[u];){const x={type:"element",tagName:"a",properties:{href:"#"+e.clobberPrefix+"fnref-"+h+(d>1?"-"+d:""),dataFootnoteBackref:!0,className:["data-footnote-backref"],ariaLabel:e.footnoteBackLabel},children:[{type:"text",value:"↩"}]};d>1&&x.children.push({type:"element",tagName:"sup",children:[{type:"text",value:String(d)}]}),p.length>0&&p.push({type:"text",value:" "}),p.push(x)}const m=o[o.length-1];if(m&&m.type==="element"&&m.tagName==="p"){const x=m.children[m.children.length-1];x&&x.type==="text"?x.value+=" ":m.children.push({type:"text",value:" "}),m.children.push(...p)}else o.push(...p);const v={type:"element",tagName:"li",properties:{id:e.clobberPrefix+"fn-"+h},children:e.wrap(o,!0)};e.patch(n,v),i.push(v)}if(i.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:e.footnoteLabelTagName,properties:{...JSON.parse(JSON.stringify(e.footnoteLabelProperties)),id:"footnote-label"},children:[{type:"text",value:e.footnoteLabel}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(i,!0)},{type:"text",value:`
`}]}}function uP(e,i){const t=k7(e,i),n=t.one(e,null),o=I7(t);return o&&n.children.push({type:"text",value:`
`},o),Array.isArray(n)?{type:"root",children:n}:n}const M7=function(e,i){return e&&"run"in e?L7(e,i):N7(e||i)};function L7(e,i){return(t,n,o)=>{e.run(uP(t,i),n,u=>{o(u)})}}function N7(e){return i=>uP(i,e)}class El{constructor(i,t,n){this.property=i,this.normal=t,n&&(this.space=n)}}El.prototype.property={};El.prototype.normal={};El.prototype.space=null;function cP(e,i){const t={},n={};let o=-1;for(;++o<e.length;)Object.assign(t,e[o].property),Object.assign(n,e[o].normal);return new El(t,n,i)}function tm(e){return e.toLowerCase()}class Qi{constructor(i,t){this.property=i,this.attribute=t}}Qi.prototype.space=null;Qi.prototype.boolean=!1;Qi.prototype.booleanish=!1;Qi.prototype.overloadedBoolean=!1;Qi.prototype.number=!1;Qi.prototype.commaSeparated=!1;Qi.prototype.spaceSeparated=!1;Qi.prototype.commaOrSpaceSeparated=!1;Qi.prototype.mustUseProperty=!1;Qi.prototype.defined=!1;let z7=0;const Xt=Go(),Un=Go(),dP=Go(),et=Go(),kn=Go(),Fs=Go(),zi=Go();function Go(){return 2**++z7}const nm=Object.freeze(Object.defineProperty({__proto__:null,boolean:Xt,booleanish:Un,commaOrSpaceSeparated:zi,commaSeparated:Fs,number:et,overloadedBoolean:dP,spaceSeparated:kn},Symbol.toStringTag,{value:"Module"})),cf=Object.keys(nm);class ug extends Qi{constructor(i,t,n,o){let u=-1;if(super(i,t),dS(this,"space",o),typeof n=="number")for(;++u<cf.length;){const h=cf[u];dS(this,cf[u],(n&nm[h])===nm[h])}}}ug.prototype.defined=!0;function dS(e,i,t){t&&(e[i]=t)}const j7={}.hasOwnProperty;function ta(e){const i={},t={};let n;for(n in e.properties)if(j7.call(e.properties,n)){const o=e.properties[n],u=new ug(n,e.transform(e.attributes||{},n),o,e.space);e.mustUseProperty&&e.mustUseProperty.includes(n)&&(u.mustUseProperty=!0),i[n]=u,t[tm(n)]=n,t[tm(u.attribute)]=n}return new El(i,t,e.space)}const hP=ta({space:"xlink",transform(e,i){return"xlink:"+i.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),pP=ta({space:"xml",transform(e,i){return"xml:"+i.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function fP(e,i){return i in e?e[i]:i}function mP(e,i){return fP(e,i.toLowerCase())}const gP=ta({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:mP,properties:{xmlns:null,xmlnsXLink:null}}),vP=ta({transform(e,i){return i==="role"?i:"aria-"+i.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:Un,ariaAutoComplete:null,ariaBusy:Un,ariaChecked:Un,ariaColCount:et,ariaColIndex:et,ariaColSpan:et,ariaControls:kn,ariaCurrent:null,ariaDescribedBy:kn,ariaDetails:null,ariaDisabled:Un,ariaDropEffect:kn,ariaErrorMessage:null,ariaExpanded:Un,ariaFlowTo:kn,ariaGrabbed:Un,ariaHasPopup:null,ariaHidden:Un,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:kn,ariaLevel:et,ariaLive:null,ariaModal:Un,ariaMultiLine:Un,ariaMultiSelectable:Un,ariaOrientation:null,ariaOwns:kn,ariaPlaceholder:null,ariaPosInSet:et,ariaPressed:Un,ariaReadOnly:Un,ariaRelevant:null,ariaRequired:Un,ariaRoleDescription:kn,ariaRowCount:et,ariaRowIndex:et,ariaRowSpan:et,ariaSelected:Un,ariaSetSize:et,ariaSort:null,ariaValueMax:et,ariaValueMin:et,ariaValueNow:et,ariaValueText:null,role:null}}),H7=ta({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:mP,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Fs,acceptCharset:kn,accessKey:kn,action:null,allow:null,allowFullScreen:Xt,allowPaymentRequest:Xt,allowUserMedia:Xt,alt:null,as:null,async:Xt,autoCapitalize:null,autoComplete:kn,autoFocus:Xt,autoPlay:Xt,blocking:kn,capture:null,charSet:null,checked:Xt,cite:null,className:kn,cols:et,colSpan:null,content:null,contentEditable:Un,controls:Xt,controlsList:kn,coords:et|Fs,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Xt,defer:Xt,dir:null,dirName:null,disabled:Xt,download:dP,draggable:Un,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Xt,formTarget:null,headers:kn,height:et,hidden:Xt,high:et,href:null,hrefLang:null,htmlFor:kn,httpEquiv:kn,id:null,imageSizes:null,imageSrcSet:null,inert:Xt,inputMode:null,integrity:null,is:null,isMap:Xt,itemId:null,itemProp:kn,itemRef:kn,itemScope:Xt,itemType:kn,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Xt,low:et,manifest:null,max:null,maxLength:et,media:null,method:null,min:null,minLength:et,multiple:Xt,muted:Xt,name:null,nonce:null,noModule:Xt,noValidate:Xt,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Xt,optimum:et,pattern:null,ping:kn,placeholder:null,playsInline:Xt,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Xt,referrerPolicy:null,rel:kn,required:Xt,reversed:Xt,rows:et,rowSpan:et,sandbox:kn,scope:null,scoped:Xt,seamless:Xt,selected:Xt,shadowRootClonable:Xt,shadowRootDelegatesFocus:Xt,shadowRootMode:null,shape:null,size:et,sizes:null,slot:null,span:et,spellCheck:Un,src:null,srcDoc:null,srcLang:null,srcSet:null,start:et,step:null,style:null,tabIndex:et,target:null,title:null,translate:null,type:null,typeMustMatch:Xt,useMap:null,value:Un,width:et,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:kn,axis:null,background:null,bgColor:null,border:et,borderColor:null,bottomMargin:et,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Xt,declare:Xt,event:null,face:null,frame:null,frameBorder:null,hSpace:et,leftMargin:et,link:null,longDesc:null,lowSrc:null,marginHeight:et,marginWidth:et,noResize:Xt,noHref:Xt,noShade:Xt,noWrap:Xt,object:null,profile:null,prompt:null,rev:null,rightMargin:et,rules:null,scheme:null,scrolling:Un,standby:null,summary:null,text:null,topMargin:et,valueType:null,version:null,vAlign:null,vLink:null,vSpace:et,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Xt,disableRemotePlayback:Xt,prefix:null,property:null,results:et,security:null,unselectable:null}}),F7=ta({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:fP,properties:{about:zi,accentHeight:et,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:et,amplitude:et,arabicForm:null,ascent:et,attributeName:null,attributeType:null,azimuth:et,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:et,by:null,calcMode:null,capHeight:et,className:kn,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:et,diffuseConstant:et,direction:null,display:null,dur:null,divisor:et,dominantBaseline:null,download:Xt,dx:null,dy:null,edgeMode:null,editable:null,elevation:et,enableBackground:null,end:null,event:null,exponent:et,externalResourcesRequired:null,fill:null,fillOpacity:et,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Fs,g2:Fs,glyphName:Fs,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:et,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:et,horizOriginX:et,horizOriginY:et,id:null,ideographic:et,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:et,k:et,k1:et,k2:et,k3:et,k4:et,kernelMatrix:zi,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:et,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:et,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:et,overlineThickness:et,paintOrder:null,panose1:null,path:null,pathLength:et,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:kn,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:et,pointsAtY:et,pointsAtZ:et,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:zi,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:zi,rev:zi,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:zi,requiredFeatures:zi,requiredFonts:zi,requiredFormats:zi,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:et,specularExponent:et,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:et,strikethroughThickness:et,string:null,stroke:null,strokeDashArray:zi,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:et,strokeOpacity:et,strokeWidth:null,style:null,surfaceScale:et,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:zi,tabIndex:et,tableValues:null,target:null,targetX:et,targetY:et,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:zi,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:et,underlineThickness:et,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:et,values:null,vAlphabetic:et,vMathematical:et,vectorEffect:null,vHanging:et,vIdeographic:et,version:null,vertAdvY:et,vertOriginX:et,vertOriginY:et,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:et,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),B7=/^data[-\w.:]+$/i,hS=/-[a-z]/g,U7=/[A-Z]/g;function W7(e,i){const t=tm(i);let n=i,o=Qi;if(t in e.normal)return e.property[e.normal[t]];if(t.length>4&&t.slice(0,4)==="data"&&B7.test(i)){if(i.charAt(4)==="-"){const u=i.slice(5).replace(hS,G7);n="data"+u.charAt(0).toUpperCase()+u.slice(1)}else{const u=i.slice(4);if(!hS.test(u)){let h=u.replace(U7,V7);h.charAt(0)!=="-"&&(h="-"+h),i="data"+h}}o=ug}return new o(n,i)}function V7(e){return"-"+e.toLowerCase()}function G7(e){return e.charAt(1).toUpperCase()}const pS={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},q7=cP([pP,hP,gP,vP,H7],"html"),Z7=cP([pP,hP,gP,vP,F7],"svg"),X7=function(e){return Y7(e)};function Y7(e){return $7(i);function i(t){return t&&t.type===e}}function $7(e){return i;function i(t,...n){return!!(t&&typeof t=="object"&&"type"in t&&e.call(this,t,...n))}}const K7=!0,fS=!1,Q7="skip",J7=function(e,i,t,n){const o=X7(i),u=1;h(e,void 0,[])();function h(d,p,m){const v=d&&typeof d=="object"?d:{};if(typeof v.type=="string"){const E=typeof v.tagName=="string"?v.tagName:typeof v.name=="string"?v.name:void 0;Object.defineProperty(x,"name",{value:"node ("+(d.type+(E?"<"+E+">":""))+")"})}return x;function x(){let E=[],C,O,_;if(o(d,p,m[m.length-1]||null)&&(E=eW(t(d,m)),E[0]===fS))return E;if(d.children&&E[0]!==Q7)for(O=-1+u,_=m.concat(d);O>-1&&O<d.children.length;){if(C=h(d.children[O],O,_)(),C[0]===fS)return C;O=typeof C[1]=="number"?C[1]:O+u}return E}}};function eW(e){return Array.isArray(e)?e:typeof e=="number"?[K7,e]:[e]}const tW=function(e,i,t,n){J7(e,i,o);function o(u,h){const d=h[h.length-1];return t(u,d?d.children.indexOf(u):null,d)}};function nW(e){if(e.allowedElements&&e.disallowedElements)throw new TypeError("Only one of `allowedElements` and `disallowedElements` should be defined");if(e.allowedElements||e.disallowedElements||e.allowElement)return i=>{tW(i,"element",(t,n,o)=>{const u=o;let h;if(e.allowedElements?h=!e.allowedElements.includes(t.tagName):e.disallowedElements&&(h=e.disallowedElements.includes(t.tagName)),!h&&e.allowElement&&typeof n=="number"&&(h=!e.allowElement(t,n,u)),h&&typeof n=="number")return e.unwrapDisallowed&&t.children?u.children.splice(n,1,...t.children):u.children.splice(n,1),n})}}var yP={exports:{}},vn={},mS;function iW(){if(mS)return vn;mS=1;/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e=Symbol.for("react.element"),i=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),h=Symbol.for("react.context"),d=Symbol.for("react.server_context"),p=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),v=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),C=Symbol.for("react.offscreen"),O;O=Symbol.for("react.module.reference");function _(k){if(typeof k=="object"&&k!==null){var I=k.$$typeof;switch(I){case e:switch(k=k.type,k){case t:case o:case n:case m:case v:return k;default:switch(k=k&&k.$$typeof,k){case d:case h:case p:case E:case x:case u:return k;default:return I}}case i:return I}}}return vn.ContextConsumer=h,vn.ContextProvider=u,vn.Element=e,vn.ForwardRef=p,vn.Fragment=t,vn.Lazy=E,vn.Memo=x,vn.Portal=i,vn.Profiler=o,vn.StrictMode=n,vn.Suspense=m,vn.SuspenseList=v,vn.isAsyncMode=function(){return!1},vn.isConcurrentMode=function(){return!1},vn.isContextConsumer=function(k){return _(k)===h},vn.isContextProvider=function(k){return _(k)===u},vn.isElement=function(k){return typeof k=="object"&&k!==null&&k.$$typeof===e},vn.isForwardRef=function(k){return _(k)===p},vn.isFragment=function(k){return _(k)===t},vn.isLazy=function(k){return _(k)===E},vn.isMemo=function(k){return _(k)===x},vn.isPortal=function(k){return _(k)===i},vn.isProfiler=function(k){return _(k)===o},vn.isStrictMode=function(k){return _(k)===n},vn.isSuspense=function(k){return _(k)===m},vn.isSuspenseList=function(k){return _(k)===v},vn.isValidElementType=function(k){return typeof k=="string"||typeof k=="function"||k===t||k===o||k===n||k===m||k===v||k===C||typeof k=="object"&&k!==null&&(k.$$typeof===E||k.$$typeof===x||k.$$typeof===u||k.$$typeof===h||k.$$typeof===p||k.$$typeof===O||k.getModuleId!==void 0)},vn.typeOf=_,vn}yP.exports=iW();var rW=yP.exports;const oW=gr(rW);function sW(e){const i=e&&typeof e=="object"&&e.type==="text"?e.value||"":e;return typeof i=="string"&&i.replace(/[ \t\n\f\r]/g,"")===""}function aW(e){return e.join(" ").trim()}function lW(e,i){const t={};return(e[e.length-1]===""?[...e,""]:e).join((t.padRight?" ":"")+","+(t.padLeft===!1?"":" ")).trim()}const im={}.hasOwnProperty,uW=new Set(["table","thead","tbody","tfoot","tr"]);function wP(e,i){const t=[];let n=-1,o;for(;++n<i.children.length;)o=i.children[n],o.type==="element"?t.push(cW(e,o,n,i)):o.type==="text"?(i.type!=="element"||!uW.has(i.tagName)||!sW(o))&&t.push(o.value):o.type==="raw"&&!e.options.skipHtml&&t.push(o.value);return t}function cW(e,i,t,n){const o=e.options,u=o.transformLinkUri===void 0?w1:o.transformLinkUri,h=e.schema,d=i.tagName,p={};let m=h,v;if(h.space==="html"&&d==="svg"&&(m=Z7,e.schema=m),i.properties)for(v in i.properties)im.call(i.properties,v)&&hW(p,v,i.properties[v],e);(d==="ol"||d==="ul")&&e.listDepth++;const x=wP(e,i);(d==="ol"||d==="ul")&&e.listDepth--,e.schema=h;const E=i.position||{start:{line:null,column:null,offset:null},end:{line:null,column:null,offset:null}},C=o.components&&im.call(o.components,d)?o.components[d]:d,O=typeof C=="string"||C===xt.Fragment;if(!oW.isValidElementType(C))throw new TypeError(`Component for name \`${d}\` not defined or is not renderable`);if(p.key=t,d==="a"&&o.linkTarget&&(p.target=typeof o.linkTarget=="function"?o.linkTarget(String(p.href||""),i.children,typeof p.title=="string"?p.title:null):o.linkTarget),d==="a"&&u&&(p.href=u(String(p.href||""),i.children,typeof p.title=="string"?p.title:null)),!O&&d==="code"&&n.type==="element"&&n.tagName!=="pre"&&(p.inline=!0),!O&&(d==="h1"||d==="h2"||d==="h3"||d==="h4"||d==="h5"||d==="h6")&&(p.level=Number.parseInt(d.charAt(1),10)),d==="img"&&o.transformImageUri&&(p.src=o.transformImageUri(String(p.src||""),String(p.alt||""),typeof p.title=="string"?p.title:null)),!O&&d==="li"&&n.type==="element"){const _=dW(i);p.checked=_&&_.properties?!!_.properties.checked:null,p.index=df(n,i),p.ordered=n.tagName==="ol"}return!O&&(d==="ol"||d==="ul")&&(p.ordered=d==="ol",p.depth=e.listDepth),(d==="td"||d==="th")&&(p.align&&(p.style||(p.style={}),p.style.textAlign=p.align,delete p.align),O||(p.isHeader=d==="th")),!O&&d==="tr"&&n.type==="element"&&(p.isHeader=n.tagName==="thead"),o.sourcePos&&(p["data-sourcepos"]=mW(E)),!O&&o.rawSourcePos&&(p.sourcePosition=i.position),!O&&o.includeElementIndex&&(p.index=df(n,i),p.siblingCount=df(n)),O||(p.node=i),x.length>0?xt.createElement(C,p,x):xt.createElement(C,p)}function dW(e){let i=-1;for(;++i<e.children.length;){const t=e.children[i];if(t.type==="element"&&t.tagName==="input")return t}return null}function df(e,i){let t=-1,n=0;for(;++t<e.children.length&&e.children[t]!==i;)e.children[t].type==="element"&&n++;return n}function hW(e,i,t,n){const o=W7(n.schema,i);let u=t;u==null||u!==u||(Array.isArray(u)&&(u=o.commaSeparated?lW(u):aW(u)),o.property==="style"&&typeof u=="string"&&(u=pW(u)),o.space&&o.property?e[im.call(pS,o.property)?pS[o.property]:o.property]=u:o.attribute&&(e[o.attribute]=u))}function pW(e){const i={};try{DC(e,t)}catch{}return i;function t(n,o){const u=n.slice(0,4)==="-ms-"?`ms-${n.slice(4)}`:n;i[u.replace(/-([a-z])/g,fW)]=o}}function fW(e,i){return i.toUpperCase()}function mW(e){return[e.start.line,":",e.start.column,"-",e.end.line,":",e.end.column].map(String).join("")}const gS={}.hasOwnProperty,gW="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",ic={plugins:{to:"remarkPlugins",id:"change-plugins-to-remarkplugins"},renderers:{to:"components",id:"change-renderers-to-components"},astPlugins:{id:"remove-buggy-html-in-markdown-parser"},allowDangerousHtml:{id:"remove-buggy-html-in-markdown-parser"},escapeHtml:{id:"remove-buggy-html-in-markdown-parser"},source:{to:"children",id:"change-source-to-children"},allowNode:{to:"allowElement",id:"replace-allownode-allowedtypes-and-disallowedtypes"},allowedTypes:{to:"allowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},disallowedTypes:{to:"disallowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},includeNodeIndex:{to:"includeElementIndex",id:"change-includenodeindex-to-includeelementindex"}};function rm(e){for(const u in ic)if(gS.call(ic,u)&&gS.call(e,u)){const h=ic[u];console.warn(`[react-markdown] Warning: please ${h.to?`use \`${h.to}\` instead of`:"remove"} \`${u}\` (see <${gW}#${h.id}> for more info)`),delete ic[u]}const i=L1().use(V8).use(e.remarkPlugins||[]).use(M7,{...e.remarkRehypeOptions,allowDangerousHtml:!0}).use(e.rehypePlugins||[]).use(nW,e),t=new HC;typeof e.children=="string"?t.value=e.children:e.children!==void 0&&e.children!==null&&console.warn(`[react-markdown] Warning: please pass a string as \`children\` (not: \`${e.children}\`)`);const n=i.runSync(i.parse(t),t);if(n.type!=="root")throw new TypeError("Expected a `root` node");let o=xt.createElement(xt.Fragment,{},wP({options:e,schema:q7,listDepth:0},n));return e.className&&(o=xt.createElement("div",{className:e.className},o)),o}rm.propTypes={children:vt.string,className:vt.string,allowElement:vt.func,allowedElements:vt.arrayOf(vt.string),disallowedElements:vt.arrayOf(vt.string),unwrapDisallowed:vt.bool,remarkPlugins:vt.arrayOf(vt.oneOfType([vt.object,vt.func,vt.arrayOf(vt.oneOfType([vt.bool,vt.string,vt.object,vt.func,vt.arrayOf(vt.any)]))])),rehypePlugins:vt.arrayOf(vt.oneOfType([vt.object,vt.func,vt.arrayOf(vt.oneOfType([vt.bool,vt.string,vt.object,vt.func,vt.arrayOf(vt.any)]))])),sourcePos:vt.bool,rawSourcePos:vt.bool,skipHtml:vt.bool,includeElementIndex:vt.bool,transformLinkUri:vt.oneOfType([vt.func,vt.bool]),linkTarget:vt.oneOfType([vt.func,vt.string]),transformImageUri:vt.func,components:vt.object};var zn={},cg={},Tl={},Cl={},bP="Expected a function",vS=NaN,vW="[object Symbol]",yW=/^\s+|\s+$/g,wW=/^[-+]0x[0-9a-f]+$/i,bW=/^0b[01]+$/i,xW=/^0o[0-7]+$/i,SW=parseInt,EW=typeof Jn=="object"&&Jn&&Jn.Object===Object&&Jn,TW=typeof self=="object"&&self&&self.Object===Object&&self,CW=EW||TW||Function("return this")(),PW=Object.prototype,_W=PW.toString,kW=Math.max,RW=Math.min,hf=function(){return CW.Date.now()};function OW(e,i,t){var n,o,u,h,d,p,m=0,v=!1,x=!1,E=!0;if(typeof e!="function")throw new TypeError(bP);i=yS(i)||0,_c(t)&&(v=!!t.leading,x="maxWait"in t,u=x?kW(yS(t.maxWait)||0,i):u,E="trailing"in t?!!t.trailing:E);function C(Q){var le=n,ce=o;return n=o=void 0,m=Q,h=e.apply(ce,le),h}function O(Q){return m=Q,d=setTimeout(I,i),v?C(Q):h}function _(Q){var le=Q-p,ce=Q-m,me=i-le;return x?RW(me,u-ce):me}function k(Q){var le=Q-p,ce=Q-m;return p===void 0||le>=i||le<0||x&&ce>=u}function I(){var Q=hf();if(k(Q))return G(Q);d=setTimeout(I,_(Q))}function G(Q){return d=void 0,E&&n?C(Q):(n=o=void 0,h)}function Z(){d!==void 0&&clearTimeout(d),m=0,n=p=o=d=void 0}function ae(){return d===void 0?h:G(hf())}function te(){var Q=hf(),le=k(Q);if(n=arguments,o=this,p=Q,le){if(d===void 0)return O(p);if(x)return d=setTimeout(I,i),C(p)}return d===void 0&&(d=setTimeout(I,i)),h}return te.cancel=Z,te.flush=ae,te}function AW(e,i,t){var n=!0,o=!0;if(typeof e!="function")throw new TypeError(bP);return _c(t)&&(n="leading"in t?!!t.leading:n,o="trailing"in t?!!t.trailing:o),OW(e,i,{leading:n,maxWait:i,trailing:o})}function _c(e){var i=typeof e;return!!e&&(i=="object"||i=="function")}function DW(e){return!!e&&typeof e=="object"}function IW(e){return typeof e=="symbol"||DW(e)&&_W.call(e)==vW}function yS(e){if(typeof e=="number")return e;if(IW(e))return vS;if(_c(e)){var i=typeof e.valueOf=="function"?e.valueOf():e;e=_c(i)?i+"":i}if(typeof e!="string")return e===0?e:+e;e=e.replace(yW,"");var t=bW.test(e);return t||xW.test(e)?SW(e.slice(2),t?2:8):wW.test(e)?vS:+e}var MW=AW,Pl={};Object.defineProperty(Pl,"__esModule",{value:!0});Pl.addPassiveEventListener=function(e,i,t){var n=function(){var o=!1;try{var u=Object.defineProperty({},"passive",{get:function(){o=!0}});window.addEventListener("test",null,u)}catch{}return o}();e.addEventListener(i,t,n?{passive:!0}:!1)};Pl.removePassiveEventListener=function(e,i,t){e.removeEventListener(i,t)};Object.defineProperty(Cl,"__esModule",{value:!0});var LW=MW,NW=jW(LW),zW=Pl;function jW(e){return e&&e.__esModule?e:{default:e}}var HW=function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:66;return(0,NW.default)(e,i)},In={spyCallbacks:[],spySetState:[],scrollSpyContainers:[],mount:function(e,i){if(e){var t=HW(function(n){In.scrollHandler(e)},i);In.scrollSpyContainers.push(e),(0,zW.addPassiveEventListener)(e,"scroll",t)}},isMounted:function(e){return In.scrollSpyContainers.indexOf(e)!==-1},currentPositionX:function(e){if(e===document){var i=window.pageYOffset!==void 0,t=(document.compatMode||"")==="CSS1Compat";return i?window.pageXOffset:t?document.documentElement.scrollLeft:document.body.scrollLeft}else return e.scrollLeft},currentPositionY:function(e){if(e===document){var i=window.pageXOffset!==void 0,t=(document.compatMode||"")==="CSS1Compat";return i?window.pageYOffset:t?document.documentElement.scrollTop:document.body.scrollTop}else return e.scrollTop},scrollHandler:function(e){var i=In.scrollSpyContainers[In.scrollSpyContainers.indexOf(e)].spyCallbacks||[];i.forEach(function(t){return t(In.currentPositionX(e),In.currentPositionY(e))})},addStateHandler:function(e){In.spySetState.push(e)},addSpyHandler:function(e,i){var t=In.scrollSpyContainers[In.scrollSpyContainers.indexOf(i)];t.spyCallbacks||(t.spyCallbacks=[]),t.spyCallbacks.push(e),e(In.currentPositionX(i),In.currentPositionY(i))},updateStates:function(){In.spySetState.forEach(function(e){return e()})},unmount:function(e,i){In.scrollSpyContainers.forEach(function(t){return t.spyCallbacks&&t.spyCallbacks.length&&t.spyCallbacks.indexOf(i)>-1&&t.spyCallbacks.splice(t.spyCallbacks.indexOf(i),1)}),In.spySetState&&In.spySetState.length&&In.spySetState.indexOf(e)>-1&&In.spySetState.splice(In.spySetState.indexOf(e),1),document.removeEventListener("scroll",In.scrollHandler)},update:function(){return In.scrollSpyContainers.forEach(function(e){return In.scrollHandler(e)})}};Cl.default=In;var na={},_l={};Object.defineProperty(_l,"__esModule",{value:!0});var FW=function(e,i){var t=e.indexOf("#")===0?e.substring(1):e,n=t?"#"+t:"",o=window&&window.location,u=n?o.pathname+o.search+n:o.pathname+o.search;i?history.pushState(history.state,"",u):history.replaceState(history.state,"",u)},BW=function(){return window.location.hash.replace(/^#/,"")},UW=function(e){return function(i){return e.contains?e!=i&&e.contains(i):!!(e.compareDocumentPosition(i)&16)}},WW=function(e){return getComputedStyle(e).position!=="static"},pf=function(e,i){for(var t=e.offsetTop,n=e.offsetParent;n&&!i(n);)t+=n.offsetTop,n=n.offsetParent;return{offsetTop:t,offsetParent:n}},VW=function(e,i,t){if(t)return e===document?i.getBoundingClientRect().left+(window.scrollX||window.pageXOffset):getComputedStyle(e).position!=="static"?i.offsetLeft:i.offsetLeft-e.offsetLeft;if(e===document)return i.getBoundingClientRect().top+(window.scrollY||window.pageYOffset);if(WW(e)){if(i.offsetParent!==e){var n=function(p){return p===e||p===document},o=pf(i,n),u=o.offsetTop,h=o.offsetParent;if(h!==e)throw new Error("Seems containerElement is not an ancestor of the Element");return u}return i.offsetTop}if(i.offsetParent===e.offsetParent)return i.offsetTop-e.offsetTop;var d=function(p){return p===document};return pf(i,d).offsetTop-pf(e,d).offsetTop};_l.default={updateHash:FW,getHash:BW,filterElementInContainer:UW,scrollOffset:VW};var Qc={},dg={};Object.defineProperty(dg,"__esModule",{value:!0});dg.default={defaultEasing:function(e){return e<.5?Math.pow(e*2,2)/2:1-Math.pow((1-e)*2,2)/2},linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*e*e:-1+(4-2*e)*e},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}};var hg={};Object.defineProperty(hg,"__esModule",{value:!0});var GW=Pl,qW=["mousedown","mousewheel","touchmove","keydown"];hg.default={subscribe:function(e){return typeof document<"u"&&qW.forEach(function(i){return(0,GW.addPassiveEventListener)(document,i,e)})}};var kl={};Object.defineProperty(kl,"__esModule",{value:!0});var om={registered:{},scrollEvent:{register:function(e,i){om.registered[e]=i},remove:function(e){om.registered[e]=null}}};kl.default=om;Object.defineProperty(Qc,"__esModule",{value:!0});var ZW=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var t=arguments[i];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},XW=_l;Jc(XW);var YW=dg,wS=Jc(YW),$W=hg,KW=Jc($W),QW=kl,hr=Jc(QW);function Jc(e){return e&&e.__esModule?e:{default:e}}var xP=function(e){return wS.default[e.smooth]||wS.default.defaultEasing},JW=function(e){return typeof e=="function"?e:function(){return e}},eV=function(){if(typeof window<"u")return window.requestAnimationFrame||window.webkitRequestAnimationFrame},sm=function(){return eV()||function(e,i,t){window.setTimeout(e,t||1e3/60,new Date().getTime())}}(),SP=function(){return{currentPosition:0,startPosition:0,targetPosition:0,progress:0,duration:0,cancel:!1,target:null,containerElement:null,to:null,start:null,delta:null,percent:null,delayTimeout:null}},EP=function(e){var i=e.data.containerElement;if(i&&i!==document&&i!==document.body)return i.scrollLeft;var t=window.pageXOffset!==void 0,n=(document.compatMode||"")==="CSS1Compat";return t?window.pageXOffset:n?document.documentElement.scrollLeft:document.body.scrollLeft},TP=function(e){var i=e.data.containerElement;if(i&&i!==document&&i!==document.body)return i.scrollTop;var t=window.pageXOffset!==void 0,n=(document.compatMode||"")==="CSS1Compat";return t?window.pageYOffset:n?document.documentElement.scrollTop:document.body.scrollTop},tV=function(e){var i=e.data.containerElement;if(i&&i!==document&&i!==document.body)return i.scrollWidth-i.offsetWidth;var t=document.body,n=document.documentElement;return Math.max(t.scrollWidth,t.offsetWidth,n.clientWidth,n.scrollWidth,n.offsetWidth)},nV=function(e){var i=e.data.containerElement;if(i&&i!==document&&i!==document.body)return i.scrollHeight-i.offsetHeight;var t=document.body,n=document.documentElement;return Math.max(t.scrollHeight,t.offsetHeight,n.clientHeight,n.scrollHeight,n.offsetHeight)},iV=function e(i,t,n){var o=t.data;if(!t.ignoreCancelEvents&&o.cancel){hr.default.registered.end&&hr.default.registered.end(o.to,o.target,o.currentPositionY);return}if(o.delta=Math.round(o.targetPosition-o.startPosition),o.start===null&&(o.start=n),o.progress=n-o.start,o.percent=o.progress>=o.duration?1:i(o.progress/o.duration),o.currentPosition=o.startPosition+Math.ceil(o.delta*o.percent),o.containerElement&&o.containerElement!==document&&o.containerElement!==document.body?t.horizontal?o.containerElement.scrollLeft=o.currentPosition:o.containerElement.scrollTop=o.currentPosition:t.horizontal?window.scrollTo(o.currentPosition,0):window.scrollTo(0,o.currentPosition),o.percent<1){var u=e.bind(null,i,t);sm.call(window,u);return}hr.default.registered.end&&hr.default.registered.end(o.to,o.target,o.currentPosition)},pg=function(e){e.data.containerElement=e?e.containerId?document.getElementById(e.containerId):e.container&&e.container.nodeType?e.container:document:null},Rl=function(e,i,t,n){if(i.data=i.data||SP(),window.clearTimeout(i.data.delayTimeout),KW.default.subscribe(function(){i.data.cancel=!0}),pg(i),i.data.start=null,i.data.cancel=!1,i.data.startPosition=i.horizontal?EP(i):TP(i),i.data.targetPosition=i.absolute?e:e+i.data.startPosition,i.data.startPosition===i.data.targetPosition){hr.default.registered.end&&hr.default.registered.end(i.data.to,i.data.target,i.data.currentPosition);return}i.data.delta=Math.round(i.data.targetPosition-i.data.startPosition),i.data.duration=JW(i.duration)(i.data.delta),i.data.duration=isNaN(parseFloat(i.data.duration))?1e3:parseFloat(i.data.duration),i.data.to=t,i.data.target=n;var o=xP(i),u=iV.bind(null,o,i);if(i&&i.delay>0){i.data.delayTimeout=window.setTimeout(function(){hr.default.registered.begin&&hr.default.registered.begin(i.data.to,i.data.target),sm.call(window,u)},i.delay);return}hr.default.registered.begin&&hr.default.registered.begin(i.data.to,i.data.target),sm.call(window,u)},ed=function(e){return e=ZW({},e),e.data=e.data||SP(),e.absolute=!0,e},rV=function(e){Rl(0,ed(e))},oV=function(e,i){Rl(e,ed(i))},sV=function(e){e=ed(e),pg(e),Rl(e.horizontal?tV(e):nV(e),e)},aV=function(e,i){i=ed(i),pg(i);var t=i.horizontal?EP(i):TP(i);Rl(e+t,i)};Qc.default={animateTopScroll:Rl,getAnimationType:xP,scrollToTop:rV,scrollToBottom:sV,scrollTo:oV,scrollMore:aV};Object.defineProperty(na,"__esModule",{value:!0});var lV=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var t=arguments[i];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},uV=_l,cV=fg(uV),dV=Qc,hV=fg(dV),pV=kl,rc=fg(pV);function fg(e){return e&&e.__esModule?e:{default:e}}var oc={},bS=void 0;na.default={unmount:function(){oc={}},register:function(e,i){oc[e]=i},unregister:function(e){delete oc[e]},get:function(e){return oc[e]||document.getElementById(e)||document.getElementsByName(e)[0]||document.getElementsByClassName(e)[0]},setActiveLink:function(e){return bS=e},getActiveLink:function(){return bS},scrollTo:function(e,i){var t=this.get(e);if(!t){console.warn("target Element not found");return}i=lV({},i,{absolute:!1});var n=i.containerId,o=i.container,u=void 0;n?u=document.getElementById(n):o&&o.nodeType?u=o:u=document,i.absolute=!0;var h=i.horizontal,d=cV.default.scrollOffset(u,t,h)+(i.offset||0);if(!i.smooth){rc.default.registered.begin&&rc.default.registered.begin(e,t),u===document?i.horizontal?window.scrollTo(d,0):window.scrollTo(0,d):u.scrollTop=d,rc.default.registered.end&&rc.default.registered.end(e,t);return}hV.default.animateTopScroll(d,i,e,t)}};var td={};Object.defineProperty(td,"__esModule",{value:!0});var fV=_l,ff=mV(fV);function mV(e){return e&&e.__esModule?e:{default:e}}var gV={mountFlag:!1,initialized:!1,scroller:null,containers:{},mount:function(e){this.scroller=e,this.handleHashChange=this.handleHashChange.bind(this),window.addEventListener("hashchange",this.handleHashChange),this.initStateFromHash(),this.mountFlag=!0},mapContainer:function(e,i){this.containers[e]=i},isMounted:function(){return this.mountFlag},isInitialized:function(){return this.initialized},initStateFromHash:function(){var e=this,i=this.getHash();i?window.setTimeout(function(){e.scrollTo(i,!0),e.initialized=!0},10):this.initialized=!0},scrollTo:function(e,i){var t=this.scroller,n=t.get(e);if(n&&(i||e!==t.getActiveLink())){var o=this.containers[e]||document;t.scrollTo(e,{container:o})}},getHash:function(){return ff.default.getHash()},changeHash:function(e,i){this.isInitialized()&&ff.default.getHash()!==e&&ff.default.updateHash(e,i)},handleHashChange:function(){this.scrollTo(this.getHash())},unmount:function(){this.scroller=null,this.containers=null,window.removeEventListener("hashchange",this.handleHashChange)}};td.default=gV;Object.defineProperty(Tl,"__esModule",{value:!0});var sc=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var t=arguments[i];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},vV=function(){function e(i,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(i,o.key,o)}}return function(i,t,n){return t&&e(i.prototype,t),n&&e(i,n),i}}(),yV=xt,xS=Ol(yV),wV=Cl,ac=Ol(wV),bV=na,xV=Ol(bV),SV=Ks,An=Ol(SV),EV=td,Zr=Ol(EV);function Ol(e){return e&&e.__esModule?e:{default:e}}function TV(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}function CV(e,i){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i&&(typeof i=="object"||typeof i=="function")?i:e}function PV(e,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);e.prototype=Object.create(i&&i.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(e,i):e.__proto__=i)}var SS={to:An.default.string.isRequired,containerId:An.default.string,container:An.default.object,activeClass:An.default.string,activeStyle:An.default.object,spy:An.default.bool,horizontal:An.default.bool,smooth:An.default.oneOfType([An.default.bool,An.default.string]),offset:An.default.number,delay:An.default.number,isDynamic:An.default.bool,onClick:An.default.func,duration:An.default.oneOfType([An.default.number,An.default.func]),absolute:An.default.bool,onSetActive:An.default.func,onSetInactive:An.default.func,ignoreCancelEvents:An.default.bool,hashSpy:An.default.bool,saveHashHistory:An.default.bool,spyThrottle:An.default.number};Tl.default=function(e,i){var t=i||xV.default,n=function(u){PV(h,u);function h(d){TV(this,h);var p=CV(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,d));return o.call(p),p.state={active:!1},p}return vV(h,[{key:"getScrollSpyContainer",value:function(){var d=this.props.containerId,p=this.props.container;return d&&!p?document.getElementById(d):p&&p.nodeType?p:document}},{key:"componentDidMount",value:function(){if(this.props.spy||this.props.hashSpy){var d=this.getScrollSpyContainer();ac.default.isMounted(d)||ac.default.mount(d,this.props.spyThrottle),this.props.hashSpy&&(Zr.default.isMounted()||Zr.default.mount(t),Zr.default.mapContainer(this.props.to,d)),ac.default.addSpyHandler(this.spyHandler,d),this.setState({container:d})}}},{key:"componentWillUnmount",value:function(){ac.default.unmount(this.stateHandler,this.spyHandler)}},{key:"render",value:function(){var d="";this.state&&this.state.active?d=((this.props.className||"")+" "+(this.props.activeClass||"active")).trim():d=this.props.className;var p={};this.state&&this.state.active?p=sc({},this.props.style,this.props.activeStyle):p=sc({},this.props.style);var m=sc({},this.props);for(var v in SS)m.hasOwnProperty(v)&&delete m[v];return m.className=d,m.style=p,m.onClick=this.handleClick,xS.default.createElement(e,m)}}]),h}(xS.default.PureComponent),o=function(){var u=this;this.scrollTo=function(h,d){t.scrollTo(h,sc({},u.state,d))},this.handleClick=function(h){u.props.onClick&&u.props.onClick(h),h.stopPropagation&&h.stopPropagation(),h.preventDefault&&h.preventDefault(),u.scrollTo(u.props.to,u.props)},this.spyHandler=function(h,d){var p=u.getScrollSpyContainer();if(!(Zr.default.isMounted()&&!Zr.default.isInitialized())){var m=u.props.horizontal,v=u.props.to,x=null,E=void 0,C=void 0;if(m){var O=0,_=0,k=0;if(p.getBoundingClientRect){var I=p.getBoundingClientRect();k=I.left}if(!x||u.props.isDynamic){if(x=t.get(v),!x)return;var G=x.getBoundingClientRect();O=G.left-k+h,_=O+G.width}var Z=h-u.props.offset;E=Z>=Math.floor(O)&&Z<Math.floor(_),C=Z<Math.floor(O)||Z>=Math.floor(_)}else{var ae=0,te=0,Q=0;if(p.getBoundingClientRect){var le=p.getBoundingClientRect();Q=le.top}if(!x||u.props.isDynamic){if(x=t.get(v),!x)return;var ce=x.getBoundingClientRect();ae=ce.top-Q+d,te=ae+ce.height}var me=d-u.props.offset;E=me>=Math.floor(ae)&&me<Math.floor(te),C=me<Math.floor(ae)||me>=Math.floor(te)}var Pe=t.getActiveLink();if(C){if(v===Pe&&t.setActiveLink(void 0),u.props.hashSpy&&Zr.default.getHash()===v){var be=u.props.saveHashHistory,fe=be===void 0?!1:be;Zr.default.changeHash("",fe)}u.props.spy&&u.state.active&&(u.setState({active:!1}),u.props.onSetInactive&&u.props.onSetInactive(v,x))}if(E&&(Pe!==v||u.state.active===!1)){t.setActiveLink(v);var ve=u.props.saveHashHistory,Fe=ve===void 0?!1:ve;u.props.hashSpy&&Zr.default.changeHash(v,Fe),u.props.spy&&(u.setState({active:!0}),u.props.onSetActive&&u.props.onSetActive(v,x))}}}};return n.propTypes=SS,n.defaultProps={offset:0},n};Object.defineProperty(cg,"__esModule",{value:!0});var _V=xt,ES=CP(_V),kV=Tl,RV=CP(kV);function CP(e){return e&&e.__esModule?e:{default:e}}function OV(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}function TS(e,i){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i&&(typeof i=="object"||typeof i=="function")?i:e}function AV(e,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);e.prototype=Object.create(i&&i.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(e,i):e.__proto__=i)}var DV=function(e){AV(i,e);function i(){var t,n,o,u;OV(this,i);for(var h=arguments.length,d=Array(h),p=0;p<h;p++)d[p]=arguments[p];return u=(n=(o=TS(this,(t=i.__proto__||Object.getPrototypeOf(i)).call.apply(t,[this].concat(d))),o),o.render=function(){return ES.default.createElement("a",o.props,o.props.children)},n),TS(o,u)}return i}(ES.default.Component);cg.default=(0,RV.default)(DV);var mg={};Object.defineProperty(mg,"__esModule",{value:!0});var IV=function(){function e(i,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(i,o.key,o)}}return function(i,t,n){return t&&e(i.prototype,t),n&&e(i,n),i}}(),MV=xt,CS=PP(MV),LV=Tl,NV=PP(LV);function PP(e){return e&&e.__esModule?e:{default:e}}function zV(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}function jV(e,i){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i&&(typeof i=="object"||typeof i=="function")?i:e}function HV(e,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);e.prototype=Object.create(i&&i.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(e,i):e.__proto__=i)}var FV=function(e){HV(i,e);function i(){return zV(this,i),jV(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return IV(i,[{key:"render",value:function(){return CS.default.createElement("input",this.props,this.props.children)}}]),i}(CS.default.Component);mg.default=(0,NV.default)(FV);var gg={},nd={};Object.defineProperty(nd,"__esModule",{value:!0});var BV=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var t=arguments[i];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},UV=function(){function e(i,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(i,o.key,o)}}return function(i,t,n){return t&&e(i.prototype,t),n&&e(i,n),i}}(),WV=xt,PS=id(WV),VV=Ga;id(VV);var GV=na,_S=id(GV),qV=Ks,kS=id(qV);function id(e){return e&&e.__esModule?e:{default:e}}function ZV(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}function XV(e,i){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i&&(typeof i=="object"||typeof i=="function")?i:e}function YV(e,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);e.prototype=Object.create(i&&i.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(e,i):e.__proto__=i)}nd.default=function(e){var i=function(t){YV(n,t);function n(o){ZV(this,n);var u=XV(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,o));return u.childBindings={domNode:null},u}return UV(n,[{key:"componentDidMount",value:function(){if(typeof window>"u")return!1;this.registerElems(this.props.name)}},{key:"componentDidUpdate",value:function(o){this.props.name!==o.name&&this.registerElems(this.props.name)}},{key:"componentWillUnmount",value:function(){if(typeof window>"u")return!1;_S.default.unregister(this.props.name)}},{key:"registerElems",value:function(o){_S.default.register(o,this.childBindings.domNode)}},{key:"render",value:function(){return PS.default.createElement(e,BV({},this.props,{parentBindings:this.childBindings}))}}]),n}(PS.default.Component);return i.propTypes={name:kS.default.string,id:kS.default.string},i};Object.defineProperty(gg,"__esModule",{value:!0});var RS=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var t=arguments[i];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},$V=function(){function e(i,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(i,o.key,o)}}return function(i,t,n){return t&&e(i.prototype,t),n&&e(i,n),i}}(),KV=xt,OS=vg(KV),QV=nd,JV=vg(QV),eG=Ks,AS=vg(eG);function vg(e){return e&&e.__esModule?e:{default:e}}function tG(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}function nG(e,i){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i&&(typeof i=="object"||typeof i=="function")?i:e}function iG(e,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);e.prototype=Object.create(i&&i.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(e,i):e.__proto__=i)}var _P=function(e){iG(i,e);function i(){return tG(this,i),nG(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return $V(i,[{key:"render",value:function(){var t=this,n=RS({},this.props);return n.parentBindings&&delete n.parentBindings,OS.default.createElement("div",RS({},n,{ref:function(o){t.props.parentBindings.domNode=o}}),this.props.children)}}]),i}(OS.default.Component);_P.propTypes={name:AS.default.string,id:AS.default.string};gg.default=(0,JV.default)(_P);var mf=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var t=arguments[i];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},DS=function(){function e(i,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(i,o.key,o)}}return function(i,t,n){return t&&e(i.prototype,t),n&&e(i,n),i}}();function IS(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}function MS(e,i){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i&&(typeof i=="object"||typeof i=="function")?i:e}function LS(e,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);e.prototype=Object.create(i&&i.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(e,i):e.__proto__=i)}var lc=xt,_o=Cl,gf=na,Mn=Ks,Xr=td,NS={to:Mn.string.isRequired,containerId:Mn.string,container:Mn.object,activeClass:Mn.string,spy:Mn.bool,smooth:Mn.oneOfType([Mn.bool,Mn.string]),offset:Mn.number,delay:Mn.number,isDynamic:Mn.bool,onClick:Mn.func,duration:Mn.oneOfType([Mn.number,Mn.func]),absolute:Mn.bool,onSetActive:Mn.func,onSetInactive:Mn.func,ignoreCancelEvents:Mn.bool,hashSpy:Mn.bool,spyThrottle:Mn.number},rG={Scroll:function(e,i){console.warn("Helpers.Scroll is deprecated since v1.7.0");var t=i||gf,n=function(u){LS(h,u);function h(d){IS(this,h);var p=MS(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,d));return o.call(p),p.state={active:!1},p}return DS(h,[{key:"getScrollSpyContainer",value:function(){var d=this.props.containerId,p=this.props.container;return d?document.getElementById(d):p&&p.nodeType?p:document}},{key:"componentDidMount",value:function(){if(this.props.spy||this.props.hashSpy){var d=this.getScrollSpyContainer();_o.isMounted(d)||_o.mount(d,this.props.spyThrottle),this.props.hashSpy&&(Xr.isMounted()||Xr.mount(t),Xr.mapContainer(this.props.to,d)),this.props.spy&&_o.addStateHandler(this.stateHandler),_o.addSpyHandler(this.spyHandler,d),this.setState({container:d})}}},{key:"componentWillUnmount",value:function(){_o.unmount(this.stateHandler,this.spyHandler)}},{key:"render",value:function(){var d="";this.state&&this.state.active?d=((this.props.className||"")+" "+(this.props.activeClass||"active")).trim():d=this.props.className;var p=mf({},this.props);for(var m in NS)p.hasOwnProperty(m)&&delete p[m];return p.className=d,p.onClick=this.handleClick,lc.createElement(e,p)}}]),h}(lc.Component),o=function(){var u=this;this.scrollTo=function(h,d){t.scrollTo(h,mf({},u.state,d))},this.handleClick=function(h){u.props.onClick&&u.props.onClick(h),h.stopPropagation&&h.stopPropagation(),h.preventDefault&&h.preventDefault(),u.scrollTo(u.props.to,u.props)},this.stateHandler=function(){t.getActiveLink()!==u.props.to&&(u.state!==null&&u.state.active&&u.props.onSetInactive&&u.props.onSetInactive(),u.setState({active:!1}))},this.spyHandler=function(h){var d=u.getScrollSpyContainer();if(!(Xr.isMounted()&&!Xr.isInitialized())){var p=u.props.to,m=null,v=0,x=0,E=0;if(d.getBoundingClientRect){var C=d.getBoundingClientRect();E=C.top}if(!m||u.props.isDynamic){if(m=t.get(p),!m)return;var O=m.getBoundingClientRect();v=O.top-E+h,x=v+O.height}var _=h-u.props.offset,k=_>=Math.floor(v)&&_<Math.floor(x),I=_<Math.floor(v)||_>=Math.floor(x),G=t.getActiveLink();if(I)return p===G&&t.setActiveLink(void 0),u.props.hashSpy&&Xr.getHash()===p&&Xr.changeHash(),u.props.spy&&u.state.active&&(u.setState({active:!1}),u.props.onSetInactive&&u.props.onSetInactive()),_o.updateStates();if(k&&G!==p)return t.setActiveLink(p),u.props.hashSpy&&Xr.changeHash(p),u.props.spy&&(u.setState({active:!0}),u.props.onSetActive&&u.props.onSetActive(p)),_o.updateStates()}}};return n.propTypes=NS,n.defaultProps={offset:0},n},Element:function(e){console.warn("Helpers.Element is deprecated since v1.7.0");var i=function(t){LS(n,t);function n(o){IS(this,n);var u=MS(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,o));return u.childBindings={domNode:null},u}return DS(n,[{key:"componentDidMount",value:function(){if(typeof window>"u")return!1;this.registerElems(this.props.name)}},{key:"componentDidUpdate",value:function(o){this.props.name!==o.name&&this.registerElems(this.props.name)}},{key:"componentWillUnmount",value:function(){if(typeof window>"u")return!1;gf.unregister(this.props.name)}},{key:"registerElems",value:function(o){gf.register(o,this.childBindings.domNode)}},{key:"render",value:function(){return lc.createElement(e,mf({},this.props,{parentBindings:this.childBindings}))}}]),n}(lc.Component);return i.propTypes={name:Mn.string,id:Mn.string},i}},oG=rG;Object.defineProperty(zn,"__esModule",{value:!0});zn.Helpers=zn.ScrollElement=zn.ScrollLink=zn.animateScroll=zn.scrollSpy=zn.Events=zn.scroller=zn.Element=zn.Button=jP=zn.Link=void 0;var sG=cg,kP=yr(sG),aG=mg,RP=yr(aG),lG=gg,OP=yr(lG),uG=na,AP=yr(uG),cG=kl,DP=yr(cG),dG=Cl,IP=yr(dG),hG=Qc,MP=yr(hG),pG=Tl,LP=yr(pG),fG=nd,NP=yr(fG),mG=oG,zP=yr(mG);function yr(e){return e&&e.__esModule?e:{default:e}}var jP=zn.Link=kP.default;zn.Button=RP.default;zn.Element=OP.default;zn.scroller=AP.default;zn.Events=DP.default;zn.scrollSpy=IP.default;zn.animateScroll=MP.default;zn.ScrollLink=LP.default;zn.ScrollElement=NP.default;zn.Helpers=zP.default;zn.default={Link:kP.default,Button:RP.default,Element:OP.default,scroller:AP.default,Events:DP.default,scrollSpy:IP.default,animateScroll:MP.default,ScrollLink:LP.default,ScrollElement:NP.default,Helpers:zP.default};const al=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","Z"];class zS extends B.Component{renderAlphaLinks(){const i=[];for(let t=0;t<al.length;t++){const n=al[t],o=`alpha-${t}`;i.push(q.jsxs("span",{children:[q.jsx(jP,{to:o,offset:-120,containerId:"glossaryViewInner",smooth:"true",children:n})," "]},`link-${o}`))}return q.jsxs("div",{style:{display:"inline"},children:[q.jsx("input",{id:"glossary-filter",className:"searchBox",placeholder:"Filter by Entry",onChange:this.props.onFilterChange,value:this.props.filterTerm}),q.jsxs("div",{className:"alphaNav",children:[q.jsx("span",{style:{color:"black"},children:"Go to: "}),i]})]})}render(){return q.jsx("div",{className:"glossaryNav",children:this.renderAlphaLinks()})}}var HP={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},jS=xt.createContext&&xt.createContext(HP),Qr=function(){return Qr=Object.assign||function(e){for(var i,t=1,n=arguments.length;t<n;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Qr.apply(this,arguments)},gG=function(e,i){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&i.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)i.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(t[n[o]]=e[n[o]]);return t};function FP(e){return e&&e.map(function(i,t){return xt.createElement(i.tag,Qr({key:t},i.attr),FP(i.child))})}function mi(e){return function(i){return xt.createElement(vG,Qr({attr:Qr({},e.attr)},i),FP(e.child))}}function vG(e){var i=function(t){var n=e.attr,o=e.size,u=e.title,h=gG(e,["attr","size","title"]),d=o||t.size||"1em",p;return t.className&&(p=t.className),e.className&&(p=(p?p+" ":"")+e.className),xt.createElement("svg",Qr({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,n,h,{className:p,style:Qr(Qr({color:e.color||t.color},t.style),e.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),u&&xt.createElement("title",null,u),e.children)};return jS!==void 0?xt.createElement(jS.Consumer,null,function(t){return i(t)}):i(HP)}function yG(e){return mi({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M1 2a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2zm5 0a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V2zm5 0a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1V2zM1 7a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V7zm5 0a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V7zm5 0a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1V7zM1 12a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1v-2zm5 0a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1v-2zm5 0a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1v-2z"}}]})(e)}function wG(e){return mi({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.267.267 0 0 1 .02-.022z"}}]})(e)}function bG(e){return mi({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"}}]})(e)}function BP(e){return mi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 504C119 504 8 393 8 256S119 8 256 8s248 111 248 248-111 248-248 248zm28.9-143.6L209.4 288H392c13.3 0 24-10.7 24-24v-16c0-13.3-10.7-24-24-24H209.4l75.5-72.4c9.7-9.3 9.9-24.8.4-34.3l-11-10.9c-9.4-9.4-24.6-9.4-33.9 0L107.7 239c-9.4 9.4-9.4 24.6 0 33.9l132.7 132.7c9.4 9.4 24.6 9.4 33.9 0l11-10.9c9.5-9.5 9.3-25-.4-34.3z"}}]})(e)}function UP(e){return mi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8c137 0 248 111 248 248S393 504 256 504 8 393 8 256 119 8 256 8zm-28.9 143.6l75.5 72.4H120c-13.3 0-24 10.7-24 24v16c0 13.3 10.7 24 24 24h182.6l-75.5 72.4c-9.7 9.3-9.9 24.8-.4 34.3l11 10.9c9.4 9.4 24.6 9.4 33.9 0L404.3 273c9.4-9.4 9.4-24.6 0-33.9L271.6 106.3c-9.4-9.4-24.6-9.4-33.9 0l-11 10.9c-9.5 9.6-9.3 25.1.4 34.4z"}}]})(e)}function xG(e){return mi({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"}}]})(e)}function SG(e){return mi({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M240.971 130.524l194.343 194.343c9.373 9.373 9.373 24.569 0 33.941l-22.667 22.667c-9.357 9.357-24.522 9.375-33.901.04L224 227.495 69.255 381.516c-9.379 9.335-24.544 9.317-33.901-.04l-22.667-22.667c-9.373-9.373-9.373-24.569 0-33.941L207.03 130.525c9.372-9.373 24.568-9.373 33.941-.001z"}}]})(e)}function HS(e){return mi({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M278.9 511.5l-61-17.7c-6.4-1.8-10-8.5-8.2-14.9L346.2 8.7c1.8-6.4 8.5-10 14.9-8.2l61 17.7c6.4 1.8 10 8.5 8.2 14.9L293.8 503.3c-1.9 6.4-8.5 10.1-14.9 8.2zm-114-112.2l43.5-46.4c4.6-4.9 4.3-12.7-.8-17.2L117 256l90.6-79.7c5.1-4.5 5.5-12.3.8-17.2l-43.5-46.4c-4.5-4.8-12.1-5.1-17-.5L3.8 247.2c-5.1 4.7-5.1 12.8 0 17.5l144.1 135.1c4.9 4.6 12.5 4.4 17-.5zm327.2.6l144.1-135.1c5.1-4.7 5.1-12.8 0-17.5L492.1 112.1c-4.8-4.5-12.4-4.3-17 .5L431.6 159c-4.6 4.9-4.3 12.7.8 17.2L523 256l-90.6 79.7c-5.1 4.5-5.5 12.3-.8 17.2l43.5 46.4c4.5 4.9 12.1 5.1 17 .6z"}}]})(e)}function FS(e){return mi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zM262.655 90c-54.497 0-89.255 22.957-116.549 63.758-3.536 5.286-2.353 12.415 2.715 16.258l34.699 26.31c5.205 3.947 12.621 3.008 16.665-2.122 17.864-22.658 30.113-35.797 57.303-35.797 20.429 0 45.698 13.148 45.698 32.958 0 14.976-12.363 22.667-32.534 33.976C247.128 238.528 216 254.941 216 296v4c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12v-1.333c0-28.462 83.186-29.647 83.186-106.667 0-58.002-60.165-102-116.531-102zM256 338c-25.365 0-46 20.635-46 46 0 25.364 20.635 46 46 46s46-20.636 46-46c0-25.365-20.635-46-46-46z"}}]})(e)}function WP(e){return mi({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M7.75 6.5a1.25 1.25 0 1 0 0 2.5 1.25 1.25 0 0 0 0-2.5Z"}},{tag:"path",attr:{d:"M2.5 1h8.44a1.5 1.5 0 0 1 1.06.44l10.25 10.25a1.5 1.5 0 0 1 0 2.12l-8.44 8.44a1.5 1.5 0 0 1-2.12 0L1.44 12A1.497 1.497 0 0 1 1 10.94V2.5A1.5 1.5 0 0 1 2.5 1Zm0 1.5v8.44l10.25 10.25 8.44-8.44L10.94 2.5Z"}}]})(e)}function EG(e){return mi({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"}}]})(e)}function TG(e){return mi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M249.38 336L170 256l79.38-80m-68.35 80H342"}},{tag:"path",attr:{fill:"none",strokeMiterlimit:"10",strokeWidth:"32",d:"M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192 192-86 192-192z"}}]})(e)}function CG(e){return mi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M262.62 336L342 256l-79.38-80m68.35 80H170"}},{tag:"path",attr:{fill:"none",strokeMiterlimit:"10",strokeWidth:"32",d:"M256 448c106 0 192-86 192-192S362 64 256 64 64 150 64 256s86 192 192 192z"}}]})(e)}function PG(e){return mi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"square",strokeMiterlimit:"10",strokeWidth:"44",d:"M416 128L192 384l-96-96"}}]})(e)}function _G(e){return mi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M336 112a80 80 0 00-160 0v96"}},{tag:"rect",attr:{width:"320",height:"272",x:"96",y:"208",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",rx:"48",ry:"48"}}]})(e)}function kG(){return q.jsxs("svg",{className:"document-pages-icon",width:"22",height:"16",viewBox:"0 0 22 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[q.jsxs("g",{id:"fluent:document-one-page-20-regular",clipPath:"url(#clip0_288_13990)",children:[q.jsx("path",{id:"Vector",d:"M2.16667 0H8.83333C9.27536 0 9.69928 0.210714 10.0118 0.585786C10.3244 0.960859 10.5 1.46957 10.5 2V14C10.5 14.5304 10.3244 15.0391 10.0118 15.4142C9.69928 15.7893 9.27536 16 8.83333 16H2.16667C1.72464 16 1.30072 15.7893 0.988155 15.4142C0.675595 15.0391 0.5 14.5304 0.5 14V2C0.5 1.46957 0.675595 0.960859 0.988155 0.585786C1.30072 0.210714 1.72464 0 2.16667 0ZM2.16667 1C1.94565 1 1.73369 1.10536 1.57741 1.29289C1.42113 1.48043 1.33333 1.73478 1.33333 2V14C1.33333 14.2652 1.42113 14.5196 1.57741 14.7071C1.73369 14.8946 1.94565 15 2.16667 15H8.83333C9.05435 15 9.26631 14.8946 9.42259 14.7071C9.57887 14.5196 9.66667 14.2652 9.66667 14V2C9.66667 1.73478 9.57887 1.48043 9.42259 1.29289C9.26631 1.10536 9.05435 1 8.83333 1H2.16667ZM8 4.5C8.00003 4.61703 7.96586 4.73036 7.90343 4.82026C7.84099 4.91016 7.75426 4.97094 7.65833 4.992L7.58333 5H3.41667C3.31255 5.00023 3.21212 4.95367 3.13518 4.86949C3.05824 4.78531 3.01035 4.66961 3.00094 4.54518C2.99153 4.42074 3.02129 4.29659 3.08435 4.19717C3.14741 4.09775 3.23921 4.03026 3.34167 4.008L3.41667 4H7.58333C7.69384 4 7.79982 4.05268 7.87796 4.14645C7.9561 4.24021 8 4.36739 8 4.5ZM8 8C8.00003 8.11703 7.96586 8.23036 7.90343 8.32026C7.84099 8.41016 7.75426 8.47093 7.65833 8.492L7.58333 8.5H3.41667C3.31255 8.50023 3.21212 8.45367 3.13518 8.36949C3.05824 8.28531 3.01035 8.16961 3.00094 8.04518C2.99153 7.92074 3.02129 7.79659 3.08435 7.69717C3.14741 7.59775 3.23921 7.53026 3.34167 7.508L3.41667 7.5H7.58333C7.69384 7.5 7.79982 7.55268 7.87796 7.64645C7.9561 7.74021 8 7.86739 8 8ZM8 11.5C8.00003 11.617 7.96586 11.7304 7.90343 11.8203C7.84099 11.9102 7.75426 11.9709 7.65833 11.992L7.58333 12H3.41667C3.31255 12.0002 3.21212 11.9537 3.13518 11.8695C3.05824 11.7853 3.01035 11.6696 3.00094 11.5452C2.99153 11.4207 3.02129 11.2966 3.08435 11.1972C3.14741 11.0977 3.23921 11.0303 3.34167 11.008L3.41667 11H7.58333C7.69384 11 7.79982 11.0527 7.87796 11.1464C7.9561 11.2402 8 11.3674 8 11.5Z"}),q.jsx("path",{id:"Vector_2",d:"M13.1667 0H19.8333C20.2754 0 20.6993 0.210714 21.0118 0.585786C21.3244 0.960859 21.5 1.46957 21.5 2V14C21.5 14.5304 21.3244 15.0391 21.0118 15.4142C20.6993 15.7893 20.2754 16 19.8333 16H13.1667C12.7246 16 12.3007 15.7893 11.9882 15.4142C11.6756 15.0391 11.5 14.5304 11.5 14V2C11.5 1.46957 11.6756 0.960859 11.9882 0.585786C12.3007 0.210714 12.7246 0 13.1667 0ZM13.1667 1C12.9457 1 12.7337 1.10536 12.5774 1.29289C12.4211 1.48043 12.3333 1.73478 12.3333 2V14C12.3333 14.2652 12.4211 14.5196 12.5774 14.7071C12.7337 14.8946 12.9457 15 13.1667 15H19.8333C20.0543 15 20.2663 14.8946 20.4226 14.7071C20.5789 14.5196 20.6667 14.2652 20.6667 14V2C20.6667 1.73478 20.5789 1.48043 20.4226 1.29289C20.2663 1.10536 20.0543 1 19.8333 1H13.1667ZM19 4.5C19 4.61703 18.9659 4.73036 18.9034 4.82026C18.841 4.91016 18.7543 4.97094 18.6583 4.992L18.5833 5H14.4167C14.3125 5.00023 14.2121 4.95367 14.1352 4.86949C14.0582 4.78531 14.0103 4.66961 14.0009 4.54518C13.9915 4.42074 14.0213 4.29659 14.0843 4.19717C14.1474 4.09775 14.2392 4.03026 14.3417 4.008L14.4167 4H18.5833C18.6938 4 18.7998 4.05268 18.878 4.14645C18.9561 4.24021 19 4.36739 19 4.5ZM19 8C19 8.11703 18.9659 8.23036 18.9034 8.32026C18.841 8.41016 18.7543 8.47093 18.6583 8.492L18.5833 8.5H14.4167C14.3125 8.50023 14.2121 8.45367 14.1352 8.36949C14.0582 8.28531 14.0103 8.16961 14.0009 8.04518C13.9915 7.92074 14.0213 7.79659 14.0843 7.69717C14.1474 7.59775 14.2392 7.53026 14.3417 7.508L14.4167 7.5H18.5833C18.6938 7.5 18.7998 7.55268 18.878 7.64645C18.9561 7.74021 19 7.86739 19 8ZM19 11.5C19 11.617 18.9659 11.7304 18.9034 11.8203C18.841 11.9102 18.7543 11.9709 18.6583 11.992L18.5833 12H14.4167C14.3125 12.0002 14.2121 11.9537 14.1352 11.8695C14.0582 11.7853 14.0103 11.6696 14.0009 11.5452C13.9915 11.4207 14.0213 11.2966 14.0843 11.1972C14.1474 11.0977 14.2392 11.0303 14.3417 11.008L14.4167 11H18.5833C18.6938 11 18.7998 11.0527 18.878 11.1464C18.9561 11.2402 19 11.3674 19 11.5Z"})]}),q.jsx("defs",{children:q.jsx("clipPath",{id:"clip0_288_13990",children:q.jsx("rect",{width:"21",height:"16",transform:"translate(0.5)"})})})]})}const $a={};$a.transcriptionTypeLabels={f:"Facsimile",glossary:"Glossary"};const RG="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADUAAAAbCAYAAAGrR/egAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAFxEAABYlAXDOav8AAAW+SURBVEhL3ZcJTJRHFIDX1tZ6NI02adPEVu2pYlsvWqFVY0mlVQubNrZqxC5WkVMBVxQUrSKiGGMFigIaDFFA8cSjWkWEpkKVAOsBTZQiKsgh4LHicn6d/f8FdqELiNKoX7I78978M2/e/DPvf6OgDcw0aqHG0Bjs7cGHmzLZt3itkKr1KonODCvTfuMKSyu2navE871xKK3flxr0dH5YE+aKERXi8eGrJbG5Y+EpGkQR+prRWAXHkZT/QdNTP9jFw/0iSnR12M+YTcjxEhSfqLAZPYVJfb8wPNVMx6dqRMc7vdADXnxeqna80/SpYGsnVZs6KUbqFQ0UP5Bl/TqkyFUhmK5KU6cK/V9NCfcTv5TkfOql0sHWFq/jN6R6I3Kn+jNS0fOV16HkD+ZOnkHdzb8knYurI7lSrZmO+2REpzq1zz3o9pKh3kzXGIueK9bDHdwOGBQyrYw1vhczu/aRaGUsO8SRsBMaxh0tFRZr6W+1TjKsVDuSuP8QM5aphNSAt72ChF2XSA0aS/j2WDY5jSfisk4awxytjDnNnyiVRZlxFGmPcLi0hkOzXyHrlqRm/syvhK0CekzTH9oKLOzDJH2mlzWHC6WqWUyMmV86o5YWB8CUthe/azaIGf43Y11jKDUIdpcZBJnHa+j672JEMWTvXtCrj1y/ekdqevwe1QhP+nQXI/cUcc+gEzx+Q39Gi6WrEuE4FU40R90Whtrepo9CK49C/cfiuf6CQdLguiNPlK3Pk/cgF6nsKC0MVeFnY0viuhmyeHEzJ69rKUyYh3doJOFrVCzNquKWZi+W6hjKuM3sZYHs3Z+Ire/Pch8zmBoqOsrXHkcpSd/JnnJIdFFQXguv2unTJEF9Dt9ZxXErPZroAll11k2F7RR7ek32lBVmMDFUcMARtyT9B7iSiaPicFN4iUXTMjM0UWqvzQ5jsF82aVFu3BVyqro/ycVSE4tdl8sVM5gYCv7Gi8uGek7EByhcDkv1kDkuzFrgzrf26yV518J++JwqpPScM46qeQQGTcfZW56MOYwMGV54m8Gz87TYDF3Hs2fokam/DUmroHtvWJfR5it+sp2qFsdgdzCoxC89R5wGEUqfE/H6mDhfmoOw5HvYKPLgCnFHMuLJdqpeTLZcxIXz2bAnVCRoItnWf+mGOEJCAqRdgmsina01fWtP/varyofNwonu/cBGhKi7JeA3UtyCXoaVp8RdVkTlFjwdZ6pa3MJLb0o3cZk6cUMVss4obzCifaeq8jgW5sGYKSoiW16qxHcwZc3nLNqXS/F9g6od6nQV5MaOIkrsqLquCeftO1WcvJYAtTU2fhFEuASQ1TQRsVoVB3BVjGZDShmVQpS0GX6op1swZPBQhip9CDxhSC11ZeT/tpoh7w6ij+ItBo+JJqNaHiznVyX244fz8QgLhlqsIPLQTf3oJsnLw9COUwWc8HHFZbQPSeXlaGJXYPnpQcSuFrOvJm+rBQqvQ+RrhXVtKg4WSpQbTiLilEzxPgJcp/HOrCT0L1JXepZEzx74psnNQsPVlJ2kiaSlib/9Ubo7o4q/YlA8PG069SB9JbPVdkyIEYdVUF+WRUqYkhF7RUSqzSR0wEcEpFSgT3PO+PZl7JoYTt+Q97m0yHUXiVcHMGFMPNfEVs2LW8WAbv6clp4QR+VCNM4/LhQ7IZiN638hJHwjnpPeYLjKmzCNaZh+GNpwSktG4AJWTfdhjziTjWgLM4i1HsbqLct52yKcrAdy9LkSZsWwz4LYkd04GQ3bPaZiabuIbZVCLE4jLnAYfaOLpNaGhjsc+UnBwMiLwpJM+Rl/HN4ciMOCnZyvNig7gXmn7uVyMOYYUQf+EWm0EfU6dFeSWbTED//UG9Qan/byZLZu8MPZeQ5znbawK0naqDIiQBSkRKH28UWd1HgHuYtm5VKWuLvjNMeJ+GwN6duTOXc8B0PW2inaDRRPI8+gU/AvCRLk8OxchHwAAAAASUVORK5CYII=",OG="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIYAAAASCAYAAAHpiZZSAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAFa8AABWvAQS7x0sAAAmkSURBVFhH7Zl5VFT3Fccfi2DkgFI1RpOcY416rKaWWmuNaeyC5DTEDZQcjaiNUGtEmugIYhVZVKIYDYoS3FCjBxeqYpEEK3HDKqKEzShEIEAwLEHWAQYG59vfve8NDDAKuFT/4HPOzPstb/m9++6725PwBOCTbDSXIL0dygMxd8qhOnKH26GObpCkwVi33gUeqt+KtoT6gnOArkrMalGTvhvanAPySR6XJ3OSg7lNYpMGW0v5fPlHJqCYGulbePleUz5C8KZ1WDNFQvqeQNy9Esn72fT7G+43qrn9/7kdEnQ7bmxioRvjPwErlFYLvPrK75WecXghQQFrkdPQBCshFmvLqehvLaGyked5ISQaJ88vMP7nEu7RoBAXLSTh45lwD7rBYiMtINGFLfESOxRB6vsrfCNESBqhKbkO1OfTkYwkWQBNGrwwJ5I1hMf4/xnz8EVkhSuN1gTEFyFXabfluk5pGBCnAQaG3lJ67RGLSORGw32gpxA9UAfPqDwe0y+CHonf6NnctlMt40Xk3T7G44Vo4HFDaHyc42lc0gIj9xbwIpz7LeK5j/kawHHxbM2CknH4R2URdBAhOYo3mbZKnxeRfxh+X5/lriS93rwIkoS8XwXP6SkRv1HK8fIi8iH1G4X+i+N47DN7CTHiEDrWbP11/SKePc/FIp4XFGGQavhxy8R5D1B2EqvPVIpeDUwnbwUyQxBVUC3UJBSHsgzsmFCbmDuVuOw9BBcL66FLXI0l+9OBK6uxM0nY4cRAbE/W4NdClcjEkDqRmSkUhy5UqfgUjstcxH81RttMFNs6/E6ywXei5aZ6i6bZ/JCqfbtfhShxyqLEMPheATL2eeDNqLsoPL8Zy/+rY9tI7wCq8ppVkKkrhdWCGEBTAct50VALJ0bvBVl/eje0OfvgcrSUd20WRuAl2Vi+ZzodSA5GZq3c7zljJ29l6uEcmqC0BSyMauwZPhdl1G+8iLURGTj6xhDcqeM9GHqvDIVRce8i5q67pswSFWx/CbLBBNlhgrwysdl3Hm/1kF2md5BsMxmDZmEIz603Cq3RYo2ZFTQ32wrjAL+nRDthPG/E+X2KH5R2Z2goScHLYdlKr2t02wwDuoVhwGMJY/C8MKXVMQ5uFBBmQOUjjFmnycP8P21S2g+jDv6DlnDrbLgchDwKLIwN5ia4IILP5E/Mkd2gw/s9RBohwvSYBb2QWqNDH4vVHHz077UKhpZFFoYOvT2ExxGMHvBHkK+xcw3g/vj5vig9PRl7swyFEYvbu2bguHity79eDJ+EGiSteg/uUblI3eSGNxccgubGRsyO/Uk4s1T8ZuopcZwa3q878Dn9544R//cwwnq42GrhYTtMbDUtwgiZ0Sr2uv75dNSKbdqu6cI33sd0c1lY8Wvo1nWYJplyn2BhrDdxFrsRyfCPlxOOrbbWHBWlVzXiK4+XuC2arRg8t0UzfvmyyNckOzRoryEgXETeCsXH/9JKGF5rzuPvkwbx+eg3TXUaid7TcV5EYWWXfRGWKnYrT4LjthuoTQnFtOgSqLMim/eXpCEoFa541siVfP4t3gPFf2OzMPLjtiDOwJPVFJ4Qx1jgNEUKuoZ2wnAymcl9goURZCKhiQLo0mOI+E4LC5f9NIya6DlIrSR/JfPlwj64K8uKkYWRje1H5SDbZ8QsIf1SrAg4yX2irTBUq+Kx0N4LlLrqubT84cIQwQQmfGLoiks6LQw9tcWnsDkDnRCGqQnMzMwgTY3gwdTNNvwU8hKDEXKjArfD5Ce55FjrXESvGeNH0vw47Bg7DCnCh989+Q7v/6HQkLITbYTBNqMMY/kpTwQ9sAcJo+U1AZLCFvE57TeL8XbCAHa5SliRoGv3mtSXJ/Nx1n3duV95xgeSeU8kHCYhPEwznjty4Tn5hNLuHHt9eiutrsPC6EamWxjdGOUZKkYuDtkNxQCyo+N9EZtDlvTRIIdFuSDZacoHyVZTTkj2mvJCstkPqkI9LjW39sH7zxIsRzthe5oy+MjUcb7pP8gTZ0WoU52xFwuEfGyHLcc5Iw7yaWKgGIki9JqBSLEwlx7mMKUHJhwtFUWbuReN+dYvoAfN8W8SQlOqoFH8UF3cIrxka6nMTUTw5VLUGvFR2gte+MUrVsp+Ej7YncylssTAMXitt/7cEuy8onCTq60y5LCpACvPOyPweA470dIuKEZmpDscXlHOMcQZK2L0M6W4sHwdtrr6Yr2XK4bT/KvvwDM2Cem7lmISX3Mg/uC6D9/q70k4fqq2kPOniouMGtlRAXDi/cXvtQl4N/quMleEbyI+x18Hi/VtmCDP9x6KsYFXxZwOpdfC8YFy3ItD7XCICp61eRwsUIWmfU1TRltTiJP/UK4nWaFP/x3izgUixKRPEBRZUdGCoMIFRVhUvKBrar8/CKeZX+CgPx1rCpO1tJY2ikHBBhU1mgMOEY5SpSciUwOtkQdM4SlVflKrxWRmCCcwVA6jJKZDssI5YjNa/icaL3I4S5UiCmmpWkRhrWHFSE+HFkOEvBVF5+G2MhhLT9BOeooR77EKG9yPiCC6gXMCqjBR9EdUXfHDnGWT4HZGkaqIBKnixNEgYaAYXCgrOIdPtyyG/ZGWLwBCnZG4IwTubxxBocgh6GMLRYtUlSKoMkVRI1WnKIyWLcYSuUpFVHWgGHWlnHxRKY8SsFZ0RjFyDnDUqa9u6WljMZxBX5TkhI1I5o9l/vF1YiwVITa9YC600iH8NlsC9SlXWTEMchciM/xVDLAhDXwLGy8VG7UabRUjP3IcRvYVx4xZiZPZdIsJWEmKsf8W6kTiR98GKPnjr1tt6EgxKDHMS4vArA+XQhX9oApYBacEhopBqQGVIDk9IBTFmBKehcrMMHy21gGbkpQ5gVqYfpVqNByi6NrGKOFSZZcUg9Hgp4zj8Ld1x+l2T78FTWUqtjmQ3Huhd7/tbDXqnoRibDAzgeS0H/laJZcPEnnbmnio6SbSgmFp4oevhBKwc8nYhr5WppAmbUO62ojFUMfCrY8Ttp3/ETTdjmbFqBadAuwb8SJ8tl7CDyyQAkRNHIGfSSPxUeRNLo9QsZ1KJFxwJ4qOwX6UN/75rxLkxE3FmIe6klguxmfvdcEY13lYm6Sky+Xn4PmuF2asuIp64d+vdFIxjFkM2ZWocfvAcrgN/j2CUnhArPMqdga8Dzt/+jhWiZSnbTGa1Cj+ty/Mem1hxWgs/xKrJQvMPkX33ARN5m44Smaw2NgFxWjnSrrpgFyu21NO3ZXafZfoSDGeEt2K8Zg82azEEA3K0p6LrKSbbvQA/wNGF2xMO2U8SgAAAABJRU5ErkJggg==",AG="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIcAAAAQCAYAAAFLg1xnAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAFYcAABURAZUCwyYAAAk6SURBVFhH7ZkLUBXnFceXhwg1UkWrrVWrdpqk1alNxmgntrY0RpumEbVANYCIQUTLqFGBiqAEQQHRgWhMMdRHCQkQRYxRY0Q0xQdgfBFFBSI+UBRFEJCLl8v995yz914v8ijqdcZO+c3c3e/b3bv77dmz5/ufswosgJzEI+OOdID7QFUxtkRNwfnkINny7qoQWVd8/hdUpDtL23XNHhy5eQ/1OqBUq1dP8qTQSfSohgb56yehuiBJ3VpbBFzJosZdBPimYMwCH6ApH1OX/xOvhH0hh4RllMM2PJv+TSfR6w+jy9tpUBR1UKZ1j36oOJ1B/b7SB11o2Itu6m3KBYCoaYG0LARKtsI1ZBc2J01DfuY0Ocf1NGe5aMSo51FSrZqA+dC7D6oagF6ODmikEbA5rK2UliaZGv2NofXk8ECMGAfSFhZ5NpaArKhAW7wR9s95QXN7F370wVnEOavji1k7D5ekBbjTcb9dmYftN4Fx8cdlWyX9Qudlmx6nk9IfQWPGouQesLO8Xrap+xql3fDFTNOxijIed7b+FW5TPoWeHpHysbs1wmhn0aZJsJ+2XQ7S0C/cyQ8bLgKDFmbLNmZExJFmAwl6811alkjbSOLpOoSuzjEN5NVhP6YlvRtEw56ZtDyH+O5dpC8DsZ4s7eaPRk9e9FRQLdIeMpCy5ImwsbWTDRbjRh5GRh41dCwHv41s7aHdFKQVsnM8IGTYQIyMUN/ojsBPpFSrPi0jYhB2E3PYXWqghW231YYtwKXPQnFeWnWY3Ntf4ha7EEdRczfavTIYZdwQg+RJ2GG34tBjdC3mbm4UZu2rQmHqbBzRNmLljGTZfuNLX+y4CjX+ERyN2e04FrLrcWRmg6iRoQzBsfvkOJXGZlGCXZKjN7tlWMY17JjugBoK/Iz10r0Gg+jFTTmmMmYG0cHKNpourKUXy5bCMrDB1Z53Y9uSrkDNcfRZdx73ynMw4B8luHW6dYNUnNqC0CPAyY/84Rx/AhWHE/DnHbdwYeMCTEj61nCUyqrZo/HGnDRpv/ObqTRJAFl+r+O49lEN0gS32Axa69oxCD2mswlYd6oGKFiNxML6tg3SFhzdFMfeht6zhSVemdZo1yD/byjQN8n8E2O5SV9YH+5haFmWFxYtxZn416AMX2DYYqAhB3Z0H1drDf0OYOO62dBSUZbTCRQrG9yit+dNbis22H6bd+mwiPvdnOTA+tvHxGg/SyLRhwZE9XCX/gsjPpH9Rq58tZq294VXsD/1dAj65R9le+Ti6bIWavIx1lcNgim+0XRtYO6fBtD/BonQuLrLB7PHjce0hAIs2TwLL9F1JoSrMYaNcSLyZZyooI42F460b8SSz2Vf1vz+KOWgZ6B39Bb8wEGRGCacWStjTjyragExxvVUpETYQAk/RAK16RpW5Mk+lUYNunhuQ+XuZTCFvcYaOPR6X5rX9idgHwW6xT1/Iv3MVW4GaUFoLmHwyBRpqp7RhjEIjwVjZR0dNg9HA8NY5grBMfNRnzUdcd9QwCNeWRgg6xWjvcD3b26M5JcH4oqZTHnYGD3d1so6oWdXenz1mPRRgfRPxdijlgYtxihPQ3KpegcmY+gaDkKxo1lEr4GdZwYKkybB5HGa23CcqUr9ysLt+LItY9w6jWFhOdJM2/AeLds2Rm6EBw4e3YuA7Cok+/wNFwzbmdt7vDtkDOFKujzti2SE9oxxn2aWpTt5vgeqt05p3xgNByPAYaM2KwTdfTKhrT0Lzx210NVdh1NCIWInfk/+EOniSMum1o1BRHgMo2Ulfmo9RPoek4fTsgG/6zJU+iZqTtFN9EIxt79LgVsIC7Y7CPSMQO1XHTOG0TMOBA5BUVX7xqijObS73QRSUoCDrYuMuYUxZNkG1RdUUfSscTj8Vw88w4yHjfGotGMMNYD67Sbh84xxLM7ZIrPJw3TqjE7aRJyD4yinKs1m2WcVygd55n4aSfLThsMdp1ethbyWNEoY5LTrSULhk9CKczRBW7IJE627INaQgzdqipHoYgV770zJbXny5fyWJ2BGU3USH7p2g88uyherj8lkzPkuwzkvT8qc9/K5K7/diOmKIwYv/pp6NKF/txPBLn0xdLOx1GWOBpf3rIR/3+FYKklDpeTGPHk7x5+kvk6KBqxopHDAXMkSZWNeQHhADfKivBA41hdZxuruuU/gt3IJ5ufQdHHpU/gEBMA/1aB97uzHrHGL4BGRC86Eqw764g8DR8Iv/oxJiVXs88Dofv0wNfoQbvCGgliMGTwDwR9f4MIxbqY5iyjgvJuFwQPnKBOBwDm4Kh8vY9Mvfoi/v38I16Xw0L5zNGTNQx/S2HPSLqKGE/Dz6+Dk8BbW5N0hOUNQvs6CgnN2FhWct7Ow4Nyd5QTn7ywwOIdHeTrcbaww8V9X0WRM5ol2IocejfXZCKV5i6WeYmuP7jMypVLNMpULiC2mM5KsXMVm2cqFRZX7Il+5yMgSlitFrNykOMJUFYuC4yKJuYoTSNpyTd4ob4XaIpG5XKB8dOcgavIQ4RmI1/2/JiOWIt0vGkvm5qAO17Bj/lsYYLxfs98Q92XIogfK+QIXXozKkOECDCtEKcIwTfmiFKUYw/vT23IOsnBuJH79/PfV63h+gKPl5rXQ/+Ice2aKulQLOMw5UZn8VYBlNxdeWXrztwojLMH5iwHL8ObOkSZFHlahZr7RmnPoSMssh/WUVClNC5TIcYmQkzn2Q07ouFTYvJZFUHLHZUNO8NS4wZDZKdHjEiIne4/kHJQEcnmRE0EpMTKmaYUH+xjOQdw9Ggnv0Nfg7OeKxKi52C//rcK/F7pg0eRAHOIyXCtw/mRJ53gY3YEFGDQlBplFPAD9YzrHNUlQufTJSaqx/Mlwsspl0CdwDurrGnAg1PDm2HRFN69UXD4QDiu7t5EpHqOTKqGUP/hn54g+c3ZL6GW4FMLfRmRfj36GkgijlZJqh51D0EjJhL+rKMqLGDUiFEFrfTHapDluInfdLPxc9g/H5AlxWJYchzfW5Bv2t8ZdnFzhjZeeexXvfGYcm0pVbhg8RxnGTr/fz14FrqYyFneOsm0YM7y/6VqK13rk3TBGj8eNHGWoMxryzFr5tKeef7yUdfgzH9Nh53hsGu+hfO97cPDebnKMTtrmf1KQdtJJS4D/ACf1pRCRRDX9AAAAAElFTkSuQmCC",DG="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAH4AAAAUCAYAAAE8S7kiAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAFYcAABXWARG5gq8AAAjbSURBVFhH7VkLUFXXFX0FBayaUhirzSTqxPysE2zScUJNzIgitRotAbGQGDRpsBGjVT4CSlAkShQBLaig0vhJTBs1piJRRENBPvKRB7wPj+c0yKeIn1gbK4rCW9373Ps+IBDQR6zRNbPfvfudc++5++6zz91rHwXuEh1u0ExyUzplGCrlEwmXSJT0U117GPqCZFSq1R1v0DOoVCqT3L0Je3xsgVZ69OaLpLaQfCML4wqJjkQjjDtvAMq+boROXwy1RgsD6eYnuHZePukIlXyUoNfrTY/PuGsTegLLQS2FIR5AvAYGvwqG0ZqWWnFown/FEbggHwmN6fIJw2hle68zrpMU6ppQmuItBq3O3wRNVUH7B7hX+F4Gt3zlltJucAf/z8VRMehRzHAaicWDR2Kh0zPwHbMckSHP4JUnJ4n28NB3MM73LxjzrJfQBwz7HUbPXYAJb8TDbfQyRD7nh+eGKjCWZOEwbzh6hGN+fCYmr9yPV94/hH42gfCwce98cKc/fom0cEcMX3ocX8WHmwb3fylWtPPgAZlN8AyaKfSgkL/DxzUUEbHZmLMyWfz39OtrsPjxVTiycKgYfG9uibA2+mAxJn9w5HbLjeDBewMevDtYvmpLuacTzproKqy7EobJeFPIG0Ghb5wG1gJPl75C3xpP69+QTWpxmrXRG9euVuKp7TVCV32ShDpaDzk2GBwfvC4aY8QIs/FnMVKhgMLVX9YZSsSuLRJniR5v4bJBI2IIOIcnua8s2bQMczwxOKZ4LeW44vWUYys9+jFTX4ViLrSFfxZxpq3eh34W92mlb5XJ+J2vmRsU9gPpHwOC6TyDP3cMMt7OK1S07/qn9NeF0u1CX1XQJvSsBF8ohryAhB2LuLVL42eNojFeDkCYxxzxNZWgwuLfeIv77dBcpeFLZeMJZQni/7FBnwi1O+NVWh18h/xE9P+8sEx8WNh49nZe4nTxv9vaLHH9Dybm7wQPjf8hoLKy8rZFrTthPDS+rbUOscVCN+FiVjRo2bEeag7jtZQKWbE++tT4wnUvYcmJm6g/Fo20r4nllGxFUF4b/pWTiPBTQPlHMci7RQRJvx9un11AQaI/Ei1tZeO367DmzTegJ7VkxWyEF/1baiPsmeOK6BMN0G6egS3qm9jo/jTymqihaT8iP6MrWvOxOq0MKIrB7I05QMH7UMxJJS55HJuO1aMsxQe7sk9juaMDTpVrkeQ5AIVKLWba26BEqYJuXxDSSsuhyd6A2EzpwXpsfP722dLJt3V4dEk2UsKcJZ346jyX3VB3MD53wwqUSF9ACRaeTw/zEp+caAvjt3iuwWU+MSgRtvofSHCbiwZSM7wmiL5CZseT0RH4m4ZoZ0sWPi1spB63EPOFCkoy/uN8LZwHyX1JNp9UYrrdZChVGoQMsDffJ3AXj9QL45O9cIOONy+qMHLbWRyOn4VWbrjRgMd++XGPjPdOO4Ol68KEeiU3DCE5ZuNTvAJAE4oGzkDg1irET5SMP7XWFYXnuEGCga7ryvjdJysxeMoKqDRqaXqrtbLxaiRMt0VZRRfT3vRWSBwTKnD9UgYcnANEJ0bBVk9E/FYB5+HPyv+0YB71HTzqV5J6vUFcOykkGW5/bejC85WoOxol+kXt3QqvZflyI7DNbynGT3gCiinBQl8vG8+YMtZJXKMmm7szfld2Mc4UpcKO+ip+HUEvocpkvJrO7frZiPtUVPZytTd6vq9g8vwd4oH+1N0JHmjjH2Q8dPz/Gbgs0dvlqzdiRDvH8wevHau3EPuBj2AjV2UNzSID4DKHVZNfa4I+qlw56Mtkuq9wpqYep7f6iMoEf7hNGYuVxIjbHM+1rI6pngltN3D5SJg8GX6Mn/5sMzRykwnXziN/x+twXH0IGX+SJg1nRcbSj4QWUQLiDInbOUsyloIovxMkgethnC4yOGXkuhinjUAjcr/YiwXzFmGpF10/wh3+xzrslnR0/LfliHt3ovzcLK7wjyqCObm0hBJbZsUjNTgOfv4vSv0p6xKlJcaNAqyPOYANoePx8lPUNnUVDpw1UIr/JWaMH2Ua4/cbMlHPNSaCITsUoz9Mx0frn8cLj0vtb+/UovHEKriMGCRd84edqLrSirO1DR0cX4XqmnREDXPCQPneijeTkFNCJEWjRXVuAqa/moB1ixzgYMv32YbicjURmRDY97c1PU/gLqUps2P0MOLtMPCRRJRzp9bviHh2PGWCXHc3ZoPMBXgDgPkAb/4wJ+DNAMELGMQNeGOA+QFvCjFH6NrxEmfg2mC71NkS3xHxzCl4s8GSV5ihEpkm7wOYsk3iGrwhwXyDN6OYc3Bt0Zh658W8iNUpe6GzeCGGnAj8YmUajnAnImJccxQpOaPlKywZ4YP1B8/I9ctbogbJKTrXITlNZ8czTynd4oVBC5KRWaiERk3Rr66CvnATXrUPRGpumSjOcvrONUpO4XkTLH6aLd7bSTo5WkS6WoOcOA/86L3daG2jSUroXcQzeuJ4Yr7GCrcAMWCudDML5mo3M2FjxVvCJVH5ZlbM1W+rOT5VS8o5HI30wc9pAj/vF4aSZg7a7hxPEU/Mmivogl0ziGFzJZ1ZNlfTmWmbHX8O+yePwbLln0Ivb3B2BPOw9o7PEkVn5mTSotC545mdp69whkNAHDmeIpwdb7l0E2HlwrTZ8RpRnQ/qb4PAtGKUGx1vIUZY3/HNF1GwbjxsHYeDiDvhKuoyE+E9dAGOCStbRP2H9x65BsQb+lwH4n3I8EKpvfZoLN4d6oKoUta/gTJ1Pp5wcsG0w71zPFcO0JSB4KD58E2TJ2LNIYROdYbCxa9dGcUMHfb4jYPDuHcop5G2pJVJ0/BW+Cpk1rN2WhBty4hH00G4j/HE28lF9KGSkBflAt8PdqLiP6Tkh9+R47kmVV17GJFOAzAxeC9OnlZRROtRnDQTDlNW4sCpCugK2kc8TwbdvmD0t5mE1RllqBBEPhdxU23gHnscbYZOIt4q6GSpv7/QyVL/PeKeZPVWwUPH3xXuX8c/xH0A4H+sQgIhfdYH4gAAAABJRU5ErkJggg==";function BS(e){return q.jsx(cC,{anchorEl:e.anchorEl,open:e.open,style:e.marginStyle,children:q.jsx(DT,{in:e.open,children:q.jsxs(zm,{className:"helpContainer",children:[q.jsx("div",{onClick:e.onClose,className:"closeX",children:q.jsx("span",{className:"fa fa-window-close"})}),q.jsxs("div",{children:[q.jsx(Qn,{variant:"h6",component:"h2",children:"Toolbar Buttons"}),q.jsxs(BT,{children:[q.jsxs(Ds,{children:[q.jsx("span",{className:"fa fa-lock"}),q.jsx(Ba,{primary:"Toggle Sync Views"})]}),q.jsxs(Ds,{children:[q.jsx("span",{className:"fa fa-book"}),q.jsx(Ba,{primary:"Toggle Book Mode"})]}),q.jsxs(Ds,{children:[q.jsx("span",{className:"fa fa-code"}),q.jsx(Ba,{primary:"Toggle XML Mode"})]}),q.jsxs(Ds,{children:[q.jsxs("span",{className:"horizontal-buttons",children:[q.jsx(BP,{}),q.jsx(UP,{})]}),q.jsx(Ba,{primary:"Go Forward / Back"})]}),q.jsxs(Ds,{children:[q.jsx("span",{className:"fa fa-hand-point-right"}),q.jsx(Ba,{primary:"Jump to folio"})]}),q.jsxs("div",{className:"readingGuide",children:[q.jsx(Qn,{variant:"h6",component:"h2",children:"Reading Guide"}),q.jsxs("table",{children:[q.jsx("thead",{children:q.jsxs("tr",{children:[q.jsx("th",{children:q.jsx(Qn,{variant:"overline",component:"span",children:"Syntax"})}),q.jsx("th",{children:q.jsx(Qn,{variant:"overline",component:"span",children:"Meaning"})})]})}),q.jsxs("tbody",{children:[q.jsxs("tr",{children:[q.jsx("td",{children:q.jsx("img",{src:DG,alt:"howtouse-ups"})}),q.jsx("td",{children:q.jsx(Qn,{children:"Text is under the paper strip"})})]}),q.jsxs("tr",{children:[q.jsx("td",{children:q.jsx("img",{src:OG,alt:"howtouse-curly"})}),q.jsx("td",{children:q.jsx(Qn,{children:"Expanded version implied by abbreviation marks"})})]}),q.jsxs("tr",{children:[q.jsx("td",{children:q.jsx("img",{src:AG,alt:"howtouse-square"})}),q.jsx("td",{children:q.jsx(Qn,{children:"Editorial interventions and corrections"})})]}),q.jsxs("tr",{children:[q.jsx("td",{children:q.jsx("img",{src:RG,alt:"howtouse-asterisk"})}),q.jsx("td",{children:q.jsx(Qn,{children:"Editorial Comments"})})]})]})]})]})]}),q.jsxs(Qn,{children:["See  ",q.jsx("a",{href:"#/content/how-to-use",children:"How to Use"}),"  for more information."]})]})]})})})}function IG(e){const[i,t]=B.useState(""),n=!!e.anchorEl,o=n?`${e.side}_jumpInput`:void 0,u=p=>{p.preventDefault();const m=new FormData(p.target).get("folioID");e.submitHandler(m,e.side),e.blurHandler(),t("")},h=p=>{t(p.target.value)},d=B.useRef(null);return B.useEffect(()=>{d.current&&d.current.focus()},[d,n]),q.jsx(UT,{id:o,open:n,anchorEl:e.anchorEl,onClose:e.blurHandler,anchorOrigin:{vertical:"bottom",horizontal:"right"},children:q.jsx("form",{onSubmit:u,children:q.jsx("input",{id:o,name:"folioID",onBlur:e.blurHandler,onChange:h,placeholder:"Page Name (e.g. '3r')",ref:d,type:"text",value:i})})})}function MG(e){return q.jsxs("button",{className:e.isActive?"active":"",onClick:e.onClick,type:"button",children:[e.isActive&&q.jsx(wG,{}),e.name]})}function LG(e){const{tags:i,toggleTag:t}=B.useContext(Em);return q.jsxs("div",{className:"tag-bar",children:[q.jsxs("div",{className:"tag-list",children:[q.jsxs("span",{className:"tag-label",children:[q.jsx(WP,{}),"Tags"]}),e.folio.tagIds.map(n=>{const o=e.document.tags[n];return o?q.jsx(MG,{isActive:i.includes(n),name:o,onClick:()=>t(n)},n):null})]}),q.jsx("button",{className:"tag-bar-close",onClick:e.toggleTags,type:"button",children:q.jsx(bG,{})})]})}const NG={anchorEl:null};function US(e){return q.jsxs(q.Fragment,{children:[q.jsx("span",{title:"Go back",onClick:e.changeCurrentFolio,"data-id":e.documentView[e.side].previousFolioShortID,className:e.documentView[e.side].hasPrevious?"nav-arrow":"disabled nav-arrow",children:q.jsx(TG,{})}),q.jsx("span",{title:"Go forward",onClick:e.changeCurrentFolio,"data-id":e.documentView[e.side].nextFolioShortID,className:e.documentView[e.side].hasNext?"nav-arrow":"disabled nav-arrow",children:q.jsx(CG,{})})]})}function WS(e){return q.jsx("button",{className:"grid-view-button",style:{cursor:e.documentView[e.side].transcriptionType!=="g"?"pointer":"default",padding:"0 15px"},title:e.documentView[e.side].transcriptionType!=="g"&&"Return to Grid View",onClick:e.documentView[e.side].transcriptionType!=="g"&&e.onGoToGrid,type:"button",children:q.jsx(yG,{})})}function vf(e){return q.jsx("button",{className:`toggle-button ${e.active?"active":""}`,onClick:e.onClick,title:"Toggle XML Mode",type:"button",children:q.jsx(e.icon,{})})}function zG(e){var i;const[t,n]=B.useState({...NG}),[o,u]=B.useState(!1),[h,d]=B.useState(!1),[p,m]=B.useState(!1),v=B.useRef(null),x=B.useRef(null),E=()=>{n({anchorEl:null})},C=Le=>{Le.target.value===void 0||Le.target.value===0||e.documentViewActions.changeTranscriptionType(e.side,Le.target.value)},O=()=>{e.documentViewActions.changeTranscriptionType(e.side,"g")},_=()=>{u(!o)},k=()=>{d(!h)},I=()=>m(!p),G=()=>{e.documentView.bookMode||(e.documentViewActions.changeCurrentFolio(e.documentView.left.iiifShortID,"left",e.documentView.left.transcriptionType),e.documentViewActions.changeCurrentFolio(e.documentView.left.nextFolioShortID,"right",e.documentView.left.transcriptionType)),e.documentViewActions.setBookMode(e.documentView.left.iiifShortID,!e.documentView.bookMode)},Z=()=>{e.documentViewActions.setXMLMode(e.side,!e.documentView[e.side].isXMLMode)},ae=()=>{if(e.documentView.bookMode){G();return}e.documentView.linkedMode===!1&&(e.side==="left"?e.documentViewActions.changeCurrentFolio(e.documentView.left.iiifShortID,"right",e.documentView.right.transcriptionType):e.documentViewActions.changeCurrentFolio(e.documentView.right.iiifShortID,"left",e.documentView.left.transcriptionType)),e.documentViewActions.setLinkedMode(!e.documentView.linkedMode)},te=Le=>{const{documentViewActions:st,documentView:J,side:Et}=e;if(typeof Le.currentTarget.dataset.id>"u"||Le.currentTarget.dataset.id.length===0)return;const yt=Le.currentTarget.dataset.id;st.changeCurrentFolio(yt,Et,J[Et].transcriptionType)},Q=Le=>{n({anchorEl:Le.currentTarget})},{side:le,document:ce,documentView:me,documentViewActions:Pe,onFilterChange:be}=e,fe=me[le].transcriptionType==="f"?{color:"white"}:{color:"black"},ve=me[le].transcriptionType==="f"?"dark":"light",Fe=me[le].transcriptionType==="glossary"?{visibility:"hidden"}:{visibility:"visible"},Ge={display:"flex"},Te=me[le].transcriptionType==="f",ye=(i=ce.folioIndex[me[le].iiifShortID])==null?void 0:i.name,ke=le==="left"?{marginRight:"55px"}:{marginRight:"15px"},_e=ye?ce.folioByName[ye]:null,$=B.useMemo(()=>_e?.tagIds&&_e.tagIds.length>0&&ce.tags&&Object.keys(ce.tags).length>0,[_e,ce]);return me?q.jsxs("div",{children:[q.jsx("div",{className:"navigationComponent",children:me[le].transcriptionType!=="glossary"?q.jsxs("div",{id:"tool-bar-buttons",className:"breadcrumbs",style:Fe,children:[q.jsxs("div",{className:"toolbar-side toolbar-left",children:[q.jsx(WS,{documentView:me,onGoToGrid:O,side:le}),q.jsxs("div",{className:"folio-path",style:{display:"flex",overflowX:"hidden",justifyContent:"flex-end"},children:[q.jsx("span",{className:"document-title",title:e.documentName||ce.documentName,children:e.documentName||ce.documentName}),q.jsx("span",{children:"/"}),q.jsx("div",{onClick:Q,className:"folioName",style:{flexShrink:"0",minWidth:"40px"},title:ye,children:ye})]}),q.jsx(US,{changeCurrentFolio:te,side:le,documentView:me})]}),q.jsxs("div",{className:"toolbar-side toolbar-right",children:[q.jsxs("div",{className:"book-mode-toggles",title:"Toggle book mode",onClick:G,children:[q.jsx("button",{className:e.documentView.bookMode?"selected":"",type:"button",children:q.jsx(EG,{})}),q.jsx("button",{className:e.documentView.bookMode?"":"selected",type:"button",children:q.jsx(kG,{})})]}),q.jsxs("label",{className:"lockmode-container",children:[q.jsx("input",{onChange:ae,title:"Toggle coordination of views",type:"checkbox",value:e.documentView.linkedMode}),q.jsx("span",{className:"switch",children:q.jsx("span",{className:"slider",children:q.jsx(_G,{})})})]}),q.jsx("div",{className:"vertical-separator"}),q.jsxs(qf,{className:ve,style:{...fe,marginRight:15,fontSize:"max(16px, 1rem)"},value:me[le].transcriptionType,id:"doc-type",onClick:C,children:[Object.keys(e.document.folios.find(Le=>Le.id===e.documentView[e.side].iiifShortID).annotationURLs).map(Le=>q.jsx(Ao,{value:Le,children:e.document.variorum?e.document.transcriptionTypes[e.document.folios.find(st=>st.id===e.documentView[e.side].iiifShortID).doc_id][Le]:e.document.transcriptionTypes[Le]},Le)),q.jsx(Ao,{value:"f",children:$a.transcriptionTypeLabels.f},"f"),e.glossary&&q.jsx(Ao,{value:"glossary",children:$a.transcriptionTypeLabels.glossary},"glossary")]}),!Te&&q.jsx(vf,{onClick:Z,active:e.documentView[e.side].isXMLMode,icon:HS}),q.jsx("div",{className:"vertical-separator"}),$&&q.jsx(vf,{active:p,onClick:I,icon:WP}),q.jsxs("button",{title:"Toggle folio help",className:`toggle-button ${o?"active":""}`,onClick:_,ref:v,type:"button",children:[q.jsx(FS,{}),q.jsx(BS,{marginStyle:ke,anchorEl:v.current,open:o,onClose:_})]})]}),q.jsx(IG,{side:le,anchorEl:t.anchorEl,submitHandler:Pe.jumpToFolio,blurHandler:E})]}):q.jsx(zS,{onFilterChange:be,value:e.value})}),p&&q.jsx(LG,{document:e.document,folio:_e,toggleTags:I}),q.jsxs("div",{className:"navigationComponentNarrow",children:[me[le].transcriptionType!=="glossary"?q.jsxs("div",{id:"tool-bar-buttons",className:"breadcrumbsNarrow",style:Fe,children:[q.jsx(WS,{documentView:me,onGoToGrid:O,side:le})," ",!Te&&q.jsx(vf,{onClick:Z,active:e.documentView[e.side].isXMLMode,icon:HS}),Te&&q.jsx(US,{changeCurrentFolio:te,side:le,documentView:me})]}):q.jsx(zS,{onFilterChange:be,value:e.value}),q.jsxs("div",{id:"doc-type-help",style:Ge,ref:x,children:[q.jsxs(qf,{className:ve,style:{...fe,marginRight:15,fontSize:"max(16px, 1rem)"},value:me[le].transcriptionType,id:"doc-type",onClick:C,children:[Object.keys(e.document.folios.find(Le=>Le.id===e.documentView[e.side].iiifShortID).annotationURLs).map(Le=>q.jsx(Ao,{value:Le,title:Le,children:e.document.variorum?e.document.transcriptionTypes[e.document.folios.find(st=>st.id===e.documentView[e.side].iiifShortID).doc_id][Le]:e.document.transcriptionTypes[Le]},Le)),q.jsx(Ao,{value:"f",children:$a.transcriptionTypeLabels.f},"f"),e.glossary&&q.jsx(Ao,{value:"glossary",children:$a.transcriptionTypeLabels.glossary},"glossary")]}),q.jsx("span",{title:"Toggle folio help",onClick:k,className:"helpIcon",children:q.jsx(FS,{})}),q.jsx(BS,{marginStyle:ke,anchorEl:x.current,open:h,onClose:k})]})]})]}):q.jsx("div",{children:"Unknown Transcription Type"})}function jG(e){return{document:e.document,glossary:!!e.glossary.URL}}const $s=Yi(jG)(zG);class HG extends B.Component{constructor(){super(),ji(this,"onFilterChange",i=>{const t=i.target.value;this.setState({...this.state,filterTerm:t})}),this.state={filterTerm:""}}renderGlossary(){const{glossary:i}=this.props.glossary,t=this.state.filterTerm.toLowerCase(),n=Object.values(i.entries),o=(d,p,m)=>{const v=d.split(m);for(const x of v)if(x.startsWith(p))return!0;return!1},u=[];let h=0;for(const d of n){if(t.length===0&&d.headWord[0]===al[h]){const x=`alpha-${h}`;u.push(q.jsxs(Qn,{variant:"h4",id:x,children:["—",al[h]," ","—"]},`gloss-heading-${al[h]}`)),h++}const p=d.headWord.toLowerCase(),m=d.alternateSpellings.toLowerCase(),v=d.modernSpelling.toLowerCase();if(t.length===0||t.length!==0&&o(p,t," ")||t.length!==0&&o(v,t," ")||t.length!==0&&o(m,t,", ")){const x=FG(d),E=x[x.length-1].endsWith("."),C=d.alternateSpellings?`, ${d.alternateSpellings}`:"",O=d.meanings[0].partOfSpeech,_=O?`${O}:`:"",k=O?",":":",I=d.modernSpelling?` (mod. ${d.modernSpelling})`:"",G=E?"":",",Z=d.seeAlso?`${G} see also <span>&#8594;</span>${d.seeAlso} `:"",ae=d.synonym?`, syn. <span>&#8594;</span>${d.synonym}`:"",te=d.antonym?`, ant. <span>&#8594;</span>${d.antonym}`:"";u.push(q.jsxs(Qn,{gutterBottom:!0,children:[q.jsx("u",{children:d.headWord}),C,I,k," ",_," ",x.map(Q=>Hi(Q)),Hi(Z),Hi(ae),Hi(te)]},`gloss-${d.headWord}`))}}return u}render(){return this.props.glossary.loaded?q.jsxs("div",{id:"glossaryView",style:{position:"relative",overflow:"auto"},children:[q.jsx($s,{side:this.props.side,onFilterChange:this.onFilterChange,value:this.state.filterTerm,documentView:this.props.documentView,documentViewActions:this.props.documentViewActions}),q.jsx("div",{id:"glossaryViewInner",children:q.jsxs("div",{id:"glossaryContent",children:[q.jsx(Qn,{variant:"h2",className:"title",children:"Glossary"}),this.props.glossary.glossary.title&&q.jsx("div",{className:"subtitle MuiTypography-root MuiTypography-body1",children:q.jsx(rm,{children:this.props.glossary.glossary.title})}),q.jsx("div",{className:"cite-instructions",children:this.props.glossary.glossary.citation&&q.jsxs(q.Fragment,{children:[q.jsx(Qn,{className:"cite-header",children:"How to Cite"}),q.jsx("div",{className:"MuiTypography-root MuiTypography-body1",children:q.jsx(rm,{children:this.props.glossary.glossary.citation})})]})}),this.renderGlossary()]})})]}):null}}function FG(e){const i=[];for(let t=0;t<e.meanings.length;t++){const n=e.meanings[t],o=n.references?` [${n.references}]`:"",u=e.meanings.length>1?`${t+1}. `:"",h=t<e.meanings.length-1?" ":"";i.push(`${u}${n.meaning}${o}${h}`)}return i}function BG(e){return{glossary:e.glossary}}const UG=Yi(BG)(HG);class am extends B.Component{constructor(i){super(i),this.scrollListener=this.scrollListener.bind(this),this.eventListenerOptions=this.eventListenerOptions.bind(this),this.mousewheelListener=this.mousewheelListener.bind(this)}componentDidMount(){this.pageLoaded=this.props.pageStart,this.options=this.eventListenerOptions(),this.attachScrollListener()}componentDidUpdate(){if(this.props.isReverse&&this.loadMore){const i=this.getParentElement(this.scrollComponent);i.scrollTop=i.scrollHeight-this.beforeScrollHeight+this.beforeScrollTop,this.loadMore=!1}this.attachScrollListener()}componentWillUnmount(){this.detachScrollListener(),this.detachMousewheelListener()}isPassiveSupported(){let i=!1;const t={get passive(){i=!0}};try{document.addEventListener("test",null,t),document.removeEventListener("test",null,t)}catch{}return i}eventListenerOptions(){let i=this.props.useCapture;return this.isPassiveSupported()?i={useCapture:this.props.useCapture,passive:!0}:i={passive:!1},i}setDefaultLoader(i){this.defaultLoader=i}detachMousewheelListener(){let i=window;this.props.useWindow===!1&&(i=this.scrollComponent.parentNode),i.removeEventListener("mousewheel",this.mousewheelListener,this.options?this.options:this.props.useCapture)}detachScrollListener(){let i=window;this.props.useWindow===!1&&(i=this.getParentElement(this.scrollComponent)),i.removeEventListener("scroll",this.scrollListener,this.options?this.options:this.props.useCapture),i.removeEventListener("resize",this.scrollListener,this.options?this.options:this.props.useCapture)}getParentElement(i){return(this.props.getScrollParent&&this.props.getScrollParent())??(i&&i.parentNode)}filterProps(i){return i}attachScrollListener(){const i=this.getParentElement(this.scrollComponent);if(!this.props.hasMore||!i)return;let t=window;this.props.useWindow===!1&&(t=i),t.addEventListener("mousewheel",this.mousewheelListener,this.options?this.options:this.props.useCapture),t.addEventListener("scroll",this.scrollListener,this.options?this.options:this.props.useCapture),t.addEventListener("resize",this.scrollListener,this.options?this.options:this.props.useCapture),this.props.initialLoad&&this.scrollListener()}mousewheelListener(i){i.deltaY===1&&!this.isPassiveSupported()&&i.preventDefault()}scrollListener(){const i=this.scrollComponent,t=window,n=this.getParentElement(i);let o;if(this.props.useWindow){const u=document.documentElement||document.body.parentNode||document.body,h=t.pageYOffset!==void 0?t.pageYOffset:u.scrollTop;this.props.isReverse?o=h:o=this.calculateOffset(i,h)}else this.props.isReverse?o=n.scrollTop:o=i.scrollHeight-n.scrollTop-n.clientHeight;o<Number(this.props.threshold)&&i&&i.offsetParent!==null&&(this.detachScrollListener(),this.beforeScrollHeight=n.scrollHeight,this.beforeScrollTop=n.scrollTop,typeof this.props.loadMore=="function"&&(this.props.loadMore(this.pageLoaded+=1),this.loadMore=!0))}calculateOffset(i,t){return i?this.calculateTopPosition(i)+(i.offsetHeight-t-window.innerHeight):0}calculateTopPosition(i){return i?i.offsetTop+this.calculateTopPosition(i.offsetParent):0}render(){const i=this.filterProps(this.props),{children:t,element:n,hasMore:o,initialLoad:u,isReverse:h,loader:d,loadMore:p,pageStart:m,ref:v,threshold:x,useCapture:E,useWindow:C,getScrollParent:O,..._}=i;_.ref=I=>{this.scrollComponent=I,v&&v(I)};const k=[t];return o&&(d?h?k.unshift(d):k.push(d):this.defaultLoader&&(h?k.unshift(this.defaultLoader):k.push(this.defaultLoader))),xt.createElement(n,_,k)}}ji(am,"propTypes",{children:vt.node.isRequired,element:vt.node,hasMore:vt.bool,initialLoad:vt.bool,isReverse:vt.bool,loader:vt.node,loadMore:vt.func.isRequired,pageStart:vt.number,ref:vt.func,getScrollParent:vt.func,threshold:vt.number,useCapture:vt.bool,useWindow:vt.bool}),ji(am,"defaultProps",{element:"div",hasMore:!1,initialLoad:!0,pageStart:0,ref:null,threshold:250,useWindow:!0,isReverse:!1,useCapture:!1,loader:null,getScrollParent:null});class WG extends xt.Component{constructor(i,t){super(i,t),ji(this,"onJumpToChange",n=>{const o=n.target.value;this.setState({...this.state,jumpToBuffer:o})}),ji(this,"onJumpTo",n=>{const{jumpToBuffer:o}=this.state,{side:u,document:h,documentViewActions:d}=this.props;if(n.preventDefault(),h.folioByName[o]){const p=h.folioByName[o];p&&d.changeCurrentFolio(p.id,u)}this.setState({...this.state,jumpToBuffer:""})}),ji(this,"onSelectDoc",n=>{if(!n.target.value||n.target.value==0)return;n.target.value&&n.target.value!=="none"?this.setState({...this.state,currentDoc:n.target.value}):this.setState({...this.state,currentDoc:null});const{documentView:o}=this.props,u=o[this.props.side].iiifShortID,h=this.generateThumbs(u,n.target.value!=="none"?this.props.document.folios.filter(m=>m.doc_id===n.target.value):this.props.document.folios),d=h.length>this.loadIncrement?this.loadIncrement:h.length,p=h.slice(0,d);this.setState({thumbs:h,visibleThumbs:p})}),ji(this,"onClickThumb",(n,o)=>{this.props.documentViewActions.changeCurrentFolio(n,this.props.side,"f")}),ji(this,"moreThumbs",()=>{const{thumbs:n}=this.state;let{visibleThumbs:o}=this.state;const u=o.length+this.loadIncrement;n.length>=u?o=n.slice(0,u):o=n,this.setState({visibleThumbs:o})}),this.generateThumbs=this.generateThumbs.bind(this),this.loadIncrement=10,this.state={jumpToBuffer:"",thumbs:"",visibleThumbs:[],currentDoc:i.selectedDoc||null}}componentDidUpdate(i){const{documentView:t}=this.props,n=t[this.props.side].iiifShortID,o=this.props.documentView[this.props.side].iiifShortID;if(n!==o){const u=this.generateThumbs(o,this.state.currentDoc?this.props.document.folios.filter(p=>p.doc_id===this.state.currentDoc):this.props.document.folios),h=u.length>this.loadIncrement?this.loadIncrement:u.length,d=u.slice(0,h);this.setState({thumbs:u,visibleThumbs:d})}}renderToolbar(){return q.jsxs("div",{className:"imageGridToolbar",children:[q.jsx("span",{className:"fas fa-th",style:{paddingLeft:"15px"}}),this.props.document.variorum?this.renderDocSelect():q.jsx("div",{className:"doc-select",style:{marginTop:"5px"},children:this.props.document.documentName}),q.jsx("div",{className:"jump-to",children:q.jsxs("form",{onSubmit:this.onJumpTo,children:[q.jsx("span",{children:"Jump to: "}),q.jsx("input",{id:"jump-to-input",placeholder:"Page Name (e.g. '3r')",onChange:this.onJumpToChange,value:this.state.jumpToBuffer}),q.jsx("button",{id:"jump-to-button",onClick:this.onJumpTo,children:q.jsx("span",{style:{color:"black"},className:"fa fa-hand-point-right"})})]})})]})}renderDocSelect(){return q.jsx("div",{className:"doc-select",children:q.jsx(qf,{id:"doc-filter",className:"dark",style:{color:"white",fontSize:"max(16px, 1rem)"},value:this.state.currentDoc||Object.keys(this.props.document.derivativeNames)[0],onClick:this.onSelectDoc,children:Object.keys(this.props.document.derivativeNames).map(i=>q.jsx(Ao,{value:i,children:this.props.document.derivativeNames[i]},i))})})}componentDidMount(){const{documentView:i}=this.props,t=i[this.props.side].iiifShortID,n=this.generateThumbs(t,this.props.document.variorum&&this.state.currentDoc?this.props.document.folios.filter(h=>h.doc_id===this.state.currentDoc):this.props.document.folios),o=n.length>this.loadIncrement?this.loadIncrement:n.length,u=n.slice(0,o);this.setState({thumbs:n,visibleThumbs:u})}generateThumbs(i,t){return t.map((n,o)=>q.jsxs("li",{className:"thumbnail",children:[q.jsx("figure",{children:q.jsx("a",{id:n.id,onClick:this.onClickThumb.bind(this,n.id),children:q.jsx("img",{src:n.image_thumbnail_url,alt:n.name,style:{maxWidth:"130px",maxHeight:"130px"},onError:({currentTarget:u})=>{u.onerror=null,n.image_zoom_url&&u.src!==`${n.image_zoom_url.slice(0,-9)}full/full/0/default.jpg`&&(u.src=`${n.image_zoom_url.slice(0,-9)}full/full/0/default.jpg`)}})})}),q.jsx("figcaption",{className:"thumbnail-caption",children:n.name})]},`thumb-${o}`))}hasMore(){return this.state.visibleThumbs.length!==this.state.thumbs.length}render(){let i="imageGridComponent";i=`${i} ${this.props.side}`;let{visibleThumbs:t}=this.state;return t.constructor.toString().includes("Array")||(t=[]),q.jsxs("div",{className:i,children:[this.renderToolbar(),q.jsx(am,{element:"ul",loadMore:this.moreThumbs,hasMore:this.hasMore(),useWindow:!1,children:t})]})}}function VG(e){return{document:e.document}}const GG=Yi(VG)(WG);var VP={exports:{}};(function(e,i){(function(t,n){e.exports=n()})(Jn,function(){var t=Object.defineProperty,n=(s,l,r)=>l in s?t(s,l,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[l]=r,o=(s,l,r)=>(n(s,typeof l!="symbol"?l+"":l,r),r),u,h,d,p,m,v,x,E={},C=[],O=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function _(s,l){for(var r in l)s[r]=l[r];return s}function k(s){var l=s.parentNode;l&&l.removeChild(s)}function I(s,l,r){var a,c,f,g={};for(f in l)f=="key"?a=l[f]:f=="ref"?c=l[f]:g[f]=l[f];if(arguments.length>2&&(g.children=arguments.length>3?u.call(arguments,2):r),typeof s=="function"&&s.defaultProps!=null)for(f in s.defaultProps)g[f]===void 0&&(g[f]=s.defaultProps[f]);return G(s,g,a,c,null)}function G(s,l,r,a,c){var f={type:s,props:l,key:r,ref:a,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:c??++d};return c==null&&h.vnode!=null&&h.vnode(f),f}function Z(){return{current:null}}function ae(s){return s.children}function te(s,l){this.props=s,this.context=l}function Q(s,l){if(l==null)return s.__?Q(s.__,s.__.__k.indexOf(s)+1):null;for(var r;l<s.__k.length;l++)if((r=s.__k[l])!=null&&r.__e!=null)return r.__e;return typeof s.type=="function"?Q(s):null}function le(s){var l,r;if((s=s.__)!=null&&s.__c!=null){for(s.__e=s.__c.base=null,l=0;l<s.__k.length;l++)if((r=s.__k[l])!=null&&r.__e!=null){s.__e=s.__c.base=r.__e;break}return le(s)}}function ce(s){(!s.__d&&(s.__d=!0)&&p.push(s)&&!me.__r++||v!==h.debounceRendering)&&((v=h.debounceRendering)||m)(me)}function me(){for(var s;me.__r=p.length;)s=p.sort(function(l,r){return l.__v.__b-r.__v.__b}),p=[],s.some(function(l){var r,a,c,f,g,y;l.__d&&(g=(f=(r=l).__v).__e,(y=r.__P)&&(a=[],(c=_({},f)).__v=f.__v+1,_e(y,f,c,r.__n,y.ownerSVGElement!==void 0,f.__h!=null?[g]:null,a,g??Q(f),f.__h),$(a,f),f.__e!=g&&le(f)))})}function Pe(s,l,r,a,c,f,g,y,w,b){var S,R,A,H,V,oe,ne,ue=a&&a.__k||C,M=ue.length;for(r.__k=[],S=0;S<l.length;S++)if((H=r.__k[S]=(H=l[S])==null||typeof H=="boolean"?null:typeof H=="string"||typeof H=="number"||typeof H=="bigint"?G(null,H,null,null,H):Array.isArray(H)?G(ae,{children:H},null,null,null):H.__b>0?G(H.type,H.props,H.key,null,H.__v):H)!=null){if(H.__=r,H.__b=r.__b+1,(A=ue[S])===null||A&&H.key==A.key&&H.type===A.type)ue[S]=void 0;else for(R=0;R<M;R++){if((A=ue[R])&&H.key==A.key&&H.type===A.type){ue[R]=void 0;break}A=null}_e(s,H,A=A||E,c,f,g,y,w,b),V=H.__e,(R=H.ref)&&A.ref!=R&&(ne||(ne=[]),A.ref&&ne.push(A.ref,null,H),ne.push(R,H.__c||V,H)),V!=null?(oe==null&&(oe=V),typeof H.type=="function"&&H.__k===A.__k?H.__d=w=be(H,w,s):w=ve(s,H,A,ue,V,w),typeof r.type=="function"&&(r.__d=w)):w&&A.__e==w&&w.parentNode!=s&&(w=Q(A))}for(r.__e=oe,S=M;S--;)ue[S]!=null&&(typeof r.type=="function"&&ue[S].__e!=null&&ue[S].__e==r.__d&&(r.__d=Q(a,S+1)),J(ue[S],ue[S]));if(ne)for(S=0;S<ne.length;S++)st(ne[S],ne[++S],ne[++S])}function be(s,l,r){for(var a,c=s.__k,f=0;c&&f<c.length;f++)(a=c[f])&&(a.__=s,l=typeof a.type=="function"?be(a,l,r):ve(r,a,a,c,a.__e,l));return l}function fe(s,l){return l=l||[],s==null||typeof s=="boolean"||(Array.isArray(s)?s.some(function(r){fe(r,l)}):l.push(s)),l}function ve(s,l,r,a,c,f){var g,y,w;if(l.__d!==void 0)g=l.__d,l.__d=void 0;else if(r==null||c!=f||c.parentNode==null)e:if(f==null||f.parentNode!==s)s.appendChild(c),g=null;else{for(y=f,w=0;(y=y.nextSibling)&&w<a.length;w+=2)if(y==c)break e;s.insertBefore(c,f),g=f}return g!==void 0?g:c.nextSibling}function Fe(s,l,r,a,c){var f;for(f in r)f==="children"||f==="key"||f in l||Te(s,f,null,r[f],a);for(f in l)c&&typeof l[f]!="function"||f==="children"||f==="key"||f==="value"||f==="checked"||r[f]===l[f]||Te(s,f,l[f],r[f],a)}function Ge(s,l,r){l[0]==="-"?s.setProperty(l,r):s[l]=r==null?"":typeof r!="number"||O.test(l)?r:r+"px"}function Te(s,l,r,a,c){var f;e:if(l==="style")if(typeof r=="string")s.style.cssText=r;else{if(typeof a=="string"&&(s.style.cssText=a=""),a)for(l in a)r&&l in r||Ge(s.style,l,"");if(r)for(l in r)a&&r[l]===a[l]||Ge(s.style,l,r[l])}else if(l[0]==="o"&&l[1]==="n")f=l!==(l=l.replace(/Capture$/,"")),l=l.toLowerCase()in s?l.toLowerCase().slice(2):l.slice(2),s.l||(s.l={}),s.l[l+f]=r,r?a||s.addEventListener(l,f?ke:ye,f):s.removeEventListener(l,f?ke:ye,f);else if(l!=="dangerouslySetInnerHTML"){if(c)l=l.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if(l!=="href"&&l!=="list"&&l!=="form"&&l!=="tabIndex"&&l!=="download"&&l in s)try{s[l]=r??"";break e}catch{}typeof r=="function"||(r!=null&&(r!==!1||l[0]==="a"&&l[1]==="r")?s.setAttribute(l,r):s.removeAttribute(l))}}function ye(s){this.l[s.type+!1](h.event?h.event(s):s)}function ke(s){this.l[s.type+!0](h.event?h.event(s):s)}function _e(s,l,r,a,c,f,g,y,w){var b,S,R,A,H,V,oe,ne,ue,M,re,ge=l.type;if(l.constructor!==void 0)return null;r.__h!=null&&(w=r.__h,y=l.__e=r.__e,l.__h=null,f=[y]),(b=h.__b)&&b(l);try{e:if(typeof ge=="function"){if(ne=l.props,ue=(b=ge.contextType)&&a[b.__c],M=b?ue?ue.props.value:b.__:a,r.__c?oe=(S=l.__c=r.__c).__=S.__E:("prototype"in ge&&ge.prototype.render?l.__c=S=new ge(ne,M):(l.__c=S=new te(ne,M),S.constructor=ge,S.render=Et),ue&&ue.sub(S),S.props=ne,S.state||(S.state={}),S.context=M,S.__n=a,R=S.__d=!0,S.__h=[]),S.__s==null&&(S.__s=S.state),ge.getDerivedStateFromProps!=null&&(S.__s==S.state&&(S.__s=_({},S.__s)),_(S.__s,ge.getDerivedStateFromProps(ne,S.__s))),A=S.props,H=S.state,R)ge.getDerivedStateFromProps==null&&S.componentWillMount!=null&&S.componentWillMount(),S.componentDidMount!=null&&S.__h.push(S.componentDidMount);else{if(ge.getDerivedStateFromProps==null&&ne!==A&&S.componentWillReceiveProps!=null&&S.componentWillReceiveProps(ne,M),!S.__e&&S.shouldComponentUpdate!=null&&S.shouldComponentUpdate(ne,S.__s,M)===!1||l.__v===r.__v){S.props=ne,S.state=S.__s,l.__v!==r.__v&&(S.__d=!1),S.__v=l,l.__e=r.__e,l.__k=r.__k,l.__k.forEach(function(pe){pe&&(pe.__=l)}),S.__h.length&&g.push(S);break e}S.componentWillUpdate!=null&&S.componentWillUpdate(ne,S.__s,M),S.componentDidUpdate!=null&&S.__h.push(function(){S.componentDidUpdate(A,H,V)})}S.context=M,S.props=ne,S.state=S.__s,(b=h.__r)&&b(l),S.__d=!1,S.__v=l,S.__P=s,b=S.render(S.props,S.state,S.context),S.state=S.__s,S.getChildContext!=null&&(a=_(_({},a),S.getChildContext())),R||S.getSnapshotBeforeUpdate==null||(V=S.getSnapshotBeforeUpdate(A,H)),re=b!=null&&b.type===ae&&b.key==null?b.props.children:b,Pe(s,Array.isArray(re)?re:[re],l,r,a,c,f,g,y,w),S.base=l.__e,l.__h=null,S.__h.length&&g.push(S),oe&&(S.__E=S.__=null),S.__e=!1}else f==null&&l.__v===r.__v?(l.__k=r.__k,l.__e=r.__e):l.__e=Le(r.__e,l,r,a,c,f,g,w);(b=h.diffed)&&b(l)}catch(pe){l.__v=null,(w||f!=null)&&(l.__e=y,l.__h=!!w,f[f.indexOf(y)]=null),h.__e(pe,l,r)}}function $(s,l){h.__c&&h.__c(l,s),s.some(function(r){try{s=r.__h,r.__h=[],s.some(function(a){a.call(r)})}catch(a){h.__e(a,r.__v)}})}function Le(s,l,r,a,c,f,g,y){var w,b,S,R=r.props,A=l.props,H=l.type,V=0;if(H==="svg"&&(c=!0),f!=null){for(;V<f.length;V++)if((w=f[V])&&"setAttribute"in w==!!H&&(H?w.localName===H:w.nodeType===3)){s=w,f[V]=null;break}}if(s==null){if(H===null)return document.createTextNode(A);s=c?document.createElementNS("http://www.w3.org/2000/svg",H):document.createElement(H,A.is&&A),f=null,y=!1}if(H===null)R===A||y&&s.data===A||(s.data=A);else{if(f=f&&u.call(s.childNodes),b=(R=r.props||E).dangerouslySetInnerHTML,S=A.dangerouslySetInnerHTML,!y){if(f!=null)for(R={},V=0;V<s.attributes.length;V++)R[s.attributes[V].name]=s.attributes[V].value;(S||b)&&(S&&(b&&S.__html==b.__html||S.__html===s.innerHTML)||(s.innerHTML=S&&S.__html||""))}if(Fe(s,A,R,c,y),S)l.__k=[];else if(V=l.props.children,Pe(s,Array.isArray(V)?V:[V],l,r,a,c&&H!=="foreignObject",f,g,f?f[0]:r.__k&&Q(r,0),y),f!=null)for(V=f.length;V--;)f[V]!=null&&k(f[V]);y||("value"in A&&(V=A.value)!==void 0&&(V!==R.value||V!==s.value||H==="progress"&&!V)&&Te(s,"value",V,R.value,!1),"checked"in A&&(V=A.checked)!==void 0&&V!==s.checked&&Te(s,"checked",V,R.checked,!1))}return s}function st(s,l,r){try{typeof s=="function"?s(l):s.current=l}catch(a){h.__e(a,r)}}function J(s,l,r){var a,c;if(h.unmount&&h.unmount(s),(a=s.ref)&&(a.current&&a.current!==s.__e||st(a,null,l)),(a=s.__c)!=null){if(a.componentWillUnmount)try{a.componentWillUnmount()}catch(f){h.__e(f,l)}a.base=a.__P=null}if(a=s.__k)for(c=0;c<a.length;c++)a[c]&&J(a[c],l,typeof s.type!="function");r||s.__e==null||k(s.__e),s.__e=s.__d=void 0}function Et(s,l,r){return this.constructor(s,r)}function yt(s,l,r){var a,c,f;h.__&&h.__(s,l),c=(a=typeof r=="function")?null:r&&r.__k||l.__k,f=[],_e(l,s=(!a&&r||l).__k=I(ae,null,[s]),c||E,E,l.ownerSVGElement!==void 0,!a&&r?[r]:c?null:l.firstChild?u.call(l.childNodes):null,f,!a&&r?r:c?c.__e:l.firstChild,a),$(f,s)}function mt(s,l){yt(s,l,mt)}function Tt(s,l,r){var a,c,f,g=_({},s.props);for(f in l)f=="key"?a=l[f]:f=="ref"?c=l[f]:g[f]=l[f];return arguments.length>2&&(g.children=arguments.length>3?u.call(arguments,2):r),G(s.type,g,a||s.key,c||s.ref,null)}function Bt(s,l){var r={__c:l="__cC"+x++,__:s,Consumer:function(a,c){return a.children(c)},Provider:function(a){var c,f;return this.getChildContext||(c=[],(f={})[l]=this,this.getChildContext=function(){return f},this.shouldComponentUpdate=function(g){this.props.value!==g.value&&c.some(ce)},this.sub=function(g){c.push(g);var y=g.componentWillUnmount;g.componentWillUnmount=function(){c.splice(c.indexOf(g),1),y&&y.call(g)}}),a.children}};return r.Provider.__=r.Consumer.contextType=r}u=C.slice,h={__e:function(s,l){for(var r,a,c;l=l.__;)if((r=l.__c)&&!r.__)try{if((a=r.constructor)&&a.getDerivedStateFromError!=null&&(r.setState(a.getDerivedStateFromError(s)),c=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(s),c=r.__d),c)return r.__E=r}catch(f){s=f}throw s}},d=0,te.prototype.setState=function(s,l){var r;r=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=_({},this.state),typeof s=="function"&&(s=s(_({},r),this.props)),s&&_(r,s),s!=null&&this.__v&&(l&&this.__h.push(l),ce(this))},te.prototype.forceUpdate=function(s){this.__v&&(this.__e=!0,s&&this.__h.push(s),ce(this))},te.prototype.render=ae,p=[],m=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,me.__r=0,x=0;var At,at,$e,wt=0,Lt=[],tn=h.__b,kt=h.__r,Gt=h.diffed,D=h.__c,K=h.unmount;function we(s,l){h.__h&&h.__h(at,s,wt||l),wt=0;var r=at.__H||(at.__H={__:[],__h:[]});return s>=r.__.length&&r.__.push({}),r.__[s]}function ze(s){return wt=1,Ne(je,s)}function Ne(s,l,r){var a=we(At++,2);return a.t=s,a.__c||(a.__=[r?r(l):je(void 0,l),function(c){var f=a.t(a.__[0],c);a.__[0]!==f&&(a.__=[f,a.__[1]],a.__c.setState({}))}],a.__c=at),a.__}function Qe(s,l){var r=we(At++,3);!h.__s&&ft(r.__H,l)&&(r.__=s,r.__H=l,at.__H.__h.push(r))}function Xe(s,l){var r=we(At++,4);!h.__s&&ft(r.__H,l)&&(r.__=s,r.__H=l,at.__h.push(r))}function bt(s){return wt=5,Dt(function(){return{current:s}},[])}function Rt(s,l,r){wt=6,Xe(function(){typeof s=="function"?s(l()):s&&(s.current=l())},r==null?r:r.concat(s))}function Dt(s,l){var r=we(At++,7);return ft(r.__H,l)&&(r.__=s(),r.__H=l,r.__h=s),r.__}function he(s,l){return wt=8,Dt(function(){return s},l)}function Ae(s){var l=at.context[s.__c],r=we(At++,9);return r.c=s,l?(r.__==null&&(r.__=!0,l.sub(at)),l.props.value):s.__}function L(s,l){h.useDebugValue&&h.useDebugValue(l?l(s):s)}function z(s){var l=we(At++,10),r=ze();return l.__=s,at.componentDidCatch||(at.componentDidCatch=function(a){l.__&&l.__(a),r[1](a)}),[r[0],function(){r[1](void 0)}]}function W(){var s;for(Lt.sort(function(l,r){return l.__v.__b-r.__v.__b});s=Lt.pop();)if(s.__P)try{s.__H.__h.forEach(Se),s.__H.__h.forEach(Ue),s.__H.__h=[]}catch(l){s.__H.__h=[],h.__e(l,s.__v)}}h.__b=function(s){at=null,tn&&tn(s)},h.__r=function(s){kt&&kt(s),At=0;var l=(at=s.__c).__H;l&&(l.__h.forEach(Se),l.__h.forEach(Ue),l.__h=[])},h.diffed=function(s){Gt&&Gt(s);var l=s.__c;l&&l.__H&&l.__H.__h.length&&(Lt.push(l)!==1&&$e===h.requestAnimationFrame||(($e=h.requestAnimationFrame)||function(r){var a,c=function(){clearTimeout(f),X&&cancelAnimationFrame(a),setTimeout(r)},f=setTimeout(c,100);X&&(a=requestAnimationFrame(c))})(W)),at=null},h.__c=function(s,l){l.some(function(r){try{r.__h.forEach(Se),r.__h=r.__h.filter(function(a){return!a.__||Ue(a)})}catch(a){l.some(function(c){c.__h&&(c.__h=[])}),l=[],h.__e(a,r.__v)}}),D&&D(s,l)},h.unmount=function(s){K&&K(s);var l,r=s.__c;r&&r.__H&&(r.__H.__.forEach(function(a){try{Se(a)}catch(c){l=c}}),l&&h.__e(l,r.__v))};var X=typeof requestAnimationFrame=="function";function Se(s){var l=at,r=s.__c;typeof r=="function"&&(s.__c=void 0,r()),at=l}function Ue(s){var l=at;s.__c=s.__(),at=l}function ft(s,l){return!s||s.length!==l.length||l.some(function(r,a){return r!==s[a]})}function je(s,l){return typeof l=="function"?l(s):l}function rt(s,l){for(var r in l)s[r]=l[r];return s}function Cn(s,l){for(var r in s)if(r!=="__source"&&!(r in l))return!0;for(var a in l)if(a!=="__source"&&s[a]!==l[a])return!0;return!1}function Kt(s){this.props=s}function ti(s,l){function r(c){var f=this.props.ref,g=f==c.ref;return!g&&f&&(f.call?f(null):f.current=null),l?!l(this.props,c)||!g:Cn(this.props,c)}function a(c){return this.shouldComponentUpdate=r,I(s,c)}return a.displayName="Memo("+(s.displayName||s.name)+")",a.prototype.isReactComponent=!0,a.__f=!0,a}(Kt.prototype=new te).isPureReactComponent=!0,Kt.prototype.shouldComponentUpdate=function(s,l){return Cn(this.props,s)||Cn(this.state,l)};var ao=h.__b;h.__b=function(s){s.type&&s.type.__f&&s.ref&&(s.props.ref=s.ref,s.ref=null),ao&&ao(s)};var Oi=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function wr(s){function l(r,a){var c=rt({},r);return delete c.ref,s(c,(a=r.ref||a)&&(typeof a!="object"||"current"in a)?a:null)}return l.$$typeof=Oi,l.render=l,l.prototype.isReactComponent=l.__f=!0,l.displayName="ForwardRef("+(s.displayName||s.name)+")",l}var ot=function(s,l){return s==null?null:fe(fe(s).map(l))},qo={map:ot,forEach:ot,count:function(s){return s?fe(s).length:0},only:function(s){var l=fe(s);if(l.length!==1)throw"Children.only";return l[0]},toArray:fe},od=h.__e;h.__e=function(s,l,r){if(s.then){for(var a,c=l;c=c.__;)if((a=c.__c)&&a.__c)return l.__e==null&&(l.__e=r.__e,l.__k=r.__k),a.__c(s,l)}od(s,l,r)};var Al=h.unmount;function Hn(){this.__u=0,this.t=null,this.__b=null}function lo(s){var l=s.__.__c;return l&&l.__e&&l.__e(s)}function Zo(s){var l,r,a;function c(f){if(l||(l=s()).then(function(g){r=g.default||g},function(g){a=g}),a)throw a;if(!r)throw l;return I(r,f)}return c.displayName="Lazy",c.__f=!0,c}function br(){this.u=null,this.o=null}h.unmount=function(s){var l=s.__c;l&&l.__R&&l.__R(),l&&s.__h===!0&&(s.type=null),Al&&Al(s)},(Hn.prototype=new te).__c=function(s,l){var r=l.__c,a=this;a.t==null&&(a.t=[]),a.t.push(r);var c=lo(a.__v),f=!1,g=function(){f||(f=!0,r.__R=null,c?c(y):y())};r.__R=g;var y=function(){if(!--a.__u){if(a.state.__e){var b=a.state.__e;a.__v.__k[0]=function R(A,H,V){return A&&(A.__v=null,A.__k=A.__k&&A.__k.map(function(oe){return R(oe,H,V)}),A.__c&&A.__c.__P===H&&(A.__e&&V.insertBefore(A.__e,A.__d),A.__c.__e=!0,A.__c.__P=V)),A}(b,b.__c.__P,b.__c.__O)}var S;for(a.setState({__e:a.__b=null});S=a.t.pop();)S.forceUpdate()}},w=l.__h===!0;a.__u++||w||a.setState({__e:a.__b=a.__v.__k[0]}),s.then(g,g)},Hn.prototype.componentWillUnmount=function(){this.t=[]},Hn.prototype.render=function(s,l){if(this.__b){if(this.__v.__k){var r=document.createElement("div"),a=this.__v.__k[0].__c;this.__v.__k[0]=function f(g,y,w){return g&&(g.__c&&g.__c.__H&&(g.__c.__H.__.forEach(function(b){typeof b.__c=="function"&&b.__c()}),g.__c.__H=null),(g=rt({},g)).__c!=null&&(g.__c.__P===w&&(g.__c.__P=y),g.__c=null),g.__k=g.__k&&g.__k.map(function(b){return f(b,y,w)})),g}(this.__b,r,a.__O=a.__P)}this.__b=null}var c=l.__e&&I(ae,null,s.fallback);return c&&(c.__h=null),[I(ae,null,l.__e?null:s.children),c]};var sr=function(s,l,r){if(++r[1]===r[0]&&s.o.delete(l),s.props.revealOrder&&(s.props.revealOrder[0]!=="t"||!s.o.size))for(r=s.u;r;){for(;r.length>3;)r.pop()();if(r[1]<r[0])break;s.u=r=r[2]}};function Dl(s){return this.getChildContext=function(){return s.context},s.children}function gi(s){var l=this,r=s.i;l.componentWillUnmount=function(){yt(null,l.l),l.l=null,l.i=null},l.i&&l.i!==r&&l.componentWillUnmount(),s.__v?(l.l||(l.i=r,l.l={nodeType:1,parentNode:r,childNodes:[],appendChild:function(a){this.childNodes.push(a),l.i.appendChild(a)},insertBefore:function(a,c){this.childNodes.push(a),l.i.appendChild(a)},removeChild:function(a){this.childNodes.splice(this.childNodes.indexOf(a)>>>1,1),l.i.removeChild(a)}}),yt(I(Dl,{context:l.context},s.__v),l.l)):l.l&&l.componentWillUnmount()}function Xo(s,l){return I(gi,{__v:s,i:l})}(br.prototype=new te).__e=function(s){var l=this,r=lo(l.__v),a=l.o.get(s);return a[0]++,function(c){var f=function(){l.props.revealOrder?(a.push(c),sr(l,s,a)):c()};r?r(f):f()}},br.prototype.render=function(s){this.u=null,this.o=new Map;var l=fe(s.children);s.revealOrder&&s.revealOrder[0]==="b"&&l.reverse();for(var r=l.length;r--;)this.o.set(l[r],this.u=[1,0,this.u]);return s.children},br.prototype.componentDidUpdate=br.prototype.componentDidMount=function(){var s=this;this.o.forEach(function(l,r){sr(s,r,l)})};var xr=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,Il=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Ml=typeof document<"u",ni=function(s){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(s)};function ia(s,l,r){return l.__k==null&&(l.textContent=""),yt(s,l),typeof r=="function"&&r(),s?s.__c:null}function Ll(s,l,r){return mt(s,l),typeof r=="function"&&r(),s?s.__c:null}te.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(s){Object.defineProperty(te.prototype,s,{configurable:!0,get:function(){return this["UNSAFE_"+s]},set:function(l){Object.defineProperty(this,s,{configurable:!0,writable:!0,value:l})}})});var Nl=h.event;function ra(){}function zl(){return this.cancelBubble}function Yo(){return this.defaultPrevented}h.event=function(s){return Nl&&(s=Nl(s)),s.persist=ra,s.isPropagationStopped=zl,s.isDefaultPrevented=Yo,s.nativeEvent=s};var Ai,uo={configurable:!0,get:function(){return this.class}},$o=h.vnode;h.vnode=function(s){var l=s.type,r=s.props,a=r;if(typeof l=="string"){var c=l.indexOf("-")===-1;for(var f in a={},r){var g=r[f];Ml&&f==="children"&&l==="noscript"||f==="value"&&"defaultValue"in r&&g==null||(f==="defaultValue"&&"value"in r&&r.value==null?f="value":f==="download"&&g===!0?g="":/ondoubleclick/i.test(f)?f="ondblclick":/^onchange(textarea|input)/i.test(f+l)&&!ni(r.type)?f="oninput":/^onfocus$/i.test(f)?f="onfocusin":/^onblur$/i.test(f)?f="onfocusout":/^on(Ani|Tra|Tou|BeforeInp)/.test(f)?f=f.toLowerCase():c&&Il.test(f)?f=f.replace(/[A-Z0-9]/,"-$&").toLowerCase():g===null&&(g=void 0),a[f]=g)}l=="select"&&a.multiple&&Array.isArray(a.value)&&(a.value=fe(r.children).forEach(function(y){y.props.selected=a.value.indexOf(y.props.value)!=-1})),l=="select"&&a.defaultValue!=null&&(a.value=fe(r.children).forEach(function(y){y.props.selected=a.multiple?a.defaultValue.indexOf(y.props.value)!=-1:a.defaultValue==y.props.value})),s.props=a,r.class!=r.className&&(uo.enumerable="className"in r,r.className!=null&&(a.class=r.className),Object.defineProperty(a,"className",uo))}s.$$typeof=xr,$o&&$o(s)};var oa=h.__r;h.__r=function(s){oa&&oa(s),Ai=s.__c};var sa={ReactCurrentDispatcher:{current:{readContext:function(s){return Ai.__n[s.__c].props.value}}}},jl="17.0.2";function Mr(s){return I.bind(null,s)}function Ko(s){return!!s&&s.$$typeof===xr}function co(s){return Ko(s)?Tt.apply(null,arguments):s}function aa(s){return!!s.__k&&(yt(null,s),!0)}function Sr(s){return s&&(s.base||s.nodeType===1&&s)||null}var Qo=function(s,l){return s(l)},la=function(s,l){return s(l)},Hl=ae,Me={useState:ze,useReducer:Ne,useEffect:Qe,useLayoutEffect:Xe,useRef:bt,useImperativeHandle:Rt,useMemo:Dt,useCallback:he,useContext:Ae,useDebugValue:L,version:"17.0.2",Children:qo,render:ia,hydrate:Ll,unmountComponentAtNode:aa,createPortal:Xo,createElement:I,createContext:Bt,createFactory:Mr,cloneElement:co,createRef:Z,Fragment:ae,isValidElement:Ko,findDOMNode:Sr,Component:te,PureComponent:Kt,memo:ti,forwardRef:wr,flushSync:la,unstable_batchedUpdates:Qo,StrictMode:ae,Suspense:Hn,SuspenseList:br,lazy:Zo,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:sa},ua=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Me,version:jl,Children:qo,render:ia,hydrate:Ll,unmountComponentAtNode:aa,createPortal:Xo,createFactory:Mr,cloneElement:co,isValidElement:Ko,findDOMNode:Sr,PureComponent:Kt,memo:ti,forwardRef:wr,flushSync:la,unstable_batchedUpdates:Qo,StrictMode:Hl,Suspense:Hn,SuspenseList:br,lazy:Zo,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:sa,createElement:I,createContext:Bt,createRef:Z,Fragment:ae,Component:te,useState:ze,useReducer:Ne,useEffect:Qe,useLayoutEffect:Xe,useRef:bt,useImperativeHandle:Rt,useMemo:Dt,useCallback:he,useContext:Ae,useDebugValue:L,useErrorBoundary:z}),Ji=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Jn<"u"?Jn:typeof self<"u"?self:{};function ho(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function po(s){if(s.__esModule)return s;var l=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(s).forEach(function(r){var a=Object.getOwnPropertyDescriptor(s,r);Object.defineProperty(l,r,a.get?a:{enumerable:!0,get:function(){return s[r]}})}),l}var yn={exports:{}};function Lr(){}Lr.prototype={on:function(s,l,r){var a=this.e||(this.e={});return(a[s]||(a[s]=[])).push({fn:l,ctx:r}),this},once:function(s,l,r){var a=this;function c(){a.off(s,c),l.apply(r,arguments)}return c._=l,this.on(s,c,r)},emit:function(s){var l=[].slice.call(arguments,1),r=((this.e||(this.e={}))[s]||[]).slice(),a=0,c=r.length;for(a;a<c;a++)r[a].fn.apply(r[a].ctx,l);return this},off:function(s,l){var r=this.e||(this.e={}),a=r[s],c=[];if(a&&l)for(var f=0,g=a.length;f<g;f++)a[f].fn!==l&&a[f].fn._!==l&&c.push(a[f]);return c.length?r[s]=c:delete r[s],this}},yn.exports=Lr,yn.exports.TinyEmitter=Lr;var Bi=yn.exports,Er={exports:{}},fo={},er=po(ua),tr={exports:{}},sd="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ad=sd,ca=ad;function da(){}function Jo(){}Jo.resetWarningCache=da;var ha=function(){function s(a,c,f,g,y,w){if(w!==ca){var b=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw b.name="Invariant Violation",b}}s.isRequired=s;function l(){return s}var r={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:l,element:s,elementType:s,instanceOf:l,node:s,objectOf:l,oneOf:l,oneOfType:l,shape:l,exact:l,checkPropTypes:Jo,resetWarningCache:da};return r.PropTypes=r,r};tr.exports=ha();function Fl(s){var l,r,a="";if(typeof s=="string"||typeof s=="number")a+=s;else if(typeof s=="object")if(Array.isArray(s))for(l=0;l<s.length;l++)s[l]&&(r=Fl(s[l]))&&(a&&(a+=" "),a+=r);else for(l in s)s[l]&&(a&&(a+=" "),a+=l);return a}function mo(){for(var s,l,r=0,a="";r<arguments.length;)(s=arguments[r++])&&(l=Fl(s))&&(a&&(a+=" "),a+=l);return a}var es=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",clsx:mo,default:mo}),Tr=po(es),Pn={},Fn={};Object.defineProperty(Fn,"__esModule",{value:!0}),Fn.dontSetMe=pa,Fn.findInArray=Nr,Fn.int=Pt,Fn.isFunction=ts,Fn.isNum=ld;function Nr(s,l){for(var r=0,a=s.length;r<a;r++)if(l.apply(l,[s[r],r,s]))return s[r]}function ts(s){return typeof s=="function"||Object.prototype.toString.call(s)==="[object Function]"}function ld(s){return typeof s=="number"&&!isNaN(s)}function Pt(s){return parseInt(s,10)}function pa(s,l,r){if(s[l])return new Error("Invalid prop ".concat(l," passed to ").concat(r," - do not set this, set it on the child."))}var Ui={};Object.defineProperty(Ui,"__esModule",{value:!0}),Ui.browserPrefixToKey=nr,Ui.browserPrefixToStyle=go,Ui.default=void 0,Ui.getPrefix=zr;var ns=["Moz","Webkit","O","ms"];function zr(){var s,l,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";var a=(s=window.document)===null||s===void 0||(l=s.documentElement)===null||l===void 0?void 0:l.style;if(!a||r in a)return"";for(var c=0;c<ns.length;c++)if(nr(r,ns[c])in a)return ns[c];return""}function nr(s,l){return l?"".concat(l).concat(is(s)):s}function go(s,l){return l?"-".concat(l.toLowerCase(),"-").concat(s):s}function is(s){for(var l="",r=!0,a=0;a<s.length;a++)r?(l+=s[a].toUpperCase(),r=!1):s[a]==="-"?r=!0:l+=s[a];return l}var Bl=zr();Ui.default=Bl;function T(s){return T=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},T(s)}Object.defineProperty(Pn,"__esModule",{value:!0}),Pn.addClassName=ma,Pn.addEvent=Vn,Pn.addUserSelectStyles=vd,Pn.createCSSTransform=pd,Pn.createSVGTransform=fd,Pn.getTouch=md,Pn.getTouchIdentifier=gd,Pn.getTranslation=fa,Pn.innerHeight=dd,Pn.innerWidth=Wl,Pn.matchesSelector=qt,Pn.matchesSelectorAndParentsTo=jn,Pn.offsetXYFromParent=hd,Pn.outerHeight=cd,Pn.outerWidth=Ul,Pn.removeClassName=Vl,Pn.removeEvent=ud,Pn.removeUserSelectStyles=yd;var P=Fn,j=de(Ui);function Y(s){if(typeof WeakMap!="function")return null;var l=new WeakMap,r=new WeakMap;return(Y=function(a){return a?r:l})(s)}function de(s,l){if(s&&s.__esModule)return s;if(s===null||T(s)!=="object"&&typeof s!="function")return{default:s};var r=Y(l);if(r&&r.has(s))return r.get(s);var a={},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in s)if(f!=="default"&&Object.prototype.hasOwnProperty.call(s,f)){var g=c?Object.getOwnPropertyDescriptor(s,f):null;g&&(g.get||g.set)?Object.defineProperty(a,f,g):a[f]=s[f]}return a.default=s,r&&r.set(s,a),a}function Re(s,l){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(s);l&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(s,c).enumerable})),r.push.apply(r,a)}return r}function Be(s){for(var l=1;l<arguments.length;l++){var r=arguments[l]!=null?arguments[l]:{};l%2?Re(Object(r),!0).forEach(function(a){Ht(s,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):Re(Object(r)).forEach(function(a){Object.defineProperty(s,a,Object.getOwnPropertyDescriptor(r,a))})}return s}function Ht(s,l,r){return l in s?Object.defineProperty(s,l,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[l]=r,s}var rn="";function qt(s,l){return rn||(rn=(0,P.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(r){return(0,P.isFunction)(s[r])})),(0,P.isFunction)(s[rn])?s[rn](l):!1}function jn(s,l,r){var a=s;do{if(qt(a,l))return!0;if(a===r)return!1;a=a.parentNode}while(a);return!1}function Vn(s,l,r,a){if(s){var c=Be({capture:!0},a);s.addEventListener?s.addEventListener(l,r,c):s.attachEvent?s.attachEvent("on"+l,r):s["on"+l]=r}}function ud(s,l,r,a){if(s){var c=Be({capture:!0},a);s.removeEventListener?s.removeEventListener(l,r,c):s.detachEvent?s.detachEvent("on"+l,r):s["on"+l]=null}}function cd(s){var l=s.clientHeight,r=s.ownerDocument.defaultView.getComputedStyle(s);return l+=(0,P.int)(r.borderTopWidth),l+=(0,P.int)(r.borderBottomWidth),l}function Ul(s){var l=s.clientWidth,r=s.ownerDocument.defaultView.getComputedStyle(s);return l+=(0,P.int)(r.borderLeftWidth),l+=(0,P.int)(r.borderRightWidth),l}function dd(s){var l=s.clientHeight,r=s.ownerDocument.defaultView.getComputedStyle(s);return l-=(0,P.int)(r.paddingTop),l-=(0,P.int)(r.paddingBottom),l}function Wl(s){var l=s.clientWidth,r=s.ownerDocument.defaultView.getComputedStyle(s);return l-=(0,P.int)(r.paddingLeft),l-=(0,P.int)(r.paddingRight),l}function hd(s,l,r){var a=l===l.ownerDocument.body,c=a?{left:0,top:0}:l.getBoundingClientRect(),f=(s.clientX+l.scrollLeft-c.left)/r,g=(s.clientY+l.scrollTop-c.top)/r;return{x:f,y:g}}function pd(s,l){var r=fa(s,l,"px");return Ht({},(0,j.browserPrefixToKey)("transform",j.default),r)}function fd(s,l){var r=fa(s,l,"");return r}function fa(s,l,r){var a=s.x,c=s.y,f="translate(".concat(a).concat(r,",").concat(c).concat(r,")");if(l){var g="".concat(typeof l.x=="string"?l.x:l.x+r),y="".concat(typeof l.y=="string"?l.y:l.y+r);f="translate(".concat(g,", ").concat(y,")")+f}return f}function md(s,l){return s.targetTouches&&(0,P.findInArray)(s.targetTouches,function(r){return l===r.identifier})||s.changedTouches&&(0,P.findInArray)(s.changedTouches,function(r){return l===r.identifier})}function gd(s){if(s.targetTouches&&s.targetTouches[0])return s.targetTouches[0].identifier;if(s.changedTouches&&s.changedTouches[0])return s.changedTouches[0].identifier}function vd(s){if(s){var l=s.getElementById("react-draggable-style-el");l||(l=s.createElement("style"),l.type="text/css",l.id="react-draggable-style-el",l.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,l.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,s.getElementsByTagName("head")[0].appendChild(l)),s.body&&ma(s.body,"react-draggable-transparent-selection")}}function yd(s){if(s)try{if(s.body&&Vl(s.body,"react-draggable-transparent-selection"),s.selection)s.selection.empty();else{var l=(s.defaultView||window).getSelection();l&&l.type!=="Caret"&&l.removeAllRanges()}}catch{}}function ma(s,l){s.classList?s.classList.add(l):s.className.match(new RegExp("(?:^|\\s)".concat(l,"(?!\\S)")))||(s.className+=" ".concat(l))}function Vl(s,l){s.classList?s.classList.remove(l):s.className=s.className.replace(new RegExp("(?:^|\\s)".concat(l,"(?!\\S)"),"g"),"")}var Wi={};Object.defineProperty(Wi,"__esModule",{value:!0}),Wi.canDragX=xd,Wi.canDragY=Gl,Wi.createCoreData=Ed,Wi.createDraggableData=Td,Wi.getBoundPosition=wd,Wi.getControlPosition=Sd,Wi.snapToGrid=bd;var vi=Fn,jr=Pn;function wd(s,l,r){if(!s.props.bounds)return[l,r];var a=s.props.bounds;a=typeof a=="string"?a:Cd(a);var c=ga(s);if(typeof a=="string"){var f=c.ownerDocument,g=f.defaultView,y;if(a==="parent"?y=c.parentNode:y=f.querySelector(a),!(y instanceof g.HTMLElement))throw new Error('Bounds selector "'+a+'" could not find an element.');var w=y,b=g.getComputedStyle(c),S=g.getComputedStyle(w);a={left:-c.offsetLeft+(0,vi.int)(S.paddingLeft)+(0,vi.int)(b.marginLeft),top:-c.offsetTop+(0,vi.int)(S.paddingTop)+(0,vi.int)(b.marginTop),right:(0,jr.innerWidth)(w)-(0,jr.outerWidth)(c)-c.offsetLeft+(0,vi.int)(S.paddingRight)-(0,vi.int)(b.marginRight),bottom:(0,jr.innerHeight)(w)-(0,jr.outerHeight)(c)-c.offsetTop+(0,vi.int)(S.paddingBottom)-(0,vi.int)(b.marginBottom)}}return(0,vi.isNum)(a.right)&&(l=Math.min(l,a.right)),(0,vi.isNum)(a.bottom)&&(r=Math.min(r,a.bottom)),(0,vi.isNum)(a.left)&&(l=Math.max(l,a.left)),(0,vi.isNum)(a.top)&&(r=Math.max(r,a.top)),[l,r]}function bd(s,l,r){var a=Math.round(l/s[0])*s[0],c=Math.round(r/s[1])*s[1];return[a,c]}function xd(s){return s.props.axis==="both"||s.props.axis==="x"}function Gl(s){return s.props.axis==="both"||s.props.axis==="y"}function Sd(s,l,r){var a=typeof l=="number"?(0,jr.getTouch)(s,l):null;if(typeof l=="number"&&!a)return null;var c=ga(r),f=r.props.offsetParent||c.offsetParent||c.ownerDocument.body;return(0,jr.offsetXYFromParent)(a||s,f,r.props.scale)}function Ed(s,l,r){var a=s.state,c=!(0,vi.isNum)(a.lastX),f=ga(s);return c?{node:f,deltaX:0,deltaY:0,lastX:l,lastY:r,x:l,y:r}:{node:f,deltaX:l-a.lastX,deltaY:r-a.lastY,lastX:a.lastX,lastY:a.lastY,x:l,y:r}}function Td(s,l){var r=s.props.scale;return{node:l.node,x:s.state.x+l.deltaX/r,y:s.state.y+l.deltaY/r,deltaX:l.deltaX/r,deltaY:l.deltaY/r,lastX:s.state.x,lastY:s.state.y}}function Cd(s){return{left:s.left,top:s.top,right:s.right,bottom:s.bottom}}function ga(s){var l=s.findDOMNode();if(!l)throw new Error("<DraggableCore>: Unmounted during event!");return l}var rs={},vo={};Object.defineProperty(vo,"__esModule",{value:!0}),vo.default=Pd;function Pd(){}function os(s){return os=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},os(s)}Object.defineProperty(rs,"__esModule",{value:!0}),rs.default=void 0;var va=Sn(er),Xn=Nt(tr.exports),ql=Nt(er),Gn=Pn,xe=Wi,qe=Fn,gt=Nt(vo);function Nt(s){return s&&s.__esModule?s:{default:s}}function $t(s){if(typeof WeakMap!="function")return null;var l=new WeakMap,r=new WeakMap;return($t=function(a){return a?r:l})(s)}function Sn(s,l){if(s&&s.__esModule)return s;if(s===null||os(s)!=="object"&&typeof s!="function")return{default:s};var r=$t(l);if(r&&r.has(s))return r.get(s);var a={},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in s)if(f!=="default"&&Object.prototype.hasOwnProperty.call(s,f)){var g=c?Object.getOwnPropertyDescriptor(s,f):null;g&&(g.get||g.set)?Object.defineProperty(a,f,g):a[f]=s[f]}return a.default=s,r&&r.set(s,a),a}function xi(s,l){return Cr(s)||ya(s,l)||yi(s,l)||Si()}function Si(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yi(s,l){if(s){if(typeof s=="string")return Ei(s,l);var r=Object.prototype.toString.call(s).slice(8,-1);if(r==="Object"&&s.constructor&&(r=s.constructor.name),r==="Map"||r==="Set")return Array.from(s);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ei(s,l)}}function Ei(s,l){(l==null||l>s.length)&&(l=s.length);for(var r=0,a=new Array(l);r<l;r++)a[r]=s[r];return a}function ya(s,l){var r=s==null?null:typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(r!=null){var a=[],c=!0,f=!1,g,y;try{for(r=r.call(s);!(c=(g=r.next()).done)&&(a.push(g.value),!(l&&a.length===l));c=!0);}catch(w){f=!0,y=w}finally{try{!c&&r.return!=null&&r.return()}finally{if(f)throw y}}return a}}function Cr(s){if(Array.isArray(s))return s}function _d(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")}function ZP(s,l){for(var r=0;r<l.length;r++){var a=l[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(s,a.key,a)}}function XP(s,l,r){return l&&ZP(s.prototype,l),Object.defineProperty(s,"prototype",{writable:!1}),s}function YP(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),l&&kd(s,l)}function kd(s,l){return kd=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},kd(s,l)}function $P(s){var l=QP();return function(){var r=Zl(s),a;if(l){var c=Zl(this).constructor;a=Reflect.construct(r,arguments,c)}else a=r.apply(this,arguments);return KP(this,a)}}function KP(s,l){if(l&&(os(l)==="object"||typeof l=="function"))return l;if(l!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ci(s)}function ci(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function QP(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Zl(s){return Zl=Object.setPrototypeOf?Object.getPrototypeOf:function(l){return l.__proto__||Object.getPrototypeOf(l)},Zl(s)}function Vi(s,l,r){return l in s?Object.defineProperty(s,l,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[l]=r,s}var ir={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}},Hr=ir.mouse,Xl=function(s){YP(r,s);var l=$P(r);function r(){var a;_d(this,r);for(var c=arguments.length,f=new Array(c),g=0;g<c;g++)f[g]=arguments[g];return a=l.call.apply(l,[this].concat(f)),Vi(ci(a),"state",{dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:null}),Vi(ci(a),"mounted",!1),Vi(ci(a),"handleDragStart",function(y){if(a.props.onMouseDown(y),!a.props.allowAnyClick&&typeof y.button=="number"&&y.button!==0)return!1;var w=a.findDOMNode();if(!w||!w.ownerDocument||!w.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");var b=w.ownerDocument;if(!(a.props.disabled||!(y.target instanceof b.defaultView.Node)||a.props.handle&&!(0,Gn.matchesSelectorAndParentsTo)(y.target,a.props.handle,w)||a.props.cancel&&(0,Gn.matchesSelectorAndParentsTo)(y.target,a.props.cancel,w))){y.type==="touchstart"&&y.preventDefault();var S=(0,Gn.getTouchIdentifier)(y);a.setState({touchIdentifier:S});var R=(0,xe.getControlPosition)(y,S,ci(a));if(R!=null){var A=R.x,H=R.y,V=(0,xe.createCoreData)(ci(a),A,H);(0,gt.default)("DraggableCore: handleDragStart: %j",V),(0,gt.default)("calling",a.props.onStart);var oe=a.props.onStart(y,V);oe===!1||a.mounted===!1||(a.props.enableUserSelectHack&&(0,Gn.addUserSelectStyles)(b),a.setState({dragging:!0,lastX:A,lastY:H}),(0,Gn.addEvent)(b,Hr.move,a.handleDrag),(0,Gn.addEvent)(b,Hr.stop,a.handleDragStop))}}}),Vi(ci(a),"handleDrag",function(y){var w=(0,xe.getControlPosition)(y,a.state.touchIdentifier,ci(a));if(w!=null){var b=w.x,S=w.y;if(Array.isArray(a.props.grid)){var R=b-a.state.lastX,A=S-a.state.lastY,H=(0,xe.snapToGrid)(a.props.grid,R,A),V=xi(H,2);if(R=V[0],A=V[1],!R&&!A)return;b=a.state.lastX+R,S=a.state.lastY+A}var oe=(0,xe.createCoreData)(ci(a),b,S);(0,gt.default)("DraggableCore: handleDrag: %j",oe);var ne=a.props.onDrag(y,oe);if(ne===!1||a.mounted===!1){try{a.handleDragStop(new MouseEvent("mouseup"))}catch{var ue=document.createEvent("MouseEvents");ue.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),a.handleDragStop(ue)}return}a.setState({lastX:b,lastY:S})}}),Vi(ci(a),"handleDragStop",function(y){if(a.state.dragging){var w=(0,xe.getControlPosition)(y,a.state.touchIdentifier,ci(a));if(w!=null){var b=w.x,S=w.y;if(Array.isArray(a.props.grid)){var R=b-a.state.lastX||0,A=S-a.state.lastY||0,H=(0,xe.snapToGrid)(a.props.grid,R,A),V=xi(H,2);R=V[0],A=V[1],b=a.state.lastX+R,S=a.state.lastY+A}var oe=(0,xe.createCoreData)(ci(a),b,S),ne=a.props.onStop(y,oe);if(ne===!1||a.mounted===!1)return!1;var ue=a.findDOMNode();ue&&a.props.enableUserSelectHack&&(0,Gn.removeUserSelectStyles)(ue.ownerDocument),(0,gt.default)("DraggableCore: handleDragStop: %j",oe),a.setState({dragging:!1,lastX:NaN,lastY:NaN}),ue&&((0,gt.default)("DraggableCore: Removing handlers"),(0,Gn.removeEvent)(ue.ownerDocument,Hr.move,a.handleDrag),(0,Gn.removeEvent)(ue.ownerDocument,Hr.stop,a.handleDragStop))}}}),Vi(ci(a),"onMouseDown",function(y){return Hr=ir.mouse,a.handleDragStart(y)}),Vi(ci(a),"onMouseUp",function(y){return Hr=ir.mouse,a.handleDragStop(y)}),Vi(ci(a),"onTouchStart",function(y){return Hr=ir.touch,a.handleDragStart(y)}),Vi(ci(a),"onTouchEnd",function(y){return Hr=ir.touch,a.handleDragStop(y)}),a}return XP(r,[{key:"componentDidMount",value:function(){this.mounted=!0;var a=this.findDOMNode();a&&(0,Gn.addEvent)(a,ir.touch.start,this.onTouchStart,{passive:!1})}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.findDOMNode();if(a){var c=a.ownerDocument;(0,Gn.removeEvent)(c,ir.mouse.move,this.handleDrag),(0,Gn.removeEvent)(c,ir.touch.move,this.handleDrag),(0,Gn.removeEvent)(c,ir.mouse.stop,this.handleDragStop),(0,Gn.removeEvent)(c,ir.touch.stop,this.handleDragStop),(0,Gn.removeEvent)(a,ir.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,Gn.removeUserSelectStyles)(c)}}},{key:"findDOMNode",value:function(){var a,c,f;return(a=this.props)!==null&&a!==void 0&&a.nodeRef?(c=this.props)===null||c===void 0||(f=c.nodeRef)===null||f===void 0?void 0:f.current:ql.default.findDOMNode(this)}},{key:"render",value:function(){return va.cloneElement(va.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}]),r}(va.Component);rs.default=Xl,Vi(Xl,"displayName","DraggableCore"),Vi(Xl,"propTypes",{allowAnyClick:Xn.default.bool,disabled:Xn.default.bool,enableUserSelectHack:Xn.default.bool,offsetParent:function(s,l){if(s[l]&&s[l].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:Xn.default.arrayOf(Xn.default.number),handle:Xn.default.string,cancel:Xn.default.string,nodeRef:Xn.default.object,onStart:Xn.default.func,onDrag:Xn.default.func,onStop:Xn.default.func,onMouseDown:Xn.default.func,scale:Xn.default.number,className:qe.dontSetMe,style:qe.dontSetMe,transform:qe.dontSetMe}),Vi(Xl,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1}),function(s){function l(We){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(tt){return typeof tt}:function(tt){return tt&&typeof Symbol=="function"&&tt.constructor===Symbol&&tt!==Symbol.prototype?"symbol":typeof tt},l(We)}Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"DraggableCore",{enumerable:!0,get:function(){return b.default}}),s.default=void 0;var r=V(er),a=A(tr.exports),c=A(er),f=A(Tr),g=Pn,y=Wi,w=Fn,b=A(rs),S=A(vo),R=["axis","bounds","children","defaultPosition","defaultClassName","defaultClassNameDragging","defaultClassNameDragged","position","positionOffset","scale"];function A(We){return We&&We.__esModule?We:{default:We}}function H(We){if(typeof WeakMap!="function")return null;var tt=new WeakMap,it=new WeakMap;return(H=function(nt){return nt?it:tt})(We)}function V(We,tt){if(We&&We.__esModule)return We;if(We===null||l(We)!=="object"&&typeof We!="function")return{default:We};var it=H(tt);if(it&&it.has(We))return it.get(We);var nt={},lt=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Ot in We)if(Ot!=="default"&&Object.prototype.hasOwnProperty.call(We,Ot)){var fn=lt?Object.getOwnPropertyDescriptor(We,Ot):null;fn&&(fn.get||fn.set)?Object.defineProperty(nt,Ot,fn):nt[Ot]=We[Ot]}return nt.default=We,it&&it.set(We,nt),nt}function oe(){return oe=Object.assign||function(We){for(var tt=1;tt<arguments.length;tt++){var it=arguments[tt];for(var nt in it)Object.prototype.hasOwnProperty.call(it,nt)&&(We[nt]=it[nt])}return We},oe.apply(this,arguments)}function ne(We,tt){if(We==null)return{};var it=ue(We,tt),nt,lt;if(Object.getOwnPropertySymbols){var Ot=Object.getOwnPropertySymbols(We);for(lt=0;lt<Ot.length;lt++)nt=Ot[lt],!(tt.indexOf(nt)>=0)&&(!Object.prototype.propertyIsEnumerable.call(We,nt)||(it[nt]=We[nt]))}return it}function ue(We,tt){if(We==null)return{};var it={},nt=Object.keys(We),lt,Ot;for(Ot=0;Ot<nt.length;Ot++)lt=nt[Ot],!(tt.indexOf(lt)>=0)&&(it[lt]=We[lt]);return it}function M(We,tt){var it=Object.keys(We);if(Object.getOwnPropertySymbols){var nt=Object.getOwnPropertySymbols(We);tt&&(nt=nt.filter(function(lt){return Object.getOwnPropertyDescriptor(We,lt).enumerable})),it.push.apply(it,nt)}return it}function re(We){for(var tt=1;tt<arguments.length;tt++){var it=arguments[tt]!=null?arguments[tt]:{};tt%2?M(Object(it),!0).forEach(function(nt){dt(We,nt,it[nt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(We,Object.getOwnPropertyDescriptors(it)):M(Object(it)).forEach(function(nt){Object.defineProperty(We,nt,Object.getOwnPropertyDescriptor(it,nt))})}return We}function ge(We,tt){return Ke(We)||Ze(We,tt)||Ee(We,tt)||pe()}function pe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ee(We,tt){if(We){if(typeof We=="string")return Ce(We,tt);var it=Object.prototype.toString.call(We).slice(8,-1);if(it==="Object"&&We.constructor&&(it=We.constructor.name),it==="Map"||it==="Set")return Array.from(We);if(it==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(it))return Ce(We,tt)}}function Ce(We,tt){(tt==null||tt>We.length)&&(tt=We.length);for(var it=0,nt=new Array(tt);it<tt;it++)nt[it]=We[it];return nt}function Ze(We,tt){var it=We==null?null:typeof Symbol<"u"&&We[Symbol.iterator]||We["@@iterator"];if(it!=null){var nt=[],lt=!0,Ot=!1,fn,Dn;try{for(it=it.call(We);!(lt=(fn=it.next()).done)&&(nt.push(fn.value),!(tt&&nt.length===tt));lt=!0);}catch(an){Ot=!0,Dn=an}finally{try{!lt&&it.return!=null&&it.return()}finally{if(Ot)throw Dn}}return nt}}function Ke(We){if(Array.isArray(We))return We}function ut(We,tt){if(!(We instanceof tt))throw new TypeError("Cannot call a class as a function")}function pt(We,tt){for(var it=0;it<tt.length;it++){var nt=tt[it];nt.enumerable=nt.enumerable||!1,nt.configurable=!0,"value"in nt&&(nt.writable=!0),Object.defineProperty(We,nt.key,nt)}}function ct(We,tt,it){return tt&&pt(We.prototype,tt),it&&pt(We,it),Object.defineProperty(We,"prototype",{writable:!1}),We}function _t(We,tt){if(typeof tt!="function"&&tt!==null)throw new TypeError("Super expression must either be null or a function");We.prototype=Object.create(tt&&tt.prototype,{constructor:{value:We,writable:!0,configurable:!0}}),Object.defineProperty(We,"prototype",{writable:!1}),tt&&Ct(We,tt)}function Ct(We,tt){return Ct=Object.setPrototypeOf||function(it,nt){return it.__proto__=nt,it},Ct(We,tt)}function Wt(We){var tt=ln();return function(){var it=bn(We),nt;if(tt){var lt=bn(this).constructor;nt=Reflect.construct(it,arguments,lt)}else nt=it.apply(this,arguments);return Ut(this,nt)}}function Ut(We,tt){if(tt&&(l(tt)==="object"||typeof tt=="function"))return tt;if(tt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Zt(We)}function Zt(We){if(We===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return We}function ln(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function bn(We){return bn=Object.setPrototypeOf?Object.getPrototypeOf:function(tt){return tt.__proto__||Object.getPrototypeOf(tt)},bn(We)}function dt(We,tt,it){return tt in We?Object.defineProperty(We,tt,{value:it,enumerable:!0,configurable:!0,writable:!0}):We[tt]=it,We}var Jt=function(We){_t(it,We);var tt=Wt(it);function it(nt){var lt;return ut(this,it),lt=tt.call(this,nt),dt(Zt(lt),"onDragStart",function(Ot,fn){(0,S.default)("Draggable: onDragStart: %j",fn);var Dn=lt.props.onStart(Ot,(0,y.createDraggableData)(Zt(lt),fn));if(Dn===!1)return!1;lt.setState({dragging:!0,dragged:!0})}),dt(Zt(lt),"onDrag",function(Ot,fn){if(!lt.state.dragging)return!1;(0,S.default)("Draggable: onDrag: %j",fn);var Dn=(0,y.createDraggableData)(Zt(lt),fn),an={x:Dn.x,y:Dn.y};if(lt.props.bounds){var Gi=an.x,Ci=an.y;an.x+=lt.state.slackX,an.y+=lt.state.slackY;var Li=(0,y.getBoundPosition)(Zt(lt),an.x,an.y),N=ge(Li,2),se=N[0],Oe=N[1];an.x=se,an.y=Oe,an.slackX=lt.state.slackX+(Gi-an.x),an.slackY=lt.state.slackY+(Ci-an.y),Dn.x=an.x,Dn.y=an.y,Dn.deltaX=an.x-lt.state.x,Dn.deltaY=an.y-lt.state.y}var Ye=lt.props.onDrag(Ot,Dn);if(Ye===!1)return!1;lt.setState(an)}),dt(Zt(lt),"onDragStop",function(Ot,fn){if(!lt.state.dragging)return!1;var Dn=lt.props.onStop(Ot,(0,y.createDraggableData)(Zt(lt),fn));if(Dn===!1)return!1;(0,S.default)("Draggable: onDragStop: %j",fn);var an={dragging:!1,slackX:0,slackY:0},Gi=!!lt.props.position;if(Gi){var Ci=lt.props.position,Li=Ci.x,N=Ci.y;an.x=Li,an.y=N}lt.setState(an)}),lt.state={dragging:!1,dragged:!1,x:nt.position?nt.position.x:nt.defaultPosition.x,y:nt.position?nt.position.y:nt.defaultPosition.y,prevPropsPosition:re({},nt.position),slackX:0,slackY:0,isElementSVG:!1},nt.position&&!(nt.onDrag||nt.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element."),lt}return ct(it,[{key:"componentDidMount",value:function(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}},{key:"componentWillUnmount",value:function(){this.setState({dragging:!1})}},{key:"findDOMNode",value:function(){var nt,lt,Ot;return(nt=(lt=this.props)===null||lt===void 0||(Ot=lt.nodeRef)===null||Ot===void 0?void 0:Ot.current)!==null&&nt!==void 0?nt:c.default.findDOMNode(this)}},{key:"render",value:function(){var nt,lt=this.props;lt.axis,lt.bounds;var Ot=lt.children,fn=lt.defaultPosition,Dn=lt.defaultClassName,an=lt.defaultClassNameDragging,Gi=lt.defaultClassNameDragged,Ci=lt.position,Li=lt.positionOffset;lt.scale;var N=ne(lt,R),se={},Oe=null,Ye=!!Ci,Ve=!Ye||this.state.dragging,St=Ci||fn,ht={x:(0,y.canDragX)(this)&&Ve?this.state.x:St.x,y:(0,y.canDragY)(this)&&Ve?this.state.y:St.y};this.state.isElementSVG?Oe=(0,g.createSVGTransform)(ht,Li):se=(0,g.createCSSTransform)(ht,Li);var un=(0,f.default)(Ot.props.className||"",Dn,(nt={},dt(nt,an,this.state.dragging),dt(nt,Gi,this.state.dragged),nt));return r.createElement(b.default,oe({},N,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),r.cloneElement(r.Children.only(Ot),{className:un,style:re(re({},Ot.props.style),se),transform:Oe}))}}],[{key:"getDerivedStateFromProps",value:function(nt,lt){var Ot=nt.position,fn=lt.prevPropsPosition;return Ot&&(!fn||Ot.x!==fn.x||Ot.y!==fn.y)?((0,S.default)("Draggable: getDerivedStateFromProps %j",{position:Ot,prevPropsPosition:fn}),{x:Ot.x,y:Ot.y,prevPropsPosition:re({},Ot)}):null}}]),it}(r.Component);s.default=Jt,dt(Jt,"displayName","Draggable"),dt(Jt,"propTypes",re(re({},b.default.propTypes),{},{axis:a.default.oneOf(["both","x","y","none"]),bounds:a.default.oneOfType([a.default.shape({left:a.default.number,right:a.default.number,top:a.default.number,bottom:a.default.number}),a.default.string,a.default.oneOf([!1])]),defaultClassName:a.default.string,defaultClassNameDragging:a.default.string,defaultClassNameDragged:a.default.string,defaultPosition:a.default.shape({x:a.default.number,y:a.default.number}),positionOffset:a.default.shape({x:a.default.oneOfType([a.default.number,a.default.string]),y:a.default.oneOfType([a.default.number,a.default.string])}),position:a.default.shape({x:a.default.number,y:a.default.number}),className:w.dontSetMe,style:w.dontSetMe,transform:w.dontSetMe})),dt(Jt,"defaultProps",re(re({},b.default.defaultProps),{},{axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1}))}(fo);var wg=fo,bg=wg.default,JP=wg.DraggableCore;Er.exports=bg,Er.exports.default=bg,Er.exports.DraggableCore=JP;var e_=Er.exports,t_=["second","minute","hour","day","week","month","year"];function n_(s,l){if(l===0)return["just now","right now"];var r=t_[Math.floor(l/2)];return s>1&&(r+="s"),[s+" "+r+" ago","in "+s+" "+r]}var i_=["秒","分钟","小时","天","周","个月","年"];function r_(s,l){if(l===0)return["刚刚","片刻后"];var r=i_[~~(l/2)];return[s+" "+r+"前",s+" "+r+"后"]}var Rd={},Ln=function(s,l){Rd[s]=l},xg=function(s){return Rd[s]||Rd.en_US},yo=[60,60,24,7,365/7/12,12];function Sg(s){return s instanceof Date?s:!isNaN(s)||/^\d+$/.test(s)?new Date(parseInt(s)):(s=(s||"").trim().replace(/\.\d+/,"").replace(/-/,"/").replace(/-/,"/").replace(/(\d)T(\d)/,"$1 $2").replace(/Z/," UTC").replace(/([+-]\d\d):?(\d\d)/," $1$2"),new Date(s))}function Eg(s,l){var r=s<0?1:0;s=Math.abs(s);for(var a=s,c=0;s>=yo[c]&&c<yo.length;c++)s/=yo[c];return s=Math.floor(s),c*=2,s>(c===0?9:1)&&(c+=1),l(s,c,a)[r].replace("%s",s.toString())}function Tg(s,l){var r=l?Sg(l):new Date;return(+r-+Sg(s))/1e3}function o_(s){for(var l=1,r=0,a=Math.abs(s);s>=yo[r]&&r<yo.length;r++)s/=yo[r],l*=yo[r];return a=a%l,a=a?l-a:l,Math.ceil(a)}var s_=function(s,l,r){var a=Tg(s,r&&r.relativeDate);return Eg(a,xg(l))},Cg="timeago-id";function a_(s){return s.getAttribute("datetime")}function l_(s,l){s.setAttribute(Cg,l)}function Pg(s){return parseInt(s.getAttribute(Cg))}var Od={},Ad=function(s){clearTimeout(s),delete Od[s]};function _g(s,l,r,a){Ad(Pg(s));var c=a.relativeDate,f=a.minInterval,g=Tg(l,c);s.innerText=Eg(g,r);var y=setTimeout(function(){_g(s,l,r,a)},Math.min(Math.max(o_(g),f||1)*1e3,2147483647));Od[y]=0,l_(s,y)}function kg(s){s?Ad(Pg(s)):Object.keys(Od).forEach(Ad)}function u_(s,l,r){var a=s.length?s:[s];return a.forEach(function(c){_g(c,a_(c),xg(l),r||{})}),a}Ln("en_US",n_),Ln("zh_CN",r_);var c_=globalThis&&globalThis.__extends||function(){var s=function(l,r){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var f in c)c.hasOwnProperty(f)&&(a[f]=c[f])},s(l,r)};return function(l,r){s(l,r);function a(){this.constructor=l}l.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)}}(),Dd=globalThis&&globalThis.__assign||function(){return Dd=Object.assign||function(s){for(var l,r=1,a=arguments.length;r<a;r++){l=arguments[r];for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(s[c]=l[c])}return s},Dd.apply(this,arguments)},d_=globalThis&&globalThis.__rest||function(s,l){var r={};for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&l.indexOf(a)<0&&(r[a]=s[a]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(s);c<a.length;c++)l.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(s,a[c])&&(r[a[c]]=s[a[c]]);return r},h_=function(s){return""+(s instanceof Date?s.getTime():s)},p_=function(s){c_(l,s);function l(){var r=s!==null&&s.apply(this,arguments)||this;return r.dom=null,r}return l.prototype.componentDidMount=function(){this.renderTimeAgo()},l.prototype.componentDidUpdate=function(){this.renderTimeAgo()},l.prototype.renderTimeAgo=function(){var r=this.props,a=r.live,c=r.datetime,f=r.locale,g=r.opts;kg(this.dom),a!==!1&&(this.dom.setAttribute("datetime",h_(c)),u_(this.dom,f,g))},l.prototype.componentWillUnmount=function(){kg(this.dom)},l.prototype.render=function(){var r=this,a=this.props,c=a.datetime;a.live;var f=a.locale,g=a.opts,y=d_(a,["datetime","live","locale","opts"]);return I("time",Dd({ref:function(w){r.dom=w}},y),s_(c,f,g))},l.defaultProps={live:!0,className:""},l}(Kt);function f_(s,l){const r=a=>{s.current&&!s.current.contains(event.target)&&l()};Qe(()=>(document.addEventListener("mousedown",r),()=>document.removeEventListener("mousedown",r)))}var Rg=Object.prototype.toString,Og=function(s){var l=Rg.call(s),r=l==="[object Arguments]";return r||(r=l!=="[object Array]"&&s!==null&&typeof s=="object"&&typeof s.length=="number"&&s.length>=0&&Rg.call(s.callee)==="[object Function]"),r},Ag;if(!Object.keys){var Yl=Object.prototype.hasOwnProperty,Dg=Object.prototype.toString,m_=Og,Ig=Object.prototype.propertyIsEnumerable,g_=!Ig.call({toString:null},"toString"),v_=Ig.call(function(){},"prototype"),$l=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],Id=function(s){var l=s.constructor;return l&&l.prototype===s},y_={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},w_=function(){if(typeof window>"u")return!1;for(var s in window)try{if(!y_["$"+s]&&Yl.call(window,s)&&window[s]!==null&&typeof window[s]=="object")try{Id(window[s])}catch{return!0}}catch{return!0}return!1}(),b_=function(s){if(typeof window>"u"||!w_)return Id(s);try{return Id(s)}catch{return!1}};Ag=function(s){var l=s!==null&&typeof s=="object",r=Dg.call(s)==="[object Function]",a=m_(s),c=l&&Dg.call(s)==="[object String]",f=[];if(!l&&!r&&!a)throw new TypeError("Object.keys called on a non-object");var g=v_&&r;if(c&&s.length>0&&!Yl.call(s,0))for(var y=0;y<s.length;++y)f.push(String(y));if(a&&s.length>0)for(var w=0;w<s.length;++w)f.push(String(w));else for(var b in s)!(g&&b==="prototype")&&Yl.call(s,b)&&f.push(String(b));if(g_)for(var S=b_(s),R=0;R<$l.length;++R)!(S&&$l[R]==="constructor")&&Yl.call(s,$l[R])&&f.push($l[R]);return f}}var x_=Ag,S_=Array.prototype.slice,E_=Og,Mg=Object.keys,Kl=Mg?function(s){return Mg(s)}:x_,Lg=Object.keys;Kl.shim=function(){if(Object.keys){var s=function(){var l=Object.keys(arguments);return l&&l.length===arguments.length}(1,2);s||(Object.keys=function(l){return E_(l)?Lg(S_.call(l)):Lg(l)})}else Object.keys=Kl;return Object.keys||Kl};var T_=Kl,Ng=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var s={},l=Symbol("test"),r=Object(l);if(typeof l=="string"||Object.prototype.toString.call(l)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var a=42;s[l]=a;for(l in s)return!1;if(typeof Object.keys=="function"&&Object.keys(s).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(s).length!==0)return!1;var c=Object.getOwnPropertySymbols(s);if(c.length!==1||c[0]!==l||!Object.prototype.propertyIsEnumerable.call(s,l))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var f=Object.getOwnPropertyDescriptor(s,l);if(f.value!==a||f.enumerable!==!0)return!1}return!0},zg=typeof Symbol<"u"&&Symbol,C_=Ng,jg=function(){return typeof zg!="function"||typeof Symbol!="function"||typeof zg("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:C_()},Hg={foo:{}},P_=Object,__=function(){return{__proto__:Hg}.foo===Hg.foo&&!({__proto__:null}instanceof P_)},k_="Function.prototype.bind called on incompatible ",Md=Array.prototype.slice,R_=Object.prototype.toString,O_="[object Function]",A_=function(s){var l=this;if(typeof l!="function"||R_.call(l)!==O_)throw new TypeError(k_+l);for(var r=Md.call(arguments,1),a,c=function(){if(this instanceof a){var b=l.apply(this,r.concat(Md.call(arguments)));return Object(b)===b?b:this}else return l.apply(s,r.concat(Md.call(arguments)))},f=Math.max(0,l.length-r.length),g=[],y=0;y<f;y++)g.push("$"+y);if(a=Function("binder","return function ("+g.join(",")+"){ return binder.apply(this,arguments); }")(c),l.prototype){var w=function(){};w.prototype=l.prototype,a.prototype=new w,w.prototype=null}return a},D_=A_,Ld=Function.prototype.bind||D_,I_=Ld,Fg=I_.call(Function.call,Object.prototype.hasOwnProperty),nn,ss=SyntaxError,Bg=Function,as=TypeError,Nd=function(s){try{return Bg('"use strict"; return ('+s+").constructor;")()}catch{}},wo=Object.getOwnPropertyDescriptor;if(wo)try{wo({},"")}catch{wo=null}var zd=function(){throw new as},M_=wo?function(){try{return arguments.callee,zd}catch{try{return wo(arguments,"callee").get}catch{return zd}}}():zd,ls=jg(),L_=__(),Yn=Object.getPrototypeOf||(L_?function(s){return s.__proto__}:null),us={},N_=typeof Uint8Array>"u"||!Yn?nn:Yn(Uint8Array),bo={"%AggregateError%":typeof AggregateError>"u"?nn:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?nn:ArrayBuffer,"%ArrayIteratorPrototype%":ls&&Yn?Yn([][Symbol.iterator]()):nn,"%AsyncFromSyncIteratorPrototype%":nn,"%AsyncFunction%":us,"%AsyncGenerator%":us,"%AsyncGeneratorFunction%":us,"%AsyncIteratorPrototype%":us,"%Atomics%":typeof Atomics>"u"?nn:Atomics,"%BigInt%":typeof BigInt>"u"?nn:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?nn:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?nn:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?nn:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?nn:Float32Array,"%Float64Array%":typeof Float64Array>"u"?nn:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?nn:FinalizationRegistry,"%Function%":Bg,"%GeneratorFunction%":us,"%Int8Array%":typeof Int8Array>"u"?nn:Int8Array,"%Int16Array%":typeof Int16Array>"u"?nn:Int16Array,"%Int32Array%":typeof Int32Array>"u"?nn:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":ls&&Yn?Yn(Yn([][Symbol.iterator]())):nn,"%JSON%":typeof JSON=="object"?JSON:nn,"%Map%":typeof Map>"u"?nn:Map,"%MapIteratorPrototype%":typeof Map>"u"||!ls||!Yn?nn:Yn(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?nn:Promise,"%Proxy%":typeof Proxy>"u"?nn:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?nn:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?nn:Set,"%SetIteratorPrototype%":typeof Set>"u"||!ls||!Yn?nn:Yn(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?nn:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":ls&&Yn?Yn(""[Symbol.iterator]()):nn,"%Symbol%":ls?Symbol:nn,"%SyntaxError%":ss,"%ThrowTypeError%":M_,"%TypedArray%":N_,"%TypeError%":as,"%Uint8Array%":typeof Uint8Array>"u"?nn:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?nn:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?nn:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?nn:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?nn:WeakMap,"%WeakRef%":typeof WeakRef>"u"?nn:WeakRef,"%WeakSet%":typeof WeakSet>"u"?nn:WeakSet};if(Yn)try{null.error}catch(s){var z_=Yn(Yn(s));bo["%Error.prototype%"]=z_}var j_=function s(l){var r;if(l==="%AsyncFunction%")r=Nd("async function () {}");else if(l==="%GeneratorFunction%")r=Nd("function* () {}");else if(l==="%AsyncGeneratorFunction%")r=Nd("async function* () {}");else if(l==="%AsyncGenerator%"){var a=s("%AsyncGeneratorFunction%");a&&(r=a.prototype)}else if(l==="%AsyncIteratorPrototype%"){var c=s("%AsyncGenerator%");c&&Yn&&(r=Yn(c.prototype))}return bo[l]=r,r},Ug={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},wa=Ld,Ql=Fg,H_=wa.call(Function.call,Array.prototype.concat),F_=wa.call(Function.apply,Array.prototype.splice),Wg=wa.call(Function.call,String.prototype.replace),Jl=wa.call(Function.call,String.prototype.slice),B_=wa.call(Function.call,RegExp.prototype.exec),U_=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,W_=/\\(\\)?/g,V_=function(s){var l=Jl(s,0,1),r=Jl(s,-1);if(l==="%"&&r!=="%")throw new ss("invalid intrinsic syntax, expected closing `%`");if(r==="%"&&l!=="%")throw new ss("invalid intrinsic syntax, expected opening `%`");var a=[];return Wg(s,U_,function(c,f,g,y){a[a.length]=g?Wg(y,W_,"$1"):f||c}),a},G_=function(s,l){var r=s,a;if(Ql(Ug,r)&&(a=Ug[r],r="%"+a[0]+"%"),Ql(bo,r)){var c=bo[r];if(c===us&&(c=j_(r)),typeof c>"u"&&!l)throw new as("intrinsic "+s+" exists, but is not available. Please file an issue!");return{alias:a,name:r,value:c}}throw new ss("intrinsic "+s+" does not exist!")},ii=function(s,l){if(typeof s!="string"||s.length===0)throw new as("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof l!="boolean")throw new as('"allowMissing" argument must be a boolean');if(B_(/^%?[^%]*%?$/,s)===null)throw new ss("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=V_(s),a=r.length>0?r[0]:"",c=G_("%"+a+"%",l),f=c.name,g=c.value,y=!1,w=c.alias;w&&(a=w[0],F_(r,H_([0,1],w)));for(var b=1,S=!0;b<r.length;b+=1){var R=r[b],A=Jl(R,0,1),H=Jl(R,-1);if((A==='"'||A==="'"||A==="`"||H==='"'||H==="'"||H==="`")&&A!==H)throw new ss("property names with quotes must have matching quotes");if((R==="constructor"||!S)&&(y=!0),a+="."+R,f="%"+a+"%",Ql(bo,f))g=bo[f];else if(g!=null){if(!(R in g)){if(!l)throw new as("base intrinsic for "+s+" exists, but the property is not available.");return}if(wo&&b+1>=r.length){var V=wo(g,R);S=!!V,S&&"get"in V&&!("originalValue"in V.get)?g=V.get:g=g[R]}else S=Ql(g,R),g=g[R];S&&!y&&(bo[f]=g)}}return g},q_=ii,jd=q_("%Object.defineProperty%",!0),Hd=function(){if(jd)try{return jd({},"a",{value:1}),!0}catch{return!1}return!1};Hd.hasArrayLengthDefineBug=function(){if(!Hd())return null;try{return jd([],"length",{value:1}).length!==1}catch{return!0}};var Z_=Hd,X_=T_,Y_=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",$_=Object.prototype.toString,K_=Array.prototype.concat,Vg=Object.defineProperty,Q_=function(s){return typeof s=="function"&&$_.call(s)==="[object Function]"},J_=Z_(),Gg=Vg&&J_,ek=function(s,l,r,a){if(l in s){if(a===!0){if(s[l]===r)return}else if(!Q_(a)||!a())return}Gg?Vg(s,l,{configurable:!0,enumerable:!1,value:r,writable:!0}):s[l]=r},qg=function(s,l){var r=arguments.length>2?arguments[2]:{},a=X_(l);Y_&&(a=K_.call(a,Object.getOwnPropertySymbols(l)));for(var c=0;c<a.length;c+=1)ek(s,a[c],l[a[c]],r[a[c]])};qg.supportsDescriptors=!!Gg;var cs=qg,ba={exports:{}};(function(s){var l=Ld,r=ii,a=r("%Function.prototype.apply%"),c=r("%Function.prototype.call%"),f=r("%Reflect.apply%",!0)||l.call(c,a),g=r("%Object.getOwnPropertyDescriptor%",!0),y=r("%Object.defineProperty%",!0),w=r("%Math.max%");if(y)try{y({},"a",{value:1})}catch{y=null}s.exports=function(S){var R=f(l,c,arguments);if(g&&y){var A=g(R,"length");A.configurable&&y(R,"length",{value:1+w(0,S.length-(arguments.length-1))})}return R};var b=function(){return f(l,a,arguments)};y?y(s.exports,"apply",{value:b}):s.exports.apply=b})(ba);var Zg=ii,Xg=ba.exports,tk=Xg(Zg("String.prototype.indexOf")),Pr=function(s,l){var r=Zg(s,!!l);return typeof r=="function"&&tk(s,".prototype.")>-1?Xg(r):r},nk=ii,ik=nk("%TypeError%"),rk=function(s,l){if(s==null)throw new ik(l||"Cannot call method on "+s);return s},xa=rk,ok=ii,Yg=ok("%Array%"),sk=!Yg.isArray&&Pr("Object.prototype.toString"),ak=Yg.isArray||function(s){return sk(s)==="[object Array]"},lk=ak,$g=ii,uk=Pr,ck=$g("%TypeError%"),dk=lk,hk=$g("%Reflect.apply%",!0)||uk("Function.prototype.apply"),pk=function(s,l){var r=arguments.length>2?arguments[2]:[];if(!dk(r))throw new ck("Assertion failed: optional `argumentsList`, if provided, must be a List");return hk(s,l,r)},fk={},mk=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:fk}),gk=po(mk),Fd=typeof Map=="function"&&Map.prototype,Bd=Object.getOwnPropertyDescriptor&&Fd?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,eu=Fd&&Bd&&typeof Bd.get=="function"?Bd.get:null,Kg=Fd&&Map.prototype.forEach,Ud=typeof Set=="function"&&Set.prototype,Wd=Object.getOwnPropertyDescriptor&&Ud?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,tu=Ud&&Wd&&typeof Wd.get=="function"?Wd.get:null,Qg=Ud&&Set.prototype.forEach,vk=typeof WeakMap=="function"&&WeakMap.prototype,Sa=vk?WeakMap.prototype.has:null,yk=typeof WeakSet=="function"&&WeakSet.prototype,Ea=yk?WeakSet.prototype.has:null,wk=typeof WeakRef=="function"&&WeakRef.prototype,Jg=wk?WeakRef.prototype.deref:null,bk=Boolean.prototype.valueOf,xk=Object.prototype.toString,Sk=Function.prototype.toString,Ek=String.prototype.match,Vd=String.prototype.slice,Fr=String.prototype.replace,Tk=String.prototype.toUpperCase,ev=String.prototype.toLowerCase,tv=RegExp.prototype.test,nv=Array.prototype.concat,ar=Array.prototype.join,Ck=Array.prototype.slice,iv=Math.floor,Gd=typeof BigInt=="function"?BigInt.prototype.valueOf:null,qd=Object.getOwnPropertySymbols,Zd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,ds=typeof Symbol=="function"&&typeof Symbol.iterator=="object",di=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===ds||!0)?Symbol.toStringTag:null,rv=Object.prototype.propertyIsEnumerable,ov=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(s){return s.__proto__}:null);function sv(s,l){if(s===1/0||s===-1/0||s!==s||s&&s>-1e3&&s<1e3||tv.call(/e/,l))return l;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof s=="number"){var a=s<0?-iv(-s):iv(s);if(a!==s){var c=String(a),f=Vd.call(l,c.length+1);return Fr.call(c,r,"$&_")+"."+Fr.call(Fr.call(f,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Fr.call(l,r,"$&_")}var Xd=gk,av=Xd.custom,lv=dv(av)?av:null,Pk=function s(l,r,a,c){var f=r||{};if(Br(f,"quoteStyle")&&f.quoteStyle!=="single"&&f.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Br(f,"maxStringLength")&&(typeof f.maxStringLength=="number"?f.maxStringLength<0&&f.maxStringLength!==1/0:f.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var g=Br(f,"customInspect")?f.customInspect:!0;if(typeof g!="boolean"&&g!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Br(f,"indent")&&f.indent!==null&&f.indent!=="	"&&!(parseInt(f.indent,10)===f.indent&&f.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Br(f,"numericSeparator")&&typeof f.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var y=f.numericSeparator;if(typeof l>"u")return"undefined";if(l===null)return"null";if(typeof l=="boolean")return l?"true":"false";if(typeof l=="string")return pv(l,f);if(typeof l=="number"){if(l===0)return 1/0/l>0?"0":"-0";var w=String(l);return y?sv(l,w):w}if(typeof l=="bigint"){var b=String(l)+"n";return y?sv(l,b):b}var S=typeof f.depth>"u"?5:f.depth;if(typeof a>"u"&&(a=0),a>=S&&S>0&&typeof l=="object")return Yd(l)?"[Array]":"[Object]";var R=Vk(f,a);if(typeof c>"u")c=[];else if(hv(c,l)>=0)return"[Circular]";function A(_t,Ct,Wt){if(Ct&&(c=Ck.call(c),c.push(Ct)),Wt){var Ut={depth:f.depth};return Br(f,"quoteStyle")&&(Ut.quoteStyle=f.quoteStyle),s(_t,Ut,a+1,c)}return s(_t,f,a+1,c)}if(typeof l=="function"&&!cv(l)){var H=Lk(l),V=nu(l,A);return"[Function"+(H?": "+H:" (anonymous)")+"]"+(V.length>0?" { "+ar.call(V,", ")+" }":"")}if(dv(l)){var oe=ds?Fr.call(String(l),/^(Symbol\(.*\))_[^)]*$/,"$1"):Zd.call(l);return typeof l=="object"&&!ds?Ta(oe):oe}if(Bk(l)){for(var ne="<"+ev.call(String(l.nodeName)),ue=l.attributes||[],M=0;M<ue.length;M++)ne+=" "+ue[M].name+"="+uv(_k(ue[M].value),"double",f);return ne+=">",l.childNodes&&l.childNodes.length&&(ne+="..."),ne+="</"+ev.call(String(l.nodeName))+">",ne}if(Yd(l)){if(l.length===0)return"[]";var re=nu(l,A);return R&&!Wk(re)?"["+Kd(re,R)+"]":"[ "+ar.call(re,", ")+" ]"}if(Rk(l)){var ge=nu(l,A);return!("cause"in Error.prototype)&&"cause"in l&&!rv.call(l,"cause")?"{ ["+String(l)+"] "+ar.call(nv.call("[cause]: "+A(l.cause),ge),", ")+" }":ge.length===0?"["+String(l)+"]":"{ ["+String(l)+"] "+ar.call(ge,", ")+" }"}if(typeof l=="object"&&g){if(lv&&typeof l[lv]=="function"&&Xd)return Xd(l,{depth:S-a});if(g!=="symbol"&&typeof l.inspect=="function")return l.inspect()}if(Nk(l)){var pe=[];return Kg&&Kg.call(l,function(_t,Ct){pe.push(A(Ct,l,!0)+" => "+A(_t,l))}),fv("Map",eu.call(l),pe,R)}if(Hk(l)){var Ee=[];return Qg&&Qg.call(l,function(_t){Ee.push(A(_t,l))}),fv("Set",tu.call(l),Ee,R)}if(zk(l))return $d("WeakMap");if(Fk(l))return $d("WeakSet");if(jk(l))return $d("WeakRef");if(Ak(l))return Ta(A(Number(l)));if(Ik(l))return Ta(A(Gd.call(l)));if(Dk(l))return Ta(bk.call(l));if(Ok(l))return Ta(A(String(l)));if(!kk(l)&&!cv(l)){var Ce=nu(l,A),Ze=ov?ov(l)===Object.prototype:l instanceof Object||l.constructor===Object,Ke=l instanceof Object?"":"null prototype",ut=!Ze&&di&&Object(l)===l&&di in l?Vd.call(Ur(l),8,-1):Ke?"Object":"",pt=Ze||typeof l.constructor!="function"?"":l.constructor.name?l.constructor.name+" ":"",ct=pt+(ut||Ke?"["+ar.call(nv.call([],ut||[],Ke||[]),": ")+"] ":"");return Ce.length===0?ct+"{}":R?ct+"{"+Kd(Ce,R)+"}":ct+"{ "+ar.call(Ce,", ")+" }"}return String(l)};function uv(s,l,r){var a=(r.quoteStyle||l)==="double"?'"':"'";return a+s+a}function _k(s){return Fr.call(String(s),/"/g,"&quot;")}function Yd(s){return Ur(s)==="[object Array]"&&(!di||!(typeof s=="object"&&di in s))}function kk(s){return Ur(s)==="[object Date]"&&(!di||!(typeof s=="object"&&di in s))}function cv(s){return Ur(s)==="[object RegExp]"&&(!di||!(typeof s=="object"&&di in s))}function Rk(s){return Ur(s)==="[object Error]"&&(!di||!(typeof s=="object"&&di in s))}function Ok(s){return Ur(s)==="[object String]"&&(!di||!(typeof s=="object"&&di in s))}function Ak(s){return Ur(s)==="[object Number]"&&(!di||!(typeof s=="object"&&di in s))}function Dk(s){return Ur(s)==="[object Boolean]"&&(!di||!(typeof s=="object"&&di in s))}function dv(s){if(ds)return s&&typeof s=="object"&&s instanceof Symbol;if(typeof s=="symbol")return!0;if(!s||typeof s!="object"||!Zd)return!1;try{return Zd.call(s),!0}catch{}return!1}function Ik(s){if(!s||typeof s!="object"||!Gd)return!1;try{return Gd.call(s),!0}catch{}return!1}var Mk=Object.prototype.hasOwnProperty||function(s){return s in this};function Br(s,l){return Mk.call(s,l)}function Ur(s){return xk.call(s)}function Lk(s){if(s.name)return s.name;var l=Ek.call(Sk.call(s),/^function\s*([\w$]+)/);return l?l[1]:null}function hv(s,l){if(s.indexOf)return s.indexOf(l);for(var r=0,a=s.length;r<a;r++)if(s[r]===l)return r;return-1}function Nk(s){if(!eu||!s||typeof s!="object")return!1;try{eu.call(s);try{tu.call(s)}catch{return!0}return s instanceof Map}catch{}return!1}function zk(s){if(!Sa||!s||typeof s!="object")return!1;try{Sa.call(s,Sa);try{Ea.call(s,Ea)}catch{return!0}return s instanceof WeakMap}catch{}return!1}function jk(s){if(!Jg||!s||typeof s!="object")return!1;try{return Jg.call(s),!0}catch{}return!1}function Hk(s){if(!tu||!s||typeof s!="object")return!1;try{tu.call(s);try{eu.call(s)}catch{return!0}return s instanceof Set}catch{}return!1}function Fk(s){if(!Ea||!s||typeof s!="object")return!1;try{Ea.call(s,Ea);try{Sa.call(s,Sa)}catch{return!0}return s instanceof WeakSet}catch{}return!1}function Bk(s){return!s||typeof s!="object"?!1:typeof HTMLElement<"u"&&s instanceof HTMLElement?!0:typeof s.nodeName=="string"&&typeof s.getAttribute=="function"}function pv(s,l){if(s.length>l.maxStringLength){var r=s.length-l.maxStringLength,a="... "+r+" more character"+(r>1?"s":"");return pv(Vd.call(s,0,l.maxStringLength),l)+a}var c=Fr.call(Fr.call(s,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,Uk);return uv(c,"single",l)}function Uk(s){var l=s.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[l];return r?"\\"+r:"\\x"+(l<16?"0":"")+Tk.call(l.toString(16))}function Ta(s){return"Object("+s+")"}function $d(s){return s+" { ? }"}function fv(s,l,r,a){var c=a?Kd(r,a):ar.call(r,", ");return s+" ("+l+") {"+c+"}"}function Wk(s){for(var l=0;l<s.length;l++)if(hv(s[l],`
`)>=0)return!1;return!0}function Vk(s,l){var r;if(s.indent==="	")r="	";else if(typeof s.indent=="number"&&s.indent>0)r=ar.call(Array(s.indent+1)," ");else return null;return{base:r,prev:ar.call(Array(l+1),r)}}function Kd(s,l){if(s.length===0)return"";var r=`
`+l.prev+l.base;return r+ar.call(s,","+r)+`
`+l.prev}function nu(s,l){var r=Yd(s),a=[];if(r){a.length=s.length;for(var c=0;c<s.length;c++)a[c]=Br(s,c)?l(s[c],s):""}var f=typeof qd=="function"?qd(s):[],g;if(ds){g={};for(var y=0;y<f.length;y++)g["$"+f[y]]=f[y]}for(var w in s)!Br(s,w)||r&&String(Number(w))===w&&w<s.length||ds&&g["$"+w]instanceof Symbol||(tv.call(/[^\w$]/,w)?a.push(l(w,s)+": "+l(s[w],s)):a.push(w+": "+l(s[w],s)));if(typeof qd=="function")for(var b=0;b<f.length;b++)rv.call(s,f[b])&&a.push("["+l(f[b])+"]: "+l(s[f[b]],s));return a}var mv=function(s){return typeof s=="string"||typeof s=="symbol"},Gk=function(s){if(s===null)return"Null";if(typeof s>"u")return"Undefined";if(typeof s=="function"||typeof s=="object")return"Object";if(typeof s=="number")return"Number";if(typeof s=="boolean")return"Boolean";if(typeof s=="string")return"String"},qk=Gk,Ca=function(s){return typeof s=="symbol"?"Symbol":typeof s=="bigint"?"BigInt":qk(s)},Zk=ii,gv=Zk("%TypeError%"),Xk=Pk,Yk=mv,$k=Ca,vv=function(s,l){if($k(s)!=="Object")throw new gv("Assertion failed: Type(O) is not Object");if(!Yk(l))throw new gv("Assertion failed: IsPropertyKey(P) is not true, got "+Xk(l));return s[l]},Kk=ii,yv=Kk("%TypeError%"),Qk=mv,Jk=Ca,eR=function(s,l){if(Jk(s)!=="Object")throw new yv("Assertion failed: `O` must be an Object");if(!Qk(l))throw new yv("Assertion failed: `P` must be a Property Key");return l in s},wv=Function.prototype.toString,hs=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,Qd,iu;if(typeof hs=="function"&&typeof Object.defineProperty=="function")try{Qd=Object.defineProperty({},"length",{get:function(){throw iu}}),iu={},hs(function(){throw 42},null,Qd)}catch(s){s!==iu&&(hs=null)}else hs=null;var tR=/^\s*class\b/,Jd=function(s){try{var l=wv.call(s);return tR.test(l)}catch{return!1}},eh=function(s){try{return Jd(s)?!1:(wv.call(s),!0)}catch{return!1}},ru=Object.prototype.toString,nR="[object Object]",iR="[object Function]",rR="[object GeneratorFunction]",oR="[object HTMLAllCollection]",sR="[object HTML document.all class]",aR="[object HTMLCollection]",lR=typeof Symbol=="function"&&!!Symbol.toStringTag,uR=!(0 in[,]),th=function(){return!1};if(typeof document=="object"){var cR=document.all;ru.call(cR)===ru.call(document.all)&&(th=function(s){if((uR||!s)&&(typeof s>"u"||typeof s=="object"))try{var l=ru.call(s);return(l===oR||l===sR||l===aR||l===nR)&&s("")==null}catch{}return!1})}var bv=hs?function(s){if(th(s))return!0;if(!s||typeof s!="function"&&typeof s!="object")return!1;try{hs(s,null,Qd)}catch(l){if(l!==iu)return!1}return!Jd(s)&&eh(s)}:function(s){if(th(s))return!0;if(!s||typeof s!="function"&&typeof s!="object")return!1;if(lR)return eh(s);if(Jd(s))return!1;var l=ru.call(s);return l!==iR&&l!==rR&&!/^\[object HTML/.test(l)?!1:eh(s)},dR=bv,xv=ii,hR=xv("%Math%"),pR=xv("%Number%"),fR=pR.MAX_SAFE_INTEGER||hR.pow(2,53)-1,mR=ii,gR=mR("%Math.abs%"),vR=function(s){return gR(s)},yR=Ca,wR=Math.floor,bR=function(s){return yR(s)==="BigInt"?s:wR(s)},xR=function(s){return s===null||typeof s!="function"&&typeof s!="object"},SR=function(s){return s===null||typeof s!="function"&&typeof s!="object"},ER=Ng,nh=function(){return ER()&&!!Symbol.toStringTag},TR=Date.prototype.getDay,CR=function(s){try{return TR.call(s),!0}catch{return!1}},PR=Object.prototype.toString,_R="[object Date]",kR=nh(),RR=function(s){return typeof s!="object"||s===null?!1:kR?CR(s):PR.call(s)===_R},ih={exports:{}},OR=Object.prototype.toString,AR=jg();if(AR){var DR=Symbol.prototype.toString,IR=/^Symbol\(.*\)$/,MR=function(s){return typeof s.valueOf()!="symbol"?!1:IR.test(DR.call(s))};ih.exports=function(s){if(typeof s=="symbol")return!0;if(OR.call(s)!=="[object Symbol]")return!1;try{return MR(s)}catch{return!1}}}else ih.exports=function(s){return!1};var LR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol",rh=SR,Sv=bv,NR=RR,Ev=ih.exports,zR=function(s,l){if(typeof s>"u"||s===null)throw new TypeError("Cannot call method on "+s);if(typeof l!="string"||l!=="number"&&l!=="string")throw new TypeError('hint must be "string" or "number"');var r=l==="string"?["toString","valueOf"]:["valueOf","toString"],a,c,f;for(f=0;f<r.length;++f)if(a=s[r[f]],Sv(a)&&(c=a.call(s),rh(c)))return c;throw new TypeError("No default value")},jR=function(s,l){var r=s[l];if(r!==null&&typeof r<"u"){if(!Sv(r))throw new TypeError(r+" returned for property "+l+" of object "+s+" is not a function");return r}},HR=function(s){if(rh(s))return s;var l="default";arguments.length>1&&(arguments[1]===String?l="string":arguments[1]===Number&&(l="number"));var r;if(LR&&(Symbol.toPrimitive?r=jR(s,Symbol.toPrimitive):Ev(s)&&(r=Symbol.prototype.valueOf)),typeof r<"u"){var a=r.call(s,l);if(rh(a))return a;throw new TypeError("unable to convert exotic object to primitive")}return l==="default"&&(NR(s)||Ev(s))&&(l="string"),zR(s,l==="default"?"number":l)},Tv=HR,FR=function(s){return arguments.length>1?Tv(s,arguments[1]):Tv(s)},oh=Pr,Cv=nh(),Pv,_v,sh,ah;if(Cv){Pv=oh("Object.prototype.hasOwnProperty"),_v=oh("RegExp.prototype.exec"),sh={};var lh=function(){throw sh};ah={toString:lh,valueOf:lh},typeof Symbol.toPrimitive=="symbol"&&(ah[Symbol.toPrimitive]=lh)}var BR=oh("Object.prototype.toString"),UR=Object.getOwnPropertyDescriptor,WR="[object RegExp]",VR=Cv?function(s){if(!s||typeof s!="object")return!1;var l=UR(s,"lastIndex"),r=l&&Pv(l,"value");if(!r)return!1;try{_v(s,ah)}catch(a){return a===sh}}:function(s){return!s||typeof s!="object"&&typeof s!="function"?!1:BR(s)===WR},GR=Pr,qR=ii,ZR=VR,XR=GR("RegExp.prototype.exec"),YR=qR("%TypeError%"),$R=function(s){if(!ZR(s))throw new YR("`regex` must be a RegExp");return function(l){return XR(s,l)!==null}},kv=ii,KR=kv("%String%"),QR=kv("%TypeError%"),Rv=function(s){if(typeof s=="symbol")throw new QR("Cannot convert a Symbol value to a string");return KR(s)},JR=xa,eO=Rv,tO=Pr,Ov=tO("String.prototype.replace"),Av=/^\s$/.test("᠎"),nO=Av?/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/:/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/,iO=Av?/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/:/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/,Dv=function(){var s=eO(JR(this));return Ov(Ov(s,nO,""),iO,"")},rO=Dv,Iv="​",ps="᠎",Mv=function(){return String.prototype.trim&&Iv.trim()===Iv&&ps.trim()===ps&&("_"+ps).trim()==="_"+ps&&(ps+"_").trim()===ps+"_"?String.prototype.trim:rO},oO=cs,sO=Mv,aO=function(){var s=sO();return oO(String.prototype,{trim:s},{trim:function(){return String.prototype.trim!==s}}),s},lO=ba.exports,uO=cs,cO=xa,dO=Dv,Lv=Mv,hO=aO,pO=lO(Lv()),Nv=function(s){return cO(s),pO(s)};uO(Nv,{getPolyfill:Lv,implementation:dO,shim:hO});var zv=Nv,ou=ii,uh=ou("%Number%"),fO=ou("%RegExp%"),mO=ou("%TypeError%"),jv=ou("%parseInt%"),gO=Pr,su=$R,Hv=gO("String.prototype.slice"),vO=su(/^0b[01]+$/i),yO=su(/^0o[0-7]+$/i),wO=su(/^[-+]0x[0-9a-f]+$/i),bO=["","​","￾"].join(""),xO=new fO("["+bO+"]","g"),SO=su(xO),EO=zv,TO=Ca,CO=function s(l){if(TO(l)!=="String")throw new mO("Assertion failed: `argument` is not a String");if(vO(l))return uh(jv(Hv(l,2),2));if(yO(l))return uh(jv(Hv(l,2),8));if(SO(l)||wO(l))return NaN;var r=EO(l);return r!==l?s(r):uh(l)},Fv=ii,Bv=Fv("%TypeError%"),Uv=Fv("%Number%"),PO=xR,_O=FR,kO=CO,RO=function(s){var l=PO(s)?s:_O(s,Uv);if(typeof l=="symbol")throw new Bv("Cannot convert a Symbol value to a number");if(typeof l=="bigint")throw new Bv("Conversion from 'BigInt' to 'number' is not allowed.");return typeof l=="string"?kO(l):Uv(l)},Wv=Number.isNaN||function(s){return s!==s},OO=Wv,AO=function(s){return(typeof s=="number"||typeof s=="bigint")&&!OO(s)&&s!==1/0&&s!==-1/0},DO=function(s){return s>=0?1:-1},IO=vR,MO=bR,LO=RO,NO=Wv,zO=AO,jO=DO,HO=function(s){var l=LO(s);if(NO(l)||l===0)return 0;if(!zO(l))return l;var r=MO(IO(l));return r===0?0:jO(l)*r},Vv=fR,FO=HO,BO=function(s){var l=FO(s);return l<=0?0:l>Vv?Vv:l},UO=ii,WO=UO("%TypeError%"),VO=vv,GO=BO,qO=Ca,ZO=function(s){if(qO(s)!=="Object")throw new WO("Assertion failed: `obj` must be an Object");return GO(VO(s,"length"))},XO=ii,YO=XO("%Object%"),$O=xa,KO=function(s){return $O(s),YO(s)},QO=String.prototype.valueOf,JO=function(s){try{return QO.call(s),!0}catch{return!1}},e2=Object.prototype.toString,t2="[object String]",n2=nh(),i2=function(s){return typeof s=="string"?!0:typeof s!="object"?!1:n2?JO(s):e2.call(s)===t2},r2=ii,o2=Pr,s2=r2("%TypeError%"),a2=pk,l2=vv,u2=eR,c2=dR,d2=ZO,h2=KO,p2=Rv,f2=i2,m2=o2("String.prototype.split"),Gv=Object("a"),g2=Gv[0]!=="a"||!(0 in Gv),qv=function(s){var l=h2(this),r=g2&&f2(this)?m2(this,""):l,a=d2(r);if(!c2(s))throw new s2("Array.prototype.forEach callback must be a function");var c;arguments.length>1&&(c=arguments[1]);for(var f=0;f<a;){var g=p2(f),y=u2(r,g);if(y){var w=l2(r,g);a2(s,c,[w,f,r])}f+=1}},v2=function(s){var l=!0,r=!0,a=!1;if(typeof s=="function"){try{s.call("f",function(c,f,g){typeof g!="object"&&(l=!1)}),s.call([null],function(){"use strict";r=typeof this=="string"},"x")}catch{a=!0}return!a&&l&&r}return!1},y2=v2,w2=qv,Zv=function(){var s=Array.prototype.forEach;return y2(s)?s:w2},b2=cs,x2=Zv,S2=function(){var s=x2();return b2(Array.prototype,{forEach:s},{forEach:function(){return Array.prototype.forEach!==s}}),s},E2=cs,T2=ba.exports,C2=Pr,P2=xa,_2=qv,Xv=Zv,k2=Xv(),R2=S2,O2=C2("Array.prototype.slice"),A2=T2.apply(k2),Yv=function(s,l){return P2(s),A2(s,O2(arguments,1))};E2(Yv,{getPolyfill:Xv,implementation:_2,shim:R2});var D2=Yv,I2=xa,$v=Pr,M2=$v("Object.prototype.propertyIsEnumerable"),L2=$v("Array.prototype.push"),Kv=function(s){var l=I2(s),r=[];for(var a in l)M2(l,a)&&L2(r,[a,l[a]]);return r},N2=Kv,Qv=function(){return typeof Object.entries=="function"?Object.entries:N2},z2=Qv,j2=cs,H2=function(){var s=z2();return j2(Object,{entries:s},{entries:function(){return Object.entries!==s}}),s},F2=cs,B2=ba.exports,U2=Kv,Jv=Qv,W2=H2,ey=B2(Jv(),Object);F2(ey,{getPolyfill:Jv,implementation:U2,shim:W2});var V2=ey,au=D2,ch=V2,ty=Fg,G2=zv,q2=function(s){},ny=String.prototype.replace,iy=String.prototype.split,lu="||||",dh=function(s){var l=s%100,r=l%10;return l!==11&&r===1?0:2<=r&&r<=4&&!(l>=12&&l<=14)?1:2},ry={pluralTypes:{arabic:function(s){if(s<3)return s;var l=s%100;return l>=3&&l<=10?3:l>=11?4:5},bosnian_serbian:dh,chinese:function(){return 0},croatian:dh,french:function(s){return s>=2?1:0},german:function(s){return s!==1?1:0},russian:dh,lithuanian:function(s){return s%10===1&&s%100!==11?0:s%10>=2&&s%10<=9&&(s%100<11||s%100>19)?1:2},czech:function(s){return s===1?0:s>=2&&s<=4?1:2},polish:function(s){if(s===1)return 0;var l=s%10;return 2<=l&&l<=4&&(s%100<10||s%100>=20)?1:2},icelandic:function(s){return s%10!==1||s%100===11?1:0},slovenian:function(s){var l=s%100;return l===1?0:l===2?1:l===3||l===4?2:3},romanian:function(s){if(s===1)return 0;var l=s%100;return s===0||l>=2&&l<=19?1:2}},pluralTypeToLanguages:{arabic:["ar"],bosnian_serbian:["bs-Latn-BA","bs-Cyrl-BA","srl-RS","sr-RS"],chinese:["id","id-ID","ja","ko","ko-KR","lo","ms","th","th-TH","zh"],croatian:["hr","hr-HR"],german:["fa","da","de","en","es","fi","el","he","hi-IN","hu","hu-HU","it","nl","no","pt","sv","tr"],french:["fr","tl","pt-br"],russian:["ru","ru-RU"],lithuanian:["lt"],czech:["cs","cs-CZ","sk"],polish:["pl"],icelandic:["is","mk"],slovenian:["sl-SL"],romanian:["ro"]}};function Z2(s){var l={};return au(ch(s),function(r){var a=r[0],c=r[1];au(c,function(f){l[f]=a})}),l}function X2(s,l){var r=Z2(s.pluralTypeToLanguages);return r[l]||r[iy.call(l,/-/,1)[0]]||r.en}function Y2(s,l,r){return s.pluralTypes[l](r)}function $2(){var s={};return function(l,r){var a=s[r];return a&&!l.pluralTypes[a]&&(a=null,s[r]=a),a||(a=X2(l,r),a&&(s[r]=a)),a}}function oy(s){return s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function K2(s){var l=s&&s.prefix||"%{",r=s&&s.suffix||"}";if(l===lu||r===lu)throw new RangeError('"'+lu+'" token is reserved for pluralization');return new RegExp(oy(l)+"(.*?)"+oy(r),"g")}var Q2=$2(),J2=/%\{(.*?)\}/g;function hh(s,l,r,a,c,f){if(typeof s!="string")throw new TypeError("Polyglot.transformPhrase expects argument #1 to be string");if(l==null)return s;var g=s,y=a||J2,w=f||ny,b=typeof l=="number"?{smart_count:l}:l;if(b.smart_count!=null&&s){var S=c||ry,R=iy.call(s,lu),A=r||"en",H=Q2(S,A),V=Y2(S,H,b.smart_count);g=G2(R[V]||R[0])}return g=w.call(g,y,function(oe,ne){return!ty(b,ne)||b[ne]==null?oe:b[ne]}),g}function _r(s){var l=s||{};this.phrases={},this.extend(l.phrases||{}),this.currentLocale=l.locale||"en";var r=l.allowMissing?hh:null;this.onMissingKey=typeof l.onMissingKey=="function"?l.onMissingKey:r,this.warn=l.warn||q2,this.replaceImplementation=l.replace||ny,this.tokenRegex=K2(l.interpolation),this.pluralRules=l.pluralRules||ry}_r.prototype.locale=function(s){return s&&(this.currentLocale=s),this.currentLocale},_r.prototype.extend=function(s,l){au(ch(s||{}),function(r){var a=r[0],c=r[1],f=l?l+"."+a:a;typeof c=="object"?this.extend(c,f):this.phrases[f]=c},this)},_r.prototype.unset=function(s,l){typeof s=="string"?delete this.phrases[s]:au(ch(s||{}),function(r){var a=r[0],c=r[1],f=l?l+"."+a:a;typeof c=="object"?this.unset(c,f):delete this.phrases[f]},this)},_r.prototype.clear=function(){this.phrases={}},_r.prototype.replace=function(s){this.clear(),this.extend(s)},_r.prototype.t=function(s,l){var r,a,c=l??{};if(typeof this.phrases[s]=="string")r=this.phrases[s];else if(typeof c._=="string")r=c._;else if(this.onMissingKey){var f=this.onMissingKey;a=f(s,c,this.currentLocale,this.tokenRegex,this.pluralRules,this.replaceImplementation)}else this.warn('Missing translation for key: "'+s+'"'),a=s;return typeof r=="string"&&(a=hh(r,c,this.currentLocale,this.tokenRegex,this.pluralRules,this.replaceImplementation)),a},_r.prototype.has=function(s){return ty(this.phrases,s)},_r.transformPhrase=function(s,l,r){return hh(s,l,r)};var eA=_r,tA={"Add a comment...":"إضافة تعليق","Add a reply...":"إضافة رد","Add tag...":"إضافة علامة",Cancel:"إلغاء",Close:"إغلاق",Edit:"Edit",Delete:"Delete",Ok:"تم"},nA={"Add a comment...":"Napsat komentář...","Add a reply...":"Odpovědět...","Add tag...":"Přidat štítek...",Cancel:"Zrušit",Close:"Zavřít",Edit:"Upravit",Delete:"Smazat",Ok:"Ok"},iA={"Add a comment...":"Kommentar schreiben...","Add a reply...":"Antwort schreiben...","Add tag...":"Tag...",Cancel:"Abbrechen",Close:"Schliessen",Edit:"Bearbeiten",Delete:"Löschen",Ok:"Ok"},rA={"Add a comment...":"Σχολίασε...","Add a reply...":"Απάντησε...","Add tag...":"Πρόσθεσε tag...",Cancel:"Άκυρο",Close:"Κλείσιμο",Edit:"Επεξεργασία",Delete:"Διαγραφή",Ok:"Ok"},oA={"Add a comment...":"Agregar un comentario...","Add a reply...":"Agregar una respuesta...","Add tag...":"Etiquetar...",Cancel:"Cancelar",Close:"Cerrar",Edit:"Editar",Delete:"Eliminar",Ok:"Ok"},sA={"Add a comment...":"Lisää kommentti","Add a reply...":"Lisää vastaus","Add tag...":"Lisää tunniste",Cancel:"Peruuta",Close:"Sulje",Edit:"Muokkaa",Delete:"Poista",Ok:"Ok"},aA={"Add a comment...":"Ajouter un commentaire...","Add a reply...":"Ajouter une réponse...","Add tag...":"Ajouter une étiquette...",Cancel:"Annuler",Close:"Fermer",Edit:"Éditer",Delete:"Supprimer",Ok:"Ok"},lA={"Add a comment...":"Engadir un comentario...","Add a reply...":"Engadir unha resposta...","Add tag...":"Etiquetar...",Cancel:"Cancelar",Close:"Pechar",Edit:"Edit",Delete:"Delete",Ok:"Ok"},uA={"Add a comment...":"टिप्पणी जोड़ें","Add a reply...":"जवाब दें","Add tag...":"टैग लगाएँ",Cancel:"रद्द करें",Close:"बंद करें",Edit:"संपादित करें",Delete:"हटाएँ",Ok:"ठीक है"},cA={"Add a comment...":"Commenta...","Add a reply...":"Rispondi...","Add tag...":"Aggiungi tag...",Cancel:"Annulla",Close:"Chiudi",Edit:"Edit",Delete:"Delete",Ok:"Ok"},dA={"Add a comment...":"コメントを追加する...","Add a reply...":"返信する...","Add tag...":"タグを追加する...",Cancel:"キャンセル",Close:"閉じる",Edit:"編集",Delete:"削除",Ok:"Ok"},hA={"Add a comment...":"댓글 추가","Add a reply...":"답글 추가","Add tag...":"태그 추가",Cancel:"취소",Close:"닫기",Edit:"수정",Delete:"삭제",Ok:"확인"},pA={"Add a comment...":"Commentaar toevoegen...","Add a reply...":"Antwoord toevoegen...","Add tag...":"Tag toevoegen...",Cancel:"Afbreken",Close:"Sluiten",Edit:"Bewerken",Delete:"Verwijderen",Ok:"Ok"},fA={"Add a comment...":"Adicionar um comentário...","Add a reply...":"Adicionar uma resposta...","Add tag...":"Etiquetar...",Cancel:"Cancelar",Close:"Fechar",Edit:"Editar",Delete:"Apagar",Ok:"Ok"},mA={"Add a comment...":"Добавить комментарий...","Add a reply...":"Добавить ответ...","Add tag...":"Добавить тэг...",Cancel:"Отмена",Close:"Закрыть",Edit:"Редактировать",Delete:"Удалить",Ok:"Ок"},gA={"Add a comment...":"Skriv en kommentar...","Add a reply...":"Skriv ett svar...","Add tag...":"Tagg...",Cancel:"Cancel",Close:"Stäng",Edit:"Edit",Delete:"Delete",Ok:"Ok"},vA={"Add a comment...":"เพิ่มคอมเมนต์...","Add a reply...":"ตอบกลับ...","Add tag...":"เพิ่มแท็ก...",Cancel:"ยกเลิก",Close:"ปิด",Edit:"แก้ไข",Delete:"ลบ",Ok:"ตกลง"},yA={"Add a comment...":"Yorum ekle...","Add a reply...":"Cevap ekle...","Add tag...":"Tag Ekle...",Cancel:"İptal",Close:"Kapat",Edit:"Düzenle",Delete:"Sil",Ok:"Tamam"},wA={"Add a comment...":"تبصرہ کریں","Add a reply...":"جواب دیں","Add tag...":"ٹیگ لگائیں",Cancel:"منسوخ کریں",Close:"بند کریں",Edit:"ترمیم کریں",Delete:"ہٹائیں",Ok:"ٹھیک ہے"},bA={"Add a comment...":"添加评论...","Add a reply...":"添加回复...","Add tag...":"添加标签...",Cancel:"取消",Close:"关闭",Edit:"编辑",Delete:"删除",Ok:"确认"},xA={"Add a comment...":"添加評論...","Add a reply...":"添加回覆...","Add tag...":"添加標籤...",Cancel:"取消",Close:"關閉",Edit:"編輯",Delete:"刪除",Ok:"確認"},sy={};Object.defineProperty(sy,"__esModule",{value:!0});var ph=[["ثانية","ثانيتين","%s ثوان","%s ثانية"],["دقيقة","دقيقتين","%s دقائق","%s دقيقة"],["ساعة","ساعتين","%s ساعات","%s ساعة"],["يوم","يومين","%s أيام","%s يوماً"],["أسبوع","أسبوعين","%s أسابيع","%s أسبوعاً"],["شهر","شهرين","%s أشهر","%s شهراً"],["عام","عامين","%s أعوام","%s عاماً"]];function SA(s,l){return l<3?ph[s][l-1]:l>=3&&l<=10?ph[s][2]:ph[s][3]}function EA(s,l){if(l===0)return["منذ لحظات","بعد لحظات"];var r=SA(Math.floor(l/2),s);return["منذ "+r,"بعد "+r]}var TA=sy.default=EA,ay={};Object.defineProperty(ay,"__esModule",{value:!0});function CA(s,l){var r=0,a=l==1||l==3||l==5||l==7||l==9||l==11||l==13;return a&&s>=5&&(r=1),[[["právě teď","právě teď"]],[["před %s vteřinami","za %s vteřiny"],["před %s vteřinami","za %s vteřin"]],[["před minutou","za minutu"]],[["před %s minutami","za %s minuty"],["před %s minutami","za %s minut"]],[["před hodinou","za hodinu"]],[["před %s hodinami","za %s hodiny"],["před %s hodinami","za %s hodin"]],[["včera","zítra"]],[["před %s dny","za %s dny"],["před %s dny","za %s dnů"]],[["minulý týden","příští týden"]],[["před %s týdny","za %s týdny"],["před %s týdny","za %s týdnů"]],[["minulý měsíc","přístí měsíc"]],[["před %s měsíci","za %s měsíce"],["před %s měsíci","za %s měsíců"]],[["před rokem","přístí rok"]],[["před %s lety","za %s roky"],["před %s lety","za %s let"]]][l][r]}var PA=ay.default=CA,ly={};Object.defineProperty(ly,"__esModule",{value:!0});function _A(s,l){return[["gerade eben","vor einer Weile"],["vor %s Sekunden","in %s Sekunden"],["vor 1 Minute","in 1 Minute"],["vor %s Minuten","in %s Minuten"],["vor 1 Stunde","in 1 Stunde"],["vor %s Stunden","in %s Stunden"],["vor 1 Tag","in 1 Tag"],["vor %s Tagen","in %s Tagen"],["vor 1 Woche","in 1 Woche"],["vor %s Wochen","in %s Wochen"],["vor 1 Monat","in 1 Monat"],["vor %s Monaten","in %s Monaten"],["vor 1 Jahr","in 1 Jahr"],["vor %s Jahren","in %s Jahren"]][l]}var kA=ly.default=_A,uy={};Object.defineProperty(uy,"__esModule",{value:!0});function RA(s,l){return[["μόλις τώρα","σε λίγο"],["%s δευτερόλεπτα πριν","σε %s δευτερόλεπτα"],["1 λεπτό πριν","σε 1 λεπτό"],["%s λεπτά πριν","σε %s λεπτά"],["1 ώρα πριν","σε 1 ώρα"],["%s ώρες πριν","σε %s ώρες"],["1 μέρα πριν","σε 1 μέρα"],["%s μέρες πριν","σε %s μέρες"],["1 εβδομάδα πριν","σε 1 εβδομάδα"],["%s εβδομάδες πριν","σε %s εβδομάδες"],["1 μήνα πριν","σε 1 μήνα"],["%s μήνες πριν","σε %s μήνες"],["1 χρόνο πριν","σε 1 χρόνο"],["%s χρόνια πριν","σε %s χρόνια"]][l]}var OA=uy.default=RA,cy={};Object.defineProperty(cy,"__esModule",{value:!0});function AA(s,l){return[["justo ahora","en un rato"],["hace %s segundos","en %s segundos"],["hace 1 minuto","en 1 minuto"],["hace %s minutos","en %s minutos"],["hace 1 hora","en 1 hora"],["hace %s horas","en %s horas"],["hace 1 día","en 1 día"],["hace %s días","en %s días"],["hace 1 semana","en 1 semana"],["hace %s semanas","en %s semanas"],["hace 1 mes","en 1 mes"],["hace %s meses","en %s meses"],["hace 1 año","en 1 año"],["hace %s años","en %s años"]][l]}var DA=cy.default=AA,dy={};Object.defineProperty(dy,"__esModule",{value:!0});function IA(s,l){return[["juuri äsken","juuri nyt"],["%s sekuntia sitten","%s sekunnin päästä"],["minuutti sitten","minuutin päästä"],["%s minuuttia sitten","%s minuutin päästä"],["tunti sitten","tunnin päästä"],["%s tuntia sitten","%s tunnin päästä"],["päivä sitten","päivän päästä"],["%s päivää sitten","%s päivän päästä"],["viikko sitten","viikon päästä"],["%s viikkoa sitten","%s viikon päästä"],["kuukausi sitten","kuukauden päästä"],["%s kuukautta sitten","%s kuukauden päästä"],["vuosi sitten","vuoden päästä"],["%s vuotta sitten","%s vuoden päästä"]][l]}var MA=dy.default=IA,hy={};Object.defineProperty(hy,"__esModule",{value:!0});function LA(s,l){return[["à l'instant","dans un instant"],["il y a %s secondes","dans %s secondes"],["il y a 1 minute","dans 1 minute"],["il y a %s minutes","dans %s minutes"],["il y a 1 heure","dans 1 heure"],["il y a %s heures","dans %s heures"],["il y a 1 jour","dans 1 jour"],["il y a %s jours","dans %s jours"],["il y a 1 semaine","dans 1 semaine"],["il y a %s semaines","dans %s semaines"],["il y a 1 mois","dans 1 mois"],["il y a %s mois","dans %s mois"],["il y a 1 an","dans 1 an"],["il y a %s ans","dans %s ans"]][l]}var NA=hy.default=LA,py={};Object.defineProperty(py,"__esModule",{value:!0});function zA(s,l){return[["xusto agora","daquí a un pouco"],["hai %s segundos","en %s segundos"],["hai 1 minuto","nun minuto"],["hai %s minutos","en %s minutos"],["hai 1 hora","nunha hora"],["hai %s horas","en %s horas"],["hai 1 día","nun día"],["hai %s días","en %s días"],["hai 1 semana","nunha semana"],["hai %s semanas","en %s semanas"],["hai 1 mes","nun mes"],["hai %s meses","en %s meses"],["hai 1 ano","nun ano"],["hai %s anos","en %s anos"]][l]}var jA=py.default=zA,fy={};Object.defineProperty(fy,"__esModule",{value:!0});function HA(s,l){return[["अभी","कुछ समय"],["%s सेकंड पहले","%s सेकंड में"],["1 मिनट पहले","1 मिनट में"],["%s मिनट पहले","%s मिनट में"],["1 घंटे पहले","1 घंटे में"],["%s घंटे पहले","%s घंटे में"],["1 दिन पहले","1 दिन में"],["%s दिन पहले","%s दिनों में"],["1 सप्ताह पहले","1 सप्ताह में"],["%s हफ्ते पहले","%s हफ्तों में"],["1 महीने पहले","1 महीने में"],["%s महीने पहले","%s महीनों में"],["1 साल पहले","1 साल में"],["%s साल पहले","%s साल में"]][l]}var FA=fy.default=HA,my={};Object.defineProperty(my,"__esModule",{value:!0});function BA(s,l){return[["poco fa","fra poco"],["%s secondi fa","fra %s secondi"],["un minuto fa","fra un minuto"],["%s minuti fa","fra %s minuti"],["un'ora fa","fra un'ora"],["%s ore fa","fra %s ore"],["un giorno fa","fra un giorno"],["%s giorni fa","fra %s giorni"],["una settimana fa","fra una settimana"],["%s settimane fa","fra %s settimane"],["un mese fa","fra un mese"],["%s mesi fa","fra %s mesi"],["un anno fa","fra un anno"],["%s anni fa","fra %s anni"]][l]}var UA=my.default=BA,gy={};Object.defineProperty(gy,"__esModule",{value:!0});function WA(s,l){return[["すこし前","すぐに"],["%s秒前","%s秒以内"],["1分前","1分以内"],["%s分前","%s分以内"],["1時間前","1時間以内"],["%s時間前","%s時間以内"],["1日前","1日以内"],["%s日前","%s日以内"],["1週間前","1週間以内"],["%s週間前","%s週間以内"],["1ヶ月前","1ヶ月以内"],["%sヶ月前","%sヶ月以内"],["1年前","1年以内"],["%s年前","%s年以内"]][l]}var VA=gy.default=WA,vy={};Object.defineProperty(vy,"__esModule",{value:!0});function GA(s,l){return[["방금","곧"],["%s초 전","%s초 후"],["1분 전","1분 후"],["%s분 전","%s분 후"],["1시간 전","1시간 후"],["%s시간 전","%s시간 후"],["1일 전","1일 후"],["%s일 전","%s일 후"],["1주일 전","1주일 후"],["%s주일 전","%s주일 후"],["1개월 전","1개월 후"],["%s개월 전","%s개월 후"],["1년 전","1년 후"],["%s년 전","%s년 후"]][l]}var qA=vy.default=GA,yy={};Object.defineProperty(yy,"__esModule",{value:!0});function ZA(s,l){return[["recent","binnenkort"],["%s seconden geleden","binnen %s seconden"],["1 minuut geleden","binnen 1 minuut"],["%s minuten geleden","binnen %s minuten"],["1 uur geleden","binnen 1 uur"],["%s uur geleden","binnen %s uur"],["1 dag geleden","binnen 1 dag"],["%s dagen geleden","binnen %s dagen"],["1 week geleden","binnen 1 week"],["%s weken geleden","binnen %s weken"],["1 maand geleden","binnen 1 maand"],["%s maanden geleden","binnen %s maanden"],["1 jaar geleden","binnen 1 jaar"],["%s jaar geleden","binnen %s jaar"]][l]}var XA=yy.default=ZA,wy={};Object.defineProperty(wy,"__esModule",{value:!0});function YA(s,l){return[["agora mesmo","agora"],["há %s segundos","em %s segundos"],["há um minuto","em um minuto"],["há %s minutos","em %s minutos"],["há uma hora","em uma hora"],["há %s horas","em %s horas"],["há um dia","em um dia"],["há %s dias","em %s dias"],["há uma semana","em uma semana"],["há %s semanas","em %s semanas"],["há um mês","em um mês"],["há %s meses","em %s meses"],["há um ano","em um ano"],["há %s anos","em %s anos"]][l]}var $A=wy.default=YA,by={};Object.defineProperty(by,"__esModule",{value:!0});function xo(s,l,r,a,c){var f=c%10,g=a;return c===1?g=s:f===1&&c>20?g=l:f>1&&f<5&&(c>20||c<10)&&(g=r),g}var xy=xo.bind(null,"секунду","%s секунду","%s секунды","%s секунд"),Sy=xo.bind(null,"минуту","%s минуту","%s минуты","%s минут"),Ey=xo.bind(null,"час","%s час","%s часа","%s часов"),Ty=xo.bind(null,"день","%s день","%s дня","%s дней"),Cy=xo.bind(null,"неделю","%s неделю","%s недели","%s недель"),Py=xo.bind(null,"месяц","%s месяц","%s месяца","%s месяцев"),_y=xo.bind(null,"год","%s год","%s года","%s лет");function KA(s,l){switch(l){case 0:return["только что","через несколько секунд"];case 1:return[xy(s)+" назад","через "+xy(s)];case 2:case 3:return[Sy(s)+" назад","через "+Sy(s)];case 4:case 5:return[Ey(s)+" назад","через "+Ey(s)];case 6:return["вчера","завтра"];case 7:return[Ty(s)+" назад","через "+Ty(s)];case 8:case 9:return[Cy(s)+" назад","через "+Cy(s)];case 10:case 11:return[Py(s)+" назад","через "+Py(s)];case 12:case 13:return[_y(s)+" назад","через "+_y(s)];default:return["",""]}}var QA=by.default=KA,ky={};Object.defineProperty(ky,"__esModule",{value:!0});function JA(s,l){return[["just nu","om en stund"],["%s sekunder sedan","om %s sekunder"],["1 minut sedan","om 1 minut"],["%s minuter sedan","om %s minuter"],["1 timme sedan","om 1 timme"],["%s timmar sedan","om %s timmar"],["1 dag sedan","om 1 dag"],["%s dagar sedan","om %s dagar"],["1 vecka sedan","om 1 vecka"],["%s veckor sedan","om %s veckor"],["1 månad sedan","om 1 månad"],["%s månader sedan","om %s månader"],["1 år sedan","om 1 år"],["%s år sedan","om %s år"]][l]}var eD=ky.default=JA,Ry={};Object.defineProperty(Ry,"__esModule",{value:!0});function tD(s,l){return[["เมื่อสักครู่นี้","อีกสักครู่"],["%s วินาทีที่แล้ว","ใน %s วินาที"],["1 นาทีที่แล้ว","ใน 1 นาที"],["%s นาทีที่แล้ว","ใน %s นาที"],["1 ชั่วโมงที่แล้ว","ใน 1 ชั่วโมง"],["%s ชั่วโมงที่แล้ว","ใน %s ชั่วโมง"],["1 วันที่แล้ว","ใน 1 วัน"],["%s วันที่แล้ว","ใน %s วัน"],["1 อาทิตย์ที่แล้ว","ใน 1 อาทิตย์"],["%s อาทิตย์ที่แล้ว","ใน %s อาทิตย์"],["1 เดือนที่แล้ว","ใน 1 เดือน"],["%s เดือนที่แล้ว","ใน %s เดือน"],["1 ปีที่แล้ว","ใน 1 ปี"],["%s ปีที่แล้ว","ใน %s ปี"]][l]}var nD=Ry.default=tD,Oy={};Object.defineProperty(Oy,"__esModule",{value:!0});function iD(s,l){return[["az önce","şimdi"],["%s saniye önce","%s saniye içinde"],["1 dakika önce","1 dakika içinde"],["%s dakika önce","%s dakika içinde"],["1 saat önce","1 saat içinde"],["%s saat önce","%s saat içinde"],["1 gün önce","1 gün içinde"],["%s gün önce","%s gün içinde"],["1 hafta önce","1 hafta içinde"],["%s hafta önce","%s hafta içinde"],["1 ay önce","1 ay içinde"],["%s ay önce","%s ay içinde"],["1 yıl önce","1 yıl içinde"],["%s yıl önce","%s yıl içinde"]][l]}var rD=Oy.default=iD,Ay={};Object.defineProperty(Ay,"__esModule",{value:!0});var oD=["秒","分钟","小时","天","周","个月","年"];function sD(s,l){if(l===0)return["刚刚","片刻后"];var r=oD[~~(l/2)];return[s+" "+r+"前",s+" "+r+"后"]}var aD=Ay.default=sD,Dy={};Object.defineProperty(Dy,"__esModule",{value:!0});function lD(s,l){return[["剛剛","片刻後"],["%s 秒前","%s 秒後"],["1 分鐘前","1 分鐘後"],["%s 分鐘前","%s 分鐘後"],["1 小時前","1 小時後"],["%s 小時前","%s 小時後"],["1 天前","1 天後"],["%s 天前","%s 天後"],["1 週前","1 週後"],["%s 週前","%s 週後"],["1 個月前","1 個月後"],["%s 個月前","%s 個月後"],["1 年前","1 年後"],["%s 年前","%s 年後"]][l]}var uD=Dy.default=lD;const fs={ar:tA,cs:nA,de:iA,el:rA,es:oA,fi:sA,fr:aA,gl:lA,hi:uA,it:cA,ja:dA,ko:hA,nl:pA,pt:fA,ru:mA,sv:gA,th:vA,tr:yA,ur:wA,"zh-CN":bA,"zh-TW":xA},cD=Object.keys(fs),So=new eA({allowMissing:!0});So.init=(s,l)=>{So.clear(),s&&(So.locale(s),So.extend(fs[s])),l&&So.extend(l)},Ln("ar",TA),Ln("cs",PA),Ln("de",kA),Ln("el",OA),Ln("es",DA),Ln("fi",MA),Ln("fr",NA),Ln("gl",jA),Ln("hi",FA),Ln("it",UA),Ln("ja",VA),Ln("ko",qA),Ln("nl",XA),Ln("pt",$A),Ln("ru",QA),Ln("sv",eD),Ln("th",nD),Ln("tr",rD),Ln("zh-CN",aD),Ln("zh-TW",uD),So.registerMessages=(s,l)=>{fs[s]?fs[s]={...fs[s],...l}:fs[s]=l};var Di=So,dD=s=>{const l=bt();return f_(l,()=>s.onClickOutside()),Me.createElement("ul",{ref:l,className:"r6o-comment-dropdown-menu"},Me.createElement("li",{onClick:s.onEdit},Di.t("Edit")),Me.createElement("li",{onClick:s.onDelete},Di.t("Delete")))},Iy={},fh={},mh={exports:{}};/*!
	autosize 4.0.4
	license: MIT
	http://www.jacklmoore.com/autosize
*/(function(s,l){(function(r,a){a(s,l)})(Ji,function(r,a){var c=typeof Map=="function"?new Map:function(){var S=[],R=[];return{has:function(A){return S.indexOf(A)>-1},get:function(A){return R[S.indexOf(A)]},set:function(A,H){S.indexOf(A)===-1&&(S.push(A),R.push(H))},delete:function(A){var H=S.indexOf(A);H>-1&&(S.splice(H,1),R.splice(H,1))}}}(),f=function(S){return new Event(S,{bubbles:!0})};try{new Event("test")}catch{f=function(S){var R=document.createEvent("Event");return R.initEvent(S,!0,!1),R}}function g(S){if(!S||!S.nodeName||S.nodeName!=="TEXTAREA"||c.has(S))return;var R=null,A=null,H=null;function V(){var pe=window.getComputedStyle(S,null);pe.resize==="vertical"?S.style.resize="none":pe.resize==="both"&&(S.style.resize="horizontal"),pe.boxSizing==="content-box"?R=-(parseFloat(pe.paddingTop)+parseFloat(pe.paddingBottom)):R=parseFloat(pe.borderTopWidth)+parseFloat(pe.borderBottomWidth),isNaN(R)&&(R=0),M()}function oe(pe){{var Ee=S.style.width;S.style.width="0px",S.offsetWidth,S.style.width=Ee}S.style.overflowY=pe}function ne(pe){for(var Ee=[];pe&&pe.parentNode&&pe.parentNode instanceof Element;)pe.parentNode.scrollTop&&Ee.push({node:pe.parentNode,scrollTop:pe.parentNode.scrollTop}),pe=pe.parentNode;return Ee}function ue(){if(S.scrollHeight!==0){var pe=ne(S),Ee=document.documentElement&&document.documentElement.scrollTop;S.style.height="",S.style.height=S.scrollHeight+R+"px",A=S.clientWidth,pe.forEach(function(Ce){Ce.node.scrollTop=Ce.scrollTop}),Ee&&(document.documentElement.scrollTop=Ee)}}function M(){ue();var pe=Math.round(parseFloat(S.style.height)),Ee=window.getComputedStyle(S,null),Ce=Ee.boxSizing==="content-box"?Math.round(parseFloat(Ee.height)):S.offsetHeight;if(Ce<pe?Ee.overflowY==="hidden"&&(oe("scroll"),ue(),Ce=Ee.boxSizing==="content-box"?Math.round(parseFloat(window.getComputedStyle(S,null).height)):S.offsetHeight):Ee.overflowY!=="hidden"&&(oe("hidden"),ue(),Ce=Ee.boxSizing==="content-box"?Math.round(parseFloat(window.getComputedStyle(S,null).height)):S.offsetHeight),H!==Ce){H=Ce;var Ze=f("autosize:resized");try{S.dispatchEvent(Ze)}catch{}}}var re=function(){S.clientWidth!==A&&M()},ge=function(pe){window.removeEventListener("resize",re,!1),S.removeEventListener("input",M,!1),S.removeEventListener("keyup",M,!1),S.removeEventListener("autosize:destroy",ge,!1),S.removeEventListener("autosize:update",M,!1),Object.keys(pe).forEach(function(Ee){S.style[Ee]=pe[Ee]}),c.delete(S)}.bind(S,{height:S.style.height,resize:S.style.resize,overflowY:S.style.overflowY,overflowX:S.style.overflowX,wordWrap:S.style.wordWrap});S.addEventListener("autosize:destroy",ge,!1),"onpropertychange"in S&&"oninput"in S&&S.addEventListener("keyup",M,!1),window.addEventListener("resize",re,!1),S.addEventListener("input",M,!1),S.addEventListener("autosize:update",M,!1),S.style.overflowX="hidden",S.style.wordWrap="break-word",c.set(S,{destroy:ge,update:M}),V()}function y(S){var R=c.get(S);R&&R.destroy()}function w(S){var R=c.get(S);R&&R.update()}var b=null;typeof window>"u"||typeof window.getComputedStyle!="function"?(b=function(S){return S},b.destroy=function(S){return S},b.update=function(S){return S}):(b=function(S,R){return S&&Array.prototype.forEach.call(S.length?S:[S],function(A){return g(A)}),S},b.destroy=function(S){return S&&Array.prototype.forEach.call(S.length?S:[S],y),S},b.update=function(S){return S&&Array.prototype.forEach.call(S.length?S:[S],w),S}),a.default=b,r.exports=a.default})})(mh,mh.exports);var hD=function(s,l,r){return r=window.getComputedStyle,(r?r(s):s.currentStyle)[l.replace(/-(\w)/gi,function(a,c){return c.toUpperCase()})]},pD=hD,gh=pD;function fD(s){var l=gh(s,"line-height"),r=parseFloat(l,10);if(l===r+""){var a=s.style.lineHeight;s.style.lineHeight=l+"em",l=gh(s,"line-height"),r=parseFloat(l,10),a?s.style.lineHeight=a:delete s.style.lineHeight}if(l.indexOf("pt")!==-1?(r*=4,r/=3):l.indexOf("mm")!==-1?(r*=96,r/=25.4):l.indexOf("cm")!==-1?(r*=96,r/=2.54):l.indexOf("in")!==-1?r*=96:l.indexOf("pc")!==-1&&(r*=16),r=Math.round(r),l==="normal"){var c=s.nodeName,f=document.createElement(c);f.innerHTML="&nbsp;",c.toUpperCase()==="TEXTAREA"&&f.setAttribute("rows","1");var g=gh(s,"font-size");f.style.fontSize=g,f.style.padding="0px",f.style.border="0px";var y=document.body;y.appendChild(f);var w=f.offsetHeight;r=w,y.removeChild(f)}return r}var mD=fD,gD=Ji&&Ji.__extends||function(){var s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,r){l.__proto__=r}||function(l,r){for(var a in r)r.hasOwnProperty(a)&&(l[a]=r[a])};return function(l,r){s(l,r);function a(){this.constructor=l}l.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)}}(),vh=Ji&&Ji.__assign||Object.assign||function(s){for(var l,r=1,a=arguments.length;r<a;r++){l=arguments[r];for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(s[c]=l[c])}return s},vD=Ji&&Ji.__rest||function(s,l){var r={};for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&l.indexOf(a)<0&&(r[a]=s[a]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(s);c<a.length;c++)l.indexOf(a[c])<0&&(r[a[c]]=s[a[c]]);return r};fh.__esModule=!0;var uu=er,Pa=tr.exports,cu=mh.exports,yD=mD,wD=yD,My="autosize:resized",bD=function(s){gD(l,s);function l(){var r=s!==null&&s.apply(this,arguments)||this;return r.state={lineHeight:null},r.textarea=null,r.onResize=function(a){r.props.onResize&&r.props.onResize(a)},r.updateLineHeight=function(){r.textarea&&r.setState({lineHeight:wD(r.textarea)})},r.onChange=function(a){var c=r.props.onChange;r.currentValue=a.currentTarget.value,c&&c(a)},r}return l.prototype.componentDidMount=function(){var r=this,a=this.props,c=a.maxRows,f=a.async;typeof c=="number"&&this.updateLineHeight(),typeof c=="number"||f?setTimeout(function(){return r.textarea&&cu(r.textarea)}):this.textarea&&cu(this.textarea),this.textarea&&this.textarea.addEventListener(My,this.onResize)},l.prototype.componentWillUnmount=function(){this.textarea&&(this.textarea.removeEventListener(My,this.onResize),cu.destroy(this.textarea))},l.prototype.render=function(){var r=this,a=this,c=a.props;c.onResize;var f=c.maxRows;c.onChange;var g=c.style;c.innerRef;var y=c.children,w=vD(c,["onResize","maxRows","onChange","style","innerRef","children"]),b=a.state.lineHeight,S=f&&b?b*f:null;return uu.createElement("textarea",vh({},w,{onChange:this.onChange,style:S?vh({},g,{maxHeight:S}):g,ref:function(R){r.textarea=R,typeof r.props.innerRef=="function"?r.props.innerRef(R):r.props.innerRef&&(r.props.innerRef.current=R)}}),y)},l.prototype.componentDidUpdate=function(){this.textarea&&cu.update(this.textarea)},l.defaultProps={rows:1,async:!1},l.propTypes={rows:Pa.number,maxRows:Pa.number,onResize:Pa.func,innerRef:Pa.any,async:Pa.bool},l}(uu.Component);fh.TextareaAutosize=uu.forwardRef(function(s,l){return uu.createElement(bD,vh({},s,{innerRef:l}))}),function(s){s.__esModule=!0;var l=fh;s.default=l.TextareaAutosize}(Iy);var xD=ho(Iy);class Ly extends te{constructor(l){super(l),o(this,"onKeyDown",r=>{r.which===13&&r.ctrlKey&&this.props.onSaveAndClose()}),o(this,"onKeyUp",r=>{r.which===46&&r.stopPropagation()}),this.element=Z()}componentDidMount(){this.props.focus&&this.element.current&&this.element.current.focus({preventScroll:!0})}render(){return Me.createElement(xD,{ref:this.element,className:"r6o-editable-text",value:this.props.content,placeholder:this.props.placeholder||Di.t("Add a comment..."),disabled:!this.props.editable,onChange:this.props.onChange,onKeyUp:this.onKeyUp,onKeyDown:this.onKeyDown})}}function zt(){return zt=Object.assign?Object.assign.bind():function(s){for(var l=1;l<arguments.length;l++){var r=arguments[l];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},zt.apply(this,arguments)}function SD(s){if(s.sheet)return s.sheet;for(var l=0;l<document.styleSheets.length;l++)if(document.styleSheets[l].ownerNode===s)return document.styleSheets[l]}function ED(s){var l=document.createElement("style");return l.setAttribute("data-emotion",s.key),s.nonce!==void 0&&l.setAttribute("nonce",s.nonce),l.appendChild(document.createTextNode("")),l.setAttribute("data-s",""),l}var TD=function(){function s(r){var a=this;this._insertTag=function(c){var f;a.tags.length===0?a.insertionPoint?f=a.insertionPoint.nextSibling:a.prepend?f=a.container.firstChild:f=a.before:f=a.tags[a.tags.length-1].nextSibling,a.container.insertBefore(c,f),a.tags.push(c)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var l=s.prototype;return l.hydrate=function(r){r.forEach(this._insertTag)},l.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(ED(this));var a=this.tags[this.tags.length-1];if(this.isSpeedy){var c=SD(a);try{c.insertRule(r,c.cssRules.length)}catch{}}else a.appendChild(document.createTextNode(r));this.ctr++},l.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},s}(),hi="-ms-",du="-moz-",dn="-webkit-",Ny="comm",yh="rule",wh="decl",CD="@import",zy="@keyframes",PD="@layer",_D=Math.abs,hu=String.fromCharCode,kD=Object.assign;function RD(s,l){return ri(s,0)^45?(((l<<2^ri(s,0))<<2^ri(s,1))<<2^ri(s,2))<<2^ri(s,3):0}function jy(s){return s.trim()}function OD(s,l){return(s=l.exec(s))?s[0]:s}function hn(s,l,r){return s.replace(l,r)}function bh(s,l){return s.indexOf(l)}function ri(s,l){return s.charCodeAt(l)|0}function _a(s,l,r){return s.slice(l,r)}function lr(s){return s.length}function xh(s){return s.length}function pu(s,l){return l.push(s),s}function AD(s,l){return s.map(l).join("")}var fu=1,ms=1,Hy=0,Ti=0,Bn=0,gs="";function mu(s,l,r,a,c,f,g){return{value:s,root:l,parent:r,type:a,props:c,children:f,line:fu,column:ms,length:g,return:""}}function ka(s,l){return kD(mu("",null,null,"",null,null,0),s,{length:-s.length},l)}function DD(){return Bn}function ID(){return Bn=Ti>0?ri(gs,--Ti):0,ms--,Bn===10&&(ms=1,fu--),Bn}function Ii(){return Bn=Ti<Hy?ri(gs,Ti++):0,ms++,Bn===10&&(ms=1,fu++),Bn}function ur(){return ri(gs,Ti)}function gu(){return Ti}function Ra(s,l){return _a(gs,s,l)}function Oa(s){switch(s){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Fy(s){return fu=ms=1,Hy=lr(gs=s),Ti=0,[]}function By(s){return gs="",s}function vu(s){return jy(Ra(Ti-1,Sh(s===91?s+2:s===40?s+1:s)))}function MD(s){for(;(Bn=ur())&&Bn<33;)Ii();return Oa(s)>2||Oa(Bn)>3?"":" "}function LD(s,l){for(;--l&&Ii()&&!(Bn<48||Bn>102||Bn>57&&Bn<65||Bn>70&&Bn<97););return Ra(s,gu()+(l<6&&ur()==32&&Ii()==32))}function Sh(s){for(;Ii();)switch(Bn){case s:return Ti;case 34:case 39:s!==34&&s!==39&&Sh(Bn);break;case 40:s===41&&Sh(s);break;case 92:Ii();break}return Ti}function ND(s,l){for(;Ii()&&s+Bn!==57&&!(s+Bn===84&&ur()===47););return"/*"+Ra(l,Ti-1)+"*"+hu(s===47?s:Ii())}function zD(s){for(;!Oa(ur());)Ii();return Ra(s,Ti)}function jD(s){return By(yu("",null,null,null,[""],s=Fy(s),0,[0],s))}function yu(s,l,r,a,c,f,g,y,w){for(var b=0,S=0,R=g,A=0,H=0,V=0,oe=1,ne=1,ue=1,M=0,re="",ge=c,pe=f,Ee=a,Ce=re;ne;)switch(V=M,M=Ii()){case 40:if(V!=108&&ri(Ce,R-1)==58){bh(Ce+=hn(vu(M),"&","&\f"),"&\f")!=-1&&(ue=-1);break}case 34:case 39:case 91:Ce+=vu(M);break;case 9:case 10:case 13:case 32:Ce+=MD(V);break;case 92:Ce+=LD(gu()-1,7);continue;case 47:switch(ur()){case 42:case 47:pu(HD(ND(Ii(),gu()),l,r),w);break;default:Ce+="/"}break;case 123*oe:y[b++]=lr(Ce)*ue;case 125*oe:case 59:case 0:switch(M){case 0:case 125:ne=0;case 59+S:ue==-1&&(Ce=hn(Ce,/\f/g,"")),H>0&&lr(Ce)-R&&pu(H>32?Wy(Ce+";",a,r,R-1):Wy(hn(Ce," ","")+";",a,r,R-2),w);break;case 59:Ce+=";";default:if(pu(Ee=Uy(Ce,l,r,b,S,c,y,re,ge=[],pe=[],R),f),M===123)if(S===0)yu(Ce,l,Ee,Ee,ge,f,R,y,pe);else switch(A===99&&ri(Ce,3)===110?100:A){case 100:case 108:case 109:case 115:yu(s,Ee,Ee,a&&pu(Uy(s,Ee,Ee,0,0,c,y,re,c,ge=[],R),pe),c,pe,R,y,a?ge:pe);break;default:yu(Ce,Ee,Ee,Ee,[""],pe,0,y,pe)}}b=S=H=0,oe=ue=1,re=Ce="",R=g;break;case 58:R=1+lr(Ce),H=V;default:if(oe<1){if(M==123)--oe;else if(M==125&&oe++==0&&ID()==125)continue}switch(Ce+=hu(M),M*oe){case 38:ue=S>0?1:(Ce+="\f",-1);break;case 44:y[b++]=(lr(Ce)-1)*ue,ue=1;break;case 64:ur()===45&&(Ce+=vu(Ii())),A=ur(),S=R=lr(re=Ce+=zD(gu())),M++;break;case 45:V===45&&lr(Ce)==2&&(oe=0)}}return f}function Uy(s,l,r,a,c,f,g,y,w,b,S){for(var R=c-1,A=c===0?f:[""],H=xh(A),V=0,oe=0,ne=0;V<a;++V)for(var ue=0,M=_a(s,R+1,R=_D(oe=g[V])),re=s;ue<H;++ue)(re=jy(oe>0?A[ue]+" "+M:hn(M,/&\f/g,A[ue])))&&(w[ne++]=re);return mu(s,l,r,c===0?yh:y,w,b,S)}function HD(s,l,r){return mu(s,l,r,Ny,hu(DD()),_a(s,2,-2),0)}function Wy(s,l,r,a){return mu(s,l,r,wh,_a(s,0,a),_a(s,a+1,-1),a)}function vs(s,l){for(var r="",a=xh(s),c=0;c<a;c++)r+=l(s[c],c,s,l)||"";return r}function FD(s,l,r,a){switch(s.type){case PD:if(s.children.length)break;case CD:case wh:return s.return=s.return||s.value;case Ny:return"";case zy:return s.return=s.value+"{"+vs(s.children,a)+"}";case yh:s.value=s.props.join(",")}return lr(r=vs(s.children,a))?s.return=s.value+"{"+r+"}":""}function BD(s){var l=xh(s);return function(r,a,c,f){for(var g="",y=0;y<l;y++)g+=s[y](r,a,c,f)||"";return g}}function UD(s){return function(l){l.root||(l=l.return)&&s(l)}}function WD(s){var l=Object.create(null);return function(r){return l[r]===void 0&&(l[r]=s(r)),l[r]}}var VD=function(s,l,r){for(var a=0,c=0;a=c,c=ur(),a===38&&c===12&&(l[r]=1),!Oa(c);)Ii();return Ra(s,Ti)},GD=function(s,l){var r=-1,a=44;do switch(Oa(a)){case 0:a===38&&ur()===12&&(l[r]=1),s[r]+=VD(Ti-1,l,r);break;case 2:s[r]+=vu(a);break;case 4:if(a===44){s[++r]=ur()===58?"&\f":"",l[r]=s[r].length;break}default:s[r]+=hu(a)}while(a=Ii());return s},qD=function(s,l){return By(GD(Fy(s),l))},Vy=new WeakMap,ZD=function(s){if(!(s.type!=="rule"||!s.parent||s.length<1)){for(var l=s.value,r=s.parent,a=s.column===r.column&&s.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(s.props.length===1&&l.charCodeAt(0)!==58&&!Vy.get(r))&&!a){Vy.set(s,!0);for(var c=[],f=qD(l,c),g=r.props,y=0,w=0;y<f.length;y++)for(var b=0;b<g.length;b++,w++)s.props[w]=c[y]?f[y].replace(/&\f/g,g[b]):g[b]+" "+f[y]}}},XD=function(s){if(s.type==="decl"){var l=s.value;l.charCodeAt(0)===108&&l.charCodeAt(2)===98&&(s.return="",s.value="")}};function Gy(s,l){switch(RD(s,l)){case 5103:return dn+"print-"+s+s;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return dn+s+s;case 5349:case 4246:case 4810:case 6968:case 2756:return dn+s+du+s+hi+s+s;case 6828:case 4268:return dn+s+hi+s+s;case 6165:return dn+s+hi+"flex-"+s+s;case 5187:return dn+s+hn(s,/(\w+).+(:[^]+)/,dn+"box-$1$2"+hi+"flex-$1$2")+s;case 5443:return dn+s+hi+"flex-item-"+hn(s,/flex-|-self/,"")+s;case 4675:return dn+s+hi+"flex-line-pack"+hn(s,/align-content|flex-|-self/,"")+s;case 5548:return dn+s+hi+hn(s,"shrink","negative")+s;case 5292:return dn+s+hi+hn(s,"basis","preferred-size")+s;case 6060:return dn+"box-"+hn(s,"-grow","")+dn+s+hi+hn(s,"grow","positive")+s;case 4554:return dn+hn(s,/([^-])(transform)/g,"$1"+dn+"$2")+s;case 6187:return hn(hn(hn(s,/(zoom-|grab)/,dn+"$1"),/(image-set)/,dn+"$1"),s,"")+s;case 5495:case 3959:return hn(s,/(image-set\([^]*)/,dn+"$1$`$1");case 4968:return hn(hn(s,/(.+:)(flex-)?(.*)/,dn+"box-pack:$3"+hi+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+dn+s+s;case 4095:case 3583:case 4068:case 2532:return hn(s,/(.+)-inline(.+)/,dn+"$1$2")+s;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(lr(s)-1-l>6)switch(ri(s,l+1)){case 109:if(ri(s,l+4)!==45)break;case 102:return hn(s,/(.+:)(.+)-([^]+)/,"$1"+dn+"$2-$3$1"+du+(ri(s,l+3)==108?"$3":"$2-$3"))+s;case 115:return~bh(s,"stretch")?Gy(hn(s,"stretch","fill-available"),l)+s:s}break;case 4949:if(ri(s,l+1)!==115)break;case 6444:switch(ri(s,lr(s)-3-(~bh(s,"!important")&&10))){case 107:return hn(s,":",":"+dn)+s;case 101:return hn(s,/(.+:)([^;!]+)(;|!.+)?/,"$1"+dn+(ri(s,14)===45?"inline-":"")+"box$3$1"+dn+"$2$3$1"+hi+"$2box$3")+s}break;case 5936:switch(ri(s,l+11)){case 114:return dn+s+hi+hn(s,/[svh]\w+-[tblr]{2}/,"tb")+s;case 108:return dn+s+hi+hn(s,/[svh]\w+-[tblr]{2}/,"tb-rl")+s;case 45:return dn+s+hi+hn(s,/[svh]\w+-[tblr]{2}/,"lr")+s}return dn+s+hi+s+s}return s}var YD=function(s,l,r,a){if(s.length>-1&&!s.return)switch(s.type){case wh:s.return=Gy(s.value,s.length);break;case zy:return vs([ka(s,{value:hn(s.value,"@","@"+dn)})],a);case yh:if(s.length)return AD(s.props,function(c){switch(OD(c,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return vs([ka(s,{props:[hn(c,/:(read-\w+)/,":"+du+"$1")]})],a);case"::placeholder":return vs([ka(s,{props:[hn(c,/:(plac\w+)/,":"+dn+"input-$1")]}),ka(s,{props:[hn(c,/:(plac\w+)/,":"+du+"$1")]}),ka(s,{props:[hn(c,/:(plac\w+)/,hi+"input-$1")]})],a)}return""})}},$D=[YD],KD=function(s){var l=s.key;if(l==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(V){var oe=V.getAttribute("data-emotion");oe.indexOf(" ")!==-1&&(document.head.appendChild(V),V.setAttribute("data-s",""))})}var a=s.stylisPlugins||$D,c={},f,g=[];f=s.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+l+' "]'),function(V){for(var oe=V.getAttribute("data-emotion").split(" "),ne=1;ne<oe.length;ne++)c[oe[ne]]=!0;g.push(V)});var y,w=[ZD,XD];{var b,S=[FD,UD(function(V){b.insert(V)})],R=BD(w.concat(a,S)),A=function(V){return vs(jD(V),R)};y=function(V,oe,ne,ue){b=ne,A(V?V+"{"+oe.styles+"}":oe.styles),ue&&(H.inserted[oe.name]=!0)}}var H={key:l,sheet:new TD({key:l,container:f,nonce:s.nonce,speedy:s.speedy,prepend:s.prepend,insertionPoint:s.insertionPoint}),nonce:s.nonce,inserted:c,registered:{},insert:y};return H.sheet.hydrate(g),H},qy={exports:{}},wn={};/** @license React v16.13.1
* react-is.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var $n=typeof Symbol=="function"&&Symbol.for,Eh=$n?Symbol.for("react.element"):60103,Th=$n?Symbol.for("react.portal"):60106,wu=$n?Symbol.for("react.fragment"):60107,bu=$n?Symbol.for("react.strict_mode"):60108,xu=$n?Symbol.for("react.profiler"):60114,Su=$n?Symbol.for("react.provider"):60109,Eu=$n?Symbol.for("react.context"):60110,Ch=$n?Symbol.for("react.async_mode"):60111,Tu=$n?Symbol.for("react.concurrent_mode"):60111,Cu=$n?Symbol.for("react.forward_ref"):60112,Pu=$n?Symbol.for("react.suspense"):60113,QD=$n?Symbol.for("react.suspense_list"):60120,_u=$n?Symbol.for("react.memo"):60115,ku=$n?Symbol.for("react.lazy"):60116,JD=$n?Symbol.for("react.block"):60121,eI=$n?Symbol.for("react.fundamental"):60117,tI=$n?Symbol.for("react.responder"):60118,nI=$n?Symbol.for("react.scope"):60119;function Mi(s){if(typeof s=="object"&&s!==null){var l=s.$$typeof;switch(l){case Eh:switch(s=s.type,s){case Ch:case Tu:case wu:case xu:case bu:case Pu:return s;default:switch(s=s&&s.$$typeof,s){case Eu:case Cu:case ku:case _u:case Su:return s;default:return l}}case Th:return l}}}function Zy(s){return Mi(s)===Tu}wn.AsyncMode=Ch,wn.ConcurrentMode=Tu,wn.ContextConsumer=Eu,wn.ContextProvider=Su,wn.Element=Eh,wn.ForwardRef=Cu,wn.Fragment=wu,wn.Lazy=ku,wn.Memo=_u,wn.Portal=Th,wn.Profiler=xu,wn.StrictMode=bu,wn.Suspense=Pu,wn.isAsyncMode=function(s){return Zy(s)||Mi(s)===Ch},wn.isConcurrentMode=Zy,wn.isContextConsumer=function(s){return Mi(s)===Eu},wn.isContextProvider=function(s){return Mi(s)===Su},wn.isElement=function(s){return typeof s=="object"&&s!==null&&s.$$typeof===Eh},wn.isForwardRef=function(s){return Mi(s)===Cu},wn.isFragment=function(s){return Mi(s)===wu},wn.isLazy=function(s){return Mi(s)===ku},wn.isMemo=function(s){return Mi(s)===_u},wn.isPortal=function(s){return Mi(s)===Th},wn.isProfiler=function(s){return Mi(s)===xu},wn.isStrictMode=function(s){return Mi(s)===bu},wn.isSuspense=function(s){return Mi(s)===Pu},wn.isValidElementType=function(s){return typeof s=="string"||typeof s=="function"||s===wu||s===Tu||s===xu||s===bu||s===Pu||s===QD||typeof s=="object"&&s!==null&&(s.$$typeof===ku||s.$$typeof===_u||s.$$typeof===Su||s.$$typeof===Eu||s.$$typeof===Cu||s.$$typeof===eI||s.$$typeof===tI||s.$$typeof===nI||s.$$typeof===JD)},wn.typeOf=Mi,qy.exports=wn;var Xy=qy.exports,iI={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},rI={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Yy={};Yy[Xy.ForwardRef]=iI,Yy[Xy.Memo]=rI;var oI=!0;function $y(s,l,r){var a="";return r.split(" ").forEach(function(c){s[c]!==void 0?l.push(s[c]+";"):a+=c+" "}),a}var Ph=function(s,l,r){var a=s.key+"-"+l.name;(r===!1||oI===!1)&&s.registered[a]===void 0&&(s.registered[a]=l.styles)},Ky=function(s,l,r){Ph(s,l,r);var a=s.key+"-"+l.name;if(s.inserted[l.name]===void 0){var c=l;do s.insert(l===c?"."+a:"",c,s.sheet,!0),c=c.next;while(c!==void 0)}};function sI(s){for(var l=0,r,a=0,c=s.length;c>=4;++a,c-=4)r=s.charCodeAt(a)&255|(s.charCodeAt(++a)&255)<<8|(s.charCodeAt(++a)&255)<<16|(s.charCodeAt(++a)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,l=(r&65535)*1540483477+((r>>>16)*59797<<16)^(l&65535)*1540483477+((l>>>16)*59797<<16);switch(c){case 3:l^=(s.charCodeAt(a+2)&255)<<16;case 2:l^=(s.charCodeAt(a+1)&255)<<8;case 1:l^=s.charCodeAt(a)&255,l=(l&65535)*1540483477+((l>>>16)*59797<<16)}return l^=l>>>13,l=(l&65535)*1540483477+((l>>>16)*59797<<16),((l^l>>>15)>>>0).toString(36)}var aI={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},lI=/[A-Z]|^ms/g,uI=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Qy=function(s){return s.charCodeAt(1)===45},Jy=function(s){return s!=null&&typeof s!="boolean"},_h=WD(function(s){return Qy(s)?s:s.replace(lI,"-$&").toLowerCase()}),e0=function(s,l){switch(s){case"animation":case"animationName":if(typeof l=="string")return l.replace(uI,function(r,a,c){return cr={name:a,styles:c,next:cr},a})}return aI[s]!==1&&!Qy(s)&&typeof l=="number"&&l!==0?l+"px":l};function Aa(s,l,r){if(r==null)return"";if(r.__emotion_styles!==void 0)return r;switch(typeof r){case"boolean":return"";case"object":{if(r.anim===1)return cr={name:r.name,styles:r.styles,next:cr},r.name;if(r.styles!==void 0){var a=r.next;if(a!==void 0)for(;a!==void 0;)cr={name:a.name,styles:a.styles,next:cr},a=a.next;var c=r.styles+";";return c}return cI(s,l,r)}case"function":{if(s!==void 0){var f=cr,g=r(s);return cr=f,Aa(s,l,g)}break}}if(l==null)return r;var y=l[r];return y!==void 0?y:r}function cI(s,l,r){var a="";if(Array.isArray(r))for(var c=0;c<r.length;c++)a+=Aa(s,l,r[c])+";";else for(var f in r){var g=r[f];if(typeof g!="object")l!=null&&l[g]!==void 0?a+=f+"{"+l[g]+"}":Jy(g)&&(a+=_h(f)+":"+e0(f,g)+";");else if(Array.isArray(g)&&typeof g[0]=="string"&&(l==null||l[g[0]]===void 0))for(var y=0;y<g.length;y++)Jy(g[y])&&(a+=_h(f)+":"+e0(f,g[y])+";");else{var w=Aa(s,l,g);switch(f){case"animation":case"animationName":{a+=_h(f)+":"+w+";";break}default:a+=f+"{"+w+"}"}}}return a}var t0=/label:\s*([^\s;\n{]+)\s*(;|$)/g,cr,kh=function(s,l,r){if(s.length===1&&typeof s[0]=="object"&&s[0]!==null&&s[0].styles!==void 0)return s[0];var a=!0,c="";cr=void 0;var f=s[0];f==null||f.raw===void 0?(a=!1,c+=Aa(r,l,f)):c+=f[0];for(var g=1;g<s.length;g++)c+=Aa(r,l,s[g]),a&&(c+=f[g]);t0.lastIndex=0;for(var y="",w;(w=t0.exec(c))!==null;)y+="-"+w[1];var b=sI(c)+y;return{name:b,styles:c,next:cr}},dI=function(s){return s()},hI=ua.useInsertionEffect?ua.useInsertionEffect:!1,n0=hI||dI,Rh={}.hasOwnProperty,i0=Bt(typeof HTMLElement<"u"?KD({key:"css"}):null);i0.Provider;var r0=function(s){return wr(function(l,r){var a=Ae(i0);return s(l,a,r)})},o0=Bt({}),Oh="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",pI=function(s,l){var r={};for(var a in l)Rh.call(l,a)&&(r[a]=l[a]);return r[Oh]=s,r},fI=function(s){var l=s.cache,r=s.serialized,a=s.isStringTag;return Ph(l,r,a),n0(function(){return Ky(l,r,a)}),null},mI=r0(function(s,l,r){var a=s.css;typeof a=="string"&&l.registered[a]!==void 0&&(a=l.registered[a]);var c=s[Oh],f=[a],g="";typeof s.className=="string"?g=$y(l.registered,f,s.className):s.className!=null&&(g=s.className+" ");var y=kh(f,void 0,Ae(o0));g+=l.key+"-"+y.name;var w={};for(var b in s)Rh.call(s,b)&&b!=="css"&&b!==Oh&&(w[b]=s[b]);return w.ref=r,w.className=g,I(ae,null,I(fI,{cache:l,serialized:y,isStringTag:typeof c=="string"}),I(c,w))}),gI=mI,jt=function(s,l){var r=arguments;if(l==null||!Rh.call(l,"css"))return I.apply(void 0,r);var a=r.length,c=new Array(a);c[0]=gI,c[1]=pI(s,l);for(var f=2;f<a;f++)c[f]=r[f];return I.apply(null,c)};function Ah(){for(var s=arguments.length,l=new Array(s),r=0;r<s;r++)l[r]=arguments[r];return kh(l)}var vI=function(){var s=Ah.apply(void 0,arguments),l="animation-"+s.name;return{name:l,styles:"@keyframes "+l+"{"+s.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},yI=function s(l){for(var r=l.length,a=0,c="";a<r;a++){var f=l[a];if(f!=null){var g=void 0;switch(typeof f){case"boolean":break;case"object":{if(Array.isArray(f))g=s(f);else{g="";for(var y in f)f[y]&&y&&(g&&(g+=" "),g+=y)}break}default:g=f}g&&(c&&(c+=" "),c+=g)}}return c};function wI(s,l,r){var a=[],c=$y(s,a,r);return a.length<2?r:c+l(a)}var bI=function(s){var l=s.cache,r=s.serializedArr;return n0(function(){for(var a=0;a<r.length;a++)Ky(l,r[a],!1)}),null},xI=r0(function(s,l){var r=[],a=function(){for(var y=arguments.length,w=new Array(y),b=0;b<y;b++)w[b]=arguments[b];var S=kh(w,l.registered);return r.push(S),Ph(l,S,!1),l.key+"-"+S.name},c=function(){for(var y=arguments.length,w=new Array(y),b=0;b<y;b++)w[b]=arguments[b];return wI(l.registered,a,yI(w))},f={css:a,cx:c,theme:Ae(o0)},g=s.children(f);return I(ae,null,I(bI,{cache:l,serializedArr:r}),g)});function SI(s,l){return l||(l=s.slice(0)),Object.freeze(Object.defineProperties(s,{raw:{value:Object.freeze(l)}}))}function Dh(s,l){if(s==null)return{};var r={},a=Object.keys(s),c,f;for(f=0;f<a.length;f++)c=a[f],!(l.indexOf(c)>=0)&&(r[c]=s[c]);return r}function ys(s,l){if(s==null)return{};var r=Dh(s,l),a,c;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(s);for(c=0;c<f.length;c++)a=f[c],!(l.indexOf(a)>=0)&&(!Object.prototype.propertyIsEnumerable.call(s,a)||(r[a]=s[a]))}return r}function ws(s){return ws=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},ws(s)}var s0={};Object.defineProperty(s0,"__esModule",{value:!0});var Ih=Object.assign||function(s){for(var l=1;l<arguments.length;l++){var r=arguments[l];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},a0=function(){function s(l,r){for(var a=0;a<r.length;a++){var c=r[a];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(l,c.key,c)}}return function(l,r,a){return r&&s(l.prototype,r),a&&s(l,a),l}}(),l0=er,Da=u0(l0),EI=tr.exports,qn=u0(EI);function u0(s){return s&&s.__esModule?s:{default:s}}function TI(s,l){var r={};for(var a in s)l.indexOf(a)>=0||!Object.prototype.hasOwnProperty.call(s,a)||(r[a]=s[a]);return r}function CI(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")}function PI(s,l){if(!s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:s}function _I(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(s,l):s.__proto__=l)}var c0={position:"absolute",top:0,left:0,visibility:"hidden",height:0,overflow:"scroll",whiteSpace:"pre"},kI=["extraWidth","injectStyles","inputClassName","inputRef","inputStyle","minWidth","onAutosize","placeholderIsMinWidth"],RI=function(s){return kI.forEach(function(l){return delete s[l]}),s},d0=function(s,l){l.style.fontSize=s.fontSize,l.style.fontFamily=s.fontFamily,l.style.fontWeight=s.fontWeight,l.style.fontStyle=s.fontStyle,l.style.letterSpacing=s.letterSpacing,l.style.textTransform=s.textTransform},h0=typeof window<"u"&&window.navigator?/MSIE |Trident\/|Edge\//.test(window.navigator.userAgent):!1,p0=function(){return h0?"_"+Math.random().toString(36).substr(2,12):void 0},Mh=function(s){_I(l,s),a0(l,null,[{key:"getDerivedStateFromProps",value:function(r,a){var c=r.id;return c!==a.prevId?{inputId:c||p0(),prevId:c}:null}}]);function l(r){CI(this,l);var a=PI(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,r));return a.inputRef=function(c){a.input=c,typeof a.props.inputRef=="function"&&a.props.inputRef(c)},a.placeHolderSizerRef=function(c){a.placeHolderSizer=c},a.sizerRef=function(c){a.sizer=c},a.state={inputWidth:r.minWidth,inputId:r.id||p0(),prevId:r.id},a}return a0(l,[{key:"componentDidMount",value:function(){this.mounted=!0,this.copyInputStyles(),this.updateInputWidth()}},{key:"componentDidUpdate",value:function(r,a){a.inputWidth!==this.state.inputWidth&&typeof this.props.onAutosize=="function"&&this.props.onAutosize(this.state.inputWidth),this.updateInputWidth()}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"copyInputStyles",value:function(){if(!(!this.mounted||!window.getComputedStyle)){var r=this.input&&window.getComputedStyle(this.input);!r||(d0(r,this.sizer),this.placeHolderSizer&&d0(r,this.placeHolderSizer))}}},{key:"updateInputWidth",value:function(){if(!(!this.mounted||!this.sizer||typeof this.sizer.scrollWidth>"u")){var r=void 0;this.props.placeholder&&(!this.props.value||this.props.value&&this.props.placeholderIsMinWidth)?r=Math.max(this.sizer.scrollWidth,this.placeHolderSizer.scrollWidth)+2:r=this.sizer.scrollWidth+2;var a=this.props.type==="number"&&this.props.extraWidth===void 0?16:parseInt(this.props.extraWidth)||0;r+=a,r<this.props.minWidth&&(r=this.props.minWidth),r!==this.state.inputWidth&&this.setState({inputWidth:r})}}},{key:"getInput",value:function(){return this.input}},{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"select",value:function(){this.input.select()}},{key:"renderStyles",value:function(){var r=this.props.injectStyles;return h0&&r?Da.default.createElement("style",{dangerouslySetInnerHTML:{__html:"input#"+this.state.inputId+"::-ms-clear {display: none;}"}}):null}},{key:"render",value:function(){var r=[this.props.defaultValue,this.props.value,""].reduce(function(g,y){return g??y}),a=Ih({},this.props.style);a.display||(a.display="inline-block");var c=Ih({boxSizing:"content-box",width:this.state.inputWidth+"px"},this.props.inputStyle),f=TI(this.props,[]);return RI(f),f.className=this.props.inputClassName,f.id=this.state.inputId,f.style=c,Da.default.createElement("div",{className:this.props.className,style:a},this.renderStyles(),Da.default.createElement("input",Ih({},f,{ref:this.inputRef})),Da.default.createElement("div",{ref:this.sizerRef,style:c0},r),this.props.placeholder?Da.default.createElement("div",{ref:this.placeHolderSizerRef,style:c0},this.props.placeholder):null)}}]),l}(l0.Component);Mh.propTypes={className:qn.default.string,defaultValue:qn.default.any,extraWidth:qn.default.oneOfType([qn.default.number,qn.default.string]),id:qn.default.string,injectStyles:qn.default.bool,inputClassName:qn.default.string,inputRef:qn.default.func,inputStyle:qn.default.object,minWidth:qn.default.oneOfType([qn.default.number,qn.default.string]),onAutosize:qn.default.func,onChange:qn.default.func,placeholder:qn.default.string,placeholderIsMinWidth:qn.default.bool,style:qn.default.object,value:qn.default.any},Mh.defaultProps={minWidth:1,injectStyles:!0};var OI=s0.default=Mh;function Ru(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")}function AI(s,l){if(ws(s)!=="object"||s===null)return s;var r=s[Symbol.toPrimitive];if(r!==void 0){var a=r.call(s,l);if(ws(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(s)}function f0(s){var l=AI(s,"string");return ws(l)==="symbol"?l:String(l)}function m0(s,l){for(var r=0;r<l.length;r++){var a=l[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(s,f0(a.key),a)}}function Ou(s,l,r){return l&&m0(s.prototype,l),r&&m0(s,r),Object.defineProperty(s,"prototype",{writable:!1}),s}function Au(s,l){return Au=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Au(s,l)}function Du(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),l&&Au(s,l)}function kr(s,l,r){return l=f0(l),l in s?Object.defineProperty(s,l,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[l]=r,s}function DI(s,l,r){return l in s?Object.defineProperty(s,l,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[l]=r,s}function g0(s,l){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(s);l&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(s,c).enumerable})),r.push.apply(r,a)}return r}function oi(s){for(var l=1;l<arguments.length;l++){var r=arguments[l]!=null?arguments[l]:{};l%2?g0(Object(r),!0).forEach(function(a){DI(s,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):g0(Object(r)).forEach(function(a){Object.defineProperty(s,a,Object.getOwnPropertyDescriptor(r,a))})}return s}function Iu(s){return Iu=Object.setPrototypeOf?Object.getPrototypeOf:function(l){return l.__proto__||Object.getPrototypeOf(l)},Iu(s)}function II(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function MI(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function LI(s,l){return l&&(typeof l=="object"||typeof l=="function")?l:MI(s)}function Mu(s){var l=II();return function(){var r=Iu(s),a;if(l){var c=Iu(this).constructor;a=Reflect.construct(r,arguments,c)}else a=r.apply(this,arguments);return LI(this,a)}}var Lu=function(){};function NI(s,l){return l?l[0]==="-"?s+l:s+"__"+l:s}function zI(s,l,r){var a=[r];if(l&&s)for(var c in l)l.hasOwnProperty(c)&&l[c]&&a.push("".concat(NI(s,c)));return a.filter(function(f){return f}).map(function(f){return String(f).trim()}).join(" ")}var v0=function(s){return Array.isArray(s)?s.filter(Boolean):ws(s)==="object"&&s!==null?[s]:[]},y0=function(s){s.className,s.clearValue,s.cx,s.getStyles,s.getValue,s.hasValue,s.isMulti,s.isRtl,s.options,s.selectOption,s.selectProps,s.setValue,s.theme;var l=ys(s,["className","clearValue","cx","getStyles","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"]);return oi({},l)};function Lh(s){return[document.documentElement,document.body,window].indexOf(s)>-1}function w0(s){return Lh(s)?window.pageYOffset:s.scrollTop}function Nu(s,l){if(Lh(s)){window.scrollTo(0,l);return}s.scrollTop=l}function jI(s){var l=getComputedStyle(s),r=l.position==="absolute",a=/(auto|scroll)/,c=document.documentElement;if(l.position==="fixed")return c;for(var f=s;f=f.parentElement;)if(l=getComputedStyle(f),!(r&&l.position==="static")&&a.test(l.overflow+l.overflowY+l.overflowX))return f;return c}function HI(s,l,r,a){return r*((s=s/a-1)*s*s+1)+l}function zu(s,l){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Lu,c=w0(s),f=l-c,g=10,y=0;function w(){y+=g;var b=HI(y,c,f,r);Nu(s,b),y<r?window.requestAnimationFrame(w):a(s)}w()}function FI(s,l){var r=s.getBoundingClientRect(),a=l.getBoundingClientRect(),c=l.offsetHeight/3;a.bottom+c>r.bottom?Nu(s,Math.min(l.offsetTop+l.clientHeight-s.offsetHeight+c,s.scrollHeight)):a.top-c<r.top&&Nu(s,Math.max(l.offsetTop-c,0))}function BI(s){var l=s.getBoundingClientRect();return{bottom:l.bottom,height:l.height,left:l.left,right:l.right,top:l.top,width:l.width}}function b0(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function UI(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var x0=!1,WI={get passive(){return x0=!0}},ju=typeof window<"u"?window:{};ju.addEventListener&&ju.removeEventListener&&(ju.addEventListener("p",Lu,WI),ju.removeEventListener("p",Lu,!1));var VI=x0;function GI(s){var l=s.maxHeight,r=s.menuEl,a=s.minHeight,c=s.placement,f=s.shouldScroll,g=s.isFixedPosition,y=s.theme,w=y.spacing,b=jI(r),S={placement:"bottom",maxHeight:l};if(!r||!r.offsetParent)return S;var R=b.getBoundingClientRect(),A=R.height,H=r.getBoundingClientRect(),V=H.bottom,oe=H.height,ne=H.top,ue=r.offsetParent.getBoundingClientRect(),M=ue.top,re=window.innerHeight,ge=w0(b),pe=parseInt(getComputedStyle(r).marginBottom,10),Ee=parseInt(getComputedStyle(r).marginTop,10),Ce=M-Ee,Ze=re-ne,Ke=Ce+ge,ut=A-ge-ne,pt=V-re+ge+pe,ct=ge+ne-Ee,_t=160;switch(c){case"auto":case"bottom":if(Ze>=oe)return{placement:"bottom",maxHeight:l};if(ut>=oe&&!g)return f&&zu(b,pt,_t),{placement:"bottom",maxHeight:l};if(!g&&ut>=a||g&&Ze>=a){f&&zu(b,pt,_t);var Ct=g?Ze-pe:ut-pe;return{placement:"bottom",maxHeight:Ct}}if(c==="auto"||g){var Wt=l,Ut=g?Ce:Ke;return Ut>=a&&(Wt=Math.min(Ut-pe-w.controlHeight,l)),{placement:"top",maxHeight:Wt}}if(c==="bottom")return f&&Nu(b,pt),{placement:"bottom",maxHeight:l};break;case"top":if(Ce>=oe)return{placement:"top",maxHeight:l};if(Ke>=oe&&!g)return f&&zu(b,ct,_t),{placement:"top",maxHeight:l};if(!g&&Ke>=a||g&&Ce>=a){var Zt=l;return(!g&&Ke>=a||g&&Ce>=a)&&(Zt=g?Ce-Ee:Ke-Ee),f&&zu(b,ct,_t),{placement:"top",maxHeight:Zt}}return{placement:"bottom",maxHeight:l};default:throw new Error('Invalid placement provided "'.concat(c,'".'))}return S}function qI(s){var l={bottom:"top",top:"bottom"};return s?l[s]:"bottom"}var Nh=function(s){return s==="auto"?"bottom":s},ZI=function(s){var l,r=s.placement,a=s.theme,c=a.borderRadius,f=a.spacing,g=a.colors;return l={label:"menu"},kr(l,qI(r),"100%"),kr(l,"backgroundColor",g.neutral0),kr(l,"borderRadius",c),kr(l,"boxShadow","0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)"),kr(l,"marginBottom",f.menuGutter),kr(l,"marginTop",f.menuGutter),kr(l,"position","absolute"),kr(l,"width","100%"),kr(l,"zIndex",1),l},S0=Bt({getPortalPlacement:null}),E0=function(s){Du(r,s);var l=Mu(r);function r(){var a;Ru(this,r);for(var c=arguments.length,f=new Array(c),g=0;g<c;g++)f[g]=arguments[g];return a=l.call.apply(l,[this].concat(f)),a.state={maxHeight:a.props.maxMenuHeight,placement:null},a.getPlacement=function(y){var w=a.props,b=w.minMenuHeight,S=w.maxMenuHeight,R=w.menuPlacement,A=w.menuPosition,H=w.menuShouldScrollIntoView,V=w.theme;if(y){var oe=A==="fixed",ne=H&&!oe,ue=GI({maxHeight:S,menuEl:y,minHeight:b,placement:R,shouldScroll:ne,isFixedPosition:oe,theme:V}),M=a.context.getPortalPlacement;M&&M(ue),a.setState(ue)}},a.getUpdatedProps=function(){var y=a.props.menuPlacement,w=a.state.placement||Nh(y);return oi(oi({},a.props),{},{placement:w,maxHeight:a.state.maxHeight})},a}return Ou(r,[{key:"render",value:function(){var a=this.props.children;return a({ref:this.getPlacement,placerProps:this.getUpdatedProps()})}}]),r}(te);E0.contextType=S0;var XI=function(s){var l=s.children,r=s.className,a=s.cx,c=s.getStyles,f=s.innerRef,g=s.innerProps;return jt("div",zt({css:c("menu",s),className:a({menu:!0},r),ref:f},g),l)},YI=function(s){var l=s.maxHeight,r=s.theme.spacing.baseUnit;return{maxHeight:l,overflowY:"auto",paddingBottom:r,paddingTop:r,position:"relative",WebkitOverflowScrolling:"touch"}},$I=function(s){var l=s.children,r=s.className,a=s.cx,c=s.getStyles,f=s.innerProps,g=s.innerRef,y=s.isMulti;return jt("div",zt({css:c("menuList",s),className:a({"menu-list":!0,"menu-list--is-multi":y},r),ref:g},f),l)},T0=function(s){var l=s.theme,r=l.spacing.baseUnit,a=l.colors;return{color:a.neutral40,padding:"".concat(r*2,"px ").concat(r*3,"px"),textAlign:"center"}},KI=T0,QI=T0,C0=function(s){var l=s.children,r=s.className,a=s.cx,c=s.getStyles,f=s.innerProps;return jt("div",zt({css:c("noOptionsMessage",s),className:a({"menu-notice":!0,"menu-notice--no-options":!0},r)},f),l)};C0.defaultProps={children:"No options"};var P0=function(s){var l=s.children,r=s.className,a=s.cx,c=s.getStyles,f=s.innerProps;return jt("div",zt({css:c("loadingMessage",s),className:a({"menu-notice":!0,"menu-notice--loading":!0},r)},f),l)};P0.defaultProps={children:"Loading..."};var JI=function(s){var l=s.rect,r=s.offset,a=s.position;return{left:l.left,position:a,top:r,width:l.width,zIndex:1}},eM=function(s){Du(r,s);var l=Mu(r);function r(){var a;Ru(this,r);for(var c=arguments.length,f=new Array(c),g=0;g<c;g++)f[g]=arguments[g];return a=l.call.apply(l,[this].concat(f)),a.state={placement:null},a.getPortalPlacement=function(y){var w=y.placement,b=Nh(a.props.menuPlacement);w!==b&&a.setState({placement:w})},a}return Ou(r,[{key:"render",value:function(){var a=this.props,c=a.appendTo,f=a.children,g=a.className,y=a.controlElement,w=a.cx,b=a.innerProps,S=a.menuPlacement,R=a.menuPosition,A=a.getStyles,H=R==="fixed";if(!c&&!H||!y)return null;var V=this.state.placement||Nh(S),oe=BI(y),ne=H?0:window.pageYOffset,ue=oe[V]+ne,M={offset:ue,position:R,rect:oe},re=jt("div",zt({css:A("menuPortal",M),className:w({"menu-portal":!0},g)},b),f);return jt(S0.Provider,{value:{getPortalPlacement:this.getPortalPlacement}},c?Xo(re,c):re)}}]),r}(te),tM=function(s){var l=s.isDisabled,r=s.isRtl;return{label:"container",direction:r?"rtl":null,pointerEvents:l?"none":null,position:"relative"}},nM=function(s){var l=s.children,r=s.className,a=s.cx,c=s.getStyles,f=s.innerProps,g=s.isDisabled,y=s.isRtl;return jt("div",zt({css:c("container",s),className:a({"--is-disabled":g,"--is-rtl":y},r)},f),l)},iM=function(s){var l=s.theme.spacing;return{alignItems:"center",display:"flex",flex:1,flexWrap:"wrap",padding:"".concat(l.baseUnit/2,"px ").concat(l.baseUnit*2,"px"),WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"}},rM=function(s){var l=s.children,r=s.className,a=s.cx,c=s.innerProps,f=s.isMulti,g=s.getStyles,y=s.hasValue;return jt("div",zt({css:g("valueContainer",s),className:a({"value-container":!0,"value-container--is-multi":f,"value-container--has-value":y},r)},c),l)},oM=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},sM=function(s){var l=s.children,r=s.className,a=s.cx,c=s.innerProps,f=s.getStyles;return jt("div",zt({css:f("indicatorsContainer",s),className:a({indicators:!0},r)},c),l)},_0,aM={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},k0=function(s){var l=s.size,r=ys(s,["size"]);return jt("svg",zt({height:l,width:l,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:aM},r))},zh=function(s){return jt(k0,zt({size:20},s),jt("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},R0=function(s){return jt(k0,zt({size:20},s),jt("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},O0=function(s){var l=s.isFocused,r=s.theme,a=r.spacing.baseUnit,c=r.colors;return{label:"indicatorContainer",color:l?c.neutral60:c.neutral20,display:"flex",padding:a*2,transition:"color 150ms",":hover":{color:l?c.neutral80:c.neutral40}}},lM=O0,uM=function(s){var l=s.children,r=s.className,a=s.cx,c=s.getStyles,f=s.innerProps;return jt("div",zt({css:c("dropdownIndicator",s),className:a({indicator:!0,"dropdown-indicator":!0},r)},f),l||jt(R0,null))},cM=O0,dM=function(s){var l=s.children,r=s.className,a=s.cx,c=s.getStyles,f=s.innerProps;return jt("div",zt({css:c("clearIndicator",s),className:a({indicator:!0,"clear-indicator":!0},r)},f),l||jt(zh,null))},hM=function(s){var l=s.isDisabled,r=s.theme,a=r.spacing.baseUnit,c=r.colors;return{label:"indicatorSeparator",alignSelf:"stretch",backgroundColor:l?c.neutral10:c.neutral20,marginBottom:a*2,marginTop:a*2,width:1}},pM=function(s){var l=s.className,r=s.cx,a=s.getStyles,c=s.innerProps;return jt("span",zt({},c,{css:a("indicatorSeparator",s),className:r({"indicator-separator":!0},l)}))},fM=vI(_0||(_0=SI([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),mM=function(s){var l=s.isFocused,r=s.size,a=s.theme,c=a.colors,f=a.spacing.baseUnit;return{label:"loadingIndicator",color:l?c.neutral60:c.neutral20,display:"flex",padding:f*2,transition:"color 150ms",alignSelf:"center",fontSize:r,lineHeight:1,marginRight:r,textAlign:"center",verticalAlign:"middle"}},jh=function(s){var l=s.delay,r=s.offset;return jt("span",{css:Ah({animation:"".concat(fM," 1s ease-in-out ").concat(l,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:r?"1em":null,height:"1em",verticalAlign:"top",width:"1em"},"","")})},A0=function(s){var l=s.className,r=s.cx,a=s.getStyles,c=s.innerProps,f=s.isRtl;return jt("div",zt({css:a("loadingIndicator",s),className:r({indicator:!0,"loading-indicator":!0},l)},c),jt(jh,{delay:0,offset:f}),jt(jh,{delay:160,offset:!0}),jt(jh,{delay:320,offset:!f}))};A0.defaultProps={size:4};var gM=function(s){var l=s.isDisabled,r=s.isFocused,a=s.theme,c=a.colors,f=a.borderRadius,g=a.spacing;return{label:"control",alignItems:"center",backgroundColor:l?c.neutral5:c.neutral0,borderColor:l?c.neutral10:r?c.primary:c.neutral20,borderRadius:f,borderStyle:"solid",borderWidth:1,boxShadow:r?"0 0 0 1px ".concat(c.primary):null,cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:g.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms","&:hover":{borderColor:r?c.primary:c.neutral30}}},vM=function(s){var l=s.children,r=s.cx,a=s.getStyles,c=s.className,f=s.isDisabled,g=s.isFocused,y=s.innerRef,w=s.innerProps,b=s.menuIsOpen;return jt("div",zt({ref:y,css:a("control",s),className:r({control:!0,"control--is-disabled":f,"control--is-focused":g,"control--menu-is-open":b},c)},w),l)},yM=function(s){var l=s.theme.spacing;return{paddingBottom:l.baseUnit*2,paddingTop:l.baseUnit*2}},wM=function(s){var l=s.children,r=s.className,a=s.cx,c=s.getStyles,f=s.Heading,g=s.headingProps,y=s.innerProps,w=s.label,b=s.theme,S=s.selectProps;return jt("div",zt({css:c("group",s),className:a({group:!0},r)},y),jt(f,zt({},g,{selectProps:S,theme:b,getStyles:c,cx:a}),w),jt("div",null,l))},bM=function(s){var l=s.theme.spacing;return{label:"group",color:"#999",cursor:"default",display:"block",fontSize:"75%",fontWeight:"500",marginBottom:"0.25em",paddingLeft:l.baseUnit*3,paddingRight:l.baseUnit*3,textTransform:"uppercase"}},xM=function(s){var l=s.getStyles,r=s.cx,a=s.className,c=y0(s);c.data;var f=ys(c,["data"]);return jt("div",zt({css:l("groupHeading",s),className:r({"group-heading":!0},a)},f))},SM=function(s){var l=s.isDisabled,r=s.theme,a=r.spacing,c=r.colors;return{margin:a.baseUnit/2,paddingBottom:a.baseUnit/2,paddingTop:a.baseUnit/2,visibility:l?"hidden":"visible",color:c.neutral80}},EM=function(s){return{label:"input",background:0,border:0,fontSize:"inherit",opacity:s?0:1,outline:0,padding:0,color:"inherit"}},TM=function(s){var l=s.className,r=s.cx,a=s.getStyles,c=y0(s),f=c.innerRef,g=c.isDisabled,y=c.isHidden,w=ys(c,["innerRef","isDisabled","isHidden"]);return jt("div",{css:a("input",s)},jt(OI,zt({className:r({input:!0},l),inputRef:f,inputStyle:EM(y),disabled:g},w)))},CM=function(s){var l=s.theme,r=l.spacing,a=l.borderRadius,c=l.colors;return{label:"multiValue",backgroundColor:c.neutral10,borderRadius:a/2,display:"flex",margin:r.baseUnit/2,minWidth:0}},PM=function(s){var l=s.theme,r=l.borderRadius,a=l.colors,c=s.cropWithEllipsis;return{borderRadius:r/2,color:a.neutral80,fontSize:"85%",overflow:"hidden",padding:3,paddingLeft:6,textOverflow:c?"ellipsis":null,whiteSpace:"nowrap"}},_M=function(s){var l=s.theme,r=l.spacing,a=l.borderRadius,c=l.colors,f=s.isFocused;return{alignItems:"center",borderRadius:a/2,backgroundColor:f&&c.dangerLight,display:"flex",paddingLeft:r.baseUnit,paddingRight:r.baseUnit,":hover":{backgroundColor:c.dangerLight,color:c.danger}}},D0=function(s){var l=s.children,r=s.innerProps;return jt("div",r,l)},kM=D0,RM=D0;function OM(s){var l=s.children,r=s.innerProps;return jt("div",r,l||jt(zh,{size:14}))}var I0=function(s){var l=s.children,r=s.className,a=s.components,c=s.cx,f=s.data,g=s.getStyles,y=s.innerProps,w=s.isDisabled,b=s.removeProps,S=s.selectProps,R=a.Container,A=a.Label,H=a.Remove;return jt(xI,null,function(V){var oe=V.css,ne=V.cx;return jt(R,{data:f,innerProps:oi({className:ne(oe(g("multiValue",s)),c({"multi-value":!0,"multi-value--is-disabled":w},r))},y),selectProps:S},jt(A,{data:f,innerProps:{className:ne(oe(g("multiValueLabel",s)),c({"multi-value__label":!0},r))},selectProps:S},l),jt(H,{data:f,innerProps:oi({className:ne(oe(g("multiValueRemove",s)),c({"multi-value__remove":!0},r))},b),selectProps:S}))})};I0.defaultProps={cropWithEllipsis:!0};var AM=function(s){var l=s.isDisabled,r=s.isFocused,a=s.isSelected,c=s.theme,f=c.spacing,g=c.colors;return{label:"option",backgroundColor:a?g.primary:r?g.primary25:"transparent",color:l?g.neutral20:a?g.neutral0:"inherit",cursor:"default",display:"block",fontSize:"inherit",padding:"".concat(f.baseUnit*2,"px ").concat(f.baseUnit*3,"px"),width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)",":active":{backgroundColor:!l&&(a?g.primary:g.primary50)}}},DM=function(s){var l=s.children,r=s.className,a=s.cx,c=s.getStyles,f=s.isDisabled,g=s.isFocused,y=s.isSelected,w=s.innerRef,b=s.innerProps;return jt("div",zt({css:c("option",s),className:a({option:!0,"option--is-disabled":f,"option--is-focused":g,"option--is-selected":y},r),ref:w},b),l)},IM=function(s){var l=s.theme,r=l.spacing,a=l.colors;return{label:"placeholder",color:a.neutral50,marginLeft:r.baseUnit/2,marginRight:r.baseUnit/2,position:"absolute",top:"50%",transform:"translateY(-50%)"}},MM=function(s){var l=s.children,r=s.className,a=s.cx,c=s.getStyles,f=s.innerProps;return jt("div",zt({css:c("placeholder",s),className:a({placeholder:!0},r)},f),l)},LM=function(s){var l=s.isDisabled,r=s.theme,a=r.spacing,c=r.colors;return{label:"singleValue",color:l?c.neutral40:c.neutral80,marginLeft:a.baseUnit/2,marginRight:a.baseUnit/2,maxWidth:"calc(100% - ".concat(a.baseUnit*2,"px)"),overflow:"hidden",position:"absolute",textOverflow:"ellipsis",whiteSpace:"nowrap",top:"50%",transform:"translateY(-50%)"}},NM=function(s){var l=s.children,r=s.className,a=s.cx,c=s.getStyles,f=s.isDisabled,g=s.innerProps;return jt("div",zt({css:c("singleValue",s),className:a({"single-value":!0,"single-value--is-disabled":f},r)},g),l)},zM={ClearIndicator:dM,Control:vM,DropdownIndicator:uM,DownChevron:R0,CrossIcon:zh,Group:wM,GroupHeading:xM,IndicatorsContainer:sM,IndicatorSeparator:pM,Input:TM,LoadingIndicator:A0,Menu:XI,MenuList:$I,MenuPortal:eM,LoadingMessage:P0,NoOptionsMessage:C0,MultiValue:I0,MultiValueContainer:kM,MultiValueLabel:RM,MultiValueRemove:OM,Option:DM,Placeholder:MM,SelectContainer:nM,SingleValue:NM,ValueContainer:rM},jM=function(s){return oi(oi({},zM),s.components)};function Hh(s,l){(l==null||l>s.length)&&(l=s.length);for(var r=0,a=new Array(l);r<l;r++)a[r]=s[r];return a}function HM(s){if(Array.isArray(s))return Hh(s)}function FM(s){if(typeof Symbol<"u"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}function BM(s,l){if(s){if(typeof s=="string")return Hh(s,l);var r=Object.prototype.toString.call(s).slice(8,-1);if(r==="Object"&&s.constructor&&(r=s.constructor.name),r==="Map"||r==="Set")return Array.from(s);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Hh(s,l)}}function UM(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function M0(s){return HM(s)||FM(s)||BM(s)||UM()}var L0=Number.isNaN||function(s){return typeof s=="number"&&s!==s};function WM(s,l){return!!(s===l||L0(s)&&L0(l))}function VM(s,l){if(s.length!==l.length)return!1;for(var r=0;r<s.length;r++)if(!WM(s[r],l[r]))return!1;return!0}function GM(s,l){l===void 0&&(l=VM);var r,a=[],c,f=!1;function g(){for(var y=[],w=0;w<arguments.length;w++)y[w]=arguments[w];return f&&r===this&&l(y,a)||(c=s.apply(this,y),f=!0,r=this,a=y),c}return g}for(var qM={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},ZM=function(s){return jt("span",zt({css:qM},s))},XM={guidance:function(s){var l=s.isSearchable,r=s.isMulti,a=s.isDisabled,c=s.tabSelectsValue,f=s.context;switch(f){case"menu":return"Use Up and Down to choose options".concat(a?"":", press Enter to select the currently focused option",", press Escape to exit the menu").concat(c?", press Tab to select the option and exit the menu":"",".");case"input":return"".concat(s["aria-label"]||"Select"," is focused ").concat(l?",type to refine list":"",", press Down to open the menu, ").concat(r?" press left to focus selected values":"");case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(s){var l=s.action,r=s.label,a=r===void 0?"":r,c=s.isDisabled;switch(l){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(a,", deselected.");case"select-option":return c?"option ".concat(a," is disabled. Select another option."):"option ".concat(a,", selected.");default:return""}},onFocus:function(s){var l=s.context,r=s.focused,a=r===void 0?{}:r,c=s.options,f=s.label,g=f===void 0?"":f,y=s.selectValue,w=s.isDisabled,b=s.isSelected,S=function(H,V){return H&&H.length?"".concat(H.indexOf(V)+1," of ").concat(H.length):""};if(l==="value"&&y)return"value ".concat(g," focused, ").concat(S(y,a),".");if(l==="menu"){var R=w?" disabled":"",A="".concat(b?"selected":"focused").concat(R);return"option ".concat(g," ").concat(A,", ").concat(S(c,a),".")}return""},onFilter:function(s){var l=s.inputValue,r=s.resultsMessage;return"".concat(r).concat(l?" for search term "+l:"",".")}},YM=function(s){var l=s.ariaSelection,r=s.focusedOption,a=s.focusedValue,c=s.focusableOptions,f=s.isFocused,g=s.selectValue,y=s.selectProps,w=y.ariaLiveMessages,b=y.getOptionLabel,S=y.inputValue,R=y.isMulti,A=y.isOptionDisabled,H=y.isSearchable,V=y.menuIsOpen,oe=y.options,ne=y.screenReaderStatus,ue=y.tabSelectsValue,M=y["aria-label"],re=y["aria-live"],ge=Dt(function(){return oi(oi({},XM),w||{})},[w]),pe=Dt(function(){var ut="";if(l&&ge.onChange){var pt=l.option,ct=l.removedValue,_t=l.value,Ct=function(Zt){return Array.isArray(Zt)?null:Zt},Wt=ct||pt||Ct(_t),Ut=oi({isDisabled:Wt&&A(Wt),label:Wt?b(Wt):""},l);ut=ge.onChange(Ut)}return ut},[l,A,b,ge]),Ee=Dt(function(){var ut="",pt=r||a,ct=!!(r&&g&&g.includes(r));if(pt&&ge.onFocus){var _t={focused:pt,label:b(pt),isDisabled:A(pt),isSelected:ct,options:oe,context:pt===r?"menu":"value",selectValue:g};ut=ge.onFocus(_t)}return ut},[r,a,b,A,ge,oe,g]),Ce=Dt(function(){var ut="";if(V&&oe.length&&ge.onFilter){var pt=ne({count:c.length});ut=ge.onFilter({inputValue:S,resultsMessage:pt})}return ut},[c,S,V,ge,oe,ne]),Ze=Dt(function(){var ut="";if(ge.guidance){var pt=a?"value":V?"menu":"input";ut=ge.guidance({"aria-label":M,context:pt,isDisabled:r&&A(r),isMulti:R,isSearchable:H,tabSelectsValue:ue})}return ut},[M,r,a,R,A,H,V,ge,ue]),Ke="".concat(Ee," ").concat(Ce," ").concat(Ze);return jt(ZM,{"aria-live":re,"aria-atomic":"false","aria-relevant":"additions text"},f&&jt(Me.Fragment,null,jt("span",{id:"aria-selection"},pe),jt("span",{id:"aria-context"},Ke)))},Fh=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],$M=new RegExp("["+Fh.map(function(s){return s.letters}).join("")+"]","g"),N0={},Bh=0;Bh<Fh.length;Bh++)for(var Uh=Fh[Bh],Wh=0;Wh<Uh.letters.length;Wh++)N0[Uh.letters[Wh]]=Uh.base;var z0=function(s){return s.replace($M,function(l){return N0[l]})},KM=GM(z0),j0=function(s){return s.replace(/^\s+|\s+$/g,"")},QM=function(s){return"".concat(s.label," ").concat(s.value)},JM=function(s){return function(l,r){var a=oi({ignoreCase:!0,ignoreAccents:!0,stringify:QM,trim:!0,matchFrom:"any"},s),c=a.ignoreCase,f=a.ignoreAccents,g=a.stringify,y=a.trim,w=a.matchFrom,b=y?j0(r):r,S=y?j0(g(l)):g(l);return c&&(b=b.toLowerCase(),S=S.toLowerCase()),f&&(b=KM(b),S=z0(S)),w==="start"?S.substr(0,b.length)===b:S.indexOf(b)>-1}};function eL(s){s.in,s.out,s.onExited,s.appear,s.enter,s.exit;var l=s.innerRef;s.emotion;var r=ys(s,["in","out","onExited","appear","enter","exit","innerRef","emotion"]);return jt("input",zt({ref:l},r,{css:Ah({label:"dummyInput",background:0,border:0,fontSize:"inherit",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(0)"},"","")}))}var tL=function(s){s.preventDefault(),s.stopPropagation()};function nL(s){var l=s.isEnabled,r=s.onBottomArrive,a=s.onBottomLeave,c=s.onTopArrive,f=s.onTopLeave,g=bt(!1),y=bt(!1),w=bt(0),b=bt(null),S=he(function(ne,ue){if(b.current!==null){var M=b.current,re=M.scrollTop,ge=M.scrollHeight,pe=M.clientHeight,Ee=b.current,Ce=ue>0,Ze=ge-pe-re,Ke=!1;Ze>ue&&g.current&&(a&&a(ne),g.current=!1),Ce&&y.current&&(f&&f(ne),y.current=!1),Ce&&ue>Ze?(r&&!g.current&&r(ne),Ee.scrollTop=ge,Ke=!0,g.current=!0):!Ce&&-ue>re&&(c&&!y.current&&c(ne),Ee.scrollTop=0,Ke=!0,y.current=!0),Ke&&tL(ne)}},[]),R=he(function(ne){S(ne,ne.deltaY)},[S]),A=he(function(ne){w.current=ne.changedTouches[0].clientY},[]),H=he(function(ne){var ue=w.current-ne.changedTouches[0].clientY;S(ne,ue)},[S]),V=he(function(ne){if(ne){var ue=VI?{passive:!1}:!1;typeof ne.addEventListener=="function"&&ne.addEventListener("wheel",R,ue),typeof ne.addEventListener=="function"&&ne.addEventListener("touchstart",A,ue),typeof ne.addEventListener=="function"&&ne.addEventListener("touchmove",H,ue)}},[H,A,R]),oe=he(function(ne){!ne||(typeof ne.removeEventListener=="function"&&ne.removeEventListener("wheel",R,!1),typeof ne.removeEventListener=="function"&&ne.removeEventListener("touchstart",A,!1),typeof ne.removeEventListener=="function"&&ne.removeEventListener("touchmove",H,!1))},[H,A,R]);return Qe(function(){if(l){var ne=b.current;return V(ne),function(){oe(ne)}}},[l,V,oe]),function(ne){b.current=ne}}var H0=["boxSizing","height","overflow","paddingRight","position"],F0={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function B0(s){s.preventDefault()}function U0(s){s.stopPropagation()}function W0(){var s=this.scrollTop,l=this.scrollHeight,r=s+this.offsetHeight;s===0?this.scrollTop=1:r===l&&(this.scrollTop=s-1)}function V0(){return"ontouchstart"in window||navigator.maxTouchPoints}var G0=!!(typeof window<"u"&&window.document&&window.document.createElement),Ia=0,bs={capture:!1,passive:!1};function iL(s){var l=s.isEnabled,r=s.accountForScrollbars,a=r===void 0?!0:r,c=bt({}),f=bt(null),g=he(function(w){if(G0){var b=document.body,S=b&&b.style;if(a&&H0.forEach(function(V){var oe=S&&S[V];c.current[V]=oe}),a&&Ia<1){var R=parseInt(c.current.paddingRight,10)||0,A=document.body?document.body.clientWidth:0,H=window.innerWidth-A+R||0;Object.keys(F0).forEach(function(V){var oe=F0[V];S&&(S[V]=oe)}),S&&(S.paddingRight="".concat(H,"px"))}b&&V0()&&(b.addEventListener("touchmove",B0,bs),w&&(w.addEventListener("touchstart",W0,bs),w.addEventListener("touchmove",U0,bs))),Ia+=1}},[]),y=he(function(w){if(G0){var b=document.body,S=b&&b.style;Ia=Math.max(Ia-1,0),a&&Ia<1&&H0.forEach(function(R){var A=c.current[R];S&&(S[R]=A)}),b&&V0()&&(b.removeEventListener("touchmove",B0,bs),w&&(w.removeEventListener("touchstart",W0,bs),w.removeEventListener("touchmove",U0,bs)))}},[]);return Qe(function(){if(l){var w=f.current;return g(w),function(){y(w)}}},[l,g,y]),function(w){f.current=w}}var rL=function(){return document.activeElement&&document.activeElement.blur()},oL={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function sL(s){var l=s.children,r=s.lockEnabled,a=s.captureEnabled,c=a===void 0?!0:a,f=s.onBottomArrive,g=s.onBottomLeave,y=s.onTopArrive,w=s.onTopLeave,b=nL({isEnabled:c,onBottomArrive:f,onBottomLeave:g,onTopArrive:y,onTopLeave:w}),S=iL({isEnabled:r}),R=function(A){b(A),S(A)};return jt(Me.Fragment,null,r&&jt("div",{onClick:rL,css:oL}),l(R))}var aL=function(s){return s.label},lL=function(s){return s.label},uL=function(s){return s.value},cL=function(s){return!!s.isDisabled},dL={clearIndicator:cM,container:tM,control:gM,dropdownIndicator:lM,group:yM,groupHeading:bM,indicatorsContainer:oM,indicatorSeparator:hM,input:SM,loadingIndicator:mM,loadingMessage:QI,menu:ZI,menuList:YI,menuPortal:JI,multiValue:CM,multiValueLabel:PM,multiValueRemove:_M,noOptionsMessage:KI,option:AM,placeholder:IM,singleValue:LM,valueContainer:iM},hL={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},pL=4,q0=4,fL=38,mL=q0*2,gL={baseUnit:q0,controlHeight:fL,menuGutter:mL},Vh={borderRadius:pL,colors:hL,spacing:gL},vL={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:b0(),captureMenuScroll:!b0(),closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:JM(),formatGroupLabel:aL,getOptionLabel:lL,getOptionValue:uL,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:cL,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!UI(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(s){var l=s.count;return"".concat(l," result").concat(l!==1?"s":""," available")},styles:{},tabIndex:"0",tabSelectsValue:!0};function Z0(s,l,r,a){var c=Q0(s,l,r),f=J0(s,l,r),g=K0(s,l),y=Hu(s,l);return{type:"option",data:l,isDisabled:c,isSelected:f,label:g,value:y,index:a}}function X0(s,l){return s.options.map(function(r,a){if(r.options){var c=r.options.map(function(g,y){return Z0(s,g,l,y)}).filter(function(g){return $0(s,g)});return c.length>0?{type:"group",data:r,options:c,index:a}:void 0}var f=Z0(s,r,l,a);return $0(s,f)?f:void 0}).filter(function(r){return!!r})}function Y0(s){return s.reduce(function(l,r){return r.type==="group"?l.push.apply(l,M0(r.options.map(function(a){return a.data}))):l.push(r.data),l},[])}function yL(s,l){return Y0(X0(s,l))}function $0(s,l){var r=s.inputValue,a=r===void 0?"":r,c=l.data,f=l.isSelected,g=l.label,y=l.value;return(!tw(s)||!f)&&ew(s,{label:g,value:y,data:c},a)}function wL(s,l){var r=s.focusedValue,a=s.selectValue,c=a.indexOf(r);if(c>-1){var f=l.indexOf(r);if(f>-1)return r;if(c<l.length)return l[c]}return null}function bL(s,l){var r=s.focusedOption;return r&&l.indexOf(r)>-1?r:l[0]}var K0=function(s,l){return s.getOptionLabel(l)},Hu=function(s,l){return s.getOptionValue(l)};function Q0(s,l,r){return typeof s.isOptionDisabled=="function"?s.isOptionDisabled(l,r):!1}function J0(s,l,r){if(r.indexOf(l)>-1)return!0;if(typeof s.isOptionSelected=="function")return s.isOptionSelected(l,r);var a=Hu(s,l);return r.some(function(c){return Hu(s,c)===a})}function ew(s,l,r){return s.filterOption?s.filterOption(l,r):!0}var tw=function(s){var l=s.hideSelectedOptions,r=s.isMulti;return l===void 0?r:l},xL=1,nw=function(s){Du(r,s);var l=Mu(r);function r(a){var c;return Ru(this,r),c=l.call(this,a),c.state={ariaSelection:null,focusedOption:null,focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0},c.blockOptionHover=!1,c.isComposing=!1,c.commonProps=void 0,c.initialTouchX=0,c.initialTouchY=0,c.instancePrefix="",c.openAfterFocus=!1,c.scrollToFocusedOptionOnUpdate=!1,c.userIsDragging=void 0,c.controlRef=null,c.getControlRef=function(f){c.controlRef=f},c.focusedOptionRef=null,c.getFocusedOptionRef=function(f){c.focusedOptionRef=f},c.menuListRef=null,c.getMenuListRef=function(f){c.menuListRef=f},c.inputRef=null,c.getInputRef=function(f){c.inputRef=f},c.focus=c.focusInput,c.blur=c.blurInput,c.onChange=function(f,g){var y=c.props,w=y.onChange,b=y.name;g.name=b,c.ariaOnChange(f,g),w(f,g)},c.setValue=function(f){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"set-value",y=arguments.length>2?arguments[2]:void 0,w=c.props,b=w.closeMenuOnSelect,S=w.isMulti;c.onInputChange("",{action:"set-value"}),b&&(c.setState({inputIsHiddenAfterUpdate:!S}),c.onMenuClose()),c.setState({clearFocusValueOnUpdate:!0}),c.onChange(f,{action:g,option:y})},c.selectOption=function(f){var g=c.props,y=g.blurInputOnSelect,w=g.isMulti,b=g.name,S=c.state.selectValue,R=w&&c.isOptionSelected(f,S),A=c.isOptionDisabled(f,S);if(R){var H=c.getOptionValue(f);c.setValue(S.filter(function(V){return c.getOptionValue(V)!==H}),"deselect-option",f)}else if(!A)w?c.setValue([].concat(M0(S),[f]),"select-option",f):c.setValue(f,"select-option");else{c.ariaOnChange(f,{action:"select-option",name:b});return}y&&c.blurInput()},c.removeValue=function(f){var g=c.props.isMulti,y=c.state.selectValue,w=c.getOptionValue(f),b=y.filter(function(R){return c.getOptionValue(R)!==w}),S=g?b:b[0]||null;c.onChange(S,{action:"remove-value",removedValue:f}),c.focusInput()},c.clearValue=function(){var f=c.state.selectValue;c.onChange(c.props.isMulti?[]:null,{action:"clear",removedValues:f})},c.popValue=function(){var f=c.props.isMulti,g=c.state.selectValue,y=g[g.length-1],w=g.slice(0,g.length-1),b=f?w:w[0]||null;c.onChange(b,{action:"pop-value",removedValue:y})},c.getValue=function(){return c.state.selectValue},c.cx=function(){for(var f=arguments.length,g=new Array(f),y=0;y<f;y++)g[y]=arguments[y];return zI.apply(void 0,[c.props.classNamePrefix].concat(g))},c.getOptionLabel=function(f){return K0(c.props,f)},c.getOptionValue=function(f){return Hu(c.props,f)},c.getStyles=function(f,g){var y=dL[f](g);y.boxSizing="border-box";var w=c.props.styles[f];return w?w(y,g):y},c.getElementId=function(f){return"".concat(c.instancePrefix,"-").concat(f)},c.getComponents=function(){return jM(c.props)},c.buildCategorizedOptions=function(){return X0(c.props,c.state.selectValue)},c.getCategorizedOptions=function(){return c.props.menuIsOpen?c.buildCategorizedOptions():[]},c.buildFocusableOptions=function(){return Y0(c.buildCategorizedOptions())},c.getFocusableOptions=function(){return c.props.menuIsOpen?c.buildFocusableOptions():[]},c.ariaOnChange=function(f,g){c.setState({ariaSelection:oi({value:f},g)})},c.onMenuMouseDown=function(f){f.button===0&&(f.stopPropagation(),f.preventDefault(),c.focusInput())},c.onMenuMouseMove=function(f){c.blockOptionHover=!1},c.onControlMouseDown=function(f){var g=c.props.openMenuOnClick;c.state.isFocused?c.props.menuIsOpen?f.target.tagName!=="INPUT"&&f.target.tagName!=="TEXTAREA"&&c.onMenuClose():g&&c.openMenu("first"):(g&&(c.openAfterFocus=!0),c.focusInput()),f.target.tagName!=="INPUT"&&f.target.tagName!=="TEXTAREA"&&f.preventDefault()},c.onDropdownIndicatorMouseDown=function(f){if(!(f&&f.type==="mousedown"&&f.button!==0)&&!c.props.isDisabled){var g=c.props,y=g.isMulti,w=g.menuIsOpen;c.focusInput(),w?(c.setState({inputIsHiddenAfterUpdate:!y}),c.onMenuClose()):c.openMenu("first"),f.preventDefault(),f.stopPropagation()}},c.onClearIndicatorMouseDown=function(f){f&&f.type==="mousedown"&&f.button!==0||(c.clearValue(),f.stopPropagation(),c.openAfterFocus=!1,f.type==="touchend"?c.focusInput():setTimeout(function(){return c.focusInput()}))},c.onScroll=function(f){typeof c.props.closeMenuOnScroll=="boolean"?f.target instanceof HTMLElement&&Lh(f.target)&&c.props.onMenuClose():typeof c.props.closeMenuOnScroll=="function"&&c.props.closeMenuOnScroll(f)&&c.props.onMenuClose()},c.onCompositionStart=function(){c.isComposing=!0},c.onCompositionEnd=function(){c.isComposing=!1},c.onTouchStart=function(f){var g=f.touches,y=g&&g.item(0);!y||(c.initialTouchX=y.clientX,c.initialTouchY=y.clientY,c.userIsDragging=!1)},c.onTouchMove=function(f){var g=f.touches,y=g&&g.item(0);if(y){var w=Math.abs(y.clientX-c.initialTouchX),b=Math.abs(y.clientY-c.initialTouchY),S=5;c.userIsDragging=w>S||b>S}},c.onTouchEnd=function(f){c.userIsDragging||(c.controlRef&&!c.controlRef.contains(f.target)&&c.menuListRef&&!c.menuListRef.contains(f.target)&&c.blurInput(),c.initialTouchX=0,c.initialTouchY=0)},c.onControlTouchEnd=function(f){c.userIsDragging||c.onControlMouseDown(f)},c.onClearIndicatorTouchEnd=function(f){c.userIsDragging||c.onClearIndicatorMouseDown(f)},c.onDropdownIndicatorTouchEnd=function(f){c.userIsDragging||c.onDropdownIndicatorMouseDown(f)},c.handleInputChange=function(f){var g=f.currentTarget.value;c.setState({inputIsHiddenAfterUpdate:!1}),c.onInputChange(g,{action:"input-change"}),c.props.menuIsOpen||c.onMenuOpen()},c.onInputFocus=function(f){c.props.onFocus&&c.props.onFocus(f),c.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(c.openAfterFocus||c.props.openMenuOnFocus)&&c.openMenu("first"),c.openAfterFocus=!1},c.onInputBlur=function(f){if(c.menuListRef&&c.menuListRef.contains(document.activeElement)){c.inputRef.focus();return}c.props.onBlur&&c.props.onBlur(f),c.onInputChange("",{action:"input-blur"}),c.onMenuClose(),c.setState({focusedValue:null,isFocused:!1})},c.onOptionHover=function(f){c.blockOptionHover||c.state.focusedOption===f||c.setState({focusedOption:f})},c.shouldHideSelectedOptions=function(){return tw(c.props)},c.onKeyDown=function(f){var g=c.props,y=g.isMulti,w=g.backspaceRemovesValue,b=g.escapeClearsValue,S=g.inputValue,R=g.isClearable,A=g.isDisabled,H=g.menuIsOpen,V=g.onKeyDown,oe=g.tabSelectsValue,ne=g.openMenuOnFocus,ue=c.state,M=ue.focusedOption,re=ue.focusedValue,ge=ue.selectValue;if(!A&&!(typeof V=="function"&&(V(f),f.defaultPrevented))){switch(c.blockOptionHover=!0,f.key){case"ArrowLeft":if(!y||S)return;c.focusValue("previous");break;case"ArrowRight":if(!y||S)return;c.focusValue("next");break;case"Delete":case"Backspace":if(S)return;if(re)c.removeValue(re);else{if(!w)return;y?c.popValue():R&&c.clearValue()}break;case"Tab":if(c.isComposing||f.shiftKey||!H||!oe||!M||ne&&c.isOptionSelected(M,ge))return;c.selectOption(M);break;case"Enter":if(f.keyCode===229)break;if(H){if(!M||c.isComposing)return;c.selectOption(M);break}return;case"Escape":H?(c.setState({inputIsHiddenAfterUpdate:!1}),c.onInputChange("",{action:"menu-close"}),c.onMenuClose()):R&&b&&c.clearValue();break;case" ":if(S)return;if(!H){c.openMenu("first");break}if(!M)return;c.selectOption(M);break;case"ArrowUp":H?c.focusOption("up"):c.openMenu("last");break;case"ArrowDown":H?c.focusOption("down"):c.openMenu("first");break;case"PageUp":if(!H)return;c.focusOption("pageup");break;case"PageDown":if(!H)return;c.focusOption("pagedown");break;case"Home":if(!H)return;c.focusOption("first");break;case"End":if(!H)return;c.focusOption("last");break;default:return}f.preventDefault()}},c.instancePrefix="react-select-"+(c.props.instanceId||++xL),c.state.selectValue=v0(a.value),c}return Ou(r,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput()}},{key:"componentDidUpdate",value:function(a){var c=this.props,f=c.isDisabled,g=c.menuIsOpen,y=this.state.isFocused;(y&&!f&&a.isDisabled||y&&g&&!a.menuIsOpen)&&this.focusInput(),y&&f&&!a.isDisabled&&this.setState({isFocused:!1},this.onMenuClose),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(FI(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close"}),this.props.onMenuClose()}},{key:"onInputChange",value:function(a,c){this.props.onInputChange(a,c)}},{key:"focusInput",value:function(){!this.inputRef||this.inputRef.focus()}},{key:"blurInput",value:function(){!this.inputRef||this.inputRef.blur()}},{key:"openMenu",value:function(a){var c=this,f=this.state,g=f.selectValue,y=f.isFocused,w=this.buildFocusableOptions(),b=a==="first"?0:w.length-1;if(!this.props.isMulti){var S=w.indexOf(g[0]);S>-1&&(b=S)}this.scrollToFocusedOptionOnUpdate=!(y&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:w[b]},function(){return c.onMenuOpen()})}},{key:"focusValue",value:function(a){var c=this.state,f=c.selectValue,g=c.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var y=f.indexOf(g);g||(y=-1);var w=f.length-1,b=-1;if(f.length){switch(a){case"previous":y===0?b=0:y===-1?b=w:b=y-1;break;case"next":y>-1&&y<w&&(b=y+1);break}this.setState({inputIsHidden:b!==-1,focusedValue:f[b]})}}}},{key:"focusOption",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",c=this.props.pageSize,f=this.state.focusedOption,g=this.getFocusableOptions();if(g.length){var y=0,w=g.indexOf(f);f||(w=-1),a==="up"?y=w>0?w-1:g.length-1:a==="down"?y=(w+1)%g.length:a==="pageup"?(y=w-c,y<0&&(y=0)):a==="pagedown"?(y=w+c,y>g.length-1&&(y=g.length-1)):a==="last"&&(y=g.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:g[y],focusedValue:null})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(Vh):oi(oi({},Vh),this.props.theme):Vh}},{key:"getCommonProps",value:function(){var a=this.clearValue,c=this.cx,f=this.getStyles,g=this.getValue,y=this.selectOption,w=this.setValue,b=this.props,S=b.isMulti,R=b.isRtl,A=b.options,H=this.hasValue();return{clearValue:a,cx:c,getStyles:f,getValue:g,hasValue:H,isMulti:S,isRtl:R,options:A,selectOption:y,selectProps:b,setValue:w,theme:this.getTheme()}}},{key:"hasValue",value:function(){var a=this.state.selectValue;return a.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var a=this.props,c=a.isClearable,f=a.isMulti;return c===void 0?f:c}},{key:"isOptionDisabled",value:function(a,c){return Q0(this.props,a,c)}},{key:"isOptionSelected",value:function(a,c){return J0(this.props,a,c)}},{key:"filterOption",value:function(a,c){return ew(this.props,a,c)}},{key:"formatOptionLabel",value:function(a,c){if(typeof this.props.formatOptionLabel=="function"){var f=this.props.inputValue,g=this.state.selectValue;return this.props.formatOptionLabel(a,{context:c,inputValue:f,selectValue:g})}else return this.getOptionLabel(a)}},{key:"formatGroupLabel",value:function(a){return this.props.formatGroupLabel(a)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var a=this.props,c=a.isDisabled,f=a.isSearchable,g=a.inputId,y=a.inputValue,w=a.tabIndex,b=a.form,S=this.getComponents(),R=S.Input,A=this.state.inputIsHidden,H=this.commonProps,V=g||this.getElementId("input"),oe={"aria-autocomplete":"list","aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"]};return f?Me.createElement(R,zt({},H,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:V,innerRef:this.getInputRef,isDisabled:c,isHidden:A,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:w,form:b,type:"text",value:y},oe)):Me.createElement(eL,zt({id:V,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:Lu,onFocus:this.onInputFocus,readOnly:!0,disabled:c,tabIndex:w,form:b,value:""},oe))}},{key:"renderPlaceholderOrValue",value:function(){var a=this,c=this.getComponents(),f=c.MultiValue,g=c.MultiValueContainer,y=c.MultiValueLabel,w=c.MultiValueRemove,b=c.SingleValue,S=c.Placeholder,R=this.commonProps,A=this.props,H=A.controlShouldRenderValue,V=A.isDisabled,oe=A.isMulti,ne=A.inputValue,ue=A.placeholder,M=this.state,re=M.selectValue,ge=M.focusedValue,pe=M.isFocused;if(!this.hasValue()||!H)return ne?null:Me.createElement(S,zt({},R,{key:"placeholder",isDisabled:V,isFocused:pe}),ue);if(oe){var Ee=re.map(function(Ze,Ke){var ut=Ze===ge;return Me.createElement(f,zt({},R,{components:{Container:g,Label:y,Remove:w},isFocused:ut,isDisabled:V,key:"".concat(a.getOptionValue(Ze)).concat(Ke),index:Ke,removeProps:{onClick:function(){return a.removeValue(Ze)},onTouchEnd:function(){return a.removeValue(Ze)},onMouseDown:function(pt){pt.preventDefault(),pt.stopPropagation()}},data:Ze}),a.formatOptionLabel(Ze,"value"))});return Ee}if(ne)return null;var Ce=re[0];return Me.createElement(b,zt({},R,{data:Ce,isDisabled:V}),this.formatOptionLabel(Ce,"value"))}},{key:"renderClearIndicator",value:function(){var a=this.getComponents(),c=a.ClearIndicator,f=this.commonProps,g=this.props,y=g.isDisabled,w=g.isLoading,b=this.state.isFocused;if(!this.isClearable()||!c||y||!this.hasValue()||w)return null;var S={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return Me.createElement(c,zt({},f,{innerProps:S,isFocused:b}))}},{key:"renderLoadingIndicator",value:function(){var a=this.getComponents(),c=a.LoadingIndicator,f=this.commonProps,g=this.props,y=g.isDisabled,w=g.isLoading,b=this.state.isFocused;if(!c||!w)return null;var S={"aria-hidden":"true"};return Me.createElement(c,zt({},f,{innerProps:S,isDisabled:y,isFocused:b}))}},{key:"renderIndicatorSeparator",value:function(){var a=this.getComponents(),c=a.DropdownIndicator,f=a.IndicatorSeparator;if(!c||!f)return null;var g=this.commonProps,y=this.props.isDisabled,w=this.state.isFocused;return Me.createElement(f,zt({},g,{isDisabled:y,isFocused:w}))}},{key:"renderDropdownIndicator",value:function(){var a=this.getComponents(),c=a.DropdownIndicator;if(!c)return null;var f=this.commonProps,g=this.props.isDisabled,y=this.state.isFocused,w={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return Me.createElement(c,zt({},f,{innerProps:w,isDisabled:g,isFocused:y}))}},{key:"renderMenu",value:function(){var a=this,c=this.getComponents(),f=c.Group,g=c.GroupHeading,y=c.Menu,w=c.MenuList,b=c.MenuPortal,S=c.LoadingMessage,R=c.NoOptionsMessage,A=c.Option,H=this.commonProps,V=this.state.focusedOption,oe=this.props,ne=oe.captureMenuScroll,ue=oe.inputValue,M=oe.isLoading,re=oe.loadingMessage,ge=oe.minMenuHeight,pe=oe.maxMenuHeight,Ee=oe.menuIsOpen,Ce=oe.menuPlacement,Ze=oe.menuPosition,Ke=oe.menuPortalTarget,ut=oe.menuShouldBlockScroll,pt=oe.menuShouldScrollIntoView,ct=oe.noOptionsMessage,_t=oe.onMenuScrollToTop,Ct=oe.onMenuScrollToBottom;if(!Ee)return null;var Wt=function(Jt,We){var tt=Jt.type,it=Jt.data,nt=Jt.isDisabled,lt=Jt.isSelected,Ot=Jt.label,fn=Jt.value,Dn=V===it,an=nt?void 0:function(){return a.onOptionHover(it)},Gi=nt?void 0:function(){return a.selectOption(it)},Ci="".concat(a.getElementId("option"),"-").concat(We),Li={id:Ci,onClick:Gi,onMouseMove:an,onMouseOver:an,tabIndex:-1};return Me.createElement(A,zt({},H,{innerProps:Li,data:it,isDisabled:nt,isSelected:lt,key:Ci,label:Ot,type:tt,value:fn,isFocused:Dn,innerRef:Dn?a.getFocusedOptionRef:void 0}),a.formatOptionLabel(Jt.data,"menu"))},Ut;if(this.hasOptions())Ut=this.getCategorizedOptions().map(function(Jt){if(Jt.type==="group"){var We=Jt.data,tt=Jt.options,it=Jt.index,nt="".concat(a.getElementId("group"),"-").concat(it),lt="".concat(nt,"-heading");return Me.createElement(f,zt({},H,{key:nt,data:We,options:tt,Heading:g,headingProps:{id:lt,data:Jt.data},label:a.formatGroupLabel(Jt.data)}),Jt.options.map(function(Ot){return Wt(Ot,"".concat(it,"-").concat(Ot.index))}))}else if(Jt.type==="option")return Wt(Jt,"".concat(Jt.index))});else if(M){var Zt=re({inputValue:ue});if(Zt===null)return null;Ut=Me.createElement(S,H,Zt)}else{var ln=ct({inputValue:ue});if(ln===null)return null;Ut=Me.createElement(R,H,ln)}var bn={minMenuHeight:ge,maxMenuHeight:pe,menuPlacement:Ce,menuPosition:Ze,menuShouldScrollIntoView:pt},dt=Me.createElement(E0,zt({},H,bn),function(Jt){var We=Jt.ref,tt=Jt.placerProps,it=tt.placement,nt=tt.maxHeight;return Me.createElement(y,zt({},H,bn,{innerRef:We,innerProps:{onMouseDown:a.onMenuMouseDown,onMouseMove:a.onMenuMouseMove},isLoading:M,placement:it}),Me.createElement(sL,{captureEnabled:ne,onTopArrive:_t,onBottomArrive:Ct,lockEnabled:ut},function(lt){return Me.createElement(w,zt({},H,{innerRef:function(Ot){a.getMenuListRef(Ot),lt(Ot)},isLoading:M,maxHeight:nt,focusedOption:V}),Ut)}))});return Ke||Ze==="fixed"?Me.createElement(b,zt({},H,{appendTo:Ke,controlElement:this.controlRef,menuPlacement:Ce,menuPosition:Ze}),dt):dt}},{key:"renderFormField",value:function(){var a=this,c=this.props,f=c.delimiter,g=c.isDisabled,y=c.isMulti,w=c.name,b=this.state.selectValue;if(!(!w||g))if(y)if(f){var S=b.map(function(H){return a.getOptionValue(H)}).join(f);return Me.createElement("input",{name:w,type:"hidden",value:S})}else{var R=b.length>0?b.map(function(H,V){return Me.createElement("input",{key:"i-".concat(V),name:w,type:"hidden",value:a.getOptionValue(H)})}):Me.createElement("input",{name:w,type:"hidden"});return Me.createElement("div",null,R)}else{var A=b[0]?this.getOptionValue(b[0]):"";return Me.createElement("input",{name:w,type:"hidden",value:A})}}},{key:"renderLiveRegion",value:function(){var a=this.commonProps,c=this.state,f=c.ariaSelection,g=c.focusedOption,y=c.focusedValue,w=c.isFocused,b=c.selectValue,S=this.getFocusableOptions();return Me.createElement(YM,zt({},a,{ariaSelection:f,focusedOption:g,focusedValue:y,isFocused:w,selectValue:b,focusableOptions:S}))}},{key:"render",value:function(){var a=this.getComponents(),c=a.Control,f=a.IndicatorsContainer,g=a.SelectContainer,y=a.ValueContainer,w=this.props,b=w.className,S=w.id,R=w.isDisabled,A=w.menuIsOpen,H=this.state.isFocused,V=this.commonProps=this.getCommonProps();return Me.createElement(g,zt({},V,{className:b,innerProps:{id:S,onKeyDown:this.onKeyDown},isDisabled:R,isFocused:H}),this.renderLiveRegion(),Me.createElement(c,zt({},V,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:R,isFocused:H,menuIsOpen:A}),Me.createElement(y,zt({},V,{isDisabled:R}),this.renderPlaceholderOrValue(),this.renderInput()),Me.createElement(f,zt({},V,{isDisabled:R}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(a,c){var f=c.prevProps,g=c.clearFocusValueOnUpdate,y=c.inputIsHiddenAfterUpdate,w=a.options,b=a.value,S=a.menuIsOpen,R=a.inputValue,A={};if(f&&(b!==f.value||w!==f.options||S!==f.menuIsOpen||R!==f.inputValue)){var H=v0(b),V=S?yL(a,H):[],oe=g?wL(c,H):null,ne=bL(c,V);A={selectValue:H,focusedOption:ne,focusedValue:oe,clearFocusValueOnUpdate:!1}}var ue=y!=null&&a!==f?{inputIsHidden:y,inputIsHiddenAfterUpdate:void 0}:{};return oi(oi(oi({},A),ue),{},{prevProps:a})}}]),r}(te);nw.defaultProps=vL;var SL={defaultInputValue:"",defaultMenuIsOpen:!1,defaultValue:null},EL=function(s){var l,r;return r=l=function(a){Du(f,a);var c=Mu(f);function f(){var g;Ru(this,f);for(var y=arguments.length,w=new Array(y),b=0;b<y;b++)w[b]=arguments[b];return g=c.call.apply(c,[this].concat(w)),g.select=void 0,g.state={inputValue:g.props.inputValue!==void 0?g.props.inputValue:g.props.defaultInputValue,menuIsOpen:g.props.menuIsOpen!==void 0?g.props.menuIsOpen:g.props.defaultMenuIsOpen,value:g.props.value!==void 0?g.props.value:g.props.defaultValue},g.onChange=function(S,R){g.callProp("onChange",S,R),g.setState({value:S})},g.onInputChange=function(S,R){var A=g.callProp("onInputChange",S,R);g.setState({inputValue:A!==void 0?A:S})},g.onMenuOpen=function(){g.callProp("onMenuOpen"),g.setState({menuIsOpen:!0})},g.onMenuClose=function(){g.callProp("onMenuClose"),g.setState({menuIsOpen:!1})},g}return Ou(f,[{key:"focus",value:function(){this.select.focus()}},{key:"blur",value:function(){this.select.blur()}},{key:"getProp",value:function(g){return this.props[g]!==void 0?this.props[g]:this.state[g]}},{key:"callProp",value:function(g){if(typeof this.props[g]=="function"){for(var y,w=arguments.length,b=new Array(w>1?w-1:0),S=1;S<w;S++)b[S-1]=arguments[S];return(y=this.props)[g].apply(y,b)}}},{key:"render",value:function(){var g=this,y=this.props;y.defaultInputValue,y.defaultMenuIsOpen,y.defaultValue;var w=ys(y,["defaultInputValue","defaultMenuIsOpen","defaultValue"]);return Me.createElement(s,zt({},w,{ref:function(b){g.select=b},inputValue:this.getProp("inputValue"),menuIsOpen:this.getProp("menuIsOpen"),onChange:this.onChange,onInputChange:this.onInputChange,onMenuClose:this.onMenuClose,onMenuOpen:this.onMenuOpen,value:this.getProp("value")}))}}]),f}(te),l.defaultProps=SL,r},TL=EL(nw),CL=TL;const Gh=[{value:"assessing",label:"Assessing"},{value:"bookmarking",label:"Bookmarking"},{value:"classifying",label:"Classifying"},{value:"commenting",label:"Commenting"},{value:"describing",label:"Describing"},{value:"editing",label:"Editing"},{value:"highlighting",label:"Highlighting"},{value:"identifying",label:"Identifying"},{value:"linking",label:"Linking"},{value:"moderating",label:"Moderating"},{value:"questioning",label:"Questioning"},{value:"replying",label:"Replying"},{value:"supplementing",label:"Transcription"}];var iw=s=>{const l=s.content?Gh.find(r=>r.value===s.content):null;return Me.createElement("div",{className:"r6o-purposedropdown"},Me.createElement(CL,{value:l,onChange:s.onChange,options:Gh,isDisabled:!s.editable}))};const PL=s=>Me.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1000 940",width:s.width},Me.createElement("metadata",null,"IcoFont Icons"),Me.createElement("title",null,"simple-down"),Me.createElement("glyph",{glyphName:"simple-down",unicode:"",horizAdvX:"1000"}),Me.createElement("path",{fill:"currentColor",d:"M200 392.6l300 300 300-300-85.10000000000002-85.10000000000002-214.89999999999998 214.79999999999995-214.89999999999998-214.89999999999998-85.10000000000002 85.20000000000005z"})),_L=s=>Me.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"180 150 700 800",width:s.width},Me.createElement("metadata",null,"IcoFont Icons"),Me.createElement("title",null,"close"),Me.createElement("glyph",{glyphName:"close",unicode:"",horizAdvX:"1000"}),Me.createElement("path",{fill:"currentColor",d:"M709.8 206.6c-64.39999999999998 65.50000000000003-128.89999999999998 131.20000000000002-194.19999999999993 197.6-8.600000000000023 8.699999999999989-22.400000000000034 8.800000000000011-31 0-65-66-129.70000000000005-131.8-194.5-197.6-8.600000000000023-8.699999999999989-22.400000000000034-8.599999999999994-30.900000000000034 0.09999999999999432-15.699999999999989 16.200000000000017-31.099999999999994 32.30000000000001-47.099999999999994 48.80000000000001-8.5 8.800000000000011-8.299999999999983 23 0.20000000000001705 31.69999999999999 63.099999999999966 64.19999999999999 127.89999999999998 130.10000000000002 193.59999999999997 197 8.600000000000023 8.699999999999989 8.5 22.80000000000001 0 31.599999999999966-65.19999999999999 66.40000000000009-130.2 132.5-194.7 198.10000000000002-8.5 8.700000000000045-8.5 22.800000000000068 0.20000000000001705 31.399999999999977l47.79999999999998 47.90000000000009c8.600000000000023 8.599999999999909 22.600000000000023 8.599999999999909 31.100000000000023-0.10000000000002274l194.2-197.30000000000007c8.600000000000023-8.699999999999932 22.399999999999977-8.699999999999932 31 0 64.70000000000005 65.80000000000007 129.20000000000005 131.4000000000001 194.20000000000005 197.5 8.599999999999909 8.700000000000045 22.5 8.800000000000068 31 0.10000000000002274 16-16.199999999999932 31.699999999999932-32.19999999999993 47.59999999999991-48.299999999999955 8.600000000000023-8.700000000000045 8.600000000000023-22.899999999999977 0.10000000000002274-31.600000000000023-63.799999999999955-65-128.5-130.89999999999998-194.19999999999993-197.79999999999995-8.600000000000023-8.700000000000045-8.600000000000023-22.900000000000034 0-31.600000000000023 65.19999999999993-66.40000000000003 130.0999999999999-132.5 194.5-198.20000000000005 8.599999999999909-8.699999999999989 8.5-22.799999999999955-0.10000000000002274-31.49999999999997l-47.80000000000007-48.099999999999994c-8.5-8.5-22.399999999999977-8.400000000000006-31 0.29999999999998295z"})),kL=s=>Me.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",width:s.width},Me.createElement("path",{fill:"currentColor",d:"M268 416h24a12 12 0 0 0 12-12V188a12 12 0 0 0-12-12h-24a12 12 0 0 0-12 12v216a12 12 0 0 0 12 12zM432 80h-82.41l-34-56.7A48 48 0 0 0 274.41 0H173.59a48 48 0 0 0-41.16 23.3L98.41 80H16A16 16 0 0 0 0 96v16a16 16 0 0 0 16 16h16v336a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128h16a16 16 0 0 0 16-16V96a16 16 0 0 0-16-16zM171.84 50.91A6 6 0 0 1 177 48h94a6 6 0 0 1 5.15 2.91L293.61 80H154.39zM368 464H80V128h288zm-212-48h24a12 12 0 0 0 12-12V188a12 12 0 0 0-12-12h-24a12 12 0 0 0-12 12v216a12 12 0 0 0 12 12z"}));var RL=s=>{const[l,r]=ze(!1),[a,c]=ze(!1),f=R=>{r(!0),c(!1)},g=R=>{s.onDelete(s.body),c(!1)},y=R=>s.onUpdate(s.body,{...s.body,value:R.target.value}),w=R=>s.onUpdate(s.body,{...s.body,purpose:R.value}),b=s.body.modified||s.body.created,S=s.body.creator&&Me.createElement("div",{className:"r6o-lastmodified"},Me.createElement("span",{className:"r6o-lastmodified-by"},s.body.creator.name||s.body.creator.id),s.body.created&&Me.createElement("span",{className:"r6o-lastmodified-at"},Me.createElement(p_,{datetime:s.env.toClientTime(b),locale:Di.locale()})));return s.readOnly?Me.createElement("div",{className:"r6o-widget comment"},Me.createElement("div",{className:"r6o-readonly-comment"},s.body.value),S):Me.createElement("div",{className:l?"r6o-widget comment editable":"r6o-widget comment"},Me.createElement(Ly,{editable:l,content:s.body.value,onChange:y,onSaveAndClose:s.onSaveAndClose}),!l&&S,s.purposeSelector&&Me.createElement(iw,{editable:l,content:s.body.purpose,onChange:w,onSaveAndClose:s.onSaveAndClose}),Me.createElement("div",{className:a?"r6o-icon r6o-arrow-down r6o-menu-open":"r6o-icon r6o-arrow-down",onClick:()=>c(!a)},Me.createElement(PL,{width:12})),a&&Me.createElement(dD,{onEdit:f,onDelete:g,onClickOutside:()=>c(!1)}))};const OL=Gh.map(s=>s.value),rw=(s,l)=>{const r=l?OL.indexOf(s.purpose)>-1:s.purpose=="commenting"||s.purpose=="replying";return s.type==="TextualBody"&&(!Object.prototype.hasOwnProperty.call(s,"purpose")||r)},ow=(s,l)=>{var r,a;if(l.editable===!0)return!1;if(l.editable===!1)return!0;if(l.editable==="MINE_ONLY"){const c=(r=s.creator)==null?void 0:r.id;return((a=l.env.user)==null?void 0:a.id)!==c}return l.readOnly},AL=(s,l)=>s||{type:"TextualBody",value:"",purpose:l?"replying":"commenting",draft:!0},sw=s=>{const l=s.annotation?s.annotation.bodies.filter(w=>rw(w,s.purposeSelector)):[],r=AL(l.find(w=>w.draft==!0),l.length>1),a=l.filter(w=>w!=r),c=w=>{const b=r.value,S=w.target.value;b.length===0&&S.length>0?s.onAppendBody({...r,value:S}):b.length>0&&S.length===0?s.onRemoveBody(r):s.onUpdateBody(r,{...r,value:S})},f=w=>s.onUpdateBody(r,{...r,purpose:w.value}),g=!s.readOnly&&s.annotation,y=a.length===0||!s.disableReply;return Me.createElement(Me.Fragment,null,a.map((w,b)=>Me.createElement(RL,{key:b,env:s.env,purposeSelector:s.purposeSelector,readOnly:ow(w,s),body:w,onUpdate:s.onUpdateBody,onDelete:s.onRemoveBody,onSaveAndClose:s.onSaveAndClose})),g&&y&&Me.createElement("div",{className:"r6o-widget comment editable"},Me.createElement(Ly,{focus:s.focus,content:r.value,editable:!0,placeholder:a.length>0?Di.t("Add a reply..."):s.textPlaceHolder||Di.t("Add a comment..."),onChange:c,onSaveAndClose:()=>s.onSaveAndClose()}),s.purposeSelector&&r.value.length>0&&Me.createElement(iw,{editable:!0,content:r.purpose,onChange:f,onSaveAndClose:()=>s.onSaveAndClose()})))};sw.disableDelete=(s,l)=>s.bodies.filter(r=>rw(r,l.purposeSelector)).some(r=>ow(r,l));var aw=sw;function lw(s,l){s.prototype=Object.create(l.prototype),s.prototype.constructor=s,Au(s,l)}function DL(s,l){return s.classList?!!l&&s.classList.contains(l):(" "+(s.className.baseVal||s.className)+" ").indexOf(" "+l+" ")!==-1}function IL(s,l){s.classList?s.classList.add(l):DL(s,l)||(typeof s.className=="string"?s.className=s.className+" "+l:s.setAttribute("class",(s.className&&s.className.baseVal||"")+" "+l))}function uw(s,l){return s.replace(new RegExp("(^|\\s)"+l+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function ML(s,l){s.classList?s.classList.remove(l):typeof s.className=="string"?s.className=uw(s.className,l):s.setAttribute("class",uw(s.className&&s.className.baseVal||"",l))}var cw={disabled:!1},dw=Me.createContext(null),hw=function(s){return s.scrollTop},Ma="unmounted",Eo="exited",To="entering",xs="entered",qh="exiting",Rr=function(s){lw(l,s);function l(a,c){var f;f=s.call(this,a,c)||this;var g=c,y=g&&!g.isMounting?a.enter:a.appear,w;return f.appearStatus=null,a.in?y?(w=Eo,f.appearStatus=To):w=xs:a.unmountOnExit||a.mountOnEnter?w=Ma:w=Eo,f.state={status:w},f.nextCallback=null,f}l.getDerivedStateFromProps=function(a,c){var f=a.in;return f&&c.status===Ma?{status:Eo}:null};var r=l.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(a){var c=null;if(a!==this.props){var f=this.state.status;this.props.in?f!==To&&f!==xs&&(c=To):(f===To||f===xs)&&(c=qh)}this.updateStatus(!1,c)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var a=this.props.timeout,c,f,g;return c=f=g=a,a!=null&&typeof a!="number"&&(c=a.exit,f=a.enter,g=a.appear!==void 0?a.appear:f),{exit:c,enter:f,appear:g}},r.updateStatus=function(a,c){if(a===void 0&&(a=!1),c!==null)if(this.cancelNextCallback(),c===To){if(this.props.unmountOnExit||this.props.mountOnEnter){var f=this.props.nodeRef?this.props.nodeRef.current:Me.findDOMNode(this);f&&hw(f)}this.performEnter(a)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Eo&&this.setState({status:Ma})},r.performEnter=function(a){var c=this,f=this.props.enter,g=this.context?this.context.isMounting:a,y=this.props.nodeRef?[g]:[Me.findDOMNode(this),g],w=y[0],b=y[1],S=this.getTimeouts(),R=g?S.appear:S.enter;if(!a&&!f||cw.disabled){this.safeSetState({status:xs},function(){c.props.onEntered(w)});return}this.props.onEnter(w,b),this.safeSetState({status:To},function(){c.props.onEntering(w,b),c.onTransitionEnd(R,function(){c.safeSetState({status:xs},function(){c.props.onEntered(w,b)})})})},r.performExit=function(){var a=this,c=this.props.exit,f=this.getTimeouts(),g=this.props.nodeRef?void 0:Me.findDOMNode(this);if(!c||cw.disabled){this.safeSetState({status:Eo},function(){a.props.onExited(g)});return}this.props.onExit(g),this.safeSetState({status:qh},function(){a.props.onExiting(g),a.onTransitionEnd(f.exit,function(){a.safeSetState({status:Eo},function(){a.props.onExited(g)})})})},r.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(a,c){c=this.setNextCallback(c),this.setState(a,c)},r.setNextCallback=function(a){var c=this,f=!0;return this.nextCallback=function(g){f&&(f=!1,c.nextCallback=null,a(g))},this.nextCallback.cancel=function(){f=!1},this.nextCallback},r.onTransitionEnd=function(a,c){this.setNextCallback(c);var f=this.props.nodeRef?this.props.nodeRef.current:Me.findDOMNode(this),g=a==null&&!this.props.addEndListener;if(!f||g){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var y=this.props.nodeRef?[this.nextCallback]:[f,this.nextCallback],w=y[0],b=y[1];this.props.addEndListener(w,b)}a!=null&&setTimeout(this.nextCallback,a)},r.render=function(){var a=this.state.status;if(a===Ma)return null;var c=this.props,f=c.children;c.in,c.mountOnEnter,c.unmountOnExit,c.appear,c.enter,c.exit,c.timeout,c.addEndListener,c.onEnter,c.onEntering,c.onEntered,c.onExit,c.onExiting,c.onExited,c.nodeRef;var g=Dh(c,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Me.createElement(dw.Provider,{value:null},typeof f=="function"?f(a,g):Me.cloneElement(Me.Children.only(f),g))},l}(Me.Component);Rr.contextType=dw,Rr.propTypes={};function Ss(){}Rr.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Ss,onEntering:Ss,onEntered:Ss,onExit:Ss,onExiting:Ss,onExited:Ss},Rr.UNMOUNTED=Ma,Rr.EXITED=Eo,Rr.ENTERING=To,Rr.ENTERED=xs,Rr.EXITING=qh;var LL=Rr,NL=function(s,l){return s&&l&&l.split(" ").forEach(function(r){return IL(s,r)})},Zh=function(s,l){return s&&l&&l.split(" ").forEach(function(r){return ML(s,r)})},Xh=function(s){lw(l,s);function l(){for(var a,c=arguments.length,f=new Array(c),g=0;g<c;g++)f[g]=arguments[g];return a=s.call.apply(s,[this].concat(f))||this,a.appliedClasses={appear:{},enter:{},exit:{}},a.onEnter=function(y,w){var b=a.resolveArguments(y,w),S=b[0],R=b[1];a.removeClasses(S,"exit"),a.addClass(S,R?"appear":"enter","base"),a.props.onEnter&&a.props.onEnter(y,w)},a.onEntering=function(y,w){var b=a.resolveArguments(y,w),S=b[0],R=b[1],A=R?"appear":"enter";a.addClass(S,A,"active"),a.props.onEntering&&a.props.onEntering(y,w)},a.onEntered=function(y,w){var b=a.resolveArguments(y,w),S=b[0],R=b[1],A=R?"appear":"enter";a.removeClasses(S,A),a.addClass(S,A,"done"),a.props.onEntered&&a.props.onEntered(y,w)},a.onExit=function(y){var w=a.resolveArguments(y),b=w[0];a.removeClasses(b,"appear"),a.removeClasses(b,"enter"),a.addClass(b,"exit","base"),a.props.onExit&&a.props.onExit(y)},a.onExiting=function(y){var w=a.resolveArguments(y),b=w[0];a.addClass(b,"exit","active"),a.props.onExiting&&a.props.onExiting(y)},a.onExited=function(y){var w=a.resolveArguments(y),b=w[0];a.removeClasses(b,"exit"),a.addClass(b,"exit","done"),a.props.onExited&&a.props.onExited(y)},a.resolveArguments=function(y,w){return a.props.nodeRef?[a.props.nodeRef.current,y]:[y,w]},a.getClassNames=function(y){var w=a.props.classNames,b=typeof w=="string",S=b&&w?w+"-":"",R=b?""+S+y:w[y],A=b?R+"-active":w[y+"Active"],H=b?R+"-done":w[y+"Done"];return{baseClassName:R,activeClassName:A,doneClassName:H}},a}var r=l.prototype;return r.addClass=function(a,c,f){var g=this.getClassNames(c)[f+"ClassName"],y=this.getClassNames("enter"),w=y.doneClassName;c==="appear"&&f==="done"&&w&&(g+=" "+w),f==="active"&&a&&hw(a),g&&(this.appliedClasses[c][f]=g,NL(a,g))},r.removeClasses=function(a,c){var f=this.appliedClasses[c],g=f.base,y=f.active,w=f.done;this.appliedClasses[c]={},g&&Zh(a,g),y&&Zh(a,y),w&&Zh(a,w)},r.render=function(){var a=this.props;a.classNames;var c=Dh(a,["classNames"]);return Me.createElement(LL,zt({},c,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},l}(Me.Component);Xh.defaultProps={classNames:""},Xh.propTypes={};var zL=Xh;const jL=(s,l)=>l.filter(r=>(r.label?r.label:r).toLowerCase().startsWith(s.toLowerCase())),HL=(s,l)=>l(s);var FL=s=>{const l=bt(),[r,a]=ze(s.initialValue||""),[c,f]=ze([]),[g,y]=ze(null);Qe(()=>{s.focus&&l.current.querySelector("input").focus({preventScroll:!0})},[]),Qe(()=>{s.onChange&&s.onChange(r)},[r]);const w=A=>{if(typeof s.vocabulary=="function"){const H=HL(A,s.vocabulary);H.then?H.then(f):f(H)}else{const H=jL(A,s.vocabulary);f(H)}},b=()=>{if(g!==null)s.onSubmit(c[g]);else{const A=r.trim();if(A){const H=Array.isArray(s.vocabulary)?s.vocabulary.find(V=>(V.label||V).toLowerCase()===A.toLowerCase()):null;H?s.onSubmit(H):s.onSubmit(A)}}a(""),f([]),y(null)},S=A=>{if(A.which===13)b();else if(A.which===27)s.onCancel&&s.onCancel();else if(c.length>0){if(A.which===38)if(g===null)y(0);else{const H=Math.max(0,g-1);y(H)}else if(A.which===40)if(g===null)y(0);else{const H=Math.min(c.length-1,g+1);y(H)}}else A.which===40&&Array.isArray(s.vocabulary)&&f(s.vocabulary)},R=A=>{const{value:H}=A.target;a(H),y(null),H?w(H):f([])};return Me.createElement("div",{ref:l,className:"r6o-autocomplete"},Me.createElement("div",null,Me.createElement("input",{onKeyDown:S,onChange:R,value:r,placeholder:s.placeholder})),Me.createElement("ul",null,c.length>0&&c.map((A,H)=>Me.createElement("li",{key:`${A.label?A.label:A}${H}`,onClick:b,onMouseEnter:()=>y(H),style:g===H?{backgroundColor:"#bde4ff"}:{}},A.label?A.label:A))))};const BL=s=>s||{type:"TextualBody",value:"",purpose:"tagging",draft:!0};var pw=s=>{const l=s.annotation?s.annotation.bodies.filter(R=>R.purpose==="tagging"):[],r=BL(l.slice().reverse().find(R=>R.draft)),a=l.filter(R=>R!=r),[c,f]=ze(!1),g=R=>A=>{f(c===R?!1:R)},y=R=>{const A=r.value.trim(),H=R.trim();A.length===0&&H.length>0?s.onAppendBody({...r,value:H}):A.length>0&&H.length===0?s.onRemoveBody(r):A!==H&&s.onUpdateBody(r,{...r,value:H})},w=R=>A=>{A.stopPropagation(),s.onRemoveBody(R)},b=R=>{const A=R.uri?{type:"SpecificResource",purpose:"tagging",source:{id:R.uri,label:R.label}}:{type:"TextualBody",purpose:"tagging",value:R.label||R};r.value.trim().length===0?s.onAppendBody(A):s.onUpdateBody(r,A)},S=R=>R.value||R.source.label;return Me.createElement("div",{className:"r6o-widget r6o-tag"},a.length>0&&Me.createElement("ul",{className:"r6o-taglist"},a.map(R=>Me.createElement("li",{key:S(R),onClick:g(R)},Me.createElement("span",{className:"r6o-label"},S(R)),!s.readOnly&&Me.createElement(zL,{in:c===R,timeout:200,classNames:"r6o-delete"},Me.createElement("span",{className:"r6o-delete-wrapper",onClick:w(R)},Me.createElement("span",{className:"r6o-delete"},Me.createElement(_L,{width:12}))))))),!s.readOnly&&Me.createElement(FL,{focus:s.focus,placeholder:s.textPlaceHolder||Di.t("Add tag..."),vocabulary:s.vocabulary||[],onChange:y,onSubmit:b}))};class fw extends te{constructor(l){super(l),this.element=Me.createRef()}renderWidget(l){const r=this.props.widget({annotation:l.annotation,readOnly:l.readOnly,...l.config,onAppendBody:(a,c)=>l.onAppendBody(a,c),onUpdateBody:(a,c,f)=>l.onUpdateBody(a,c,f),onUpsertBody:(a,c,f)=>l.onUpsertBody(a,c,f),onRemoveBody:(a,c)=>l.onRemoveBody(a,c),onBatchModify:(a,c)=>l.onBatchModify(a,c),onSetProperty:(a,c)=>l.onSetProperty(a,c),onAddContext:a=>l.onAddContext(a),onSaveAndClose:()=>l.onSaveAndClose()});for(;this.element.current.firstChild;)this.element.current.removeChild(this.element.current.lastChild);this.element.current.appendChild(r)}componentDidMount(){this.renderWidget(this.props)}componentWillReceiveProps(l){this.element.current&&this.props.annotation!==l.annotation&&this.renderWidget(l)}render(){return Me.createElement("div",{ref:this.element,className:"widget"})}}window.React=Me,window.ReactDOM=Me;const UL={COMMENT:aw,TAG:pw},WL=[Me.createElement(aw,null),Me.createElement(pw,null)],VL=s=>{const l=a=>{var c;return typeof a=="function"&&!!((c=a.prototype)!=null&&c.isReactComponent)},r=a=>typeof a=="function"&&(String(a).match(/return .+\(['|"].+['|"],\s*\{/g)||String(a).match(/return .+preact_compat/)||String(a).match(/return .+\.createElement/g));return l(s)||r(s)},GL=s=>{const l=(r,a,c)=>{if(typeof r=="string"||r instanceof String)return Me.createElement(UL[r],a);if(c?.toLowerCase()==="react")return Me.createElement(r,a);if(c?.toLowerCase()==="plainjs")return Me.createElement(fw,{widget:r,config:a});if(VL(r))return Me.createElement(r,a);if(typeof r=="function"||r instanceof Function)return Me.createElement(fw,{widget:r,config:a});throw`${r} is not a valid plugin`};if(s.widget){const{widget:r,force:a,...c}=s;return l(r,c,a)}else return l(s)},mw=14;var gw=(s,l,r,a)=>{const c=s.getBoundingClientRect();l.className="r6o-editor r6o-arrow-top r6o-arrow-left";const{left:f,top:g,right:y,bottom:w}=r.getBoundingClientRect();if(l.style.top=`${w-c.top+mw}px`,l.style.left=`${f-c.left}px`,a){const b=l.children[1].getBoundingClientRect(),{innerWidth:S,innerHeight:R}=s.ownerDocument.defaultView;if(b.right>S&&(l.classList.remove("r6o-arrow-left"),l.classList.add("r6o-arrow-right"),l.style.left=`${y-b.width-c.left}px`),b.bottom>R){l.classList.remove("r6o-arrow-top"),l.classList.add("r6o-arrow-bottom");const H=l.children[1].getBoundingClientRect().height;l.style.top=`${g-c.top-H-mw}px`}const A=l.children[1].getBoundingClientRect();if(A.top<0){l.classList.add("pushed","down"),l.style.top=`${-c.top}px`;const H=w-c.top;A.height-c.top>H&&l.classList.remove("r6o-arrow-bottom")}A.left<0&&(l.classList.add("pushed","right"),l.style.left=`${-c.left}px`),requestAnimationFrame(()=>l.style.opacity=1)}};const vw=s=>{const{top:l,left:r,width:a,height:c}=s.getBoundingClientRect();return`${l}, ${r}, ${a}, ${c}`};class qL extends te{constructor(l){super(l),o(this,"initResizeObserver",()=>{const r=this.props.autoPosition===void 0?!0:this.props.autoPosition;if(window!=null&&window.ResizeObserver){const a=new ResizeObserver(()=>{this.state.dragged||gw(this.props.wrapperEl,this.element.current,this.props.selectedElement,r)});return a.observe(this.props.wrapperEl),()=>a.disconnect()}else this.state.dragged||gw(this.props.wrapperEl,this.element.current,this.props.selectedElement,r)}),o(this,"creationMeta",r=>{const a={},{user:c}=this.props.env;return c&&(a.creator={},c.id&&(a.creator.id=c.id),c.displayName&&(a.creator.name=c.displayName),a[r.created?"modified":"created"]=this.props.env.getCurrentTimeAdjusted()),a}),o(this,"getCurrentAnnotation",()=>this.state.currentAnnotation.clone()),o(this,"hasChanges",()=>{var r;return!((r=this.props.annotation)!=null&&r.isEqual(this.state.currentAnnotation))}),o(this,"updateCurrentAnnotation",(r,a)=>{this.setState({currentAnnotation:this.state.currentAnnotation.clone(r)},()=>{a?this.onOk():this.props.onChanged&&this.props.onChanged()})}),o(this,"onAppendBody",(r,a)=>this.updateCurrentAnnotation({body:[...this.state.currentAnnotation.bodies,{...r,...this.creationMeta(r)}]},a)),o(this,"onUpdateBody",(r,a,c)=>this.updateCurrentAnnotation({body:this.state.currentAnnotation.bodies.map(f=>f===r?{...a,...this.creationMeta(a)}:f)},c)),o(this,"onRemoveBody",(r,a)=>this.updateCurrentAnnotation({body:this.state.currentAnnotation.bodies.filter(c=>c!==r)},a)),o(this,"onUpsertBody",(r,a,c)=>{if(r==null&&a!=null)this.onAppendBody(a,c);else if(r!=null&&a!=null)this.onUpdateBody(r,a,c);else if(r!=null&&a==null){const f=this.state.currentAnnotation.bodies.find(g=>g.purpose===r.purpose);f?this.onUpdateBody(f,r,c):this.onAppendBody(r,c)}}),o(this,"onBatchModify",(r,a)=>{const c=r.filter(b=>b.action==="upsert"&&b.body).map(b=>({previous:this.state.currentAnnotation.bodies.find(S=>S.purpose===b.body.purpose),updated:{...b.body,...this.creationMeta(b.body)}})),f=r.filter(b=>b.action==="remove").map(b=>b.body),g=[...r.filter(b=>b.action==="append"||b.action==="upsert"&&b.updated&&!b.previous).map(b=>({...b.body,...this.creationMeta(b.body)})),...c.filter(b=>!b.previous).map(b=>b.updated)],y=[...r.filter(b=>b.action==="update"||b.action==="upsert"&&b.updated&&b.previous).map(b=>({previous:b.previous,updated:{...b.updated,...this.creationMeta(b.updated)}})),...c.filter(b=>b.previous)],w=[...this.state.currentAnnotation.bodies.filter(b=>!f.includes(b)).map(b=>{const S=y.find(R=>R.previous===b);return S?S.updated:b}),...g];this.updateCurrentAnnotation({body:w},a)}),o(this,"onSetProperty",(r,a)=>{if(["@context","id","type","body","target"].includes(r))throw new Exception(`Cannot set ${r} - not allowed`);if(a)this.updateCurrentAnnotation({[r]:a});else{const c=this.currentAnnotation.clone();delete c[r],this.setState({currentAnnotation:c})}}),o(this,"onAddContext",r=>{const{currentAnnotation:a}=this.state,c=Array.isArray(a.context)?a.context:[a.context];c.indexOf(r)<0&&(c.push(r),this.updateCurrentAnnotation({"@context":c}))}),o(this,"onCancel",()=>this.props.onCancel(this.props.annotation)),o(this,"onOk",()=>{const r=c=>c.clone({body:c.bodies.map(({draft:f,...g})=>g)}),{currentAnnotation:a}=this.state;a.bodies.length===0&&!this.props.allowEmpty?a.isSelection?this.onCancel():this.props.onAnnotationDeleted(this.props.annotation):a.isSelection?this.props.onAnnotationCreated(r(a).toAnnotation()):this.props.onAnnotationUpdated(r(a),this.props.annotation)}),o(this,"onDelete",()=>this.props.onAnnotationDeleted(this.props.annotation)),this.element=Me.createRef(),this.state={currentAnnotation:l.annotation,dragged:!1,selectionBounds:vw(l.selectedElement)}}componentWillReceiveProps(l){var r;const{selectionBounds:a}=this.state,c=vw(l.selectedElement);(r=this.props.annotation)!=null&&r.isEqual(l.annotation)?this.setState({selectionBounds:c}):this.setState({currentAnnotation:l.annotation,selectionBounds:c}),this.props.modifiedTarget!=l.modifiedTarget&&this.state.currentAnnotation&&this.updateCurrentAnnotation({target:this.props.modifiedTarget}),a!=c&&this.element.current&&(this.removeObserver&&this.removeObserver(),this.removeObserver=this.initResizeObserver())}componentDidMount(){this.removeObserver=this.initResizeObserver(),new MutationObserver(()=>{this.element.current&&(this.removeObserver&&this.removeObserver(),this.removeObserver=this.initResizeObserver())}).observe(this.element.current,{childList:!0,subtree:!0})}componentWillUnmount(){this.removeObserver&&this.removeObserver()}render(){const{currentAnnotation:l}=this.state,r=this.props.widgets?this.props.widgets.map(GL):WL,a=f=>f.type.disableDelete?f.type.disableDelete(l,{...f.props,readOnly:this.props.readOnly,env:this.props.env}):!1,c=l&&(l.bodies.length>0||this.props.allowEmpty)&&!this.props.readOnly&&!l.isSelection&&!r.some(a);return Me.createElement(e_,{disabled:!this.props.detachable,handle:".r6o-draggable",cancel:".r6o-btn, .r6o-btn *",onDrag:()=>this.setState({dragged:!0})},Me.createElement("div",{ref:this.element,className:this.state.dragged?"r6o-editor dragged":"r6o-editor"},Me.createElement("div",{className:"r6o-arrow"}),Me.createElement("div",{className:"r6o-editor-inner"},r.map((f,g)=>Me.cloneElement(f,{key:`${g}`,focus:g===0,annotation:l,readOnly:this.props.readOnly,env:this.props.env,onAppendBody:this.onAppendBody,onUpdateBody:this.onUpdateBody,onRemoveBody:this.onRemoveBody,onUpsertBody:this.onUpsertBody,onBatchModify:this.onBatchModify,onSetProperty:this.onSetProperty,onAddContext:this.onAddContext,onSaveAndClose:this.onOk})),this.props.readOnly?Me.createElement("div",{className:"r6o-footer"},Me.createElement("button",{className:"r6o-btn",onClick:this.onCancel},Di.t("Close"))):Me.createElement("div",{className:this.props.detachable?"r6o-footer r6o-draggable":"r6o-footer"},c&&Me.createElement("button",{className:"r6o-btn left delete-annotation",title:Di.t("Delete"),onClick:this.onDelete},Me.createElement(kL,{width:12})),Me.createElement("button",{className:"r6o-btn outline",onClick:this.onCancel},Di.t("Cancel")),Me.createElement("button",{className:"r6o-btn ",onClick:this.onOk},Di.t("Ok"))))))}}var Fu,ZL=new Uint8Array(16);function XL(){if(!Fu&&(Fu=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Fu))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Fu(ZL)}var YL=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function $L(s){return typeof s=="string"&&YL.test(s)}for(var si=[],Yh=0;Yh<256;++Yh)si.push((Yh+256).toString(16).substr(1));function KL(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=(si[s[l+0]]+si[s[l+1]]+si[s[l+2]]+si[s[l+3]]+"-"+si[s[l+4]]+si[s[l+5]]+"-"+si[s[l+6]]+si[s[l+7]]+"-"+si[s[l+8]]+si[s[l+9]]+"-"+si[s[l+10]]+si[s[l+11]]+si[s[l+12]]+si[s[l+13]]+si[s[l+14]]+si[s[l+15]]).toLowerCase();if(!$L(r))throw TypeError("Stringified UUID is invalid");return r}function yw(s,l,r){s=s||{};var a=s.random||(s.rng||XL)();return a[6]=a[6]&15|64,a[8]=a[8]&63|128,KL(a)}var QL=function s(l,r){if(l===r)return!0;if(l&&r&&typeof l=="object"&&typeof r=="object"){if(l.constructor!==r.constructor)return!1;var a,c,f;if(Array.isArray(l)){if(a=l.length,a!=r.length)return!1;for(c=a;c--!==0;)if(!s(l[c],r[c]))return!1;return!0}if(l.constructor===RegExp)return l.source===r.source&&l.flags===r.flags;if(l.valueOf!==Object.prototype.valueOf)return l.valueOf()===r.valueOf();if(l.toString!==Object.prototype.toString)return l.toString()===r.toString();if(f=Object.keys(l),a=f.length,a!==Object.keys(r).length)return!1;for(c=a;c--!==0;)if(!Object.prototype.hasOwnProperty.call(r,f[c]))return!1;for(c=a;c--!==0;){var g=f[c];if(!s(l[g],r[g]))return!1}return!0}return l!==l&&r!==r},ww=QL;const $h=class{constructor(s,l){o(this,"clone",(r,a)=>new $h({...this.underlying,...r},{...this.opts,...a})),o(this,"selector",r=>{const{target:a}=this.underlying;if(a.selector)return(Array.isArray(a.selector)?a.selector:[a.selector]).find(c=>c.type===r)}),this.underlying=s,this.opts=l}isEqual(s){return s?.type!=="Annotation"?!1:this.underlying===s.underlying?!0:!this.underlying.id||!s.underlying.id?!1:ww(this.underlying,s.underlying)}get readOnly(){var s;return(s=this.opts)==null?void 0:s.readOnly}get id(){return this.underlying.id}get context(){return this.underlying["@context"]}get type(){return this.underlying.type}get motivation(){return this.underlying.motivation}get body(){return this.underlying.body}get target(){return this.underlying.target}get bodies(){return Array.isArray(this.underlying.body)?this.underlying.body:[this.underlying.body]}set bodies(s){this.underlying.body=s}get targets(){return Array.isArray(this.underlying.target)?this.underlying.target:[this.underlying.target]}get quote(){var s;return(s=this.selector("TextQuoteSelector"))==null?void 0:s.exact}get start(){var s;return(s=this.selector("TextPositionSelector"))==null?void 0:s.start}get end(){var s;return(s=this.selector("TextPositionSelector"))==null?void 0:s.end}};let Co=$h;o(Co,"create",s=>{const l={"@context":"http://www.w3.org/ns/anno.jsonld",type:"Annotation",id:`#${yw()}`,body:[]};return new $h({...l,...s})});class La{constructor(l,r){o(this,"clone",a=>{const c=new La;return c.underlying=JSON.parse(JSON.stringify(this.underlying)),a&&(c.underlying={...c.underlying,...a}),c}),o(this,"selector",a=>{const{target:c}=this.underlying;if(c.selector)return(Array.isArray(c.selector)?c.selector:[c.selector]).find(f=>f.type===a)}),o(this,"toAnnotation",()=>{const a=Object.assign({},this.underlying,{type:"Annotation",id:`#${yw()}`});return new Co(a)}),this.underlying={"@context":"http://www.w3.org/ns/anno.jsonld",type:"Selection",body:r||[],target:l}}get context(){return this.underlying["@context"]}get type(){return this.underlying.type}get body(){return this.underlying.body}get target(){return this.underlying.target}get targets(){return Array.isArray(this.underlying.target)?this.underlying.target:[this.underlying.target]}isEqual(l){return l?ww(this.underlying,l.underlying):!1}get bodies(){return Array.isArray(this.underlying.body)?this.underlying.body:[this.underlying.body]}get quote(){var l;return(l=this.selector("TextQuoteSelector"))==null?void 0:l.exact}get isSelection(){return!0}}let Kh=0;var JL=()=>({setServerTime:s=>{const l=Date.now();Kh=s-l},getCurrentTimeAdjusted:()=>new Date(Date.now()+Kh).toISOString(),toClientTime:s=>Date.parse(s)-Kh});const eN=(s,l)=>{if(s){const r=s==="auto"?window.navigator.userLanguage||window.navigator.language:s,a=r.split("-")[0].toLowerCase(),c=[r,a].find(f=>cD.includes(f));c||console.warn(`Unsupported locale '${r}'. Falling back to default en.`),Di.init(c,l)}else Di.init(null,l)};var bw={exports:{}};(function(s){//! openseadragon 3.0.0
//! Built on 2021-12-15
//! Git commit: v3.0.0-0-3eded36
//! http://openseadragon.github.io
//! License: http://openseadragon.github.io/license/
function l(r){return new l.Viewer(r)}(function(r){r.version={versionStr:"3.0.0",major:parseInt("3",10),minor:parseInt("0",10),revision:parseInt("0",10)};var a={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"},c=Object.prototype.toString,f=Object.prototype.hasOwnProperty;r.isFunction=function(g){return r.type(g)==="function"},r.isArray=Array.isArray||function(g){return r.type(g)==="array"},r.isWindow=function(g){return g&&typeof g=="object"&&"setInterval"in g},r.type=function(g){return g==null?String(g):a[c.call(g)]||"object"},r.isPlainObject=function(g){if(!g||l.type(g)!=="object"||g.nodeType||r.isWindow(g)||g.constructor&&!f.call(g,"constructor")&&!f.call(g.constructor.prototype,"isPrototypeOf"))return!1;var y;for(var w in g)y=w;return y===void 0||f.call(g,y)},r.isEmptyObject=function(g){for(var y in g)return!1;return!0},r.freezeObject=function(g){return Object.freeze?r.freezeObject=Object.freeze:r.freezeObject=function(y){return y},r.freezeObject(g)},r.supportsCanvas=function(){var g=document.createElement("canvas");return!!(r.isFunction(g.getContext)&&g.getContext("2d"))}(),r.isCanvasTainted=function(g){var y=!1;try{g.getContext("2d").getImageData(0,0,1,1)}catch{y=!0}return y},r.supportsAddEventListener=function(){return!!(document.documentElement.addEventListener&&document.addEventListener)}(),r.supportsRemoveEventListener=function(){return!!(document.documentElement.removeEventListener&&document.removeEventListener)}(),r.supportsEventListenerOptions=function(){var g=0;if(r.supportsAddEventListener)try{var y={get capture(){return g++,!1},get once(){return g++,!1},get passive(){return g++,!1}};window.addEventListener("test",null,y),window.removeEventListener("test",null,y)}catch{g=0}return g>=3}(),r.getCurrentPixelDensityRatio=function(){if(r.supportsCanvas){var g=document.createElement("canvas").getContext("2d"),y=window.devicePixelRatio||1,w=g.webkitBackingStorePixelRatio||g.mozBackingStorePixelRatio||g.msBackingStorePixelRatio||g.oBackingStorePixelRatio||g.backingStorePixelRatio||1;return Math.max(y,1)/w}else return 1},r.pixelDensityRatio=r.getCurrentPixelDensityRatio()})(l),function(r){r.extend=function(){var w,b,S,R,A,H,V=arguments[0]||{},oe=arguments.length,ne=!1,ue=1;for(typeof V=="boolean"&&(ne=V,V=arguments[1]||{},ue=2),typeof V!="object"&&!l.isFunction(V)&&(V={}),oe===ue&&(V=this,--ue);ue<oe;ue++)if(w=arguments[ue],w!==null||w!==void 0)for(b in w)S=V[b],R=w[b],V!==R&&(ne&&R&&(l.isPlainObject(R)||(A=l.isArray(R)))?(A?(A=!1,H=S&&l.isArray(S)?S:[]):H=S&&l.isPlainObject(S)?S:{},V[b]=l.extend(ne,H,R)):R!==void 0&&(V[b]=R));return V};var a=function(){if(typeof navigator!="object")return!1;var w=navigator.userAgent;return typeof w!="string"?!1:w.indexOf("iPhone")!==-1||w.indexOf("iPad")!==-1||w.indexOf("iPod")!==-1};r.extend(r,{DEFAULT_SETTINGS:{xmlPath:null,tileSources:null,tileHost:null,initialPage:0,crossOriginPolicy:!1,ajaxWithCredentials:!1,loadTilesWithAjax:!1,ajaxHeaders:{},panHorizontal:!0,panVertical:!0,constrainDuringPan:!1,wrapHorizontal:!1,wrapVertical:!1,visibilityRatio:.5,minPixelRatio:.5,defaultZoomLevel:0,minZoomLevel:null,maxZoomLevel:null,homeFillsViewer:!1,clickTimeThreshold:300,clickDistThreshold:5,dblClickTimeThreshold:300,dblClickDistThreshold:20,springStiffness:6.5,animationTime:1.2,gestureSettingsMouse:{dragToPan:!0,scrollToZoom:!0,clickToZoom:!0,dblClickToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!0,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsTouch:{dragToPan:!0,scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,pinchToZoom:!0,zoomToRefPoint:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsPen:{dragToPan:!0,scrollToZoom:!1,clickToZoom:!0,dblClickToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!0,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsUnknown:{dragToPan:!0,scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,pinchToZoom:!0,zoomToRefPoint:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},zoomPerClick:2,zoomPerScroll:1.2,zoomPerSecond:1,blendTime:0,alwaysBlend:!1,autoHideControls:!0,immediateRender:!1,minZoomImageRatio:.9,maxZoomPixelRatio:1.1,smoothTileEdgesMinZoom:1.1,iOSDevice:a(),pixelsPerWheelLine:40,pixelsPerArrowPress:40,autoResize:!0,preserveImageSizeOnResize:!1,minScrollDeltaTime:50,rotationIncrement:90,showSequenceControl:!0,sequenceControlAnchor:null,preserveViewport:!1,preserveOverlays:!1,navPrevNextWrap:!1,showNavigationControl:!0,navigationControlAnchor:null,showZoomControl:!0,showHomeControl:!0,showFullPageControl:!0,showRotationControl:!1,showFlipControl:!1,controlsFadeDelay:2e3,controlsFadeLength:1500,mouseNavEnabled:!0,showNavigator:!1,navigatorId:null,navigatorPosition:null,navigatorSizeRatio:.2,navigatorMaintainSizeRatio:!1,navigatorTop:null,navigatorLeft:null,navigatorHeight:null,navigatorWidth:null,navigatorAutoResize:!0,navigatorAutoFade:!0,navigatorRotate:!0,navigatorBackground:"#000",navigatorOpacity:.8,navigatorBorderColor:"#555",navigatorDisplayRegionColor:"#900",degrees:0,flipped:!1,opacity:1,preload:!1,compositeOperation:null,imageSmoothingEnabled:!0,placeholderFillStyle:null,showReferenceStrip:!1,referenceStripScroll:"horizontal",referenceStripElement:null,referenceStripHeight:null,referenceStripWidth:null,referenceStripPosition:"BOTTOM_LEFT",referenceStripSizeRatio:.2,collectionRows:3,collectionColumns:0,collectionLayout:"horizontal",collectionMode:!1,collectionTileSize:800,collectionTileMargin:80,imageLoaderLimit:0,maxImageCacheCount:200,timeout:3e4,useCanvas:!0,prefixUrl:"/images/",navImages:{zoomIn:{REST:"zoomin_rest.png",GROUP:"zoomin_grouphover.png",HOVER:"zoomin_hover.png",DOWN:"zoomin_pressed.png"},zoomOut:{REST:"zoomout_rest.png",GROUP:"zoomout_grouphover.png",HOVER:"zoomout_hover.png",DOWN:"zoomout_pressed.png"},home:{REST:"home_rest.png",GROUP:"home_grouphover.png",HOVER:"home_hover.png",DOWN:"home_pressed.png"},fullpage:{REST:"fullpage_rest.png",GROUP:"fullpage_grouphover.png",HOVER:"fullpage_hover.png",DOWN:"fullpage_pressed.png"},rotateleft:{REST:"rotateleft_rest.png",GROUP:"rotateleft_grouphover.png",HOVER:"rotateleft_hover.png",DOWN:"rotateleft_pressed.png"},rotateright:{REST:"rotateright_rest.png",GROUP:"rotateright_grouphover.png",HOVER:"rotateright_hover.png",DOWN:"rotateright_pressed.png"},flip:{REST:"flip_rest.png",GROUP:"flip_grouphover.png",HOVER:"flip_hover.png",DOWN:"flip_pressed.png"},previous:{REST:"previous_rest.png",GROUP:"previous_grouphover.png",HOVER:"previous_hover.png",DOWN:"previous_pressed.png"},next:{REST:"next_rest.png",GROUP:"next_grouphover.png",HOVER:"next_hover.png",DOWN:"next_pressed.png"}},debugMode:!1,debugGridColor:["#437AB2","#1B9E77","#D95F02","#7570B3","#E7298A","#66A61E","#E6AB02","#A6761D","#666666"]},SIGNAL:"----seadragon----",delegate:function(w,b){return function(){var S=arguments;return S===void 0&&(S=[]),b.apply(w,S)}},BROWSERS:{UNKNOWN:0,IE:1,FIREFOX:2,SAFARI:3,CHROME:4,OPERA:5,EDGE:6,CHROMEEDGE:7},_viewers:new Map,getViewer:function(w){return r._viewers.get(this.getElement(w))},getElement:function(w){return typeof w=="string"&&(w=document.getElementById(w)),w},getElementPosition:function(w){var b=new r.Point,S,R;for(w=r.getElement(w),S=r.getElementStyle(w).position==="fixed",R=y(w,S);R;)b.x+=w.offsetLeft,b.y+=w.offsetTop,S&&(b=b.plus(r.getPageScroll())),w=R,S=r.getElementStyle(w).position==="fixed",R=y(w,S);return b},getElementOffset:function(w){w=r.getElement(w);var b=w&&w.ownerDocument,S,R,A={top:0,left:0};return b?(S=b.documentElement,typeof w.getBoundingClientRect<"u"&&(A=w.getBoundingClientRect()),R=b===b.window?b:b.nodeType===9?b.defaultView||b.parentWindow:!1,new r.Point(A.left+(R.pageXOffset||S.scrollLeft)-(S.clientLeft||0),A.top+(R.pageYOffset||S.scrollTop)-(S.clientTop||0))):new r.Point},getElementSize:function(w){return w=r.getElement(w),new r.Point(w.clientWidth,w.clientHeight)},getElementStyle:document.documentElement.currentStyle?function(w){return w=r.getElement(w),w.currentStyle}:function(w){return w=r.getElement(w),window.getComputedStyle(w,"")},getCssPropertyWithVendorPrefix:function(w){var b={};return r.getCssPropertyWithVendorPrefix=function(S){if(b[S]!==void 0)return b[S];var R=document.createElement("div").style,A=null;if(R[S]!==void 0)A=S;else for(var H=["Webkit","Moz","MS","O","webkit","moz","ms","o"],V=r.capitalizeFirstLetter(S),oe=0;oe<H.length;oe++){var ne=H[oe]+V;if(R[ne]!==void 0){A=ne;break}}return b[S]=A,A},r.getCssPropertyWithVendorPrefix(w)},capitalizeFirstLetter:function(w){return w.charAt(0).toUpperCase()+w.slice(1)},positiveModulo:function(w,b){var S=w%b;return S<0&&(S+=b),S},pointInElement:function(w,b){w=r.getElement(w);var S=r.getElementOffset(w),R=r.getElementSize(w);return b.x>=S.x&&b.x<S.x+R.x&&b.y<S.y+R.y&&b.y>=S.y},getMousePosition:function(w){if(typeof w.pageX=="number")r.getMousePosition=function(b){var S=new r.Point;return S.x=b.pageX,S.y=b.pageY,S};else if(typeof w.clientX=="number")r.getMousePosition=function(b){var S=new r.Point;return S.x=b.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,S.y=b.clientY+document.body.scrollTop+document.documentElement.scrollTop,S};else throw new Error("Unknown event mouse position, no known technique.");return r.getMousePosition(w)},getPageScroll:function(){var w=document.documentElement||{},b=document.body||{};if(typeof window.pageXOffset=="number")r.getPageScroll=function(){return new r.Point(window.pageXOffset,window.pageYOffset)};else if(b.scrollLeft||b.scrollTop)r.getPageScroll=function(){return new r.Point(document.body.scrollLeft,document.body.scrollTop)};else if(w.scrollLeft||w.scrollTop)r.getPageScroll=function(){return new r.Point(document.documentElement.scrollLeft,document.documentElement.scrollTop)};else return new r.Point(0,0);return r.getPageScroll()},setPageScroll:function(w){if(typeof window.scrollTo<"u")r.setPageScroll=function(R){window.scrollTo(R.x,R.y)};else{var b=r.getPageScroll();if(b.x===w.x&&b.y===w.y)return;document.body.scrollLeft=w.x,document.body.scrollTop=w.y;var S=r.getPageScroll();if(S.x!==b.x&&S.y!==b.y){r.setPageScroll=function(R){document.body.scrollLeft=R.x,document.body.scrollTop=R.y};return}if(document.documentElement.scrollLeft=w.x,document.documentElement.scrollTop=w.y,S=r.getPageScroll(),S.x!==b.x&&S.y!==b.y){r.setPageScroll=function(R){document.documentElement.scrollLeft=R.x,document.documentElement.scrollTop=R.y};return}r.setPageScroll=function(R){}}r.setPageScroll(w)},getWindowSize:function(){var w=document.documentElement||{},b=document.body||{};if(typeof window.innerWidth=="number")r.getWindowSize=function(){return new r.Point(window.innerWidth,window.innerHeight)};else if(w.clientWidth||w.clientHeight)r.getWindowSize=function(){return new r.Point(document.documentElement.clientWidth,document.documentElement.clientHeight)};else if(b.clientWidth||b.clientHeight)r.getWindowSize=function(){return new r.Point(document.body.clientWidth,document.body.clientHeight)};else throw new Error("Unknown window size, no known technique.");return r.getWindowSize()},makeCenteredNode:function(w){w=r.getElement(w);var b=[r.makeNeutralElement("div"),r.makeNeutralElement("div"),r.makeNeutralElement("div")];return r.extend(b[0].style,{display:"table",height:"100%",width:"100%"}),r.extend(b[1].style,{display:"table-row"}),r.extend(b[2].style,{display:"table-cell",verticalAlign:"middle",textAlign:"center"}),b[0].appendChild(b[1]),b[1].appendChild(b[2]),b[2].appendChild(w),b[0]},makeNeutralElement:function(w){var b=document.createElement(w),S=b.style;return S.background="transparent none",S.border="none",S.margin="0px",S.padding="0px",S.position="static",b},now:function(){return Date.now?r.now=Date.now:r.now=function(){return new Date().getTime()},r.now()},makeTransparentImage:function(w){var b=r.makeNeutralElement("img");return b.src=w,b},setElementOpacity:function(w,b,S){var R,A;w=r.getElement(w),S&&!r.Browser.alpha&&(b=Math.round(b)),r.Browser.opacity?w.style.opacity=b<1?b:"":b<1?(R=Math.round(100*b),A="alpha(opacity="+R+")",w.style.filter=A):w.style.filter=""},setElementTouchActionNone:function(w){w=r.getElement(w),typeof w.style.touchAction<"u"?w.style.touchAction="none":typeof w.style.msTouchAction<"u"&&(w.style.msTouchAction="none")},setElementPointerEvents:function(w,b){w=r.getElement(w),typeof w.style.pointerEvents<"u"&&(w.style.pointerEvents=b)},setElementPointerEventsNone:function(w){r.setElementPointerEvents(w,"none")},addClass:function(w,b){w=r.getElement(w),w.className?(" "+w.className+" ").indexOf(" "+b+" ")===-1&&(w.className+=" "+b):w.className=b},indexOf:function(w,b,S){return Array.prototype.indexOf?this.indexOf=function(R,A,H){return R.indexOf(A,H)}:this.indexOf=function(R,A,H){var V,oe=H||0,ne;if(!R)throw new TypeError;if(ne=R.length,ne===0||oe>=ne)return-1;for(oe<0&&(oe=ne-Math.abs(oe)),V=oe;V<ne;V++)if(R[V]===A)return V;return-1},this.indexOf(w,b,S)},removeClass:function(w,b){var S,R=[],A;for(w=r.getElement(w),S=w.className.split(/\s+/),A=0;A<S.length;A++)S[A]&&S[A]!==b&&R.push(S[A]);w.className=R.join(" ")},normalizeEventListenerOptions:function(w){var b;return typeof w<"u"?typeof w=="boolean"?b=r.supportsEventListenerOptions?{capture:w}:w:b=r.supportsEventListenerOptions?w:typeof w.capture<"u"?w.capture:!1:b=r.supportsEventListenerOptions?{capture:!1}:!1,b},addEvent:function(){if(r.supportsAddEventListener)return function(w,b,S,R){R=r.normalizeEventListenerOptions(R),w=r.getElement(w),w.addEventListener(b,S,R)};if(document.documentElement.attachEvent&&document.attachEvent)return function(w,b,S){w=r.getElement(w),w.attachEvent("on"+b,S)};throw new Error("No known event model.")}(),removeEvent:function(){if(r.supportsRemoveEventListener)return function(w,b,S,R){R=r.normalizeEventListenerOptions(R),w=r.getElement(w),w.removeEventListener(b,S,R)};if(document.documentElement.detachEvent&&document.detachEvent)return function(w,b,S){w=r.getElement(w),w.detachEvent("on"+b,S)};throw new Error("No known event model.")}(),cancelEvent:function(w){w.preventDefault()},eventIsCanceled:function(w){return w.defaultPrevented},stopEvent:function(w){w.stopPropagation()},createCallback:function(w,b){var S=[],R;for(R=2;R<arguments.length;R++)S.push(arguments[R]);return function(){var A=S.concat([]),H;for(H=0;H<arguments.length;H++)A.push(arguments[H]);return b.apply(w,A)}},getUrlParameter:function(w){var b=g[w];return b||null},getUrlProtocol:function(w){var b=w.match(/^([a-z]+:)\/\//i);return b===null?window.location.protocol:b[1].toLowerCase()},createAjaxRequest:function(w){var b;try{b=!!new ActiveXObject("Microsoft.XMLHTTP")}catch{b=!1}if(b)window.XMLHttpRequest?r.createAjaxRequest=function(S){return S?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest}:r.createAjaxRequest=function(){return new ActiveXObject("Microsoft.XMLHTTP")};else if(window.XMLHttpRequest)r.createAjaxRequest=function(){return new XMLHttpRequest};else throw new Error("Browser doesn't support XMLHttpRequest.");return r.createAjaxRequest(w)},makeAjaxRequest:function(w,b,S){var R,A,H;r.isPlainObject(w)&&(b=w.success,S=w.error,R=w.withCredentials,A=w.headers,H=w.responseType||null,w=w.url);var V=r.getUrlProtocol(w),oe=r.createAjaxRequest(V==="file:");if(!r.isFunction(b))throw new Error("makeAjaxRequest requires a success callback");oe.onreadystatechange=function(){oe.readyState===4&&(oe.onreadystatechange=function(){},oe.status>=200&&oe.status<300||oe.status===0&&V!=="http:"&&V!=="https:"?b(oe):(r.console.log("AJAX request returned %d: %s",oe.status,w),r.isFunction(S)&&S(oe)))};try{if(oe.open("GET",w,!0),H&&(oe.responseType=H),A)for(var ne in A)Object.prototype.hasOwnProperty.call(A,ne)&&A[ne]&&oe.setRequestHeader(ne,A[ne]);R&&(oe.withCredentials=!0),oe.send(null)}catch(ue){r.console.log("%s while making AJAX request: %s",ue.name,ue.message),oe.onreadystatechange=function(){},r.isFunction(S)&&S(oe,ue)}return oe},jsonp:function(w){var b,S=w.url,R=document.head||document.getElementsByTagName("head")[0]||document.documentElement,A=w.callbackName||"openseadragon"+r.now(),H=window[A],V="$1"+A+"$2",oe=w.param||"callback",ne=w.callback;S=S.replace(/(=)\?(&|$)|\?\?/i,V),S+=(/\?/.test(S)?"&":"?")+oe+"="+A,window[A]=function(ue){if(H)window[A]=H;else try{delete window[A]}catch{}ne&&r.isFunction(ne)&&ne(ue)},b=document.createElement("script"),(w.async!==void 0||w.async!==!1)&&(b.async="async"),w.scriptCharset&&(b.charset=w.scriptCharset),b.src=S,b.onload=b.onreadystatechange=function(ue,M){(M||!b.readyState||/loaded|complete/.test(b.readyState))&&(b.onload=b.onreadystatechange=null,R&&b.parentNode&&R.removeChild(b),b=void 0)},R.insertBefore(b,R.firstChild)},createFromDZI:function(){throw"OpenSeadragon.createFromDZI is deprecated, use Viewer.open."},parseXml:function(w){if(window.DOMParser)r.parseXml=function(b){var S=null,R;return R=new DOMParser,S=R.parseFromString(b,"text/xml"),S};else if(window.ActiveXObject)r.parseXml=function(b){var S=null;return S=new ActiveXObject("Microsoft.XMLDOM"),S.async=!1,S.loadXML(b),S};else throw new Error("Browser doesn't support XML DOM.");return r.parseXml(w)},parseJSON:function(w){return r.parseJSON=window.JSON.parse,r.parseJSON(w)},imageFormatSupported:function(w){return w=w||"",!!f[w.toLowerCase()]},setImageFormatsSupported:function(w){r.extend(f,w)}});var c=function(w){};r.console=window.console||{log:c,debug:c,info:c,warn:c,error:c,assert:c},r.Browser={vendor:r.BROWSERS.UNKNOWN,version:0,alpha:!0};var f={bmp:!1,jpeg:!0,jpg:!0,png:!0,tif:!1,wdp:!1},g={};(function(){var w=navigator.appVersion,b=navigator.userAgent,S;switch(navigator.appName){case"Microsoft Internet Explorer":window.attachEvent&&window.ActiveXObject&&(r.Browser.vendor=r.BROWSERS.IE,r.Browser.version=parseFloat(b.substring(b.indexOf("MSIE")+5,b.indexOf(";",b.indexOf("MSIE")))));break;case"Netscape":window.addEventListener&&(b.indexOf("Edge")>=0?(r.Browser.vendor=r.BROWSERS.EDGE,r.Browser.version=parseFloat(b.substring(b.indexOf("Edge")+5))):b.indexOf("Edg")>=0?(r.Browser.vendor=r.BROWSERS.CHROMEEDGE,r.Browser.version=parseFloat(b.substring(b.indexOf("Edg")+4))):b.indexOf("Firefox")>=0?(r.Browser.vendor=r.BROWSERS.FIREFOX,r.Browser.version=parseFloat(b.substring(b.indexOf("Firefox")+8))):b.indexOf("Safari")>=0?(r.Browser.vendor=b.indexOf("Chrome")>=0?r.BROWSERS.CHROME:r.BROWSERS.SAFARI,r.Browser.version=parseFloat(b.substring(b.substring(0,b.indexOf("Safari")).lastIndexOf("/")+1,b.indexOf("Safari")))):(S=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"),S.exec(b)!==null&&(r.Browser.vendor=r.BROWSERS.IE,r.Browser.version=parseFloat(RegExp.$1))));break;case"Opera":r.Browser.vendor=r.BROWSERS.OPERA,r.Browser.version=parseFloat(w);break}var R=window.location.search.substring(1),A=R.split("&"),H,V,oe;for(oe=0;oe<A.length;oe++)if(H=A[oe],V=H.indexOf("="),V>0){var ne=H.substring(0,V),ue=H.substring(V+1);try{g[ne]=decodeURIComponent(ue)}catch{r.console.error("Ignoring malformed URL parameter: %s=%s",ne,ue)}}r.Browser.alpha=!(r.Browser.vendor===r.BROWSERS.CHROME&&r.Browser.version<2),r.Browser.opacity=!0,r.Browser.vendor===r.BROWSERS.IE&&r.Browser.version<11&&r.console.error("Internet Explorer versions < 11 are not supported by OpenSeadragon")})(),function(w){var b=w.requestAnimationFrame||w.mozRequestAnimationFrame||w.webkitRequestAnimationFrame||w.msRequestAnimationFrame,S=w.cancelAnimationFrame||w.mozCancelAnimationFrame||w.webkitCancelAnimationFrame||w.msCancelAnimationFrame;if(b&&S)r.requestAnimationFrame=function(){return b.apply(w,arguments)},r.cancelAnimationFrame=function(){return S.apply(w,arguments)};else{var R=[],A=[],H=0,V;r.requestAnimationFrame=function(oe){return R.push([++H,oe]),V||(V=setInterval(function(){if(R.length){var ne=r.now(),ue=A;for(A=R,R=ue;A.length;)A.shift()[1](ne)}else clearInterval(V),V=void 0},1e3/50)),H},r.cancelAnimationFrame=function(oe){var ne,ue;for(ne=0,ue=R.length;ne<ue;ne+=1)if(R[ne][0]===oe){R.splice(ne,1);return}for(ne=0,ue=A.length;ne<ue;ne+=1)if(A[ne][0]===oe){A.splice(ne,1);return}}}}(window);function y(w,b){return b&&w!==document.body?document.body:w.offsetParent}}(l),function(r,a){s.exports?s.exports=a():r.OpenSeadragon=a()}(Ji,function(){return l}),function(r){var a={supportsFullScreen:!1,isFullScreen:function(){return!1},getFullScreenElement:function(){return null},requestFullScreen:function(){},exitFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",fullScreenErrorEventName:""};document.exitFullscreen?(a.supportsFullScreen=!0,a.getFullScreenElement=function(){return document.fullscreenElement},a.requestFullScreen=function(c){return c.requestFullscreen()},a.exitFullScreen=function(){document.exitFullscreen()},a.fullScreenEventName="fullscreenchange",a.fullScreenErrorEventName="fullscreenerror"):document.msExitFullscreen?(a.supportsFullScreen=!0,a.getFullScreenElement=function(){return document.msFullscreenElement},a.requestFullScreen=function(c){return c.msRequestFullscreen()},a.exitFullScreen=function(){document.msExitFullscreen()},a.fullScreenEventName="MSFullscreenChange",a.fullScreenErrorEventName="MSFullscreenError"):document.webkitExitFullscreen?(a.supportsFullScreen=!0,a.getFullScreenElement=function(){return document.webkitFullscreenElement},a.requestFullScreen=function(c){return c.webkitRequestFullscreen()},a.exitFullScreen=function(){document.webkitExitFullscreen()},a.fullScreenEventName="webkitfullscreenchange",a.fullScreenErrorEventName="webkitfullscreenerror"):document.webkitCancelFullScreen?(a.supportsFullScreen=!0,a.getFullScreenElement=function(){return document.webkitCurrentFullScreenElement},a.requestFullScreen=function(c){return c.webkitRequestFullScreen()},a.exitFullScreen=function(){document.webkitCancelFullScreen()},a.fullScreenEventName="webkitfullscreenchange",a.fullScreenErrorEventName="webkitfullscreenerror"):document.mozCancelFullScreen&&(a.supportsFullScreen=!0,a.getFullScreenElement=function(){return document.mozFullScreenElement},a.requestFullScreen=function(c){return c.mozRequestFullScreen()},a.exitFullScreen=function(){document.mozCancelFullScreen()},a.fullScreenEventName="mozfullscreenchange",a.fullScreenErrorEventName="mozfullscreenerror"),a.isFullScreen=function(){return a.getFullScreenElement()!==null},a.cancelFullScreen=function(){r.console.error("cancelFullScreen is deprecated. Use exitFullScreen instead."),a.exitFullScreen()},r.extend(r,a)}(l),function(r){r.EventSource=function(){this.events={}},r.EventSource.prototype={addOnceHandler:function(a,c,f,g){var y=this;g=g||1;var w=0,b=function(S){w++,w===g&&y.removeHandler(a,b),c(S)};this.addHandler(a,b,f)},addHandler:function(a,c,f){var g=this.events[a];g||(this.events[a]=g=[]),c&&r.isFunction(c)&&(g[g.length]={handler:c,userData:f||null})},removeHandler:function(a,c){var f=this.events[a],g=[],y;if(f&&r.isArray(f)){for(y=0;y<f.length;y++)f[y].handler!==c&&g.push(f[y]);this.events[a]=g}},removeAllHandlers:function(a){if(a)this.events[a]=[];else for(var c in this.events)this.events[c]=[]},getHandler:function(a){var c=this.events[a];return!c||!c.length?null:(c=c.length===1?[c[0]]:Array.apply(null,c),function(f,g){var y,w=c.length;for(y=0;y<w;y++)c[y]&&(g.eventSource=f,g.userData=c[y].userData,c[y].handler(g))})},raiseEvent:function(a,c){var f=this.getHandler(a);f&&(c||(c={}),f(this,c))}}}(l),function(r){var a={};r.MouseTracker=function(U){var F=arguments;r.isPlainObject(U)||(U={element:F[0],clickTimeThreshold:F[1],clickDistThreshold:F[2]}),this.hash=Math.random(),this.element=r.getElement(U.element),this.clickTimeThreshold=U.clickTimeThreshold||r.DEFAULT_SETTINGS.clickTimeThreshold,this.clickDistThreshold=U.clickDistThreshold||r.DEFAULT_SETTINGS.clickDistThreshold,this.dblClickTimeThreshold=U.dblClickTimeThreshold||r.DEFAULT_SETTINGS.dblClickTimeThreshold,this.dblClickDistThreshold=U.dblClickDistThreshold||r.DEFAULT_SETTINGS.dblClickDistThreshold,this.userData=U.userData||null,this.stopDelay=U.stopDelay||50,this.preProcessEventHandler=U.preProcessEventHandler||null,this.contextMenuHandler=U.contextMenuHandler||null,this.enterHandler=U.enterHandler||null,this.leaveHandler=U.leaveHandler||null,this.exitHandler=U.exitHandler||null,this.overHandler=U.overHandler||null,this.outHandler=U.outHandler||null,this.pressHandler=U.pressHandler||null,this.nonPrimaryPressHandler=U.nonPrimaryPressHandler||null,this.releaseHandler=U.releaseHandler||null,this.nonPrimaryReleaseHandler=U.nonPrimaryReleaseHandler||null,this.moveHandler=U.moveHandler||null,this.scrollHandler=U.scrollHandler||null,this.clickHandler=U.clickHandler||null,this.dblClickHandler=U.dblClickHandler||null,this.dragHandler=U.dragHandler||null,this.dragEndHandler=U.dragEndHandler||null,this.pinchHandler=U.pinchHandler||null,this.stopHandler=U.stopHandler||null,this.keyDownHandler=U.keyDownHandler||null,this.keyUpHandler=U.keyUpHandler||null,this.keyHandler=U.keyHandler||null,this.focusHandler=U.focusHandler||null,this.blurHandler=U.blurHandler||null;var ee=this;a[this.hash]={click:function(ie){re(ee,ie)},dblclick:function(ie){ge(ee,ie)},keydown:function(ie){pe(ee,ie)},keyup:function(ie){Ee(ee,ie)},keypress:function(ie){Ce(ee,ie)},focus:function(ie){Ze(ee,ie)},blur:function(ie){Ke(ee,ie)},contextmenu:function(ie){ut(ee,ie)},wheel:function(ie){pt(ee,ie)},mousewheel:function(ie){ct(ee,ie)},DOMMouseScroll:function(ie){ct(ee,ie)},MozMousePixelScroll:function(ie){ct(ee,ie)},losecapture:function(ie){Ct(ee,ie)},mouseenter:function(ie){tt(ee,ie)},mouseleave:function(ie){it(ee,ie)},mouseover:function(ie){nt(ee,ie)},mouseout:function(ie){lt(ee,ie)},mousedown:function(ie){Ot(ee,ie)},mouseup:function(ie){fn(ee,ie)},mousemove:function(ie){Gi(ee,ie)},touchstart:function(ie){Wt(ee,ie)},touchend:function(ie){Ut(ee,ie)},touchmove:function(ie){Zt(ee,ie)},touchcancel:function(ie){ln(ee,ie)},gesturestart:function(ie){bn(ee,ie)},gesturechange:function(ie){dt(ee,ie)},gotpointercapture:function(ie){Jt(ee,ie)},lostpointercapture:function(ie){We(ee,ie)},pointerenter:function(ie){tt(ee,ie)},pointerleave:function(ie){it(ee,ie)},pointerover:function(ie){nt(ee,ie)},pointerout:function(ie){lt(ee,ie)},pointerdown:function(ie){Ot(ee,ie)},pointerup:function(ie){fn(ee,ie)},pointermove:function(ie){Gi(ee,ie)},pointercancel:function(ie){N(ee,ie)},pointerupcaptured:function(ie){Dn(ee,ie)},pointermovecaptured:function(ie){Ci(ee,ie)},tracking:!1,activePointersLists:[],lastClickPos:null,dblClickTimeOut:null,pinchGPoints:[],lastPinchDist:0,currentPinchDist:0,lastPinchCenter:null,currentPinchCenter:null,sentDragEvent:!1},this.hasGestureHandlers=!!(this.pressHandler||this.nonPrimaryPressHandler||this.releaseHandler||this.nonPrimaryReleaseHandler||this.clickHandler||this.dblClickHandler||this.dragHandler||this.dragEndHandler||this.pinchHandler),this.hasScrollHandler=!!this.scrollHandler,r.MouseTracker.havePointerEvents&&r.setElementPointerEvents(this.element,"auto"),this.exitHandler&&r.console.error("MouseTracker.exitHandler is deprecated. Use MouseTracker.leaveHandler instead."),U.startDisabled||this.setTracking(!0)},r.MouseTracker.prototype={destroy:function(){w(this),this.element=null,a[this.hash]=null,delete a[this.hash]},isTracking:function(){return a[this.hash].tracking},setTracking:function(U){return U?y(this):w(this),this},getActivePointersListByType:function(U){var F=a[this.hash],ee,ie=F.activePointersLists.length,Ie;for(ee=0;ee<ie;ee++)if(F.activePointersLists[ee].type===U)return F.activePointersLists[ee];return Ie=new r.MouseTracker.GesturePointList(U),F.activePointersLists.push(Ie),Ie},getActivePointerCount:function(){var U=a[this.hash],F,ee=U.activePointersLists.length,ie=0;for(F=0;F<ee;F++)ie+=U.activePointersLists[F].getLength();return ie},preProcessEventHandler:function(){},contextMenuHandler:function(){},enterHandler:function(){},leaveHandler:function(){},exitHandler:function(){},overHandler:function(){},outHandler:function(){},pressHandler:function(){},nonPrimaryPressHandler:function(){},releaseHandler:function(){},nonPrimaryReleaseHandler:function(){},moveHandler:function(){},scrollHandler:function(){},clickHandler:function(){},dblClickHandler:function(){},dragHandler:function(){},dragEndHandler:function(){},pinchHandler:function(){},stopHandler:function(){},keyDownHandler:function(){},keyUpHandler:function(){},keyHandler:function(){},focusHandler:function(){},blurHandler:function(){}};var c=function(){try{return window.self!==window.top}catch{return!0}}();function f(U){try{return U.addEventListener&&U.removeEventListener}catch{return!1}}r.MouseTracker.gesturePointVelocityTracker=function(){var U=[],F=0,ee=0,ie=function(xn,Mt){return xn.hash.toString()+Mt.type+Mt.id.toString()},Ie=function(){var xn,Mt=U.length,Ni,Kn,Ps=r.now(),Ww,Vw,Gw;for(Ww=Ps-ee,ee=Ps,xn=0;xn<Mt;xn++)Ni=U[xn],Kn=Ni.gPoint,Kn.direction=Math.atan2(Kn.currentPos.y-Ni.lastPos.y,Kn.currentPos.x-Ni.lastPos.x),Vw=Ni.lastPos.distanceTo(Kn.currentPos),Ni.lastPos=Kn.currentPos,Gw=1e3*Vw/(Ww+1),Kn.speed=.75*Gw+.25*Kn.speed},Je=function(xn,Mt){var Ni=ie(xn,Mt);U.push({guid:Ni,gPoint:Mt,lastPos:Mt.currentPos}),U.length===1&&(ee=r.now(),F=window.setInterval(Ie,50))},It=function(xn,Mt){var Ni=ie(xn,Mt),Kn,Ps=U.length;for(Kn=0;Kn<Ps;Kn++)if(U[Kn].guid===Ni){U.splice(Kn,1),Ps--,Ps===0&&window.clearInterval(F);break}};return{addPoint:Je,removePoint:It}}(),r.MouseTracker.captureElement=document,r.MouseTracker.wheelEventName=r.Browser.vendor===r.BROWSERS.IE&&r.Browser.version>8||"onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==void 0?"mousewheel":"DOMMouseScroll",r.MouseTracker.subscribeEvents=["click","dblclick","keydown","keyup","keypress","focus","blur","contextmenu",r.MouseTracker.wheelEventName],r.MouseTracker.wheelEventName==="DOMMouseScroll"&&r.MouseTracker.subscribeEvents.push("MozMousePixelScroll"),window.PointerEvent?(r.MouseTracker.havePointerEvents=!0,r.MouseTracker.subscribeEvents.push("pointerenter","pointerleave","pointerover","pointerout","pointerdown","pointerup","pointermove","pointercancel"),r.MouseTracker.havePointerCapture=function(){var U=document.createElement("div");return r.isFunction(U.setPointerCapture)&&r.isFunction(U.releasePointerCapture)}(),r.MouseTracker.havePointerCapture&&r.MouseTracker.subscribeEvents.push("gotpointercapture","lostpointercapture")):(r.MouseTracker.havePointerEvents=!1,r.MouseTracker.subscribeEvents.push("mouseenter","mouseleave","mouseover","mouseout","mousedown","mouseup","mousemove"),r.MouseTracker.mousePointerId="legacy-mouse",r.MouseTracker.havePointerCapture=function(){var U=document.createElement("div");return r.isFunction(U.setCapture)&&r.isFunction(U.releaseCapture)}(),r.MouseTracker.havePointerCapture&&r.MouseTracker.subscribeEvents.push("losecapture"),"ontouchstart"in window&&r.MouseTracker.subscribeEvents.push("touchstart","touchend","touchmove","touchcancel"),"ongesturestart"in window&&r.MouseTracker.subscribeEvents.push("gesturestart","gesturechange")),r.MouseTracker.GesturePointList=function(U){this._gPoints=[],this.type=U,this.buttons=0,this.contacts=0,this.clicks=0,this.captureCount=0},r.MouseTracker.GesturePointList.prototype={getLength:function(){return this._gPoints.length},asArray:function(){return this._gPoints},add:function(U){return this._gPoints.push(U)},removeById:function(U){var F,ee=this._gPoints.length;for(F=0;F<ee;F++)if(this._gPoints[F].id===U){this._gPoints.splice(F,1);break}return this._gPoints.length},getByIndex:function(U){return U<this._gPoints.length?this._gPoints[U]:null},getById:function(U){var F,ee=this._gPoints.length;for(F=0;F<ee;F++)if(this._gPoints[F].id===U)return this._gPoints[F];return null},getPrimary:function(U){var F,ee=this._gPoints.length;for(F=0;F<ee;F++)if(this._gPoints[F].isPrimary)return this._gPoints[F];return null},addContact:function(){++this.contacts,this.contacts>1&&(this.type==="mouse"||this.type==="pen")&&(r.console.warn("GesturePointList.addContact() Implausible contacts value"),this.contacts=1)},removeContact:function(){--this.contacts,this.contacts<0&&(r.console.warn("GesturePointList.removeContact() Implausible contacts value"),this.contacts=0)}};function g(U){var F=a[U.hash],ee,ie,Ie,Je,It,xn=F.activePointersLists.length;for(ee=0;ee<xn;ee++)if(Ie=F.activePointersLists[ee],Ie.getLength()>0){for(It=[],Je=Ie.asArray(),ie=0;ie<Je.length;ie++)It.push(Je[ie]);for(ie=0;ie<It.length;ie++)Oe(U,Ie,It[ie])}for(ee=0;ee<xn;ee++)F.activePointersLists.pop();F.sentDragEvent=!1}function y(U){var F=a[U.hash],ee,ie;if(!F.tracking){for(ie=0;ie<r.MouseTracker.subscribeEvents.length;ie++)ee=r.MouseTracker.subscribeEvents[ie],r.addEvent(U.element,ee,F[ee],ee===r.MouseTracker.wheelEventName?{passive:!1,capture:!1}:!1);g(U),F.tracking=!0}}function w(U){var F=a[U.hash],ee,ie;if(F.tracking){for(ie=0;ie<r.MouseTracker.subscribeEvents.length;ie++)ee=r.MouseTracker.subscribeEvents[ie],r.removeEvent(U.element,ee,F[ee],!1);g(U),F.tracking=!1}}function b(U,F){var ee=a[U.hash];if(F==="pointerevent")return{upName:"pointerup",upHandler:ee.pointerupcaptured,moveName:"pointermove",moveHandler:ee.pointermovecaptured};if(F==="mouse")return{upName:"pointerup",upHandler:ee.pointerupcaptured,moveName:"pointermove",moveHandler:ee.pointermovecaptured};if(F==="touch")return{upName:"touchend",upHandler:ee.touchendcaptured,moveName:"touchmove",moveHandler:ee.touchmovecaptured};throw new Error("MouseTracker.getCaptureEventParams: Unknown pointer type.")}function S(U,F){var ee;if(r.MouseTracker.havePointerCapture)if(r.MouseTracker.havePointerEvents)try{U.element.setPointerCapture(F.id)}catch{r.console.warn("setPointerCapture() called on invalid pointer ID");return}else U.element.setCapture(!0);else ee=b(U,r.MouseTracker.havePointerEvents?"pointerevent":F.type),c&&f(window.top)&&r.addEvent(window.top,ee.upName,ee.upHandler,!0),r.addEvent(r.MouseTracker.captureElement,ee.upName,ee.upHandler,!0),r.addEvent(r.MouseTracker.captureElement,ee.moveName,ee.moveHandler,!0);St(U,F,!0)}function R(U,F){var ee,ie,Ie;if(r.MouseTracker.havePointerCapture)if(r.MouseTracker.havePointerEvents){if(ie=U.getActivePointersListByType(F.type),Ie=ie.getById(F.id),!Ie||!Ie.captured)return;try{U.element.releasePointerCapture(F.id)}catch{}}else U.element.releaseCapture();else ee=b(U,r.MouseTracker.havePointerEvents?"pointerevent":F.type),c&&f(window.top)&&r.removeEvent(window.top,ee.upName,ee.upHandler,!0),r.removeEvent(r.MouseTracker.captureElement,ee.moveName,ee.moveHandler,!0),r.removeEvent(r.MouseTracker.captureElement,ee.upName,ee.upHandler,!0);St(U,F,!1)}function A(U){return r.MouseTracker.havePointerEvents?U.pointerId:r.MouseTracker.mousePointerId}function H(U){return r.MouseTracker.havePointerEvents?U.pointerType||(r.Browser.vendor===r.BROWSERS.IE?"mouse":""):"mouse"}function V(U){return r.MouseTracker.havePointerEvents?U.isPrimary:!0}function oe(U){return r.getMousePosition(U)}function ne(U,F){return ue(oe(U),F)}function ue(U,F){var ee=r.getElementOffset(F);return U.minus(ee)}function M(U,F){return new r.Point((U.x+F.x)/2,(U.y+F.y)/2)}function re(U,F){var ee={originalEvent:F,eventType:"click",pointerType:"mouse",isEmulated:!1};Ve(U,ee),ee.preventDefault&&!ee.defaultPrevented&&r.cancelEvent(F),ee.stopPropagation&&r.stopEvent(F)}function ge(U,F){var ee={originalEvent:F,eventType:"dblclick",pointerType:"mouse",isEmulated:!1};Ve(U,ee),ee.preventDefault&&!ee.defaultPrevented&&r.cancelEvent(F),ee.stopPropagation&&r.stopEvent(F)}function pe(U,F){var ee=null,ie={originalEvent:F,eventType:"keydown",pointerType:"",isEmulated:!1};Ve(U,ie),U.keyDownHandler&&!ie.preventGesture&&!ie.defaultPrevented&&(ee={eventSource:U,keyCode:F.keyCode?F.keyCode:F.charCode,ctrl:F.ctrlKey,shift:F.shiftKey,alt:F.altKey,meta:F.metaKey,originalEvent:F,preventDefault:ie.preventDefault||ie.defaultPrevented,userData:U.userData},U.keyDownHandler(ee)),(ee&&ee.preventDefault||ie.preventDefault&&!ie.defaultPrevented)&&r.cancelEvent(F),ie.stopPropagation&&r.stopEvent(F)}function Ee(U,F){var ee=null,ie={originalEvent:F,eventType:"keyup",pointerType:"",isEmulated:!1};Ve(U,ie),U.keyUpHandler&&!ie.preventGesture&&!ie.defaultPrevented&&(ee={eventSource:U,keyCode:F.keyCode?F.keyCode:F.charCode,ctrl:F.ctrlKey,shift:F.shiftKey,alt:F.altKey,meta:F.metaKey,originalEvent:F,preventDefault:ie.preventDefault||ie.defaultPrevented,userData:U.userData},U.keyUpHandler(ee)),(ee&&ee.preventDefault||ie.preventDefault&&!ie.defaultPrevented)&&r.cancelEvent(F),ie.stopPropagation&&r.stopEvent(F)}function Ce(U,F){var ee=null,ie={originalEvent:F,eventType:"keypress",pointerType:"",isEmulated:!1};Ve(U,ie),U.keyHandler&&!ie.preventGesture&&!ie.defaultPrevented&&(ee={eventSource:U,keyCode:F.keyCode?F.keyCode:F.charCode,ctrl:F.ctrlKey,shift:F.shiftKey,alt:F.altKey,meta:F.metaKey,originalEvent:F,preventDefault:ie.preventDefault||ie.defaultPrevented,userData:U.userData},U.keyHandler(ee)),(ee&&ee.preventDefault||ie.preventDefault&&!ie.defaultPrevented)&&r.cancelEvent(F),ie.stopPropagation&&r.stopEvent(F)}function Ze(U,F){var ee={originalEvent:F,eventType:"focus",pointerType:"",isEmulated:!1};Ve(U,ee),U.focusHandler&&!ee.preventGesture&&U.focusHandler({eventSource:U,originalEvent:F,userData:U.userData})}function Ke(U,F){var ee={originalEvent:F,eventType:"blur",pointerType:"",isEmulated:!1};Ve(U,ee),U.blurHandler&&!ee.preventGesture&&U.blurHandler({eventSource:U,originalEvent:F,userData:U.userData})}function ut(U,F){var ee=null,ie={originalEvent:F,eventType:"contextmenu",pointerType:"mouse",isEmulated:!1};Ve(U,ie),U.contextMenuHandler&&!ie.preventGesture&&!ie.defaultPrevented&&(ee={eventSource:U,position:ue(oe(F),U.element),originalEvent:ie.originalEvent,preventDefault:ie.preventDefault||ie.defaultPrevented,userData:U.userData},U.contextMenuHandler(ee)),(ee&&ee.preventDefault||ie.preventDefault&&!ie.defaultPrevented)&&r.cancelEvent(F),ie.stopPropagation&&r.stopEvent(F)}function pt(U,F){_t(U,F,F)}function ct(U,F){var ee={target:F.target||F.srcElement,type:"wheel",shiftKey:F.shiftKey||!1,clientX:F.clientX,clientY:F.clientY,pageX:F.pageX?F.pageX:F.clientX,pageY:F.pageY?F.pageY:F.clientY,deltaMode:F.type==="MozMousePixelScroll"?0:1,deltaX:0,deltaZ:0};r.MouseTracker.wheelEventName==="mousewheel"?ee.deltaY=-F.wheelDelta/r.DEFAULT_SETTINGS.pixelsPerWheelLine:ee.deltaY=F.detail,_t(U,ee,F)}function _t(U,F,ee){var ie=0,Ie,Je=null;ie=F.deltaY<0?1:-1,Ie={originalEvent:F,eventType:"wheel",pointerType:"mouse",isEmulated:F!==ee},Ve(U,Ie),U.scrollHandler&&!Ie.preventGesture&&!Ie.defaultPrevented&&(Je={eventSource:U,pointerType:"mouse",position:ne(F,U.element),scroll:ie,shift:F.shiftKey,isTouchEvent:!1,originalEvent:ee,preventDefault:Ie.preventDefault||Ie.defaultPrevented,userData:U.userData},U.scrollHandler(Je)),Ie.stopPropagation&&r.stopEvent(ee),(Je&&Je.preventDefault||Ie.preventDefault&&!Ie.defaultPrevented)&&r.cancelEvent(ee)}function Ct(U,F){var ee={id:r.MouseTracker.mousePointerId,type:"mouse"},ie={originalEvent:F,eventType:"lostpointercapture",pointerType:"mouse",isEmulated:!1};Ve(U,ie),F.target===U.element&&St(U,ee,!1),ie.stopPropagation&&r.stopEvent(F)}function Wt(U,F){var ee,ie,Ie=F.changedTouches.length,Je,It=U.getActivePointersListByType("touch");ee=r.now(),It.getLength()>F.touches.length-Ie&&r.console.warn("Tracked touch contact count doesn't match event.touches.length");var xn={originalEvent:F,eventType:"pointerdown",pointerType:"touch",isEmulated:!1};for(Ve(U,xn),ie=0;ie<Ie;ie++)Je={id:F.changedTouches[ie].identifier,type:"touch",isPrimary:It.getLength()===0,currentPos:oe(F.changedTouches[ie]),currentTime:ee},ht(U,xn,Je),Vt(U,xn,Je,0),St(U,Je,!0);xn.preventDefault&&!xn.defaultPrevented&&r.cancelEvent(F),xn.stopPropagation&&r.stopEvent(F)}function Ut(U,F){var ee,ie,Ie=F.changedTouches.length,Je;ee=r.now();var It={originalEvent:F,eventType:"pointerup",pointerType:"touch",isEmulated:!1};for(Ve(U,It),ie=0;ie<Ie;ie++)Je={id:F.changedTouches[ie].identifier,type:"touch",currentPos:oe(F.changedTouches[ie]),currentTime:ee},Nn(U,It,Je,0),St(U,Je,!1),un(U,It,Je);It.preventDefault&&!It.defaultPrevented&&r.cancelEvent(F),It.stopPropagation&&r.stopEvent(F)}function Zt(U,F){var ee,ie,Ie=F.changedTouches.length,Je;ee=r.now();var It={originalEvent:F,eventType:"pointermove",pointerType:"touch",isEmulated:!1};for(Ve(U,It),ie=0;ie<Ie;ie++)Je={id:F.changedTouches[ie].identifier,type:"touch",currentPos:oe(F.changedTouches[ie]),currentTime:ee},sn(U,It,Je);It.preventDefault&&!It.defaultPrevented&&r.cancelEvent(F),It.stopPropagation&&r.stopEvent(F)}function ln(U,F){var ee=F.changedTouches.length,ie,Ie,Je={originalEvent:F,eventType:"pointercancel",pointerType:"touch",isEmulated:!1};for(Ve(U,Je),ie=0;ie<ee;ie++)Ie={id:F.changedTouches[ie].identifier,type:"touch"},ai(U,Je,Ie);Je.stopPropagation&&r.stopEvent(F)}function bn(U,F){return r.eventIsCanceled(F)||F.preventDefault(),!1}function dt(U,F){return r.eventIsCanceled(F)||F.preventDefault(),!1}function Jt(U,F){var ee={originalEvent:F,eventType:"gotpointercapture",pointerType:H(F),isEmulated:!1};Ve(U,ee),F.target===U.element&&St(U,{id:F.pointerId,type:H(F)},!0),ee.stopPropagation&&r.stopEvent(F)}function We(U,F){var ee={originalEvent:F,eventType:"lostpointercapture",pointerType:H(F),isEmulated:!1};Ve(U,ee),F.target===U.element&&St(U,{id:F.pointerId,type:H(F)},!1),ee.stopPropagation&&r.stopEvent(F)}function tt(U,F){var ee={id:A(F),type:H(F),isPrimary:V(F),currentPos:oe(F),currentTime:r.now()},ie={originalEvent:F,eventType:"pointerenter",pointerType:ee.type,isEmulated:!1};Ve(U,ie),ht(U,ie,ee)}function it(U,F){var ee={id:A(F),type:H(F),isPrimary:V(F),currentPos:oe(F),currentTime:r.now()},ie={originalEvent:F,eventType:"pointerleave",pointerType:ee.type,isEmulated:!1};Ve(U,ie),un(U,ie,ee)}function nt(U,F){var ee={id:A(F),type:H(F),isPrimary:V(F),currentPos:oe(F),currentTime:r.now()},ie={originalEvent:F,eventType:"pointerover",pointerType:ee.type,isEmulated:!1};Ve(U,ie),_n(U,ie,ee),ie.preventDefault&&!ie.defaultPrevented&&r.cancelEvent(F),ie.stopPropagation&&r.stopEvent(F)}function lt(U,F){var ee={id:A(F),type:H(F),isPrimary:V(F),currentPos:oe(F),currentTime:r.now()},ie={originalEvent:F,eventType:"pointerout",pointerType:ee.type,isEmulated:!1};Ve(U,ie),cn(U,ie,ee),ie.preventDefault&&!ie.defaultPrevented&&r.cancelEvent(F),ie.stopPropagation&&r.stopEvent(F)}function Ot(U,F){var ee={id:A(F),type:H(F),isPrimary:V(F),currentPos:oe(F),currentTime:r.now()},ie=r.MouseTracker.havePointerEvents&&ee.type==="touch"&&r.Browser.vendor!==r.BROWSERS.IE,Ie={originalEvent:F,eventType:"pointerdown",pointerType:ee.type,isEmulated:!1};Ve(U,Ie),Vt(U,Ie,ee,F.button),Ie.preventDefault&&!Ie.defaultPrevented&&r.cancelEvent(F),Ie.stopPropagation&&r.stopEvent(F),Ie.shouldCapture&&(ie?St(U,ee,!0):S(U,ee))}function fn(U,F){an(U,F)}function Dn(U,F){var ee=U.getActivePointersListByType(H(F));ee.getById(F.pointerId)&&an(U,F),r.stopEvent(F)}function an(U,F){var ee;ee={id:A(F),type:H(F),isPrimary:V(F),currentPos:oe(F),currentTime:r.now()};var ie={originalEvent:F,eventType:"pointerup",pointerType:ee.type,isEmulated:!1};Ve(U,ie),Nn(U,ie,ee,F.button),ie.preventDefault&&!ie.defaultPrevented&&r.cancelEvent(F),ie.stopPropagation&&r.stopEvent(F),ie.shouldReleaseCapture&&(F.target===U.element?R(U,ee):St(U,ee,!1))}function Gi(U,F){Li(U,F)}function Ci(U,F){var ee=U.getActivePointersListByType(H(F));ee.getById(F.pointerId)&&Li(U,F),r.stopEvent(F)}function Li(U,F){var ee={id:A(F),type:H(F),isPrimary:V(F),currentPos:oe(F),currentTime:r.now()},ie={originalEvent:F,eventType:"pointermove",pointerType:ee.type,isEmulated:!1};Ve(U,ie),sn(U,ie,ee),ie.preventDefault&&!ie.defaultPrevented&&r.cancelEvent(F),ie.stopPropagation&&r.stopEvent(F)}function N(U,F){var ee={id:F.pointerId,type:H(F)},ie={originalEvent:F,eventType:"pointercancel",pointerType:ee.type,isEmulated:!1};Ve(U,ie),ai(U,ie,ee),ie.stopPropagation&&r.stopEvent(F)}function se(U,F){return F.speed=0,F.direction=0,F.contactPos=F.currentPos,F.contactTime=F.currentTime,F.lastPos=F.currentPos,F.lastTime=F.currentTime,U.add(F)}function Oe(U,F,ee){var ie,Ie=F.getById(ee.id);return Ie?(Ie.captured&&(r.console.warn("stopTrackingPointer() called on captured pointer"),R(U,Ie)),(F.type==="mouse"||F.type==="pen")&&F.contacts>0&&F.removeContact(),ie=F.removeById(ee.id)):ie=F.getLength(),ie}function Ye(U,F){switch(F.eventType){case"pointermove":F.isStoppable=!0,F.isCancelable=!0,F.preventDefault=!1,F.preventGesture=!U.hasGestureHandlers,F.stopPropagation=!1;break;case"pointerover":case"pointerout":case"contextmenu":case"keydown":case"keyup":case"keypress":F.isStoppable=!0,F.isCancelable=!0,F.preventDefault=!1,F.preventGesture=!1,F.stopPropagation=!1;break;case"pointerdown":F.isStoppable=!0,F.isCancelable=!0,F.preventDefault=!1,F.preventGesture=!U.hasGestureHandlers,F.stopPropagation=!1;break;case"pointerup":F.isStoppable=!0,F.isCancelable=!0,F.preventDefault=!1,F.preventGesture=!U.hasGestureHandlers,F.stopPropagation=!1;break;case"wheel":F.isStoppable=!0,F.isCancelable=!0,F.preventDefault=!1,F.preventGesture=!U.hasScrollHandler,F.stopPropagation=!1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":F.isStoppable=!0,F.isCancelable=!1,F.preventDefault=!1,F.preventGesture=!1,F.stopPropagation=!1;break;case"click":F.isStoppable=!0,F.isCancelable=!0,F.preventDefault=!!U.clickHandler,F.preventGesture=!1,F.stopPropagation=!1;break;case"dblclick":F.isStoppable=!0,F.isCancelable=!0,F.preventDefault=!!U.dblClickHandler,F.preventGesture=!1,F.stopPropagation=!1;break;case"focus":case"blur":case"pointerenter":case"pointerleave":default:F.isStoppable=!1,F.isCancelable=!1,F.preventDefault=!1,F.preventGesture=!1,F.stopPropagation=!1;break}}function Ve(U,F){F.eventSource=U,F.eventPhase=F.originalEvent&&typeof F.originalEvent.eventPhase<"u"?F.originalEvent.eventPhase:0,F.defaultPrevented=r.eventIsCanceled(F.originalEvent),F.shouldCapture=!1,F.shouldReleaseCapture=!1,F.userData=U.userData,Ye(U,F),U.preProcessEventHandler&&U.preProcessEventHandler(F)}function St(U,F,ee){var ie=U.getActivePointersListByType(F.type),Ie=ie.getById(F.id);Ie?ee&&!Ie.captured?(Ie.captured=!0,ie.captureCount++):!ee&&Ie.captured&&(Ie.captured=!1,ie.captureCount--,ie.captureCount<0&&(ie.captureCount=0,r.console.warn("updatePointerCaptured() - pointsList.captureCount went negative"))):r.console.warn("updatePointerCaptured() called on untracked pointer")}function ht(U,F,ee){var ie=U.getActivePointersListByType(ee.type),Ie;Ie=ie.getById(ee.id),Ie?(Ie.insideElement=!0,Ie.lastPos=Ie.currentPos,Ie.lastTime=Ie.currentTime,Ie.currentPos=ee.currentPos,Ie.currentTime=ee.currentTime,ee=Ie):(ee.captured=!1,ee.insideElementPressed=!1,ee.insideElement=!0,se(ie,ee)),U.enterHandler&&U.enterHandler({eventSource:U,pointerType:ee.type,position:ue(ee.currentPos,U.element),buttons:ie.buttons,pointers:U.getActivePointerCount(),insideElementPressed:ee.insideElementPressed,buttonDownAny:ie.buttons!==0,isTouchEvent:ee.type==="touch",originalEvent:F.originalEvent,userData:U.userData})}function un(U,F,ee){var ie=U.getActivePointersListByType(ee.type),Ie,Je;Ie=ie.getById(ee.id),Ie?(Ie.captured?(Ie.insideElement=!1,Ie.lastPos=Ie.currentPos,Ie.lastTime=Ie.currentTime,Ie.currentPos=ee.currentPos,Ie.currentTime=ee.currentTime):Oe(U,ie,Ie),ee=Ie):(ee.captured=!1,ee.insideElementPressed=!1),(U.leaveHandler||U.exitHandler)&&(Je={eventSource:U,pointerType:ee.type,position:ee.currentPos&&ue(ee.currentPos,U.element),buttons:ie.buttons,pointers:U.getActivePointerCount(),insideElementPressed:ee.insideElementPressed,buttonDownAny:ie.buttons!==0,isTouchEvent:ee.type==="touch",originalEvent:F.originalEvent,userData:U.userData},U.leaveHandler&&U.leaveHandler(Je),U.exitHandler&&U.exitHandler(Je))}function _n(U,F,ee){var ie,Ie;ie=U.getActivePointersListByType(ee.type),Ie=ie.getById(ee.id),Ie?ee=Ie:(ee.captured=!1,ee.insideElementPressed=!1),U.overHandler&&U.overHandler({eventSource:U,pointerType:ee.type,position:ue(ee.currentPos,U.element),buttons:ie.buttons,pointers:U.getActivePointerCount(),insideElementPressed:ee.insideElementPressed,buttonDownAny:ie.buttons!==0,isTouchEvent:ee.type==="touch",originalEvent:F.originalEvent,userData:U.userData})}function cn(U,F,ee){var ie,Ie;ie=U.getActivePointersListByType(ee.type),Ie=ie.getById(ee.id),Ie?ee=Ie:(ee.captured=!1,ee.insideElementPressed=!1),U.outHandler&&U.outHandler({eventSource:U,pointerType:ee.type,position:ee.currentPos&&ue(ee.currentPos,U.element),buttons:ie.buttons,pointers:U.getActivePointerCount(),insideElementPressed:ee.insideElementPressed,buttonDownAny:ie.buttons!==0,isTouchEvent:ee.type==="touch",originalEvent:F.originalEvent,userData:U.userData})}function Vt(U,F,ee,ie){var Ie=a[U.hash],Je=U.getActivePointersListByType(ee.type),It;if(typeof F.originalEvent.buttons<"u"?Je.buttons=F.originalEvent.buttons:ie===0?Je.buttons|=1:ie===1?Je.buttons|=4:ie===2?Je.buttons|=2:ie===3?Je.buttons|=8:ie===4?Je.buttons|=16:ie===5&&(Je.buttons|=32),ie!==0){F.shouldCapture=!1,F.shouldReleaseCapture=!1,U.nonPrimaryPressHandler&&!F.preventGesture&&!F.defaultPrevented&&(F.preventDefault=!0,U.nonPrimaryPressHandler({eventSource:U,pointerType:ee.type,position:ue(ee.currentPos,U.element),button:ie,buttons:Je.buttons,isTouchEvent:ee.type==="touch",originalEvent:F.originalEvent,userData:U.userData}));return}if(It=Je.getById(ee.id),It)It.insideElementPressed=!0,It.insideElement=!0,It.originalTarget=F.originalEvent.target,It.contactPos=ee.currentPos,It.contactTime=ee.currentTime,It.lastPos=It.currentPos,It.lastTime=It.currentTime,It.currentPos=ee.currentPos,It.currentTime=ee.currentTime,ee=It;else{r.console.warn("pointerdown event on untracked pointer"),ee.captured=!1,ee.insideElementPressed=!0,ee.insideElement=!0,ee.originalTarget=F.originalEvent.target,se(Je,ee);return}Je.addContact(),!F.preventGesture&&!F.defaultPrevented?(F.shouldCapture=!0,F.shouldReleaseCapture=!1,F.preventDefault=!0,(U.dragHandler||U.dragEndHandler||U.pinchHandler)&&r.MouseTracker.gesturePointVelocityTracker.addPoint(U,ee),Je.contacts===1?U.pressHandler&&!F.preventGesture&&U.pressHandler({eventSource:U,pointerType:ee.type,position:ue(ee.contactPos,U.element),buttons:Je.buttons,isTouchEvent:ee.type==="touch",originalEvent:F.originalEvent,userData:U.userData}):Je.contacts===2&&U.pinchHandler&&ee.type==="touch"&&(Ie.pinchGPoints=Je.asArray(),Ie.lastPinchDist=Ie.currentPinchDist=Ie.pinchGPoints[0].currentPos.distanceTo(Ie.pinchGPoints[1].currentPos),Ie.lastPinchCenter=Ie.currentPinchCenter=M(Ie.pinchGPoints[0].currentPos,Ie.pinchGPoints[1].currentPos))):(F.shouldCapture=!1,F.shouldReleaseCapture=!1)}function Nn(U,F,ee,ie){var Ie=a[U.hash],Je=U.getActivePointersListByType(ee.type),It,xn,Mt,Ni=!1,Kn;if(typeof F.originalEvent.buttons<"u"?Je.buttons=F.originalEvent.buttons:ie===0?Je.buttons^=-2:ie===1?Je.buttons^=-5:ie===2?Je.buttons^=-3:ie===3?Je.buttons^=-9:ie===4?Je.buttons^=-17:ie===5&&(Je.buttons^=-33),F.shouldCapture=!1,ie!==0){F.shouldReleaseCapture=!1,U.nonPrimaryReleaseHandler&&!F.preventGesture&&!F.defaultPrevented&&(F.preventDefault=!0,U.nonPrimaryReleaseHandler({eventSource:U,pointerType:ee.type,position:ue(ee.currentPos,U.element),button:ie,buttons:Je.buttons,isTouchEvent:ee.type==="touch",originalEvent:F.originalEvent,userData:U.userData}));return}Mt=Je.getById(ee.id),Mt?(Je.removeContact(),Mt.captured&&(Ni=!0),Mt.lastPos=Mt.currentPos,Mt.lastTime=Mt.currentTime,Mt.currentPos=ee.currentPos,Mt.currentTime=ee.currentTime,Mt.insideElement||Oe(U,Je,Mt),It=Mt.currentPos,xn=Mt.currentTime):(r.console.warn("updatePointerUp(): pointerup on untracked gPoint"),ee.captured=!1,ee.insideElementPressed=!1,ee.insideElement=!0,se(Je,ee),Mt=ee),!F.preventGesture&&!F.defaultPrevented&&(Ni?(F.shouldReleaseCapture=!0,F.preventDefault=!0,(U.dragHandler||U.dragEndHandler||U.pinchHandler)&&r.MouseTracker.gesturePointVelocityTracker.removePoint(U,Mt),Je.contacts===0?(U.releaseHandler&&U.releaseHandler({eventSource:U,pointerType:Mt.type,position:ue(It,U.element),buttons:Je.buttons,insideElementPressed:Mt.insideElementPressed,insideElementReleased:Mt.insideElement,isTouchEvent:Mt.type==="touch",originalEvent:F.originalEvent,userData:U.userData}),U.dragEndHandler&&Ie.sentDragEvent&&U.dragEndHandler({eventSource:U,pointerType:Mt.type,position:ue(Mt.currentPos,U.element),speed:Mt.speed,direction:Mt.direction,shift:F.originalEvent.shiftKey,isTouchEvent:Mt.type==="touch",originalEvent:F.originalEvent,userData:U.userData}),Ie.sentDragEvent=!1,(U.clickHandler||U.dblClickHandler)&&Mt.insideElement&&(Kn=xn-Mt.contactTime<=U.clickTimeThreshold&&Mt.contactPos.distanceTo(It)<=U.clickDistThreshold,U.clickHandler&&U.clickHandler({eventSource:U,pointerType:Mt.type,position:ue(Mt.currentPos,U.element),quick:Kn,shift:F.originalEvent.shiftKey,isTouchEvent:Mt.type==="touch",originalEvent:F.originalEvent,originalTarget:Mt.originalTarget,userData:U.userData}),U.dblClickHandler&&Kn&&(Je.clicks++,Je.clicks===1?(Ie.lastClickPos=It,Ie.dblClickTimeOut=setTimeout(function(){Je.clicks=0},U.dblClickTimeThreshold)):Je.clicks===2&&(clearTimeout(Ie.dblClickTimeOut),Je.clicks=0,Ie.lastClickPos.distanceTo(It)<=U.dblClickDistThreshold&&U.dblClickHandler({eventSource:U,pointerType:Mt.type,position:ue(Mt.currentPos,U.element),shift:F.originalEvent.shiftKey,isTouchEvent:Mt.type==="touch",originalEvent:F.originalEvent,userData:U.userData}),Ie.lastClickPos=null)))):Je.contacts===2&&U.pinchHandler&&Mt.type==="touch"&&(Ie.pinchGPoints=Je.asArray(),Ie.lastPinchDist=Ie.currentPinchDist=Ie.pinchGPoints[0].currentPos.distanceTo(Ie.pinchGPoints[1].currentPos),Ie.lastPinchCenter=Ie.currentPinchCenter=M(Ie.pinchGPoints[0].currentPos,Ie.pinchGPoints[1].currentPos))):(F.shouldReleaseCapture=!1,U.releaseHandler&&(U.releaseHandler({eventSource:U,pointerType:Mt.type,position:ue(It,U.element),buttons:Je.buttons,insideElementPressed:Mt.insideElementPressed,insideElementReleased:Mt.insideElement,isTouchEvent:Mt.type==="touch",originalEvent:F.originalEvent,userData:U.userData}),F.preventDefault=!0)))}function sn(U,F,ee){var ie=a[U.hash],Ie=U.getActivePointersListByType(ee.type),Je,It,xn;if(typeof F.originalEvent.buttons<"u"&&(Ie.buttons=F.originalEvent.buttons),Je=Ie.getById(ee.id),Je)Je.lastPos=Je.currentPos,Je.lastTime=Je.currentTime,Je.currentPos=ee.currentPos,Je.currentTime=ee.currentTime;else return;F.shouldCapture=!1,F.shouldReleaseCapture=!1,U.stopHandler&&ee.type==="mouse"&&(clearTimeout(U.stopTimeOut),U.stopTimeOut=setTimeout(function(){Gr(U,F.originalEvent,ee.type)},U.stopDelay)),Ie.contacts===0?U.moveHandler&&U.moveHandler({eventSource:U,pointerType:ee.type,position:ue(ee.currentPos,U.element),buttons:Ie.buttons,isTouchEvent:ee.type==="touch",originalEvent:F.originalEvent,userData:U.userData}):Ie.contacts===1?(U.moveHandler&&(Je=Ie.asArray()[0],U.moveHandler({eventSource:U,pointerType:Je.type,position:ue(Je.currentPos,U.element),buttons:Ie.buttons,isTouchEvent:Je.type==="touch",originalEvent:F.originalEvent,userData:U.userData})),U.dragHandler&&!F.preventGesture&&!F.defaultPrevented&&(Je=Ie.asArray()[0],xn=Je.currentPos.minus(Je.lastPos),U.dragHandler({eventSource:U,pointerType:Je.type,position:ue(Je.currentPos,U.element),buttons:Ie.buttons,delta:xn,speed:Je.speed,direction:Je.direction,shift:F.originalEvent.shiftKey,isTouchEvent:Je.type==="touch",originalEvent:F.originalEvent,userData:U.userData}),F.preventDefault=!0,ie.sentDragEvent=!0)):Ie.contacts===2&&(U.moveHandler&&(It=Ie.asArray(),U.moveHandler({eventSource:U,pointerType:It[0].type,position:ue(M(It[0].currentPos,It[1].currentPos),U.element),buttons:Ie.buttons,isTouchEvent:It[0].type==="touch",originalEvent:F.originalEvent,userData:U.userData})),U.pinchHandler&&ee.type==="touch"&&!F.preventGesture&&!F.defaultPrevented&&(xn=ie.pinchGPoints[0].currentPos.distanceTo(ie.pinchGPoints[1].currentPos),xn!==ie.currentPinchDist&&(ie.lastPinchDist=ie.currentPinchDist,ie.currentPinchDist=xn,ie.lastPinchCenter=ie.currentPinchCenter,ie.currentPinchCenter=M(ie.pinchGPoints[0].currentPos,ie.pinchGPoints[1].currentPos),U.pinchHandler({eventSource:U,pointerType:"touch",gesturePoints:ie.pinchGPoints,lastCenter:ue(ie.lastPinchCenter,U.element),center:ue(ie.currentPinchCenter,U.element),lastDistance:ie.lastPinchDist,distance:ie.currentPinchDist,shift:F.originalEvent.shiftKey,originalEvent:F.originalEvent,userData:U.userData}),F.preventDefault=!0)))}function ai(U,F,ee){var ie=U.getActivePointersListByType(ee.type),Ie;Ie=ie.getById(ee.id),Ie&&Oe(U,ie,Ie)}function Gr(U,F,ee){U.stopHandler&&U.stopHandler({eventSource:U,pointerType:ee,position:ne(F,U.element),buttons:U.getActivePointersListByType(ee).buttons,isTouchEvent:ee==="touch",originalEvent:F,userData:U.userData})}}(l),function(r){r.ControlAnchor={NONE:0,TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4,ABSOLUTE:5},r.Control=function(a,c,f){var g=a.parentNode;typeof c=="number"&&(r.console.error("Passing an anchor directly into the OpenSeadragon.Control constructor is deprecated; please use an options object instead.  Support for this deprecated variant is scheduled for removal in December 2013"),c={anchor:c}),c.attachToViewer=typeof c.attachToViewer>"u"?!0:c.attachToViewer,this.autoFade=typeof c.autoFade>"u"?!0:c.autoFade,this.element=a,this.anchor=c.anchor,this.container=f,this.anchor===r.ControlAnchor.ABSOLUTE?(this.wrapper=r.makeNeutralElement("div"),this.wrapper.style.position="absolute",this.wrapper.style.top=typeof c.top=="number"?c.top+"px":c.top,this.wrapper.style.left=typeof c.left=="number"?c.left+"px":c.left,this.wrapper.style.height=typeof c.height=="number"?c.height+"px":c.height,this.wrapper.style.width=typeof c.width=="number"?c.width+"px":c.width,this.wrapper.style.margin="0px",this.wrapper.style.padding="0px",this.element.style.position="relative",this.element.style.top="0px",this.element.style.left="0px",this.element.style.height="100%",this.element.style.width="100%"):(this.wrapper=r.makeNeutralElement("div"),this.wrapper.style.display="inline-block",this.anchor===r.ControlAnchor.NONE&&(this.wrapper.style.width=this.wrapper.style.height="100%")),this.wrapper.appendChild(this.element),c.attachToViewer?this.anchor===r.ControlAnchor.TOP_RIGHT||this.anchor===r.ControlAnchor.BOTTOM_RIGHT?this.container.insertBefore(this.wrapper,this.container.firstChild):this.container.appendChild(this.wrapper):g.appendChild(this.wrapper)},r.Control.prototype={destroy:function(){this.wrapper.removeChild(this.element),this.anchor!==r.ControlAnchor.NONE&&this.container.removeChild(this.wrapper)},isVisible:function(){return this.wrapper.style.display!=="none"},setVisible:function(a){this.wrapper.style.display=a?this.anchor===r.ControlAnchor.ABSOLUTE?"block":"inline-block":"none"},setOpacity:function(a){this.element[r.SIGNAL]&&r.Browser.vendor===r.BROWSERS.IE?r.setElementOpacity(this.element,a,!0):r.setElementOpacity(this.wrapper,a,!0)}}}(l),function(r){r.ControlDock=function(c){var f=["topleft","topright","bottomright","bottomleft"],g,y;for(r.extend(!0,this,{id:"controldock-"+r.now()+"-"+Math.floor(Math.random()*1e6),container:r.makeNeutralElement("div"),controls:[]},c),this.container.onsubmit=function(){return!1},this.element&&(this.element=r.getElement(this.element),this.element.appendChild(this.container),this.element.style.position="relative",this.container.style.width="100%",this.container.style.height="100%"),y=0;y<f.length;y++)g=f[y],this.controls[g]=r.makeNeutralElement("div"),this.controls[g].style.position="absolute",g.match("left")&&(this.controls[g].style.left="0px"),g.match("right")&&(this.controls[g].style.right="0px"),g.match("top")&&(this.controls[g].style.top="0px"),g.match("bottom")&&(this.controls[g].style.bottom="0px");this.container.appendChild(this.controls.topleft),this.container.appendChild(this.controls.topright),this.container.appendChild(this.controls.bottomright),this.container.appendChild(this.controls.bottomleft)},r.ControlDock.prototype={addControl:function(c,f){c=r.getElement(c);var g=null;if(!(a(this,c)>=0)){switch(f.anchor){case r.ControlAnchor.TOP_RIGHT:g=this.controls.topright,c.style.position="relative",c.style.paddingRight="0px",c.style.paddingTop="0px";break;case r.ControlAnchor.BOTTOM_RIGHT:g=this.controls.bottomright,c.style.position="relative",c.style.paddingRight="0px",c.style.paddingBottom="0px";break;case r.ControlAnchor.BOTTOM_LEFT:g=this.controls.bottomleft,c.style.position="relative",c.style.paddingLeft="0px",c.style.paddingBottom="0px";break;case r.ControlAnchor.TOP_LEFT:g=this.controls.topleft,c.style.position="relative",c.style.paddingLeft="0px",c.style.paddingTop="0px";break;case r.ControlAnchor.ABSOLUTE:g=this.container,c.style.margin="0px",c.style.padding="0px";break;default:case r.ControlAnchor.NONE:g=this.container,c.style.margin="0px",c.style.padding="0px";break}this.controls.push(new r.Control(c,f,g)),c.style.display="inline-block"}},removeControl:function(c){c=r.getElement(c);var f=a(this,c);return f>=0&&(this.controls[f].destroy(),this.controls.splice(f,1)),this},clearControls:function(){for(;this.controls.length>0;)this.controls.pop().destroy();return this},areControlsEnabled:function(){var c;for(c=this.controls.length-1;c>=0;c--)if(this.controls[c].isVisible())return!0;return!1},setControlsEnabled:function(c){var f;for(f=this.controls.length-1;f>=0;f--)this.controls[f].setVisible(c);return this}};function a(c,f){var g=c.controls,y;for(y=g.length-1;y>=0;y--)if(g[y].element===f)return y;return-1}}(l),function(r){r.Placement=r.freezeObject({CENTER:0,TOP_LEFT:1,TOP:2,TOP_RIGHT:3,RIGHT:4,BOTTOM_RIGHT:5,BOTTOM:6,BOTTOM_LEFT:7,LEFT:8,properties:{0:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1},1:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},2:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},3:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!0,isVerticallyCentered:!1,isBottom:!1},4:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!0,isBottom:!1},5:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!1,isBottom:!0},6:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},7:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},8:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1}}})}(l),function(r){var a={},c=1;r.Viewer=function(N){var se=arguments,Oe=this,Ye;if(r.isPlainObject(N)||(N={id:se[0],xmlPath:se.length>1?se[1]:void 0,prefixUrl:se.length>2?se[2]:void 0,controls:se.length>3?se[3]:void 0,overlays:se.length>4?se[4]:void 0}),N.config&&(r.extend(!0,N,N.config),delete N.config),r.extend(!0,this,{id:N.id,hash:N.hash||c++,initialPage:0,element:null,container:null,canvas:null,overlays:[],overlaysContainer:null,previousBody:[],customControls:[],source:null,drawer:null,world:null,viewport:null,navigator:null,collectionViewport:null,collectionDrawer:null,navImages:null,buttons:null,profiler:null},r.DEFAULT_SETTINGS,N),typeof this.hash>"u")throw new Error("A hash must be defined, either by specifying options.id or options.hash.");for(typeof a[this.hash]<"u"&&r.console.warn("Hash "+this.hash+" has already been used."),a[this.hash]={fsBoundsDelta:new r.Point(1,1),prevContainerSize:null,animating:!1,forceRedraw:!1,mouseInside:!1,group:null,zooming:!1,zoomFactor:null,lastZoomTime:null,fullPage:!1,onfullscreenchange:null},this._sequenceIndex=0,this._firstOpen=!0,this._updateRequestId=null,this._loadQueue=[],this.currentOverlays=[],this._updatePixelDensityRatioBind=null,this._lastScrollTime=r.now(),r.EventSource.call(this),this.addHandler("open-failed",function(Ve){var St=r.getString("Errors.OpenFailed",Ve.eventSource,Ve.message);Oe._showMessage(St)}),r.ControlDock.call(this,N),this.xmlPath&&(this.tileSources=[this.xmlPath]),this.element=this.element||document.getElementById(this.id),this.canvas=r.makeNeutralElement("div"),this.canvas.className="openseadragon-canvas",function(Ve){Ve.width="100%",Ve.height="100%",Ve.overflow="hidden",Ve.position="absolute",Ve.top="0px",Ve.left="0px"}(this.canvas.style),r.setElementTouchActionNone(this.canvas),N.tabIndex!==""&&(this.canvas.tabIndex=N.tabIndex===void 0?0:N.tabIndex),this.container.className="openseadragon-container",function(Ve){Ve.width="100%",Ve.height="100%",Ve.position="relative",Ve.overflow="hidden",Ve.left="0px",Ve.top="0px",Ve.textAlign="left"}(this.container.style),r.setElementTouchActionNone(this.container),this.container.insertBefore(this.canvas,this.container.firstChild),this.element.appendChild(this.container),this.bodyWidth=document.body.style.width,this.bodyHeight=document.body.style.height,this.bodyOverflow=document.body.style.overflow,this.docOverflow=document.documentElement.style.overflow,this.innerTracker=new r.MouseTracker({userData:"Viewer.innerTracker",element:this.canvas,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,contextMenuHandler:r.delegate(this,ne),keyDownHandler:r.delegate(this,ue),keyHandler:r.delegate(this,M),clickHandler:r.delegate(this,re),dblClickHandler:r.delegate(this,ge),dragHandler:r.delegate(this,pe),dragEndHandler:r.delegate(this,Ee),enterHandler:r.delegate(this,Ce),leaveHandler:r.delegate(this,Ze),pressHandler:r.delegate(this,Ke),releaseHandler:r.delegate(this,ut),nonPrimaryPressHandler:r.delegate(this,pt),nonPrimaryReleaseHandler:r.delegate(this,ct),scrollHandler:r.delegate(this,Ct),pinchHandler:r.delegate(this,_t)}),this.outerTracker=new r.MouseTracker({userData:"Viewer.outerTracker",element:this.container,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,enterHandler:r.delegate(this,Wt),leaveHandler:r.delegate(this,Ut)}),this.toolbar&&(this.toolbar=new r.ControlDock({element:this.toolbar})),this.bindStandardControls(),a[this.hash].prevContainerSize=f(this.container),this.world=new r.World({viewer:this}),this.world.addHandler("add-item",function(Ve){Oe.source=Oe.world.getItemAt(0).source,a[Oe.hash].forceRedraw=!0,Oe._updateRequestId||(Oe._updateRequestId=b(Oe,Zt))}),this.world.addHandler("remove-item",function(Ve){Oe.world.getItemCount()?Oe.source=Oe.world.getItemAt(0).source:Oe.source=null,a[Oe.hash].forceRedraw=!0}),this.world.addHandler("metrics-change",function(Ve){Oe.viewport&&Oe.viewport._setContentBounds(Oe.world.getHomeBounds(),Oe.world.getContentFactor())}),this.world.addHandler("item-index-change",function(Ve){Oe.source=Oe.world.getItemAt(0).source}),this.viewport=new r.Viewport({containerSize:a[this.hash].prevContainerSize,springStiffness:this.springStiffness,animationTime:this.animationTime,minZoomImageRatio:this.minZoomImageRatio,maxZoomPixelRatio:this.maxZoomPixelRatio,visibilityRatio:this.visibilityRatio,wrapHorizontal:this.wrapHorizontal,wrapVertical:this.wrapVertical,defaultZoomLevel:this.defaultZoomLevel,minZoomLevel:this.minZoomLevel,maxZoomLevel:this.maxZoomLevel,viewer:this,degrees:this.degrees,flipped:this.flipped,navigatorRotate:this.navigatorRotate,homeFillsViewer:this.homeFillsViewer,margins:this.viewportMargins}),this.viewport._setContentBounds(this.world.getHomeBounds(),this.world.getContentFactor()),this.imageLoader=new r.ImageLoader({jobLimit:this.imageLoaderLimit,timeout:N.timeout}),this.tileCache=new r.TileCache({maxImageCacheCount:this.maxImageCacheCount}),this.drawer=new r.Drawer({viewer:this,viewport:this.viewport,element:this.canvas,debugGridColor:this.debugGridColor}),this.overlaysContainer=r.makeNeutralElement("div"),this.canvas.appendChild(this.overlaysContainer),this.drawer.canRotate()||(this.rotateLeft&&(Ye=this.buttonGroup.buttons.indexOf(this.rotateLeft),this.buttonGroup.buttons.splice(Ye,1),this.buttonGroup.element.removeChild(this.rotateLeft.element)),this.rotateRight&&(Ye=this.buttonGroup.buttons.indexOf(this.rotateRight),this.buttonGroup.buttons.splice(Ye,1),this.buttonGroup.element.removeChild(this.rotateRight.element))),this._addUpdatePixelDensityRatioEvent(),this.showNavigator&&(this.navigator=new r.Navigator({id:this.navigatorId,position:this.navigatorPosition,sizeRatio:this.navigatorSizeRatio,maintainSizeRatio:this.navigatorMaintainSizeRatio,top:this.navigatorTop,left:this.navigatorLeft,width:this.navigatorWidth,height:this.navigatorHeight,autoResize:this.navigatorAutoResize,autoFade:this.navigatorAutoFade,prefixUrl:this.prefixUrl,viewer:this,navigatorRotate:this.navigatorRotate,background:this.navigatorBackground,opacity:this.navigatorOpacity,borderColor:this.navigatorBorderColor,displayRegionColor:this.navigatorDisplayRegionColor,crossOriginPolicy:this.crossOriginPolicy})),this.sequenceMode&&this.bindSequenceControls(),this.tileSources&&this.open(this.tileSources),Ye=0;Ye<this.customControls.length;Ye++)this.addControl(this.customControls[Ye].id,{anchor:this.customControls[Ye].anchor});r.requestAnimationFrame(function(){R(Oe)}),this.imageSmoothingEnabled!==void 0&&!this.imageSmoothingEnabled&&this.drawer.setImageSmoothingEnabled(this.imageSmoothingEnabled),r._viewers.set(this.element,this)},r.extend(r.Viewer.prototype,r.EventSource.prototype,r.ControlDock.prototype,{isOpen:function(){return!!this.world.getItemCount()},openDzi:function(N){return r.console.error("[Viewer.openDzi] this function is deprecated; use Viewer.open() instead."),this.open(N)},openTileSource:function(N){return r.console.error("[Viewer.openTileSource] this function is deprecated; use Viewer.open() instead."),this.open(N)},open:function(N,se){var Oe=this;if(this.close(),!N)return this;if(this.sequenceMode&&r.isArray(N))return this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),typeof se<"u"&&!isNaN(se)&&(this.initialPage=se),this.tileSources=N,this._sequenceIndex=Math.max(0,Math.min(this.tileSources.length-1,this.initialPage)),this.tileSources.length&&(this.open(this.tileSources[this._sequenceIndex]),this.showReferenceStrip&&this.addReferenceStrip()),this._updateSequenceButtons(this._sequenceIndex),this;if(r.isArray(N)||(N=[N]),!N.length)return this;this._opening=!0;for(var Ye=N.length,Ve=0,St=0,ht,un=function(){if(Ve+St===Ye)if(Ve){(Oe._firstOpen||!Oe.preserveViewport)&&(Oe.viewport.goHome(!0),Oe.viewport.update()),Oe._firstOpen=!1;var Vt=N[0];if(Vt.tileSource&&(Vt=Vt.tileSource),Oe.overlays&&!Oe.preserveOverlays)for(var Nn=0;Nn<Oe.overlays.length;Nn++)Oe.currentOverlays[Nn]=y(Oe,Oe.overlays[Nn]);Oe._drawOverlays(),Oe._opening=!1,Oe.raiseEvent("open",{source:Vt})}else Oe._opening=!1,Oe.raiseEvent("open-failed",ht)},_n=function(Vt){(!r.isPlainObject(Vt)||!Vt.tileSource)&&(Vt={tileSource:Vt}),Vt.index!==void 0&&(r.console.error("[Viewer.open] setting indexes here is not supported; use addTiledImage instead"),delete Vt.index),Vt.collectionImmediately===void 0&&(Vt.collectionImmediately=!0);var Nn=Vt.success;Vt.success=function(ai){if(Ve++,Vt.tileSource.overlays)for(var Gr=0;Gr<Vt.tileSource.overlays.length;Gr++)Oe.addOverlay(Vt.tileSource.overlays[Gr]);Nn&&Nn(ai),un()};var sn=Vt.error;Vt.error=function(ai){St++,ht||(ht=ai),sn&&sn(ai),un()},Oe.addTiledImage(Vt)},cn=0;cn<N.length;cn++)_n(N[cn]);return this},close:function(){return a[this.hash]?(this._opening=!1,this.navigator&&this.navigator.close(),this.preserveOverlays||(this.clearOverlays(),this.overlaysContainer.innerHTML=""),a[this.hash].animating=!1,this.world.removeAll(),this.imageLoader.clear(),this.raiseEvent("close"),this):this},destroy:function(){if(a[this.hash]){if(this._removeUpdatePixelDensityRatioEvent(),this.close(),this.clearOverlays(),this.overlaysContainer.innerHTML="",this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),this._updateRequestId!==null&&(r.cancelAnimationFrame(this._updateRequestId),this._updateRequestId=null),this.drawer&&this.drawer.destroy(),this.navigator&&(this.navigator.destroy(),a[this.navigator.hash]=null,delete a[this.navigator.hash],this.navigator=null),this.removeAllHandlers(),this.buttonGroup)this.buttonGroup.destroy();else if(this.customButtons)for(;this.customButtons.length;)this.customButtons.pop().destroy();if(this.paging&&this.paging.destroy(),this.element)for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.container.onsubmit=null,this.clearControls(),this.innerTracker&&this.innerTracker.destroy(),this.outerTracker&&this.outerTracker.destroy(),a[this.hash]=null,delete a[this.hash],this.canvas=null,this.container=null,r._viewers.delete(this.element),this.element=null}},isMouseNavEnabled:function(){return this.innerTracker.isTracking()},setMouseNavEnabled:function(N){return this.innerTracker.setTracking(N),this.outerTracker.setTracking(N),this.raiseEvent("mouse-enabled",{enabled:N}),this},areControlsEnabled:function(){var N=this.controls.length,se;for(se=0;se<this.controls.length;se++)N=N&&this.controls[se].isVisible();return N},setControlsEnabled:function(N){return N?H(this):R(this),this.raiseEvent("controls-enabled",{enabled:N}),this},setDebugMode:function(N){for(var se=0;se<this.world.getItemCount();se++)this.world.getItemAt(se).debugMode=N;this.debugMode=N,this.forceRedraw()},isFullPage:function(){return a[this.hash].fullPage},setFullPage:function(N){var se=document.body,Oe=se.style,Ye=document.documentElement.style,Ve=this,St,ht;if(N===this.isFullPage())return this;var un={fullPage:N,preventDefaultAction:!1};if(this.raiseEvent("pre-full-page",un),un.preventDefaultAction)return this;if(N){for(this.elementSize=r.getElementSize(this.element),this.pageScroll=r.getPageScroll(),this.elementMargin=this.element.style.margin,this.element.style.margin="0",this.elementPadding=this.element.style.padding,this.element.style.padding="0",this.bodyMargin=Oe.margin,this.docMargin=Ye.margin,Oe.margin="0",Ye.margin="0",this.bodyPadding=Oe.padding,this.docPadding=Ye.padding,Oe.padding="0",Ye.padding="0",this.bodyWidth=Oe.width,this.docWidth=Ye.width,Oe.width="100%",Ye.width="100%",this.bodyHeight=Oe.height,this.docHeight=Ye.height,Oe.height="100%",Ye.height="100%",this.bodyDisplay=Oe.display,Oe.display="block",this.previousBody=[],a[this.hash].prevElementParent=this.element.parentNode,a[this.hash].prevNextSibling=this.element.nextSibling,a[this.hash].prevElementWidth=this.element.style.width,a[this.hash].prevElementHeight=this.element.style.height,St=se.childNodes.length,ht=0;ht<St;ht++)this.previousBody.push(se.childNodes[0]),se.removeChild(se.childNodes[0]);this.toolbar&&this.toolbar.element&&(this.toolbar.parentNode=this.toolbar.element.parentNode,this.toolbar.nextSibling=this.toolbar.element.nextSibling,se.appendChild(this.toolbar.element),r.addClass(this.toolbar.element,"fullpage")),r.addClass(this.element,"fullpage"),se.appendChild(this.element),this.element.style.height=r.getWindowSize().y+"px",this.element.style.width=r.getWindowSize().x+"px",this.toolbar&&this.toolbar.element&&(this.element.style.height=r.getElementSize(this.element).y-r.getElementSize(this.toolbar.element).y+"px"),a[this.hash].fullPage=!0,r.delegate(this,Wt)({})}else{for(this.element.style.margin=this.elementMargin,this.element.style.padding=this.elementPadding,Oe.margin=this.bodyMargin,Ye.margin=this.docMargin,Oe.padding=this.bodyPadding,Ye.padding=this.docPadding,Oe.width=this.bodyWidth,Ye.width=this.docWidth,Oe.height=this.bodyHeight,Ye.height=this.docHeight,Oe.display=this.bodyDisplay,se.removeChild(this.element),St=this.previousBody.length,ht=0;ht<St;ht++)se.appendChild(this.previousBody.shift());r.removeClass(this.element,"fullpage"),a[this.hash].prevElementParent.insertBefore(this.element,a[this.hash].prevNextSibling),this.toolbar&&this.toolbar.element&&(se.removeChild(this.toolbar.element),r.removeClass(this.toolbar.element,"fullpage"),this.toolbar.parentNode.insertBefore(this.toolbar.element,this.toolbar.nextSibling),delete this.toolbar.parentNode,delete this.toolbar.nextSibling),this.element.style.width=a[this.hash].prevElementWidth,this.element.style.height=a[this.hash].prevElementHeight;var _n=0,cn=function(){r.setPageScroll(Ve.pageScroll);var Vt=r.getPageScroll();_n++,_n<10&&(Vt.x!==Ve.pageScroll.x||Vt.y!==Ve.pageScroll.y)&&r.requestAnimationFrame(cn)};r.requestAnimationFrame(cn),a[this.hash].fullPage=!1,r.delegate(this,Ut)({})}return this.navigator&&this.viewport&&this.navigator.update(this.viewport),this.raiseEvent("full-page",{fullPage:N}),this},setFullScreen:function(N){var se=this;if(!r.supportsFullScreen)return this.setFullPage(N);if(r.isFullScreen()===N)return this;var Oe={fullScreen:N,preventDefaultAction:!1};if(this.raiseEvent("pre-full-screen",Oe),Oe.preventDefaultAction)return this;if(N){if(this.setFullPage(!0),!this.isFullPage())return this;this.fullPageStyleWidth=this.element.style.width,this.fullPageStyleHeight=this.element.style.height,this.element.style.width="100%",this.element.style.height="100%";var Ye=function(){var Ve=r.isFullScreen();Ve||(r.removeEvent(document,r.fullScreenEventName,Ye),r.removeEvent(document,r.fullScreenErrorEventName,Ye),se.setFullPage(!1),se.isFullPage()&&(se.element.style.width=se.fullPageStyleWidth,se.element.style.height=se.fullPageStyleHeight)),se.navigator&&se.viewport&&setTimeout(function(){se.navigator.update(se.viewport)}),se.raiseEvent("full-screen",{fullScreen:Ve})};r.addEvent(document,r.fullScreenEventName,Ye),r.addEvent(document,r.fullScreenErrorEventName,Ye),r.requestFullScreen(document.body)}else r.exitFullScreen();return this},isVisible:function(){return this.container.style.visibility!=="hidden"},setVisible:function(N){return this.container.style.visibility=N?"":"hidden",this.raiseEvent("visible",{visible:N}),this},addTiledImage:function(N){r.console.assert(N,"[Viewer.addTiledImage] options is required"),r.console.assert(N.tileSource,"[Viewer.addTiledImage] options.tileSource is required"),r.console.assert(!N.replace||N.index>-1&&N.index<this.world.getItemCount(),"[Viewer.addTiledImage] if options.replace is used, options.index must be a valid index in Viewer.world");var se=this;N.replace&&(N.replaceItem=se.world.getItemAt(N.index)),this._hideMessage(),N.placeholderFillStyle===void 0&&(N.placeholderFillStyle=this.placeholderFillStyle),N.opacity===void 0&&(N.opacity=this.opacity),N.preload===void 0&&(N.preload=this.preload),N.compositeOperation===void 0&&(N.compositeOperation=this.compositeOperation),N.crossOriginPolicy===void 0&&(N.crossOriginPolicy=N.tileSource.crossOriginPolicy!==void 0?N.tileSource.crossOriginPolicy:this.crossOriginPolicy),N.ajaxWithCredentials===void 0&&(N.ajaxWithCredentials=this.ajaxWithCredentials),N.loadTilesWithAjax===void 0&&(N.loadTilesWithAjax=this.loadTilesWithAjax),N.ajaxHeaders===void 0||N.ajaxHeaders===null?N.ajaxHeaders=this.ajaxHeaders:r.isPlainObject(N.ajaxHeaders)&&r.isPlainObject(this.ajaxHeaders)&&(N.ajaxHeaders=r.extend({},this.ajaxHeaders,N.ajaxHeaders));var Oe={options:N};function Ye(ht){for(var un=0;un<se._loadQueue.length;un++)if(se._loadQueue[un]===Oe){se._loadQueue.splice(un,1);break}se._loadQueue.length===0&&Ve(Oe),se.raiseEvent("add-item-failed",ht),N.error&&N.error(ht)}function Ve(ht){se.collectionMode&&(se.world.arrange({immediately:ht.options.collectionImmediately,rows:se.collectionRows,columns:se.collectionColumns,layout:se.collectionLayout,tileSize:se.collectionTileSize,tileMargin:se.collectionTileMargin}),se.world.setAutoRefigureSizes(!0))}if(r.isArray(N.tileSource)){setTimeout(function(){Ye({message:"[Viewer.addTiledImage] Sequences can not be added; add them one at a time instead.",source:N.tileSource,options:N})});return}this._loadQueue.push(Oe);function St(){for(var ht,un,_n;se._loadQueue.length&&(ht=se._loadQueue[0],!!ht.tileSource);){if(se._loadQueue.splice(0,1),ht.options.replace){var cn=se.world.getIndexOfItem(ht.options.replaceItem);cn!==-1&&(ht.options.index=cn),se.world.removeItem(ht.options.replaceItem)}un=new r.TiledImage({viewer:se,source:ht.tileSource,viewport:se.viewport,drawer:se.drawer,tileCache:se.tileCache,imageLoader:se.imageLoader,x:ht.options.x,y:ht.options.y,width:ht.options.width,height:ht.options.height,fitBounds:ht.options.fitBounds,fitBoundsPlacement:ht.options.fitBoundsPlacement,clip:ht.options.clip,placeholderFillStyle:ht.options.placeholderFillStyle,opacity:ht.options.opacity,preload:ht.options.preload,degrees:ht.options.degrees,flipped:ht.options.flipped,compositeOperation:ht.options.compositeOperation,springStiffness:se.springStiffness,animationTime:se.animationTime,minZoomImageRatio:se.minZoomImageRatio,wrapHorizontal:se.wrapHorizontal,wrapVertical:se.wrapVertical,immediateRender:se.immediateRender,blendTime:se.blendTime,alwaysBlend:se.alwaysBlend,minPixelRatio:se.minPixelRatio,smoothTileEdgesMinZoom:se.smoothTileEdgesMinZoom,iOSDevice:se.iOSDevice,crossOriginPolicy:ht.options.crossOriginPolicy,ajaxWithCredentials:ht.options.ajaxWithCredentials,loadTilesWithAjax:ht.options.loadTilesWithAjax,ajaxHeaders:ht.options.ajaxHeaders,debugMode:se.debugMode}),se.collectionMode&&se.world.setAutoRefigureSizes(!1),se.navigator&&(_n=r.extend({},ht.options,{replace:!1,originalTiledImage:un,tileSource:ht.tileSource}),se.navigator.addTiledImage(_n)),se.world.addItem(un,{index:ht.options.index}),se._loadQueue.length===0&&Ve(ht),se.world.getItemCount()===1&&!se.preserveViewport&&se.viewport.goHome(!0),ht.options.success&&ht.options.success({item:un})}}g(this,N.tileSource,N,function(ht){Oe.tileSource=ht,St()},function(ht){ht.options=N,Ye(ht),St()})},addSimpleImage:function(N){r.console.assert(N,"[Viewer.addSimpleImage] options is required"),r.console.assert(N.url,"[Viewer.addSimpleImage] options.url is required");var se=r.extend({},N,{tileSource:{type:"image",url:N.url}});delete se.url,this.addTiledImage(se)},addLayer:function(N){var se=this;r.console.error("[Viewer.addLayer] this function is deprecated; use Viewer.addTiledImage() instead.");var Oe=r.extend({},N,{success:function(Ye){se.raiseEvent("add-layer",{options:N,drawer:Ye.item})},error:function(Ye){se.raiseEvent("add-layer-failed",Ye)}});return this.addTiledImage(Oe),this},getLayerAtLevel:function(N){return r.console.error("[Viewer.getLayerAtLevel] this function is deprecated; use World.getItemAt() instead."),this.world.getItemAt(N)},getLevelOfLayer:function(N){return r.console.error("[Viewer.getLevelOfLayer] this function is deprecated; use World.getIndexOfItem() instead."),this.world.getIndexOfItem(N)},getLayersCount:function(){return r.console.error("[Viewer.getLayersCount] this function is deprecated; use World.getItemCount() instead."),this.world.getItemCount()},setLayerLevel:function(N,se){return r.console.error("[Viewer.setLayerLevel] this function is deprecated; use World.setItemIndex() instead."),this.world.setItemIndex(N,se)},removeLayer:function(N){return r.console.error("[Viewer.removeLayer] this function is deprecated; use World.removeItem() instead."),this.world.removeItem(N)},forceRedraw:function(){return a[this.hash].forceRedraw=!0,this},bindSequenceControls:function(){var N=r.delegate(this,V),se=r.delegate(this,oe),Oe=r.delegate(this,this.goToNextPage),Ye=r.delegate(this,this.goToPreviousPage),Ve=this.navImages,St=!0;return this.showSequenceControl&&((this.previousButton||this.nextButton)&&(St=!1),this.previousButton=new r.Button({element:this.previousButton?r.getElement(this.previousButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:r.getString("Tooltips.PreviousPage"),srcRest:dt(this.prefixUrl,Ve.previous.REST),srcGroup:dt(this.prefixUrl,Ve.previous.GROUP),srcHover:dt(this.prefixUrl,Ve.previous.HOVER),srcDown:dt(this.prefixUrl,Ve.previous.DOWN),onRelease:Ye,onFocus:N,onBlur:se}),this.nextButton=new r.Button({element:this.nextButton?r.getElement(this.nextButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:r.getString("Tooltips.NextPage"),srcRest:dt(this.prefixUrl,Ve.next.REST),srcGroup:dt(this.prefixUrl,Ve.next.GROUP),srcHover:dt(this.prefixUrl,Ve.next.HOVER),srcDown:dt(this.prefixUrl,Ve.next.DOWN),onRelease:Oe,onFocus:N,onBlur:se}),this.navPrevNextWrap||this.previousButton.disable(),(!this.tileSources||!this.tileSources.length)&&this.nextButton.disable(),St&&(this.paging=new r.ButtonGroup({buttons:[this.previousButton,this.nextButton],clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.pagingControl=this.paging.element,this.toolbar?this.toolbar.addControl(this.pagingControl,{anchor:r.ControlAnchor.BOTTOM_RIGHT}):this.addControl(this.pagingControl,{anchor:this.sequenceControlAnchor||r.ControlAnchor.TOP_LEFT}))),this},bindStandardControls:function(){var N=r.delegate(this,Jt),se=r.delegate(this,tt),Oe=r.delegate(this,lt),Ye=r.delegate(this,We),Ve=r.delegate(this,Ot),St=r.delegate(this,Dn),ht=r.delegate(this,an),un=r.delegate(this,Gi),_n=r.delegate(this,Ci),cn=r.delegate(this,Li),Vt=r.delegate(this,V),Nn=r.delegate(this,oe),sn=this.navImages,ai=[],Gr=!0;return this.showNavigationControl&&((this.zoomInButton||this.zoomOutButton||this.homeButton||this.fullPageButton||this.rotateLeftButton||this.rotateRightButton||this.flipButton)&&(Gr=!1),this.showZoomControl&&(ai.push(this.zoomInButton=new r.Button({element:this.zoomInButton?r.getElement(this.zoomInButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:r.getString("Tooltips.ZoomIn"),srcRest:dt(this.prefixUrl,sn.zoomIn.REST),srcGroup:dt(this.prefixUrl,sn.zoomIn.GROUP),srcHover:dt(this.prefixUrl,sn.zoomIn.HOVER),srcDown:dt(this.prefixUrl,sn.zoomIn.DOWN),onPress:N,onRelease:se,onClick:Oe,onEnter:N,onExit:se,onFocus:Vt,onBlur:Nn})),ai.push(this.zoomOutButton=new r.Button({element:this.zoomOutButton?r.getElement(this.zoomOutButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:r.getString("Tooltips.ZoomOut"),srcRest:dt(this.prefixUrl,sn.zoomOut.REST),srcGroup:dt(this.prefixUrl,sn.zoomOut.GROUP),srcHover:dt(this.prefixUrl,sn.zoomOut.HOVER),srcDown:dt(this.prefixUrl,sn.zoomOut.DOWN),onPress:Ye,onRelease:se,onClick:Ve,onEnter:Ye,onExit:se,onFocus:Vt,onBlur:Nn}))),this.showHomeControl&&ai.push(this.homeButton=new r.Button({element:this.homeButton?r.getElement(this.homeButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:r.getString("Tooltips.Home"),srcRest:dt(this.prefixUrl,sn.home.REST),srcGroup:dt(this.prefixUrl,sn.home.GROUP),srcHover:dt(this.prefixUrl,sn.home.HOVER),srcDown:dt(this.prefixUrl,sn.home.DOWN),onRelease:St,onFocus:Vt,onBlur:Nn})),this.showFullPageControl&&ai.push(this.fullPageButton=new r.Button({element:this.fullPageButton?r.getElement(this.fullPageButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:r.getString("Tooltips.FullPage"),srcRest:dt(this.prefixUrl,sn.fullpage.REST),srcGroup:dt(this.prefixUrl,sn.fullpage.GROUP),srcHover:dt(this.prefixUrl,sn.fullpage.HOVER),srcDown:dt(this.prefixUrl,sn.fullpage.DOWN),onRelease:ht,onFocus:Vt,onBlur:Nn})),this.showRotationControl&&(ai.push(this.rotateLeftButton=new r.Button({element:this.rotateLeftButton?r.getElement(this.rotateLeftButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:r.getString("Tooltips.RotateLeft"),srcRest:dt(this.prefixUrl,sn.rotateleft.REST),srcGroup:dt(this.prefixUrl,sn.rotateleft.GROUP),srcHover:dt(this.prefixUrl,sn.rotateleft.HOVER),srcDown:dt(this.prefixUrl,sn.rotateleft.DOWN),onRelease:un,onFocus:Vt,onBlur:Nn})),ai.push(this.rotateRightButton=new r.Button({element:this.rotateRightButton?r.getElement(this.rotateRightButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:r.getString("Tooltips.RotateRight"),srcRest:dt(this.prefixUrl,sn.rotateright.REST),srcGroup:dt(this.prefixUrl,sn.rotateright.GROUP),srcHover:dt(this.prefixUrl,sn.rotateright.HOVER),srcDown:dt(this.prefixUrl,sn.rotateright.DOWN),onRelease:_n,onFocus:Vt,onBlur:Nn}))),this.showFlipControl&&ai.push(this.flipButton=new r.Button({element:this.flipButton?r.getElement(this.flipButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:r.getString("Tooltips.Flip"),srcRest:dt(this.prefixUrl,sn.flip.REST),srcGroup:dt(this.prefixUrl,sn.flip.GROUP),srcHover:dt(this.prefixUrl,sn.flip.HOVER),srcDown:dt(this.prefixUrl,sn.flip.DOWN),onRelease:cn,onFocus:Vt,onBlur:Nn})),Gr?(this.buttonGroup=new r.ButtonGroup({buttons:ai,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.navControl=this.buttonGroup.element,this.addHandler("open",r.delegate(this,fn)),this.toolbar?this.toolbar.addControl(this.navControl,{anchor:this.navigationControlAnchor||r.ControlAnchor.TOP_LEFT}):this.addControl(this.navControl,{anchor:this.navigationControlAnchor||r.ControlAnchor.TOP_LEFT})):this.customButtons=ai),this},currentPage:function(){return this._sequenceIndex},goToPage:function(N){return this.tileSources&&N>=0&&N<this.tileSources.length&&(this._sequenceIndex=N,this._updateSequenceButtons(N),this.open(this.tileSources[N]),this.referenceStrip&&this.referenceStrip.setFocus(N),this.raiseEvent("page",{page:N})),this},addOverlay:function(N,se,Oe,Ye){var Ve;if(r.isPlainObject(N)?Ve=N:Ve={element:N,location:se,placement:Oe,onDraw:Ye},N=r.getElement(Ve.element),w(this.currentOverlays,N)>=0)return this;var St=y(this,Ve);return this.currentOverlays.push(St),St.drawHTML(this.overlaysContainer,this.viewport),this.raiseEvent("add-overlay",{element:N,location:Ve.location,placement:Ve.placement}),this},updateOverlay:function(N,se,Oe){var Ye;return N=r.getElement(N),Ye=w(this.currentOverlays,N),Ye>=0&&(this.currentOverlays[Ye].update(se,Oe),a[this.hash].forceRedraw=!0,this.raiseEvent("update-overlay",{element:N,location:se,placement:Oe})),this},removeOverlay:function(N){var se;return N=r.getElement(N),se=w(this.currentOverlays,N),se>=0&&(this.currentOverlays[se].destroy(),this.currentOverlays.splice(se,1),a[this.hash].forceRedraw=!0,this.raiseEvent("remove-overlay",{element:N})),this},clearOverlays:function(){for(;this.currentOverlays.length>0;)this.currentOverlays.pop().destroy();return a[this.hash].forceRedraw=!0,this.raiseEvent("clear-overlay",{}),this},getOverlayById:function(N){var se;return N=r.getElement(N),se=w(this.currentOverlays,N),se>=0?this.currentOverlays[se]:null},_updateSequenceButtons:function(N){this.nextButton&&(!this.tileSources||this.tileSources.length-1===N?this.navPrevNextWrap||this.nextButton.disable():this.nextButton.enable()),this.previousButton&&(N>0?this.previousButton.enable():this.navPrevNextWrap||this.previousButton.disable())},_showMessage:function(N){this._hideMessage();var se=r.makeNeutralElement("div");se.appendChild(document.createTextNode(N)),this.messageDiv=r.makeCenteredNode(se),r.addClass(this.messageDiv,"openseadragon-message"),this.container.appendChild(this.messageDiv)},_hideMessage:function(){var N=this.messageDiv;N&&(N.parentNode.removeChild(N),delete this.messageDiv)},gestureSettingsByDeviceType:function(N){switch(N){case"mouse":return this.gestureSettingsMouse;case"touch":return this.gestureSettingsTouch;case"pen":return this.gestureSettingsPen;default:return this.gestureSettingsUnknown}},_drawOverlays:function(){var N,se=this.currentOverlays.length;for(N=0;N<se;N++)this.currentOverlays[N].drawHTML(this.overlaysContainer,this.viewport)},_cancelPendingImages:function(){this._loadQueue=[]},removeReferenceStrip:function(){this.showReferenceStrip=!1,this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null)},addReferenceStrip:function(){if(this.showReferenceStrip=!0,this.sequenceMode){if(this.referenceStrip)return;this.tileSources.length&&this.tileSources.length>1&&(this.referenceStrip=new r.ReferenceStrip({id:this.referenceStripElement,position:this.referenceStripPosition,sizeRatio:this.referenceStripSizeRatio,scroll:this.referenceStripScroll,height:this.referenceStripHeight,width:this.referenceStripWidth,tileSources:this.tileSources,prefixUrl:this.prefixUrl,useCanvas:this.useCanvas,viewer:this}),this.referenceStrip.setFocus(this._sequenceIndex))}else r.console.warn('Attempting to display a reference strip while "sequenceMode" is off.')},_addUpdatePixelDensityRatioEvent:function(){this._updatePixelDensityRatioBind=this._updatePixelDensityRatio.bind(this),r.addEvent(window,"resize",this._updatePixelDensityRatioBind)},_removeUpdatePixelDensityRatioEvent:function(){r.removeEvent(window,"resize",this._updatePixelDensityRatioBind)},_updatePixelDensityRatio:function(){var N=r.pixelDensityRatio,se=r.getCurrentPixelDensityRatio();N!==se&&(r.pixelDensityRatio=se,this.world.resetItems(),this.forceRedraw())},goToPreviousPage:function(){var N=this._sequenceIndex-1;this.navPrevNextWrap&&N<0&&(N+=this.tileSources.length),this.goToPage(N)},goToNextPage:function(){var N=this._sequenceIndex+1;this.navPrevNextWrap&&N>=this.tileSources.length&&(N=0),this.goToPage(N)}});function f(N){return N=r.getElement(N),new r.Point(N.clientWidth===0?1:N.clientWidth,N.clientHeight===0?1:N.clientHeight)}function g(N,se,Oe,Ye,Ve){var St=N;if(r.type(se)==="string"){if(se.match(/^\s*<.*>\s*$/))se=r.parseXml(se);else if(se.match(/^\s*[{[].*[}\]]\s*$/))try{var ht=r.parseJSON(se);se=ht}catch{}}function un(_n,cn){_n.ready?Ye(_n):(_n.addHandler("ready",function(){Ye(_n)}),_n.addHandler("open-failed",function(Vt){Ve({message:Vt.message,source:cn})}))}setTimeout(function(){if(r.type(se)==="string")se=new r.TileSource({url:se,crossOriginPolicy:Oe.crossOriginPolicy!==void 0?Oe.crossOriginPolicy:N.crossOriginPolicy,ajaxWithCredentials:N.ajaxWithCredentials,ajaxHeaders:Oe.ajaxHeaders?Oe.ajaxHeaders:N.ajaxHeaders,useCanvas:N.useCanvas,success:function(Nn){Ye(Nn.tileSource)}}),se.addHandler("open-failed",function(Nn){Ve(Nn)});else if(r.isPlainObject(se)||se.nodeType)if(se.crossOriginPolicy===void 0&&(Oe.crossOriginPolicy!==void 0||N.crossOriginPolicy!==void 0)&&(se.crossOriginPolicy=Oe.crossOriginPolicy!==void 0?Oe.crossOriginPolicy:N.crossOriginPolicy),se.ajaxWithCredentials===void 0&&(se.ajaxWithCredentials=N.ajaxWithCredentials),se.useCanvas===void 0&&(se.useCanvas=N.useCanvas),r.isFunction(se.getTileUrl)){var _n=new r.TileSource(se);_n.getTileUrl=se.getTileUrl,Ye(_n)}else{var cn=r.TileSource.determineType(St,se);if(!cn){Ve({message:"Unable to load TileSource",source:se});return}var Vt=cn.prototype.configure.apply(St,[se]);un(new cn(Vt),se)}else un(se,se)})}function y(N,se){if(se instanceof r.Overlay)return se;var Oe=null;if(se.element)Oe=r.getElement(se.element);else{var Ye=se.id?se.id:"openseadragon-overlay-"+Math.floor(Math.random()*1e7);Oe=r.getElement(se.id),Oe||(Oe=document.createElement("a"),Oe.href="#/overlay/"+Ye),Oe.id=Ye,r.addClass(Oe,se.className?se.className:"openseadragon-overlay")}var Ve=se.location,St=se.width,ht=se.height;if(!Ve){var un=se.x,_n=se.y;if(se.px!==void 0){var cn=N.viewport.imageToViewportRectangle(new r.Rect(se.px,se.py,St||0,ht||0));un=cn.x,_n=cn.y,St=St!==void 0?cn.width:void 0,ht=ht!==void 0?cn.height:void 0}Ve=new r.Point(un,_n)}var Vt=se.placement;return Vt&&r.type(Vt)==="string"&&(Vt=r.Placement[se.placement.toUpperCase()]),new r.Overlay({element:Oe,location:Ve,placement:Vt,onDraw:se.onDraw,checkResize:se.checkResize,width:St,height:ht,rotationMode:se.rotationMode})}function w(N,se){var Oe;for(Oe=N.length-1;Oe>=0;Oe--)if(N[Oe].element===se)return Oe;return-1}function b(N,se){return r.requestAnimationFrame(function(){se(N)})}function S(N){r.requestAnimationFrame(function(){A(N)})}function R(N){!N.autoHideControls||(N.controlsShouldFade=!0,N.controlsFadeBeginTime=r.now()+N.controlsFadeDelay,window.setTimeout(function(){S(N)},N.controlsFadeDelay))}function A(N){var se,Oe,Ye,Ve;if(N.controlsShouldFade){for(se=r.now(),Oe=se-N.controlsFadeBeginTime,Ye=1-Oe/N.controlsFadeLength,Ye=Math.min(1,Ye),Ye=Math.max(0,Ye),Ve=N.controls.length-1;Ve>=0;Ve--)N.controls[Ve].autoFade&&N.controls[Ve].setOpacity(Ye);Ye>0&&S(N)}}function H(N){var se;for(N.controlsShouldFade=!1,se=N.controls.length-1;se>=0;se--)N.controls[se].setOpacity(1)}function V(){H(this)}function oe(){R(this)}function ne(N){var se={tracker:N.eventSource,position:N.position,originalEvent:N.originalEvent,preventDefault:N.preventDefault};this.raiseEvent("canvas-contextmenu",se),N.preventDefault=se.preventDefault}function ue(N){var se={originalEvent:N.originalEvent,preventDefaultAction:!1,preventVerticalPan:N.preventVerticalPan,preventHorizontalPan:N.preventHorizontalPan};if(this.raiseEvent("canvas-key",se),!se.preventDefaultAction&&!N.ctrl&&!N.alt&&!N.meta)switch(N.keyCode){case 38:se.preventVerticalPan||(N.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new r.Point(0,-this.pixelsPerArrowPress))),this.viewport.applyConstraints()),N.preventDefault=!0;break;case 40:se.preventVerticalPan||(N.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new r.Point(0,this.pixelsPerArrowPress))),this.viewport.applyConstraints()),N.preventDefault=!0;break;case 37:se.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new r.Point(-this.pixelsPerArrowPress,0))),this.viewport.applyConstraints()),N.preventDefault=!0;break;case 39:se.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new r.Point(this.pixelsPerArrowPress,0))),this.viewport.applyConstraints()),N.preventDefault=!0;break;default:N.preventDefault=!1;break}else N.preventDefault=!1}function M(N){var se={originalEvent:N.originalEvent,preventDefaultAction:!1,preventVerticalPan:N.preventVerticalPan,preventHorizontalPan:N.preventHorizontalPan};if(this.raiseEvent("canvas-key",se),!se.preventDefaultAction&&!N.ctrl&&!N.alt&&!N.meta)switch(N.keyCode){case 43:case 61:this.viewport.zoomBy(1.1),this.viewport.applyConstraints(),N.preventDefault=!0;break;case 45:this.viewport.zoomBy(.9),this.viewport.applyConstraints(),N.preventDefault=!0;break;case 48:this.viewport.goHome(),this.viewport.applyConstraints(),N.preventDefault=!0;break;case 119:case 87:se.preventVerticalPan||(N.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new r.Point(0,-40))),this.viewport.applyConstraints()),N.preventDefault=!0;break;case 115:case 83:se.preventVerticalPan||(N.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new r.Point(0,40))),this.viewport.applyConstraints()),N.preventDefault=!0;break;case 97:se.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new r.Point(-40,0))),this.viewport.applyConstraints()),N.preventDefault=!0;break;case 100:se.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new r.Point(40,0))),this.viewport.applyConstraints()),N.preventDefault=!0;break;case 114:this.viewport.flipped?this.viewport.setRotation(r.positiveModulo(this.viewport.degrees-this.rotationIncrement,360)):this.viewport.setRotation(r.positiveModulo(this.viewport.degrees+this.rotationIncrement,360)),this.viewport.applyConstraints(),N.preventDefault=!0;break;case 82:this.viewport.flipped?this.viewport.setRotation(r.positiveModulo(this.viewport.degrees+this.rotationIncrement,360)):this.viewport.setRotation(r.positiveModulo(this.viewport.degrees-this.rotationIncrement,360)),this.viewport.applyConstraints(),N.preventDefault=!0;break;case 102:this.viewport.toggleFlip(),N.preventDefault=!0;break;case 106:this.goToPreviousPage();break;case 107:this.goToNextPage();break;default:N.preventDefault=!1;break}else N.preventDefault=!1}function re(N){var se,Oe=document.activeElement===this.canvas;Oe||this.canvas.focus(),this.viewport.flipped&&(N.position.x=this.viewport.getContainerSize().x-N.position.x);var Ye={tracker:N.eventSource,position:N.position,quick:N.quick,shift:N.shift,originalEvent:N.originalEvent,originalTarget:N.originalTarget,preventDefaultAction:!1};this.raiseEvent("canvas-click",Ye),!Ye.preventDefaultAction&&this.viewport&&N.quick&&(se=this.gestureSettingsByDeviceType(N.pointerType),se.clickToZoom&&(this.viewport.zoomBy(N.shift?1/this.zoomPerClick:this.zoomPerClick,se.zoomToRefPoint?this.viewport.pointFromPixel(N.position,!0):null),this.viewport.applyConstraints()))}function ge(N){var se,Oe={tracker:N.eventSource,position:N.position,shift:N.shift,originalEvent:N.originalEvent,preventDefaultAction:!1};this.raiseEvent("canvas-double-click",Oe),!Oe.preventDefaultAction&&this.viewport&&(se=this.gestureSettingsByDeviceType(N.pointerType),se.dblClickToZoom&&(this.viewport.zoomBy(N.shift?1/this.zoomPerClick:this.zoomPerClick,se.zoomToRefPoint?this.viewport.pointFromPixel(N.position,!0):null),this.viewport.applyConstraints()))}function pe(N){var se,Oe={tracker:N.eventSource,pointerType:N.pointerType,position:N.position,delta:N.delta,speed:N.speed,direction:N.direction,shift:N.shift,originalEvent:N.originalEvent,preventDefaultAction:!1};if(this.raiseEvent("canvas-drag",Oe),se=this.gestureSettingsByDeviceType(N.pointerType),se.dragToPan&&!Oe.preventDefaultAction&&this.viewport){if(this.panHorizontal||(N.delta.x=0),this.panVertical||(N.delta.y=0),this.viewport.flipped&&(N.delta.x=-N.delta.x),this.constrainDuringPan){var Ye=this.viewport.deltaPointsFromPixels(N.delta.negate());this.viewport.centerSpringX.target.value+=Ye.x,this.viewport.centerSpringY.target.value+=Ye.y;var Ve=this.viewport.getBounds(),St=this.viewport.getConstrainedBounds();this.viewport.centerSpringX.target.value-=Ye.x,this.viewport.centerSpringY.target.value-=Ye.y,Ve.x!==St.x&&(N.delta.x=0),Ve.y!==St.y&&(N.delta.y=0)}this.viewport.panBy(this.viewport.deltaPointsFromPixels(N.delta.negate()),se.flickEnabled&&!this.constrainDuringPan)}}function Ee(N){var se={tracker:N.eventSource,pointerType:N.pointerType,position:N.position,speed:N.speed,direction:N.direction,shift:N.shift,originalEvent:N.originalEvent,preventDefaultAction:!1};if(this.raiseEvent("canvas-drag-end",se),!se.preventDefaultAction&&this.viewport){var Oe=this.gestureSettingsByDeviceType(N.pointerType);if(Oe.flickEnabled&&N.speed>=Oe.flickMinSpeed){var Ye=0;this.panHorizontal&&(Ye=Oe.flickMomentum*N.speed*Math.cos(N.direction));var Ve=0;this.panVertical&&(Ve=Oe.flickMomentum*N.speed*Math.sin(N.direction));var St=this.viewport.pixelFromPoint(this.viewport.getCenter(!0)),ht=this.viewport.pointFromPixel(new r.Point(St.x-Ye,St.y-Ve));this.viewport.panTo(ht,!1)}this.viewport.applyConstraints()}}function Ce(N){this.raiseEvent("canvas-enter",{tracker:N.eventSource,pointerType:N.pointerType,position:N.position,buttons:N.buttons,pointers:N.pointers,insideElementPressed:N.insideElementPressed,buttonDownAny:N.buttonDownAny,originalEvent:N.originalEvent})}function Ze(N){this.raiseEvent("canvas-exit",{tracker:N.eventSource,pointerType:N.pointerType,position:N.position,buttons:N.buttons,pointers:N.pointers,insideElementPressed:N.insideElementPressed,buttonDownAny:N.buttonDownAny,originalEvent:N.originalEvent})}function Ke(N){this.raiseEvent("canvas-press",{tracker:N.eventSource,pointerType:N.pointerType,position:N.position,insideElementPressed:N.insideElementPressed,insideElementReleased:N.insideElementReleased,originalEvent:N.originalEvent})}function ut(N){this.raiseEvent("canvas-release",{tracker:N.eventSource,pointerType:N.pointerType,position:N.position,insideElementPressed:N.insideElementPressed,insideElementReleased:N.insideElementReleased,originalEvent:N.originalEvent})}function pt(N){this.raiseEvent("canvas-nonprimary-press",{tracker:N.eventSource,position:N.position,pointerType:N.pointerType,button:N.button,buttons:N.buttons,originalEvent:N.originalEvent})}function ct(N){this.raiseEvent("canvas-nonprimary-release",{tracker:N.eventSource,position:N.position,pointerType:N.pointerType,button:N.button,buttons:N.buttons,originalEvent:N.originalEvent})}function _t(N){var se,Oe,Ye,Ve,St={tracker:N.eventSource,pointerType:N.pointerType,gesturePoints:N.gesturePoints,lastCenter:N.lastCenter,center:N.center,lastDistance:N.lastDistance,distance:N.distance,shift:N.shift,originalEvent:N.originalEvent,preventDefaultPanAction:!1,preventDefaultZoomAction:!1,preventDefaultRotateAction:!1};if(this.raiseEvent("canvas-pinch",St),this.viewport&&(se=this.gestureSettingsByDeviceType(N.pointerType),se.pinchToZoom&&(!St.preventDefaultPanAction||!St.preventDefaultZoomAction)&&(Oe=this.viewport.pointFromPixel(N.center,!0),St.preventDefaultZoomAction||this.viewport.zoomBy(N.distance/N.lastDistance,Oe,!0),se.zoomToRefPoint&&!St.preventDefaultPanAction&&(Ye=this.viewport.pointFromPixel(N.lastCenter,!0),Ve=Ye.minus(Oe),this.panHorizontal||(Ve.x=0),this.panVertical||(Ve.y=0),this.viewport.panBy(Ve,!0)),this.viewport.applyConstraints()),se.pinchRotate&&!St.preventDefaultRotateAction)){var ht=Math.atan2(N.gesturePoints[0].currentPos.y-N.gesturePoints[1].currentPos.y,N.gesturePoints[0].currentPos.x-N.gesturePoints[1].currentPos.x),un=Math.atan2(N.gesturePoints[0].lastPos.y-N.gesturePoints[1].lastPos.y,N.gesturePoints[0].lastPos.x-N.gesturePoints[1].lastPos.x);this.viewport.setRotation(this.viewport.getRotation()+(ht-un)*(180/Math.PI))}}function Ct(N){var se,Oe,Ye,Ve,St;Ve=r.now(),St=Ve-this._lastScrollTime,St>this.minScrollDeltaTime?(this._lastScrollTime=Ve,se={tracker:N.eventSource,position:N.position,scroll:N.scroll,shift:N.shift,originalEvent:N.originalEvent,preventDefaultAction:!1,preventDefault:!0},this.raiseEvent("canvas-scroll",se),!se.preventDefaultAction&&this.viewport&&(this.viewport.flipped&&(N.position.x=this.viewport.getContainerSize().x-N.position.x),Oe=this.gestureSettingsByDeviceType(N.pointerType),Oe.scrollToZoom&&(Ye=Math.pow(this.zoomPerScroll,N.scroll),this.viewport.zoomBy(Ye,Oe.zoomToRefPoint?this.viewport.pointFromPixel(N.position,!0):null),this.viewport.applyConstraints())),N.preventDefault=se.preventDefault):N.preventDefault=!0}function Wt(N){a[this.hash].mouseInside=!0,H(this),this.raiseEvent("container-enter",{tracker:N.eventSource,pointerType:N.pointerType,position:N.position,buttons:N.buttons,pointers:N.pointers,insideElementPressed:N.insideElementPressed,buttonDownAny:N.buttonDownAny,originalEvent:N.originalEvent})}function Ut(N){N.pointers<1&&(a[this.hash].mouseInside=!1,a[this.hash].animating||R(this)),this.raiseEvent("container-exit",{tracker:N.eventSource,pointerType:N.pointerType,position:N.position,buttons:N.buttons,pointers:N.pointers,insideElementPressed:N.insideElementPressed,buttonDownAny:N.buttonDownAny,originalEvent:N.originalEvent})}function Zt(N){ln(N),N.isOpen()?N._updateRequestId=b(N,Zt):N._updateRequestId=!1}function ln(N){if(!(N._opening||!a[N.hash])){if(N.autoResize){var se=f(N.container),Oe=a[N.hash].prevContainerSize;if(!se.equals(Oe)){var Ye=N.viewport;if(N.preserveImageSizeOnResize){var Ve=Oe.x/se.x,St=Ye.getZoom()*Ve,ht=Ye.getCenter();Ye.resize(se,!1),Ye.zoomTo(St,null,!0),Ye.panTo(ht,!0)}else{var un=Ye.getBounds();Ye.resize(se,!0),Ye.fitBoundsWithConstraints(un,!0)}a[N.hash].prevContainerSize=se,a[N.hash].forceRedraw=!0}}var _n=N.viewport.update(),cn=N.world.update()||_n;_n&&N.raiseEvent("viewport-change"),N.referenceStrip&&(cn=N.referenceStrip.update(N.viewport)||cn),!a[N.hash].animating&&cn&&(N.raiseEvent("animation-start"),H(N)),(cn||a[N.hash].forceRedraw||N.world.needsDraw())&&(bn(N),N._drawOverlays(),N.navigator&&N.navigator.update(N.viewport),a[N.hash].forceRedraw=!1,cn&&N.raiseEvent("animation")),a[N.hash].animating&&!cn&&(N.raiseEvent("animation-finish"),a[N.hash].mouseInside||R(N)),a[N.hash].animating=cn}}function bn(N){N.imageLoader.clear(),N.drawer.clear(),N.world.draw(),N.raiseEvent("update-viewport",{})}function dt(N,se){return N?N+se:se}function Jt(){a[this.hash].lastZoomTime=r.now(),a[this.hash].zoomFactor=this.zoomPerSecond,a[this.hash].zooming=!0,it(this)}function We(){a[this.hash].lastZoomTime=r.now(),a[this.hash].zoomFactor=1/this.zoomPerSecond,a[this.hash].zooming=!0,it(this)}function tt(){a[this.hash].zooming=!1}function it(N){r.requestAnimationFrame(r.delegate(N,nt))}function nt(){var N,se,Oe;a[this.hash].zooming&&this.viewport&&(N=r.now(),se=N-a[this.hash].lastZoomTime,Oe=Math.pow(a[this.hash].zoomFactor,se/1e3),this.viewport.zoomBy(Oe),this.viewport.applyConstraints(),a[this.hash].lastZoomTime=N,it(this))}function lt(){this.viewport&&(a[this.hash].zooming=!1,this.viewport.zoomBy(this.zoomPerClick/1),this.viewport.applyConstraints())}function Ot(){this.viewport&&(a[this.hash].zooming=!1,this.viewport.zoomBy(1/this.zoomPerClick),this.viewport.applyConstraints())}function fn(){this.buttonGroup&&(this.buttonGroup.emulateEnter(),this.buttonGroup.emulateLeave())}function Dn(){this.viewport&&this.viewport.goHome()}function an(){this.isFullPage()&&!r.isFullScreen()?this.setFullPage(!1):this.setFullScreen(!this.isFullPage()),this.buttonGroup&&this.buttonGroup.emulateLeave(),this.fullPageButton.element.focus(),this.viewport&&this.viewport.applyConstraints()}function Gi(){if(this.viewport){var N=this.viewport.getRotation();this.viewport.flipped?N=r.positiveModulo(N+this.rotationIncrement,360):N=r.positiveModulo(N-this.rotationIncrement,360),this.viewport.setRotation(N)}}function Ci(){if(this.viewport){var N=this.viewport.getRotation();this.viewport.flipped?N=r.positiveModulo(N-this.rotationIncrement,360):N=r.positiveModulo(N+this.rotationIncrement,360),this.viewport.setRotation(N)}}function Li(){this.viewport.toggleFlip()}}(l),function(r){r.Navigator=function(b){var S=b.viewer,R=this,A,H;b.id?(this.element=document.getElementById(b.id),b.controlOptions={anchor:r.ControlAnchor.NONE,attachToViewer:!1,autoFade:!1}):(b.id="navigator-"+r.now(),this.element=r.makeNeutralElement("div"),b.controlOptions={anchor:r.ControlAnchor.TOP_RIGHT,attachToViewer:!0,autoFade:b.autoFade},b.position&&(b.position==="BOTTOM_RIGHT"?b.controlOptions.anchor=r.ControlAnchor.BOTTOM_RIGHT:b.position==="BOTTOM_LEFT"?b.controlOptions.anchor=r.ControlAnchor.BOTTOM_LEFT:b.position==="TOP_RIGHT"?b.controlOptions.anchor=r.ControlAnchor.TOP_RIGHT:b.position==="TOP_LEFT"?b.controlOptions.anchor=r.ControlAnchor.TOP_LEFT:b.position==="ABSOLUTE"&&(b.controlOptions.anchor=r.ControlAnchor.ABSOLUTE,b.controlOptions.top=b.top,b.controlOptions.left=b.left,b.controlOptions.height=b.height,b.controlOptions.width=b.width))),this.element.id=b.id,this.element.className+=" navigator",b=r.extend(!0,{sizeRatio:r.DEFAULT_SETTINGS.navigatorSizeRatio},b,{element:this.element,tabIndex:-1,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0,autoResize:b.autoResize,minZoomImageRatio:1,background:b.background,opacity:b.opacity,borderColor:b.borderColor,displayRegionColor:b.displayRegionColor}),b.minPixelRatio=this.minPixelRatio=S.minPixelRatio,r.setElementTouchActionNone(this.element),this.borderWidth=2,this.fudge=new r.Point(1,1),this.totalBorderWidths=new r.Point(this.borderWidth*2,this.borderWidth*2).minus(this.fudge),b.controlOptions.anchor!==r.ControlAnchor.NONE&&function(ne,ue){ne.margin="0px",ne.border=ue+"px solid "+b.borderColor,ne.padding="0px",ne.background=b.background,ne.opacity=b.opacity,ne.overflow="hidden"}(this.element.style,this.borderWidth),this.displayRegion=r.makeNeutralElement("div"),this.displayRegion.id=this.element.id+"-displayregion",this.displayRegion.className="displayregion",function(ne,ue){ne.position="relative",ne.top="0px",ne.left="0px",ne.fontSize="0px",ne.overflow="hidden",ne.border=ue+"px solid "+b.displayRegionColor,ne.margin="0px",ne.padding="0px",ne.background="transparent",ne.float="left",ne.cssFloat="left",ne.styleFloat="left",ne.zIndex=999999999,ne.cursor="default"}(this.displayRegion.style,this.borderWidth),r.setElementPointerEventsNone(this.displayRegion),r.setElementTouchActionNone(this.displayRegion),this.displayRegionContainer=r.makeNeutralElement("div"),this.displayRegionContainer.id=this.element.id+"-displayregioncontainer",this.displayRegionContainer.className="displayregioncontainer",this.displayRegionContainer.style.width="100%",this.displayRegionContainer.style.height="100%",r.setElementPointerEventsNone(this.displayRegionContainer),r.setElementTouchActionNone(this.displayRegionContainer),S.addControl(this.element,b.controlOptions),this._resizeWithViewer=b.controlOptions.anchor!==r.ControlAnchor.ABSOLUTE&&b.controlOptions.anchor!==r.ControlAnchor.NONE,b.width&&b.height?(this.setWidth(b.width),this.setHeight(b.height)):this._resizeWithViewer&&(A=r.getElementSize(S.element),this.element.style.height=Math.round(A.y*b.sizeRatio)+"px",this.element.style.width=Math.round(A.x*b.sizeRatio)+"px",this.oldViewerSize=A,H=r.getElementSize(this.element),this.elementArea=H.x*H.y),this.oldContainerSize=new r.Point(0,0),r.Viewer.apply(this,[b]),this.displayRegionContainer.appendChild(this.displayRegion),this.element.getElementsByTagName("div")[0].appendChild(this.displayRegionContainer);function V(ne){y(R.displayRegionContainer,ne),y(R.displayRegion,-ne),R.viewport.setRotation(ne)}if(b.navigatorRotate){var oe=b.viewer.viewport?b.viewer.viewport.getRotation():b.viewer.degrees||0;V(oe),b.viewer.addHandler("rotate",function(ne){V(ne.degrees)})}this.innerTracker.destroy(),this.innerTracker=new r.MouseTracker({userData:"Navigator.innerTracker",element:this.element,dragHandler:r.delegate(this,c),clickHandler:r.delegate(this,a),releaseHandler:r.delegate(this,f),scrollHandler:r.delegate(this,g),preProcessEventHandler:function(ne){ne.eventType==="wheel"&&(ne.preventDefault=!0)}}),this.outerTracker.userData="Navigator.outerTracker",r.setElementPointerEventsNone(this.canvas),r.setElementPointerEventsNone(this.container),this.addHandler("reset-size",function(){R.viewport&&R.viewport.goHome(!0)}),S.world.addHandler("item-index-change",function(ne){window.setTimeout(function(){var ue=R.world.getItemAt(ne.previousIndex);R.world.setItemIndex(ue,ne.newIndex)},1)}),S.world.addHandler("remove-item",function(ne){var ue=ne.item,M=R._getMatchingItem(ue);M&&R.world.removeItem(M)}),this.update(S.viewport)},r.extend(r.Navigator.prototype,r.EventSource.prototype,r.Viewer.prototype,{updateSize:function(){if(this.viewport){var b=new r.Point(this.container.clientWidth===0?1:this.container.clientWidth,this.container.clientHeight===0?1:this.container.clientHeight);b.equals(this.oldContainerSize)||(this.viewport.resize(b,!0),this.viewport.goHome(!0),this.oldContainerSize=b,this.drawer.clear(),this.world.draw())}},setWidth:function(b){this.width=b,this.element.style.width=typeof b=="number"?b+"px":b,this._resizeWithViewer=!1},setHeight:function(b){this.height=b,this.element.style.height=typeof b=="number"?b+"px":b,this._resizeWithViewer=!1},setFlip:function(b){return this.viewport.setFlip(b),this.setDisplayTransform(this.viewer.viewport.getFlip()?"scale(-1,1)":"scale(1,1)"),this},setDisplayTransform:function(b){w(this.displayRegion,b),w(this.canvas,b),w(this.element,b)},update:function(b){var S,R,A,H,V,oe;if(S=r.getElementSize(this.viewer.element),this._resizeWithViewer&&S.x&&S.y&&!S.equals(this.oldViewerSize)&&(this.oldViewerSize=S,this.maintainSizeRatio||!this.elementArea?(R=S.x*this.sizeRatio,A=S.y*this.sizeRatio):(R=Math.sqrt(this.elementArea*(S.x/S.y)),A=this.elementArea/R),this.element.style.width=Math.round(R)+"px",this.element.style.height=Math.round(A)+"px",this.elementArea||(this.elementArea=R*A),this.updateSize()),b&&this.viewport){H=b.getBoundsNoRotate(!0),V=this.viewport.pixelFromPointNoRotate(H.getTopLeft(),!1),oe=this.viewport.pixelFromPointNoRotate(H.getBottomRight(),!1).minus(this.totalBorderWidths);var ne=this.displayRegion.style;ne.display=this.world.getItemCount()?"block":"none",ne.top=Math.round(V.y)+"px",ne.left=Math.round(V.x)+"px";var ue=Math.abs(V.x-oe.x),M=Math.abs(V.y-oe.y);ne.width=Math.round(Math.max(ue,0))+"px",ne.height=Math.round(Math.max(M,0))+"px"}},addTiledImage:function(b){var S=this,R=b.originalTiledImage;delete b.original;var A=r.extend({},b,{success:function(H){var V=H.item;V._originalForNavigator=R,S._matchBounds(V,R,!0),S._matchOpacity(V,R),S._matchCompositeOperation(V,R);function oe(){S._matchBounds(V,R)}function ne(){S._matchOpacity(V,R)}function ue(){S._matchCompositeOperation(V,R)}R.addHandler("bounds-change",oe),R.addHandler("clip-change",oe),R.addHandler("opacity-change",ne),R.addHandler("composite-operation-change",ue)}});return r.Viewer.prototype.addTiledImage.apply(this,[A])},destroy:function(){return r.Viewer.prototype.destroy.apply(this)},_getMatchingItem:function(b){for(var S=this.world.getItemCount(),R,A=0;A<S;A++)if(R=this.world.getItemAt(A),R._originalForNavigator===b)return R;return null},_matchBounds:function(b,S,R){var A=S.getBoundsNoRotate();b.setPosition(A.getTopLeft(),R),b.setWidth(A.width,R),b.setRotation(S.getRotation(),R),b.setClip(S.getClip()),b.setFlip(S.getFlip())},_matchOpacity:function(b,S){b.setOpacity(S.opacity)},_matchCompositeOperation:function(b,S){b.setCompositeOperation(S.compositeOperation)}});function a(b){var S={tracker:b.eventSource,position:b.position,quick:b.quick,shift:b.shift,originalEvent:b.originalEvent,preventDefaultAction:!1};if(this.viewer.raiseEvent("navigator-click",S),!S.preventDefaultAction&&b.quick&&this.viewer.viewport&&(this.panVertical||this.panHorizontal)){this.viewer.viewport.flipped&&(b.position.x=this.viewport.getContainerSize().x-b.position.x);var R=this.viewport.pointFromPixel(b.position);this.panVertical?this.panHorizontal||(R.x=this.viewer.viewport.getCenter(!0).x):R.y=this.viewer.viewport.getCenter(!0).y,this.viewer.viewport.panTo(R),this.viewer.viewport.applyConstraints()}}function c(b){var S={tracker:b.eventSource,position:b.position,delta:b.delta,speed:b.speed,direction:b.direction,shift:b.shift,originalEvent:b.originalEvent,preventDefaultAction:!1};this.viewer.raiseEvent("navigator-drag",S),!S.preventDefaultAction&&this.viewer.viewport&&(this.panHorizontal||(b.delta.x=0),this.panVertical||(b.delta.y=0),this.viewer.viewport.flipped&&(b.delta.x=-b.delta.x),this.viewer.viewport.panBy(this.viewport.deltaPointsFromPixels(b.delta)),this.viewer.constrainDuringPan&&this.viewer.viewport.applyConstraints())}function f(b){b.insideElementPressed&&this.viewer.viewport&&this.viewer.viewport.applyConstraints()}function g(b){var S={tracker:b.eventSource,position:b.position,scroll:b.scroll,shift:b.shift,originalEvent:b.originalEvent,preventDefault:b.preventDefault};this.viewer.raiseEvent("navigator-scroll",S),b.preventDefault=S.preventDefault}function y(b,S){w(b,"rotate("+S+"deg)")}function w(b,S){b.style.webkitTransform=S,b.style.mozTransform=S,b.style.msTransform=S,b.style.oTransform=S,b.style.transform=S}}(l),function(r){var a={Errors:{Dzc:"Sorry, we don't support Deep Zoom Collections!",Dzi:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",Xml:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",ImageFormat:"Sorry, we don't support {0}-based Deep Zoom Images.",Security:"It looks like a security restriction stopped us from loading this Deep Zoom Image.",Status:"This space unintentionally left blank ({0} {1}).",OpenFailed:"Unable to open {0}: {1}"},Tooltips:{FullPage:"Toggle full page",Home:"Go home",ZoomIn:"Zoom in",ZoomOut:"Zoom out",NextPage:"Next page",PreviousPage:"Previous page",RotateLeft:"Rotate left",RotateRight:"Rotate right",Flip:"Flip Horizontally"}};r.extend(r,{getString:function(c){var f=c.split("."),g=null,y=arguments,w=a,b;for(b=0;b<f.length-1;b++)w=w[f[b]]||{};return g=w[f[b]],typeof g!="string"&&(r.console.log("Untranslated source string:",c),g=""),g.replace(/\{\d+\}/g,function(S){var R=parseInt(S.match(/\d+/),10)+1;return R<y.length?y[R]:""})},setString:function(c,f){var g=c.split("."),y=a,w;for(w=0;w<g.length-1;w++)y[g[w]]||(y[g[w]]={}),y=y[g[w]];y[g[w]]=f}})}(l),function(r){r.Point=function(a,c){this.x=typeof a=="number"?a:0,this.y=typeof c=="number"?c:0},r.Point.prototype={clone:function(){return new r.Point(this.x,this.y)},plus:function(a){return new r.Point(this.x+a.x,this.y+a.y)},minus:function(a){return new r.Point(this.x-a.x,this.y-a.y)},times:function(a){return new r.Point(this.x*a,this.y*a)},divide:function(a){return new r.Point(this.x/a,this.y/a)},negate:function(){return new r.Point(-this.x,-this.y)},distanceTo:function(a){return Math.sqrt(Math.pow(this.x-a.x,2)+Math.pow(this.y-a.y,2))},squaredDistanceTo:function(a){return Math.pow(this.x-a.x,2)+Math.pow(this.y-a.y,2)},apply:function(a){return new r.Point(a(this.x),a(this.y))},equals:function(a){return a instanceof r.Point&&this.x===a.x&&this.y===a.y},rotate:function(a,c){c=c||new r.Point(0,0);var f,g;if(a%90===0){var y=r.positiveModulo(a,360);switch(y){case 0:f=1,g=0;break;case 90:f=0,g=1;break;case 180:f=-1,g=0;break;case 270:f=0,g=-1;break}}else{var w=a*Math.PI/180;f=Math.cos(w),g=Math.sin(w)}var b=f*(this.x-c.x)-g*(this.y-c.y)+c.x,S=g*(this.x-c.x)+f*(this.y-c.y)+c.y;return new r.Point(b,S)},toString:function(){return"("+Math.round(this.x*100)/100+","+Math.round(this.y*100)/100+")"}}}(l),function(r){r.TileSource=function(c,f,g,y,w,b){var S=this,R=arguments,A,H;if(r.isPlainObject(c)?A=c:A={width:R[0],height:R[1],tileSize:R[2],tileOverlap:R[3],minLevel:R[4],maxLevel:R[5]},r.EventSource.call(this),r.extend(!0,this,A),!this.success){for(H=0;H<arguments.length;H++)if(r.isFunction(arguments[H])){this.success=arguments[H];break}}this.success&&this.addHandler("ready",function(V){S.success(V)}),r.type(arguments[0])==="string"&&(this.url=arguments[0]),this.url?(this.aspectRatio=1,this.dimensions=new r.Point(10,10),this._tileWidth=0,this._tileHeight=0,this.tileOverlap=0,this.minLevel=0,this.maxLevel=0,this.ready=!1,this.getImageInfo(this.url)):(this.ready=!0,this.aspectRatio=A.width&&A.height?A.width/A.height:1,this.dimensions=new r.Point(A.width,A.height),this.tileSize?(this._tileWidth=this._tileHeight=this.tileSize,delete this.tileSize):(this.tileWidth?(this._tileWidth=this.tileWidth,delete this.tileWidth):this._tileWidth=0,this.tileHeight?(this._tileHeight=this.tileHeight,delete this.tileHeight):this._tileHeight=0),this.tileOverlap=A.tileOverlap?A.tileOverlap:0,this.minLevel=A.minLevel?A.minLevel:0,this.maxLevel=A.maxLevel!==void 0&&A.maxLevel!==null?A.maxLevel:A.width&&A.height?Math.ceil(Math.log(Math.max(A.width,A.height))/Math.log(2)):0,this.success&&r.isFunction(this.success)&&this.success(this))},r.TileSource.prototype={getTileSize:function(c){return r.console.error("[TileSource.getTileSize] is deprecated. Use TileSource.getTileWidth() and TileSource.getTileHeight() instead"),this._tileWidth},getTileWidth:function(c){return this._tileWidth?this._tileWidth:this.getTileSize(c)},getTileHeight:function(c){return this._tileHeight?this._tileHeight:this.getTileSize(c)},setMaxLevel:function(c){this.maxLevel=c,this._memoizeLevelScale()},getLevelScale:function(c){return this._memoizeLevelScale(),this.getLevelScale(c)},_memoizeLevelScale:function(){var c={},f;for(f=0;f<=this.maxLevel;f++)c[f]=1/Math.pow(2,this.maxLevel-f);this.getLevelScale=function(g){return c[g]}},getNumTiles:function(c){var f=this.getLevelScale(c),g=Math.ceil(f*this.dimensions.x/this.getTileWidth(c)),y=Math.ceil(f*this.dimensions.y/this.getTileHeight(c));return new r.Point(g,y)},getPixelRatio:function(c){var f=this.dimensions.times(this.getLevelScale(c)),g=1/f.x*r.pixelDensityRatio,y=1/f.y*r.pixelDensityRatio;return new r.Point(g,y)},getClosestLevel:function(){var c,f;for(c=this.minLevel+1;c<=this.maxLevel&&(f=this.getNumTiles(c),!(f.x>1||f.y>1));c++);return c-1},getTileAtPoint:function(c,f){var g=f.x>=0&&f.x<=1&&f.y>=0&&f.y<=1/this.aspectRatio;r.console.assert(g,"[TileSource.getTileAtPoint] must be called with a valid point.");var y=this.dimensions.x*this.getLevelScale(c),w=f.x*y,b=f.y*y,S=Math.floor(w/this.getTileWidth(c)),R=Math.floor(b/this.getTileHeight(c));f.x>=1&&(S=this.getNumTiles(c).x-1);var A=1e-15;return f.y>=1/this.aspectRatio-A&&(R=this.getNumTiles(c).y-1),new r.Point(S,R)},getTileBounds:function(c,f,g,y){var w=this.dimensions.times(this.getLevelScale(c)),b=this.getTileWidth(c),S=this.getTileHeight(c),R=f===0?0:b*f-this.tileOverlap,A=g===0?0:S*g-this.tileOverlap,H=b+(f===0?1:2)*this.tileOverlap,V=S+(g===0?1:2)*this.tileOverlap,oe=1/w.x;return H=Math.min(H,w.x-R),V=Math.min(V,w.y-A),y?new r.Rect(0,0,H,V):new r.Rect(R*oe,A*oe,H*oe,V*oe)},getImageInfo:function(c){var f=this,g,y,w,b,S,R,A;c&&(S=c.split("/"),R=S[S.length-1],A=R.lastIndexOf("."),A>-1&&(S[S.length-1]=R.slice(0,A))),y=function(H){typeof H=="string"&&(H=r.parseXml(H));var V=r.TileSource.determineType(f,H,c);if(!V){f.raiseEvent("open-failed",{message:"Unable to load TileSource",source:c});return}b=V.prototype.configure.apply(f,[H,c]),b.ajaxWithCredentials===void 0&&(b.ajaxWithCredentials=f.ajaxWithCredentials),w=new V(b),f.ready=!0,f.raiseEvent("ready",{tileSource:w})},c.match(/\.js$/)?(g=c.split("/").pop().replace(".js",""),r.jsonp({url:c,async:!1,callbackName:g,callback:y})):r.makeAjaxRequest({url:c,withCredentials:this.ajaxWithCredentials,headers:this.ajaxHeaders,success:function(H){var V=a(H);y(V)},error:function(H,V){var oe;try{oe="HTTP "+H.status+" attempting to load TileSource"}catch{var ne;typeof V>"u"||!V.toString?ne="Unknown error":ne=V.toString(),oe=ne+" attempting to load TileSource"}f.raiseEvent("open-failed",{message:oe,source:c})}})},supports:function(c,f){return!1},configure:function(c,f){throw new Error("Method not implemented.")},getTileUrl:function(c,f,g){throw new Error("Method not implemented.")},getTileAjaxHeaders:function(c,f,g){return{}},tileExists:function(c,f,g){var y=this.getNumTiles(c);return c>=this.minLevel&&c<=this.maxLevel&&f>=0&&g>=0&&f<y.x&&g<y.y}},r.extend(!0,r.TileSource.prototype,r.EventSource.prototype);function a(c){var f=c.responseText,g=c.status,y,w;if(c){if(c.status!==200&&c.status!==0)throw g=c.status,y=g===404?"Not Found":c.statusText,new Error(r.getString("Errors.Status",g,y))}else throw new Error(r.getString("Errors.Security"));if(f.match(/\s*<.*/))try{w=c.responseXML&&c.responseXML.documentElement?c.responseXML:r.parseXml(f)}catch{w=c.responseText}else if(f.match(/\s*[{[].*/))try{w=r.parseJSON(f)}catch{w=f}else w=f;return w}r.TileSource.determineType=function(c,f,g){var y;for(y in l)if(y.match(/.+TileSource$/)&&r.isFunction(l[y])&&r.isFunction(l[y].prototype.supports)&&l[y].prototype.supports.call(c,f,g))return l[y];return r.console.error("No TileSource was able to open %s %s",g,f),null}}(l),function(r){r.DziTileSource=function(f,g,y,w,b,S,R,A,H){var V,oe,ne,ue;if(r.isPlainObject(f)?ue=f:ue={width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4],fileFormat:arguments[5],displayRects:arguments[6],minLevel:arguments[7],maxLevel:arguments[8]},this._levelRects={},this.tilesUrl=ue.tilesUrl,this.fileFormat=ue.fileFormat,this.displayRects=ue.displayRects,this.displayRects)for(V=this.displayRects.length-1;V>=0;V--)for(oe=this.displayRects[V],ne=oe.minLevel;ne<=oe.maxLevel;ne++)this._levelRects[ne]||(this._levelRects[ne]=[]),this._levelRects[ne].push(oe);r.TileSource.apply(this,[ue])},r.extend(r.DziTileSource.prototype,r.TileSource.prototype,{supports:function(f,g){var y;return f.Image?y=f.Image.xmlns:f.documentElement&&(f.documentElement.localName==="Image"||f.documentElement.tagName==="Image")&&(y=f.documentElement.namespaceURI),y=(y||"").toLowerCase(),y.indexOf("schemas.microsoft.com/deepzoom/2008")!==-1||y.indexOf("schemas.microsoft.com/deepzoom/2009")!==-1},configure:function(f,g){var y;return r.isPlainObject(f)?y=c(this,f):y=a(this,f),g&&!y.tilesUrl&&(y.tilesUrl=g.replace(/([^/]+?)(\.(dzi|xml|js)?(\?[^/]*)?)?\/?$/,"$1_files/"),g.search(/\.(dzi|xml|js)\?/)!==-1?y.queryParams=g.match(/\?.*/):y.queryParams=""),y},getTileUrl:function(f,g,y){return[this.tilesUrl,f,"/",g,"_",y,".",this.fileFormat,this.queryParams].join("")},tileExists:function(f,g,y){var w=this._levelRects[f],b,S,R,A,H,V,oe;if(this.minLevel&&f<this.minLevel||this.maxLevel&&f>this.maxLevel)return!1;if(!w||!w.length)return!0;for(oe=w.length-1;oe>=0;oe--)if(b=w[oe],!(f<b.minLevel||f>b.maxLevel)&&(S=this.getLevelScale(f),R=b.x*S,A=b.y*S,H=R+b.width*S,V=A+b.height*S,R=Math.floor(R/this._tileWidth),A=Math.floor(A/this._tileWidth),H=Math.ceil(H/this._tileWidth),V=Math.ceil(V/this._tileWidth),R<=g&&g<H&&A<=y&&y<V))return!0;return!1}});function a(f,g){if(!g||!g.documentElement)throw new Error(r.getString("Errors.Xml"));var y=g.documentElement,w=y.localName||y.tagName,b=g.documentElement.namespaceURI,S=null,R=[],A,H,V,oe,ne;if(w==="Image")try{if(oe=y.getElementsByTagName("Size")[0],oe===void 0&&(oe=y.getElementsByTagNameNS(b,"Size")[0]),S={Image:{xmlns:"http://schemas.microsoft.com/deepzoom/2008",Url:y.getAttribute("Url"),Format:y.getAttribute("Format"),DisplayRect:null,Overlap:parseInt(y.getAttribute("Overlap"),10),TileSize:parseInt(y.getAttribute("TileSize"),10),Size:{Height:parseInt(oe.getAttribute("Height"),10),Width:parseInt(oe.getAttribute("Width"),10)}}},!r.imageFormatSupported(S.Image.Format))throw new Error(r.getString("Errors.ImageFormat",S.Image.Format.toUpperCase()));for(A=y.getElementsByTagName("DisplayRect"),A===void 0&&(A=y.getElementsByTagNameNS(b,"DisplayRect")[0]),ne=0;ne<A.length;ne++)H=A[ne],V=H.getElementsByTagName("Rect")[0],V===void 0&&(V=H.getElementsByTagNameNS(b,"Rect")[0]),R.push({Rect:{X:parseInt(V.getAttribute("X"),10),Y:parseInt(V.getAttribute("Y"),10),Width:parseInt(V.getAttribute("Width"),10),Height:parseInt(V.getAttribute("Height"),10),MinLevel:parseInt(H.getAttribute("MinLevel"),10),MaxLevel:parseInt(H.getAttribute("MaxLevel"),10)}});return R.length&&(S.Image.DisplayRect=R),c(f,S)}catch(re){throw re instanceof Error?re:new Error(r.getString("Errors.Dzi"))}else{if(w==="Collection")throw new Error(r.getString("Errors.Dzc"));if(w==="Error"){var ue=y.getElementsByTagName("Message")[0],M=ue.firstChild.nodeValue;throw new Error(M)}}throw new Error(r.getString("Errors.Dzi"))}function c(f,g){var y=g.Image,w=y.Url,b=y.Format,S=y.Size,R=y.DisplayRect||[],A=parseInt(S.Width,10),H=parseInt(S.Height,10),V=parseInt(y.TileSize,10),oe=parseInt(y.Overlap,10),ne=[],ue,M;for(M=0;M<R.length;M++)ue=R[M].Rect,ne.push(new r.DisplayRect(parseInt(ue.X,10),parseInt(ue.Y,10),parseInt(ue.Width,10),parseInt(ue.Height,10),parseInt(ue.MinLevel,10),parseInt(ue.MaxLevel,10)));return r.extend(!0,{width:A,height:H,tileSize:V,tileOverlap:oe,minLevel:null,maxLevel:null,tilesUrl:w,fileFormat:b,displayRects:ne},g)}}(l),function(r){r.IIIFTileSource=function(y){if(r.extend(!0,this,y),!(this.height&&this.width&&this["@id"]))throw new Error("IIIF required parameters not provided.");if(y.tileSizePerScaleFactor={},this.tileFormat=this.tileFormat||"jpg",this.version=y.version,this.tile_width&&this.tile_height)y.tileWidth=this.tile_width,y.tileHeight=this.tile_height;else if(this.tile_width)y.tileSize=this.tile_width;else if(this.tile_height)y.tileSize=this.tile_height;else if(this.tiles)if(this.tiles.length===1)y.tileWidth=this.tiles[0].width,y.tileHeight=this.tiles[0].height||this.tiles[0].width,this.scale_factors=this.tiles[0].scaleFactors;else{this.scale_factors=[];for(var w=0;w<this.tiles.length;w++)for(var b=0;b<this.tiles[w].scaleFactors.length;b++){var S=this.tiles[w].scaleFactors[b];this.scale_factors.push(S),y.tileSizePerScaleFactor[S]={width:this.tiles[w].width,height:this.tiles[w].height||this.tiles[w].width}}}else if(a(y)){for(var R=Math.min(this.height,this.width),A=[256,512,1024],H=[],V=0;V<A.length;V++)A[V]<=R&&H.push(A[V]);H.length>0?y.tileSize=Math.max.apply(null,H):y.tileSize=R}else this.sizes&&this.sizes.length>0?(this.emulateLegacyImagePyramid=!0,y.levels=c(this),r.extend(!0,y,{width:y.levels[y.levels.length-1].width,height:y.levels[y.levels.length-1].height,tileSize:Math.max(y.height,y.width),tileOverlap:0,minLevel:0,maxLevel:y.levels.length-1}),this.levels=y.levels):r.console.error("Nothing in the info.json to construct image pyramids from");if(!y.maxLevel&&!this.emulateLegacyImagePyramid)if(!this.scale_factors)y.maxLevel=Number(Math.ceil(Math.log(Math.max(this.width,this.height),2)));else{var oe=Math.max.apply(null,this.scale_factors);y.maxLevel=Math.round(Math.log(oe)*Math.LOG2E)}r.TileSource.apply(this,[y])},r.extend(r.IIIFTileSource.prototype,r.TileSource.prototype,{supports:function(y,w){return y.protocol&&y.protocol==="http://iiif.io/api/image"||y["@context"]&&(y["@context"]==="http://library.stanford.edu/iiif/image-api/1.1/context.json"||y["@context"]==="http://iiif.io/api/image/1/context.json")||y.profile&&y.profile.indexOf("http://library.stanford.edu/iiif/image-api/compliance.html")===0||y.identifier&&y.width&&y.height?!0:!!(y.documentElement&&y.documentElement.tagName==="info"&&y.documentElement.namespaceURI==="http://library.stanford.edu/iiif/image-api/ns/")},configure:function(y,w){if(r.isPlainObject(y)){if(!y["@context"])y["@context"]="http://iiif.io/api/image/1.0/context.json",y["@id"]=w.replace("/info.json",""),y.version=1;else{var b=y["@context"];if(Array.isArray(b)){for(var S=0;S<b.length;S++)if(typeof b[S]=="string"&&(/^http:\/\/iiif\.io\/api\/image\/[1-3]\/context\.json$/.test(b[S])||b[S]==="http://library.stanford.edu/iiif/image-api/1.1/context.json")){b=b[S];break}}switch(b){case"http://iiif.io/api/image/1/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/context.json":y.version=1;break;case"http://iiif.io/api/image/2/context.json":y.version=2;break;case"http://iiif.io/api/image/3/context.json":y.version=3;break;default:r.console.error("Data has a @context property which contains no known IIIF context URI.")}}if(!y["@id"]&&y.id&&(y["@id"]=y.id),y.preferredFormats){for(var R=0;R<y.preferredFormats.length;R++)if(l.imageFormatSupported(y.preferredFormats[R])){y.tileFormat=y.preferredFormats[R];break}}return y}else{var A=f(y);return A["@context"]="http://iiif.io/api/image/1.0/context.json",A["@id"]=w.replace("/info.xml",""),A.version=1,A}},getTileWidth:function(y){if(this.emulateLegacyImagePyramid)return r.TileSource.prototype.getTileWidth.call(this,y);var w=Math.pow(2,this.maxLevel-y);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[w]?this.tileSizePerScaleFactor[w].width:this._tileWidth},getTileHeight:function(y){if(this.emulateLegacyImagePyramid)return r.TileSource.prototype.getTileHeight.call(this,y);var w=Math.pow(2,this.maxLevel-y);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[w]?this.tileSizePerScaleFactor[w].height:this._tileHeight},getLevelScale:function(y){if(this.emulateLegacyImagePyramid){var w=NaN;return this.levels.length>0&&y>=this.minLevel&&y<=this.maxLevel&&(w=this.levels[y].width/this.levels[this.maxLevel].width),w}return r.TileSource.prototype.getLevelScale.call(this,y)},getNumTiles:function(y){if(this.emulateLegacyImagePyramid){var w=this.getLevelScale(y);return w?new r.Point(1,1):new r.Point(0,0)}return r.TileSource.prototype.getNumTiles.call(this,y)},getTileAtPoint:function(y,w){return this.emulateLegacyImagePyramid?new r.Point(0,0):r.TileSource.prototype.getTileAtPoint.call(this,y,w)},getTileUrl:function(y,w,b){if(this.emulateLegacyImagePyramid){var S=null;return this.levels.length>0&&y>=this.minLevel&&y<=this.maxLevel&&(S=this.levels[y].url),S}var R="0",A=Math.pow(.5,this.maxLevel-y),H=Math.ceil(this.width*A),V=Math.ceil(this.height*A),oe,ne,ue,M,re,ge,pe,Ee,Ce,Ze,Ke,ut,pt,ct;return oe=this.getTileWidth(y),ne=this.getTileHeight(y),ue=Math.ceil(oe/A),M=Math.ceil(ne/A),this.version===1?pt="native."+this.tileFormat:pt="default."+this.tileFormat,H<oe&&V<ne?(this.version===2&&H===this.width?Ze="full":this.version===3&&H===this.width&&V===this.height?Ze="max":this.version===3?Ze=H+","+V:Ze=H+",",re="full"):(ge=w*ue,pe=b*M,Ee=Math.min(ue,this.width-ge),Ce=Math.min(M,this.height-pe),w===0&&b===0&&Ee===this.width&&Ce===this.height?re="full":re=[ge,pe,Ee,Ce].join(","),Ke=Math.ceil(Ee*A),ut=Math.ceil(Ce*A),this.version===2&&Ke===this.width?Ze="full":this.version===3&&Ke===this.width&&ut===this.height?Ze="max":this.version===3?Ze=Ke+","+ut:Ze=Ke+","),ct=[this["@id"],re,Ze,R,pt].join("/"),ct},__testonly__:{canBeTiled:a,constructLevels:c}});function a(y){var w=["http://library.stanford.edu/iiif/image-api/compliance.html#level0","http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0","http://iiif.io/api/image/2/level0.json","level0","https://iiif.io/api/image/3/level0.json"],b=Array.isArray(y.profile)?y.profile[0]:y.profile,S=w.indexOf(b)!==-1,R=!1;return y.version===2&&y.profile.length>1&&y.profile[1].supports&&(R=y.profile[1].supports.indexOf("sizeByW")!==-1),y.version===3&&y.extraFeatures&&(R=y.extraFeatures.indexOf("sizeByWh")!==-1),!S||R}function c(y){for(var w=[],b=0;b<y.sizes.length;b++)w.push({url:y["@id"]+"/full/"+y.sizes[b].width+","+(y.version===3?y.sizes[b].height:"")+"/0/default."+y.tileFormat,width:y.sizes[b].width,height:y.sizes[b].height});return w.sort(function(S,R){return S.width-R.width})}function f(y){if(!y||!y.documentElement)throw new Error(r.getString("Errors.Xml"));var w=y.documentElement,b=w.tagName,S=null;if(b==="info")try{return S={},g(w,S),S}catch(R){throw R instanceof Error?R:new Error(r.getString("Errors.IIIF"))}throw new Error(r.getString("Errors.IIIF"))}function g(y,w,b){var S,R;if(y.nodeType===3&&b)R=y.nodeValue.trim(),R.match(/^\d*$/)&&(R=Number(R)),w[b]?(r.isArray(w[b])||(w[b]=[w[b]]),w[b].push(R)):w[b]=R;else if(y.nodeType===1)for(S=0;S<y.childNodes.length;S++)g(y.childNodes[S],w,y.nodeName)}}(l),function(r){r.OsmTileSource=function(a,c,f,g,y){var w;r.isPlainObject(a)?w=a:w={width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]},(!w.width||!w.height)&&(w.width=65572864,w.height=65572864),w.tileSize||(w.tileSize=256,w.tileOverlap=0),w.tilesUrl||(w.tilesUrl="http://tile.openstreetmap.org/"),w.minLevel=8,r.TileSource.apply(this,[w])},r.extend(r.OsmTileSource.prototype,r.TileSource.prototype,{supports:function(a,c){return a.type&&a.type==="openstreetmaps"},configure:function(a,c){return a},getTileUrl:function(a,c,f){return this.tilesUrl+(a-8)+"/"+c+"/"+f+".png"}})}(l),function(r){r.TmsTileSource=function(a,c,f,g,y){var w;r.isPlainObject(a)?w=a:w={width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]};var b=Math.ceil(w.width/256)*256,S=Math.ceil(w.height/256)*256,R;b>S?R=b/256:R=S/256,w.maxLevel=Math.ceil(Math.log(R)/Math.log(2))-1,w.tileSize=256,w.width=b,w.height=S,r.TileSource.apply(this,[w])},r.extend(r.TmsTileSource.prototype,r.TileSource.prototype,{supports:function(a,c){return a.type&&a.type==="tiledmapservice"},configure:function(a,c){return a},getTileUrl:function(a,c,f){var g=this.getNumTiles(a).y-1;return this.tilesUrl+a+"/"+c+"/"+(g-f)+".png"}})}(l),function(r){r.ZoomifyTileSource=function(a){typeof a.tileSize>"u"&&(a.tileSize=256),typeof a.fileFormat>"u"&&(a.fileFormat="jpg",this.fileFormat=a.fileFormat);var c={x:a.width,y:a.height};for(a.imageSizes=[{x:a.width,y:a.height}],a.gridSize=[this._getGridSize(a.width,a.height,a.tileSize)];parseInt(c.x,10)>a.tileSize||parseInt(c.y,10)>a.tileSize;)c.x=Math.floor(c.x/2),c.y=Math.floor(c.y/2),a.imageSizes.push({x:c.x,y:c.y}),a.gridSize.push(this._getGridSize(c.x,c.y,a.tileSize));a.imageSizes.reverse(),a.gridSize.reverse(),a.minLevel=0,a.maxLevel=a.gridSize.length-1,l.TileSource.apply(this,[a])},r.extend(r.ZoomifyTileSource.prototype,r.TileSource.prototype,{_getGridSize:function(a,c,f){return{x:Math.ceil(a/f),y:Math.ceil(c/f)}},_calculateAbsoluteTileNumber:function(a,c,f){for(var g=0,y={},w=0;w<a;w++)y=this.gridSize[w],g+=y.x*y.y;return y=this.gridSize[a],g+=y.x*f+c,g},supports:function(a,c){return a.type&&a.type==="zoomifytileservice"},configure:function(a,c){return a},getTileUrl:function(a,c,f){var g=0,y=this._calculateAbsoluteTileNumber(a,c,f);return g=Math.floor(y/256),this.tilesUrl+"TileGroup"+g+"/"+a+"-"+c+"-"+f+"."+this.fileFormat}})}(l),function(r){r.LegacyTileSource=function(g){var y,w,b;r.isArray(g)&&(y={type:"legacy-image-pyramid",levels:g}),y.levels=a(y.levels),y.levels.length>0?(w=y.levels[y.levels.length-1].width,b=y.levels[y.levels.length-1].height):(w=0,b=0,r.console.error("No supported image formats found")),r.extend(!0,y,{width:w,height:b,tileSize:Math.max(b,w),tileOverlap:0,minLevel:0,maxLevel:y.levels.length>0?y.levels.length-1:0}),r.TileSource.apply(this,[y]),this.levels=y.levels},r.extend(r.LegacyTileSource.prototype,r.TileSource.prototype,{supports:function(g,y){return g.type&&g.type==="legacy-image-pyramid"||g.documentElement&&g.documentElement.getAttribute("type")==="legacy-image-pyramid"},configure:function(g,y){var w;return r.isPlainObject(g)?w=f(this,g):w=c(this,g),w},getLevelScale:function(g){var y=NaN;return this.levels.length>0&&g>=this.minLevel&&g<=this.maxLevel&&(y=this.levels[g].width/this.levels[this.maxLevel].width),y},getNumTiles:function(g){var y=this.getLevelScale(g);return y?new r.Point(1,1):new r.Point(0,0)},getTileUrl:function(g,y,w){var b=null;return this.levels.length>0&&g>=this.minLevel&&g<=this.maxLevel&&(b=this.levels[g].url),b}});function a(g){var y=[],w,b;for(b=0;b<g.length;b++)w=g[b],w.height&&w.width&&w.url?y.push({url:w.url,width:Number(w.width),height:Number(w.height)}):r.console.error("Unsupported image format: %s",w.url?w.url:"<no URL>");return y.sort(function(S,R){return S.height-R.height})}function c(g,y){if(!y||!y.documentElement)throw new Error(r.getString("Errors.Xml"));var w=y.documentElement,b=w.tagName,S=null,R=[],A,H;if(b==="image")try{for(S={type:w.getAttribute("type"),levels:[]},R=w.getElementsByTagName("level"),H=0;H<R.length;H++)A=R[H],S.levels.push({url:A.getAttribute("url"),width:parseInt(A.getAttribute("width"),10),height:parseInt(A.getAttribute("height"),10)});return f(g,S)}catch(V){throw V instanceof Error?V:new Error("Unknown error parsing Legacy Image Pyramid XML.")}else{if(b==="collection")throw new Error("Legacy Image Pyramid Collections not yet supported.");if(b==="error")throw new Error("Error: "+y)}throw new Error("Unknown element "+b)}function f(g,y){return y.levels}}(l),function(r){r.ImageTileSource=function(a){a=r.extend({buildPyramid:!0,crossOriginPolicy:!1,ajaxWithCredentials:!1,useCanvas:!0},a),r.TileSource.apply(this,[a])},r.extend(r.ImageTileSource.prototype,r.TileSource.prototype,{supports:function(a,c){return a.type&&a.type==="image"},configure:function(a,c){return a},getImageInfo:function(a){var c=this._image=new Image,f=this;this.crossOriginPolicy&&(c.crossOrigin=this.crossOriginPolicy),this.ajaxWithCredentials&&(c.useCredentials=this.ajaxWithCredentials),r.addEvent(c,"load",function(){f.width=c.naturalWidth,f.height=c.naturalHeight,f.aspectRatio=f.width/f.height,f.dimensions=new r.Point(f.width,f.height),f._tileWidth=f.width,f._tileHeight=f.height,f.tileOverlap=0,f.minLevel=0,f.levels=f._buildLevels(),f.maxLevel=f.levels.length-1,f.ready=!0,f.raiseEvent("ready",{tileSource:f})}),r.addEvent(c,"error",function(){f.raiseEvent("open-failed",{message:"Error loading image at "+a,source:a})}),c.src=a},getLevelScale:function(a){var c=NaN;return a>=this.minLevel&&a<=this.maxLevel&&(c=this.levels[a].width/this.levels[this.maxLevel].width),c},getNumTiles:function(a){var c=this.getLevelScale(a);return c?new r.Point(1,1):new r.Point(0,0)},getTileUrl:function(a,c,f){var g=null;return a>=this.minLevel&&a<=this.maxLevel&&(g=this.levels[a].url),g},getContext2D:function(a,c,f){var g=null;return a>=this.minLevel&&a<=this.maxLevel&&(g=this.levels[a].context2D),g},destroy:function(){this._freeupCanvasMemory()},_buildLevels:function(){var a=[{url:this._image.src,width:this._image.naturalWidth,height:this._image.naturalHeight}];if(!this.buildPyramid||!r.supportsCanvas||!this.useCanvas)return delete this._image,a;var c=this._image.naturalWidth,f=this._image.naturalHeight,g=document.createElement("canvas"),y=g.getContext("2d");if(g.width=c,g.height=f,y.drawImage(this._image,0,0,c,f),a[0].context2D=y,delete this._image,r.isCanvasTainted(g))return a;for(;c>=2&&f>=2;){c=Math.floor(c/2),f=Math.floor(f/2);var w=document.createElement("canvas"),b=w.getContext("2d");w.width=c,w.height=f,b.drawImage(g,0,0,c,f),a.splice(0,0,{context2D:b,width:c,height:f}),g=w,y=b}return a},_freeupCanvasMemory:function(){for(var a=0;a<this.levels.length;a++)this.levels[a].context2D.canvas.height=0,this.levels[a].context2D.canvas.width=0}})}(l),function(r){r.TileSourceCollection=function(a,c,f,g){r.console.error("TileSourceCollection is deprecated; use World instead")}}(l),function(r){r.ButtonState={REST:0,GROUP:1,HOVER:2,DOWN:3},r.Button=function(b){var S=this;r.EventSource.call(this),r.extend(!0,this,{tooltip:null,srcRest:null,srcGroup:null,srcHover:null,srcDown:null,clickTimeThreshold:r.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:r.DEFAULT_SETTINGS.clickDistThreshold,fadeDelay:0,fadeLength:2e3,onPress:null,onRelease:null,onClick:null,onEnter:null,onExit:null,onFocus:null,onBlur:null,userData:null},b),this.element=b.element||r.makeNeutralElement("div"),b.element||(this.imgRest=r.makeTransparentImage(this.srcRest),this.imgGroup=r.makeTransparentImage(this.srcGroup),this.imgHover=r.makeTransparentImage(this.srcHover),this.imgDown=r.makeTransparentImage(this.srcDown),this.imgRest.alt=this.imgGroup.alt=this.imgHover.alt=this.imgDown.alt=this.tooltip,r.setElementPointerEventsNone(this.imgRest),r.setElementPointerEventsNone(this.imgGroup),r.setElementPointerEventsNone(this.imgHover),r.setElementPointerEventsNone(this.imgDown),this.element.style.position="relative",r.setElementTouchActionNone(this.element),this.imgGroup.style.position=this.imgHover.style.position=this.imgDown.style.position="absolute",this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top="0px",this.imgGroup.style.left=this.imgHover.style.left=this.imgDown.style.left="0px",this.imgHover.style.visibility=this.imgDown.style.visibility="hidden",r.Browser.vendor===r.BROWSERS.FIREFOX&&r.Browser.version<3&&(this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top=""),this.element.appendChild(this.imgRest),this.element.appendChild(this.imgGroup),this.element.appendChild(this.imgHover),this.element.appendChild(this.imgDown)),this.addHandler("press",this.onPress),this.addHandler("release",this.onRelease),this.addHandler("click",this.onClick),this.addHandler("enter",this.onEnter),this.addHandler("exit",this.onExit),this.addHandler("focus",this.onFocus),this.addHandler("blur",this.onBlur),this.currentState=r.ButtonState.GROUP,this.fadeBeginTime=null,this.shouldFade=!1,this.element.style.display="inline-block",this.element.style.position="relative",this.element.title=this.tooltip,this.tracker=new r.MouseTracker({userData:"Button.tracker",element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(R){R.insideElementPressed?(y(S,r.ButtonState.DOWN),S.raiseEvent("enter",{originalEvent:R.originalEvent})):R.buttonDownAny||y(S,r.ButtonState.HOVER)},focusHandler:function(R){S.tracker.enterHandler(R),S.raiseEvent("focus",{originalEvent:R.originalEvent})},leaveHandler:function(R){w(S,r.ButtonState.GROUP),R.insideElementPressed&&S.raiseEvent("exit",{originalEvent:R.originalEvent})},blurHandler:function(R){S.tracker.leaveHandler(R),S.raiseEvent("blur",{originalEvent:R.originalEvent})},pressHandler:function(R){y(S,r.ButtonState.DOWN),S.raiseEvent("press",{originalEvent:R.originalEvent})},releaseHandler:function(R){R.insideElementPressed&&R.insideElementReleased?(w(S,r.ButtonState.HOVER),S.raiseEvent("release",{originalEvent:R.originalEvent})):R.insideElementPressed?w(S,r.ButtonState.GROUP):y(S,r.ButtonState.HOVER)},clickHandler:function(R){R.quick&&S.raiseEvent("click",{originalEvent:R.originalEvent})},keyHandler:function(R){R.keyCode===13?(S.raiseEvent("click",{originalEvent:R.originalEvent}),S.raiseEvent("release",{originalEvent:R.originalEvent}),R.preventDefault=!0):R.preventDefault=!1}}),w(this,r.ButtonState.REST)},r.extend(r.Button.prototype,r.EventSource.prototype,{notifyGroupEnter:function(){y(this,r.ButtonState.GROUP)},notifyGroupExit:function(){w(this,r.ButtonState.REST)},disable:function(){this.notifyGroupExit(),this.element.disabled=!0,r.setElementOpacity(this.element,.2,!0)},enable:function(){this.element.disabled=!1,r.setElementOpacity(this.element,1,!0),this.notifyGroupEnter()},destroy:function(){this.imgRest&&(this.element.removeChild(this.imgRest),this.imgRest=null),this.imgGroup&&(this.element.removeChild(this.imgGroup),this.imgGroup=null),this.imgHover&&(this.element.removeChild(this.imgHover),this.imgHover=null),this.imgDown&&(this.element.removeChild(this.imgDown),this.imgDown=null),this.removeAllHandlers(),this.tracker.destroy(),this.element=null}});function a(b){r.requestAnimationFrame(function(){c(b)})}function c(b){var S,R,A;b.shouldFade&&(S=r.now(),R=S-b.fadeBeginTime,A=1-R/b.fadeLength,A=Math.min(1,A),A=Math.max(0,A),b.imgGroup&&r.setElementOpacity(b.imgGroup,A,!0),A>0&&a(b))}function f(b){b.shouldFade=!0,b.fadeBeginTime=r.now()+b.fadeDelay,window.setTimeout(function(){a(b)},b.fadeDelay)}function g(b){b.shouldFade=!1,b.imgGroup&&r.setElementOpacity(b.imgGroup,1,!0)}function y(b,S){b.element.disabled||(S>=r.ButtonState.GROUP&&b.currentState===r.ButtonState.REST&&(g(b),b.currentState=r.ButtonState.GROUP),S>=r.ButtonState.HOVER&&b.currentState===r.ButtonState.GROUP&&(b.imgHover&&(b.imgHover.style.visibility=""),b.currentState=r.ButtonState.HOVER),S>=r.ButtonState.DOWN&&b.currentState===r.ButtonState.HOVER&&(b.imgDown&&(b.imgDown.style.visibility=""),b.currentState=r.ButtonState.DOWN))}function w(b,S){b.element.disabled||(S<=r.ButtonState.HOVER&&b.currentState===r.ButtonState.DOWN&&(b.imgDown&&(b.imgDown.style.visibility="hidden"),b.currentState=r.ButtonState.HOVER),S<=r.ButtonState.GROUP&&b.currentState===r.ButtonState.HOVER&&(b.imgHover&&(b.imgHover.style.visibility="hidden"),b.currentState=r.ButtonState.GROUP),S<=r.ButtonState.REST&&b.currentState===r.ButtonState.GROUP&&(f(b),b.currentState=r.ButtonState.REST))}}(l),function(r){r.ButtonGroup=function(a){r.extend(!0,this,{buttons:[],clickTimeThreshold:r.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:r.DEFAULT_SETTINGS.clickDistThreshold,labelText:""},a);var c=this.buttons.concat([]),f=this,g;if(this.element=a.element||r.makeNeutralElement("div"),!a.group)for(this.element.style.display="inline-block",g=0;g<c.length;g++)this.element.appendChild(c[g].element);r.setElementTouchActionNone(this.element),this.tracker=new r.MouseTracker({userData:"ButtonGroup.tracker",element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(y){var w;for(w=0;w<f.buttons.length;w++)f.buttons[w].notifyGroupEnter()},leaveHandler:function(y){var w;if(!y.insideElementPressed)for(w=0;w<f.buttons.length;w++)f.buttons[w].notifyGroupExit()}})},r.ButtonGroup.prototype={emulateEnter:function(){this.tracker.enterHandler({eventSource:this.tracker})},emulateLeave:function(){this.tracker.leaveHandler({eventSource:this.tracker})},destroy:function(){for(;this.buttons.length;){var a=this.buttons.pop();this.element.removeChild(a.element),a.destroy()}this.tracker.destroy(),this.element=null}}}(l),function(r){r.Rect=function(a,c,f,g,y){this.x=typeof a=="number"?a:0,this.y=typeof c=="number"?c:0,this.width=typeof f=="number"?f:0,this.height=typeof g=="number"?g:0,this.degrees=typeof y=="number"?y:0,this.degrees=r.positiveModulo(this.degrees,360);var w,b;this.degrees>=270?(w=this.getTopRight(),this.x=w.x,this.y=w.y,b=this.height,this.height=this.width,this.width=b,this.degrees-=270):this.degrees>=180?(w=this.getBottomRight(),this.x=w.x,this.y=w.y,this.degrees-=180):this.degrees>=90&&(w=this.getBottomLeft(),this.x=w.x,this.y=w.y,b=this.height,this.height=this.width,this.width=b,this.degrees-=90)},r.Rect.fromSummits=function(a,c,f){var g=a.distanceTo(c),y=a.distanceTo(f),w=c.minus(a),b=Math.atan(w.y/w.x);return w.x<0?b+=Math.PI:w.y<0&&(b+=2*Math.PI),new r.Rect(a.x,a.y,g,y,b/Math.PI*180)},r.Rect.prototype={clone:function(){return new r.Rect(this.x,this.y,this.width,this.height,this.degrees)},getAspectRatio:function(){return this.width/this.height},getTopLeft:function(){return new r.Point(this.x,this.y)},getBottomRight:function(){return new r.Point(this.x+this.width,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getTopRight:function(){return new r.Point(this.x+this.width,this.y).rotate(this.degrees,this.getTopLeft())},getBottomLeft:function(){return new r.Point(this.x,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getCenter:function(){return new r.Point(this.x+this.width/2,this.y+this.height/2).rotate(this.degrees,this.getTopLeft())},getSize:function(){return new r.Point(this.width,this.height)},equals:function(a){return a instanceof r.Rect&&this.x===a.x&&this.y===a.y&&this.width===a.width&&this.height===a.height&&this.degrees===a.degrees},times:function(a){return new r.Rect(this.x*a,this.y*a,this.width*a,this.height*a,this.degrees)},translate:function(a){return new r.Rect(this.x+a.x,this.y+a.y,this.width,this.height,this.degrees)},union:function(a){var c=this.getBoundingBox(),f=a.getBoundingBox(),g=Math.min(c.x,f.x),y=Math.min(c.y,f.y),w=Math.max(c.x+c.width,f.x+f.width),b=Math.max(c.y+c.height,f.y+f.height);return new r.Rect(g,y,w-g,b-y)},intersection:function(a){var c=1e-10,f=[],g=this.getTopLeft();a.containsPoint(g,c)&&f.push(g);var y=this.getTopRight();a.containsPoint(y,c)&&f.push(y);var w=this.getBottomLeft();a.containsPoint(w,c)&&f.push(w);var b=this.getBottomRight();a.containsPoint(b,c)&&f.push(b);var S=a.getTopLeft();this.containsPoint(S,c)&&f.push(S);var R=a.getTopRight();this.containsPoint(R,c)&&f.push(R);var A=a.getBottomLeft();this.containsPoint(A,c)&&f.push(A);var H=a.getBottomRight();this.containsPoint(H,c)&&f.push(H);for(var V=this._getSegments(),oe=a._getSegments(),ne=0;ne<V.length;ne++)for(var ue=V[ne],M=0;M<oe.length;M++){var re=oe[M],ge=pe(ue[0],ue[1],re[0],re[1]);ge&&f.push(ge)}function pe(ct,_t,Ct,Wt){var Ut=_t.minus(ct),Zt=Wt.minus(Ct),ln=-Zt.x*Ut.y+Ut.x*Zt.y;if(ln===0)return null;var bn=(Ut.x*(ct.y-Ct.y)-Ut.y*(ct.x-Ct.x))/ln,dt=(Zt.x*(ct.y-Ct.y)-Zt.y*(ct.x-Ct.x))/ln;return-1e-10<=bn&&bn<=1-c&&-1e-10<=dt&&dt<=1-c?new r.Point(ct.x+dt*Ut.x,ct.y+dt*Ut.y):null}if(f.length===0)return null;for(var Ee=f[0].x,Ce=f[0].x,Ze=f[0].y,Ke=f[0].y,ut=1;ut<f.length;ut++){var pt=f[ut];pt.x<Ee&&(Ee=pt.x),pt.x>Ce&&(Ce=pt.x),pt.y<Ze&&(Ze=pt.y),pt.y>Ke&&(Ke=pt.y)}return new r.Rect(Ee,Ze,Ce-Ee,Ke-Ze)},_getSegments:function(){var a=this.getTopLeft(),c=this.getTopRight(),f=this.getBottomLeft(),g=this.getBottomRight();return[[a,c],[c,g],[g,f],[f,a]]},rotate:function(a,c){if(a=r.positiveModulo(a,360),a===0)return this.clone();c=c||this.getCenter();var f=this.getTopLeft().rotate(a,c),g=this.getTopRight().rotate(a,c),y=g.minus(f);y=y.apply(function(b){var S=1e-15;return Math.abs(b)<S?0:b});var w=Math.atan(y.y/y.x);return y.x<0?w+=Math.PI:y.y<0&&(w+=2*Math.PI),new r.Rect(f.x,f.y,this.width,this.height,w/Math.PI*180)},getBoundingBox:function(){if(this.degrees===0)return this.clone();var a=this.getTopLeft(),c=this.getTopRight(),f=this.getBottomLeft(),g=this.getBottomRight(),y=Math.min(a.x,c.x,f.x,g.x),w=Math.max(a.x,c.x,f.x,g.x),b=Math.min(a.y,c.y,f.y,g.y),S=Math.max(a.y,c.y,f.y,g.y);return new r.Rect(y,b,w-y,S-b)},getIntegerBoundingBox:function(){var a=this.getBoundingBox(),c=Math.floor(a.x),f=Math.floor(a.y),g=Math.ceil(a.width+a.x-c),y=Math.ceil(a.height+a.y-f);return new r.Rect(c,f,g,y)},containsPoint:function(a,c){c=c||0;var f=this.getTopLeft(),g=this.getTopRight(),y=this.getBottomLeft(),w=g.minus(f),b=y.minus(f);return(a.x-f.x)*w.x+(a.y-f.y)*w.y>=-c&&(a.x-g.x)*w.x+(a.y-g.y)*w.y<=c&&(a.x-f.x)*b.x+(a.y-f.y)*b.y>=-c&&(a.x-y.x)*b.x+(a.y-y.y)*b.y<=c},toString:function(){return"["+Math.round(this.x*100)/100+", "+Math.round(this.y*100)/100+", "+Math.round(this.width*100)/100+"x"+Math.round(this.height*100)/100+", "+Math.round(this.degrees*100)/100+"deg]"}}}(l),function(r){var a={};r.ReferenceStrip=function(A){var H=this,V=A.viewer,oe=r.getElementSize(V.element),ne,ue,M;for(A.id||(A.id="referencestrip-"+r.now(),this.element=r.makeNeutralElement("div"),this.element.id=A.id,this.element.className="referencestrip"),A=r.extend(!0,{sizeRatio:r.DEFAULT_SETTINGS.referenceStripSizeRatio,position:r.DEFAULT_SETTINGS.referenceStripPosition,scroll:r.DEFAULT_SETTINGS.referenceStripScroll,clickTimeThreshold:r.DEFAULT_SETTINGS.clickTimeThreshold},A,{element:this.element}),r.extend(this,A),a[this.id]={animating:!1},this.minPixelRatio=this.viewer.minPixelRatio,this.element.tabIndex=0,ue=this.element.style,ue.marginTop="0px",ue.marginRight="0px",ue.marginBottom="0px",ue.marginLeft="0px",ue.left="0px",ue.bottom="0px",ue.border="0px",ue.background="#000",ue.position="relative",r.setElementTouchActionNone(this.element),r.setElementOpacity(this.element,.8),this.viewer=V,this.tracker=new r.MouseTracker({userData:"ReferenceStrip.tracker",element:this.element,clickHandler:r.delegate(this,c),dragHandler:r.delegate(this,f),scrollHandler:r.delegate(this,g),enterHandler:r.delegate(this,w),leaveHandler:r.delegate(this,b),keyDownHandler:r.delegate(this,S),keyHandler:r.delegate(this,R),preProcessEventHandler:function(re){re.eventType==="wheel"&&(re.preventDefault=!0)}}),A.width&&A.height?(this.element.style.width=A.width+"px",this.element.style.height=A.height+"px",V.addControl(this.element,{anchor:r.ControlAnchor.BOTTOM_LEFT})):A.scroll==="horizontal"?(this.element.style.width=oe.x*A.sizeRatio*V.tileSources.length+12*V.tileSources.length+"px",this.element.style.height=oe.y*A.sizeRatio+"px",V.addControl(this.element,{anchor:r.ControlAnchor.BOTTOM_LEFT})):(this.element.style.height=oe.y*A.sizeRatio*V.tileSources.length+12*V.tileSources.length+"px",this.element.style.width=oe.x*A.sizeRatio+"px",V.addControl(this.element,{anchor:r.ControlAnchor.TOP_LEFT})),this.panelWidth=oe.x*this.sizeRatio+8,this.panelHeight=oe.y*this.sizeRatio+8,this.panels=[],this.miniViewers={},M=0;M<V.tileSources.length;M++)ne=r.makeNeutralElement("div"),ne.id=this.element.id+"-"+M,ne.style.width=H.panelWidth+"px",ne.style.height=H.panelHeight+"px",ne.style.display="inline",ne.style.float="left",ne.style.cssFloat="left",ne.style.styleFloat="left",ne.style.padding="2px",r.setElementTouchActionNone(ne),r.setElementPointerEventsNone(ne),this.element.appendChild(ne),ne.activePanel=!1,this.panels.push(ne);y(this,this.scroll==="vertical"?oe.y:oe.x,0),this.setFocus(0)},r.ReferenceStrip.prototype={setFocus:function(A){var H=this.element.querySelector("#"+this.element.id+"-"+A),V=r.getElementSize(this.viewer.canvas),oe=Number(this.element.style.width.replace("px","")),ne=Number(this.element.style.height.replace("px","")),ue=-Number(this.element.style.marginLeft.replace("px","")),M=-Number(this.element.style.marginTop.replace("px","")),re;this.currentSelected!==H&&(this.currentSelected&&(this.currentSelected.style.background="#000"),this.currentSelected=H,this.currentSelected.style.background="#999",this.scroll==="horizontal"?(re=Number(A)*(this.panelWidth+3),re>ue+V.x-this.panelWidth?(re=Math.min(re,oe-V.x),this.element.style.marginLeft=-re+"px",y(this,V.x,-re)):re<ue&&(re=Math.max(0,re-V.x/2),this.element.style.marginLeft=-re+"px",y(this,V.x,-re))):(re=Number(A)*(this.panelHeight+3),re>M+V.y-this.panelHeight?(re=Math.min(re,ne-V.y),this.element.style.marginTop=-re+"px",y(this,V.y,-re)):re<M&&(re=Math.max(0,re-V.y/2),this.element.style.marginTop=-re+"px",y(this,V.y,-re))),this.currentPage=A,w.call(this,{eventSource:this.tracker}))},update:function(){return a[this.id].animating?(r.console.log("image reference strip update"),!0):!1},destroy:function(){if(this.miniViewers)for(var A in this.miniViewers)this.miniViewers[A].destroy();this.tracker.destroy(),this.element&&this.viewer.removeControl(this.element)}};function c(A){if(A.quick){var H;this.scroll==="horizontal"?H=Math.floor(A.position.x/this.panelWidth):H=Math.floor(A.position.y/this.panelHeight),this.viewer.goToPage(H)}this.element.focus()}function f(A){if(this.dragging=!0,this.element){var H=Number(this.element.style.marginLeft.replace("px","")),V=Number(this.element.style.marginTop.replace("px","")),oe=Number(this.element.style.width.replace("px","")),ne=Number(this.element.style.height.replace("px","")),ue=r.getElementSize(this.viewer.canvas);this.scroll==="horizontal"?-A.delta.x>0?H>-(oe-ue.x)&&(this.element.style.marginLeft=H+A.delta.x*2+"px",y(this,ue.x,H+A.delta.x*2)):-A.delta.x<0&&H<0&&(this.element.style.marginLeft=H+A.delta.x*2+"px",y(this,ue.x,H+A.delta.x*2)):-A.delta.y>0?V>-(ne-ue.y)&&(this.element.style.marginTop=V+A.delta.y*2+"px",y(this,ue.y,V+A.delta.y*2)):-A.delta.y<0&&V<0&&(this.element.style.marginTop=V+A.delta.y*2+"px",y(this,ue.y,V+A.delta.y*2))}}function g(A){if(this.element){var H=Number(this.element.style.marginLeft.replace("px","")),V=Number(this.element.style.marginTop.replace("px","")),oe=Number(this.element.style.width.replace("px","")),ne=Number(this.element.style.height.replace("px","")),ue=r.getElementSize(this.viewer.canvas);this.scroll==="horizontal"?A.scroll>0?H>-(oe-ue.x)&&(this.element.style.marginLeft=H-A.scroll*60+"px",y(this,ue.x,H-A.scroll*60)):A.scroll<0&&H<0&&(this.element.style.marginLeft=H-A.scroll*60+"px",y(this,ue.x,H-A.scroll*60)):A.scroll<0?V>ue.y-ne&&(this.element.style.marginTop=V+A.scroll*60+"px",y(this,ue.y,V+A.scroll*60)):A.scroll>0&&V<0&&(this.element.style.marginTop=V+A.scroll*60+"px",y(this,ue.y,V+A.scroll*60)),A.preventDefault=!0}}function y(A,H,V){var oe,ne,ue,M,re,ge;for(A.scroll==="horizontal"?oe=A.panelWidth:oe=A.panelHeight,ne=Math.ceil(H/oe)+5,ue=Math.ceil((Math.abs(V)+H)/oe)+1,ne=ue-ne,ne=ne<0?0:ne,re=ne;re<ue&&re<A.panels.length;re++)if(ge=A.panels[re],!ge.activePanel){var pe,Ee=A.viewer.tileSources[re];Ee.referenceStripThumbnailUrl?pe={type:"image",url:Ee.referenceStripThumbnailUrl}:pe=Ee,M=new r.Viewer({id:ge.id,tileSources:[pe],element:ge,navigatorSizeRatio:A.sizeRatio,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0,loadTilesWithAjax:A.viewer.loadTilesWithAjax,ajaxHeaders:A.viewer.ajaxHeaders,useCanvas:A.useCanvas}),r.setElementPointerEventsNone(M.canvas),r.setElementPointerEventsNone(M.container),M.innerTracker.setTracking(!1),M.outerTracker.setTracking(!1),A.miniViewers[ge.id]=M,ge.activePanel=!0}}function w(A){var H=A.eventSource.element;this.scroll==="horizontal"?H.style.marginBottom="0px":H.style.marginLeft="0px"}function b(A){var H=A.eventSource.element;this.scroll==="horizontal"?H.style.marginBottom="-"+r.getElementSize(H).y/2+"px":H.style.marginLeft="-"+r.getElementSize(H).x/2+"px"}function S(A){if(!A.ctrl&&!A.alt&&!A.meta)switch(A.keyCode){case 38:g.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),A.preventDefault=!0;break;case 40:g.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),A.preventDefault=!0;break;case 37:g.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),A.preventDefault=!0;break;case 39:g.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),A.preventDefault=!0;break;default:A.preventDefault=!1;break}else A.preventDefault=!1}function R(A){if(!A.ctrl&&!A.alt&&!A.meta)switch(A.keyCode){case 61:g.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),A.preventDefault=!0;break;case 45:g.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),A.preventDefault=!0;break;case 48:case 119:case 87:g.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),A.preventDefault=!0;break;case 115:case 83:g.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),A.preventDefault=!0;break;case 97:g.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),A.preventDefault=!0;break;case 100:g.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),A.preventDefault=!0;break;default:A.preventDefault=!1;break}else A.preventDefault=!1}}(l),function(r){r.DisplayRect=function(a,c,f,g,y,w){r.Rect.apply(this,[a,c,f,g]),this.minLevel=y,this.maxLevel=w},r.extend(r.DisplayRect.prototype,r.Rect.prototype)}(l),function(r){r.Spring=function(c){var f=arguments;typeof c!="object"&&(c={initial:f.length&&typeof f[0]=="number"?f[0]:void 0,springStiffness:f.length>1?f[1].springStiffness:5,animationTime:f.length>1?f[1].animationTime:1.5}),r.console.assert(typeof c.springStiffness=="number"&&c.springStiffness!==0,"[OpenSeadragon.Spring] options.springStiffness must be a non-zero number"),r.console.assert(typeof c.animationTime=="number"&&c.animationTime>=0,"[OpenSeadragon.Spring] options.animationTime must be a number greater than or equal to 0"),c.exponential&&(this._exponential=!0,delete c.exponential),r.extend(!0,this,c),this.current={value:typeof this.initial=="number"?this.initial:this._exponential?0:1,time:r.now()},r.console.assert(!this._exponential||this.current.value!==0,"[OpenSeadragon.Spring] value must be non-zero for exponential springs"),this.start={value:this.current.value,time:this.current.time},this.target={value:this.current.value,time:this.current.time},this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},r.Spring.prototype={resetTo:function(c){r.console.assert(!this._exponential||c!==0,"[OpenSeadragon.Spring.resetTo] target must be non-zero for exponential springs"),this.start.value=this.target.value=this.current.value=c,this.start.time=this.target.time=this.current.time=r.now(),this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},springTo:function(c){r.console.assert(!this._exponential||c!==0,"[OpenSeadragon.Spring.springTo] target must be non-zero for exponential springs"),this.start.value=this.current.value,this.start.time=this.current.time,this.target.value=c,this.target.time=this.start.time+1e3*this.animationTime,this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},shiftBy:function(c){this.start.value+=c,this.target.value+=c,this._exponential&&(r.console.assert(this.target.value!==0&&this.start.value!==0,"[OpenSeadragon.Spring.shiftBy] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},setExponential:function(c){this._exponential=c,this._exponential&&(r.console.assert(this.current.value!==0&&this.target.value!==0&&this.start.value!==0,"[OpenSeadragon.Spring.setExponential] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},update:function(){this.current.time=r.now();var c,f;this._exponential?(c=this.start._logValue,f=this.target._logValue):(c=this.start.value,f=this.target.value);var g=this.current.time>=this.target.time?f:c+(f-c)*a(this.springStiffness,(this.current.time-this.start.time)/(this.target.time-this.start.time)),y=this.current.value;return this._exponential?this.current.value=Math.exp(g):this.current.value=g,y!==this.current.value},isAtTargetValue:function(){return this.current.value===this.target.value}};function a(c,f){return(1-Math.exp(c*-f))/(1-Math.exp(-c))}}(l),function(r){function a(f){r.extend(!0,this,{timeout:r.DEFAULT_SETTINGS.timeout,jobId:null},f),this.image=null}a.prototype={errorMsg:null,start:function(){var f=this,g=this.abort;this.image=new Image,this.image.onload=function(){f.finish(!0)},this.image.onabort=this.image.onerror=function(){f.errorMsg="Image load aborted",f.finish(!1)},this.jobId=window.setTimeout(function(){f.errorMsg="Image load exceeded timeout ("+f.timeout+" ms)",f.finish(!1)},this.timeout),this.loadWithAjax?(this.request=r.makeAjaxRequest({url:this.src,withCredentials:this.ajaxWithCredentials,headers:this.ajaxHeaders,responseType:"arraybuffer",success:function(y){var w;try{w=new window.Blob([y.response])}catch(A){var b=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;if(A.name==="TypeError"&&b){var S=new b;S.append(y.response),w=S.getBlob()}}w.size===0&&(f.errorMsg="Empty image response.",f.finish(!1));var R=(window.URL||window.webkitURL).createObjectURL(w);f.image.src=R},error:function(y){f.errorMsg="Image load aborted - XHR error",f.finish(!1)}}),this.abort=function(){f.request.abort(),typeof g=="function"&&g()}):(this.crossOriginPolicy!==!1&&(this.image.crossOrigin=this.crossOriginPolicy),this.image.src=this.src)},finish:function(f){this.image.onload=this.image.onerror=this.image.onabort=null,f||(this.image=null),this.jobId&&window.clearTimeout(this.jobId),this.callback(this)}},r.ImageLoader=function(f){r.extend(!0,this,{jobLimit:r.DEFAULT_SETTINGS.imageLoaderLimit,timeout:r.DEFAULT_SETTINGS.timeout,jobQueue:[],jobsInProgress:0},f)},r.ImageLoader.prototype={addJob:function(f){var g=this,y=function(S){c(g,S,f.callback)},w={src:f.src,loadWithAjax:f.loadWithAjax,ajaxHeaders:f.loadWithAjax?f.ajaxHeaders:null,crossOriginPolicy:f.crossOriginPolicy,ajaxWithCredentials:f.ajaxWithCredentials,callback:y,abort:f.abort,timeout:this.timeout},b=new a(w);!this.jobLimit||this.jobsInProgress<this.jobLimit?(b.start(),this.jobsInProgress++):this.jobQueue.push(b)},clear:function(){for(var f=0;f<this.jobQueue.length;f++){var g=this.jobQueue[f];typeof g.abort=="function"&&g.abort()}this.jobQueue=[]}};function c(f,g,y){var w;f.jobsInProgress--,(!f.jobLimit||f.jobsInProgress<f.jobLimit)&&f.jobQueue.length>0&&(w=f.jobQueue.shift(),w.start(),f.jobsInProgress++),y(g.image,g.errorMsg,g.request)}}(l),function(r){r.Tile=function(a,c,f,g,y,w,b,S,R,A){this.level=a,this.x=c,this.y=f,this.bounds=g,this.sourceBounds=A,this.exists=y,this.url=w,this.context2D=b,this.loadWithAjax=S,this.ajaxHeaders=R,this.ajaxHeaders?this.cacheKey=this.url+"+"+JSON.stringify(this.ajaxHeaders):this.cacheKey=this.url,this.loaded=!1,this.loading=!1,this.element=null,this.imgElement=null,this.image=null,this.style=null,this.position=null,this.size=null,this.flipped=!1,this.blendStart=null,this.opacity=null,this.squaredDistance=null,this.visibility=null,this.beingDrawn=!1,this.lastTouchTime=0,this.isRightMost=!1,this.isBottomMost=!1},r.Tile.prototype={toString:function(){return this.level+"/"+this.x+"_"+this.y},_hasTransparencyChannel:function(){return!!this.context2D||this.url.match(".png")},drawHTML:function(a){if(!this.cacheImageRecord){r.console.warn("[Tile.drawHTML] attempting to draw tile %s when it's not cached",this.toString());return}if(!this.loaded){r.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString());return}this.element||(this.element=r.makeNeutralElement("div"),this.imgElement=this.cacheImageRecord.getImage().cloneNode(),this.imgElement.style.msInterpolationMode="nearest-neighbor",this.imgElement.style.width="100%",this.imgElement.style.height="100%",this.style=this.element.style,this.style.position="absolute"),this.element.parentNode!==a&&a.appendChild(this.element),this.imgElement.parentNode!==this.element&&this.element.appendChild(this.imgElement),this.style.top=this.position.y+"px",this.style.left=this.position.x+"px",this.style.height=this.size.y+"px",this.style.width=this.size.x+"px",this.flipped&&(this.style.transform="scaleX(-1)"),r.setElementOpacity(this.element,this.opacity)},drawCanvas:function(a,c,f,g){var y=this.position.times(r.pixelDensityRatio),w=this.size.times(r.pixelDensityRatio),b;if(!this.context2D&&!this.cacheImageRecord){r.console.warn("[Tile.drawCanvas] attempting to draw tile %s when it's not cached",this.toString());return}if(b=this.context2D||this.cacheImageRecord.getRenderedContext(),!this.loaded||!b){r.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString());return}a.save(),a.globalAlpha=this.opacity,typeof f=="number"&&f!==1&&(y=y.times(f),w=w.times(f)),g instanceof r.Point&&(y=y.plus(g)),a.globalAlpha===1&&this._hasTransparencyChannel()&&a.clearRect(y.x,y.y,w.x,w.y),c({context:a,tile:this,rendered:b});var S,R;this.sourceBounds?(S=Math.min(this.sourceBounds.width,b.canvas.width),R=Math.min(this.sourceBounds.height,b.canvas.height)):(S=b.canvas.width,R=b.canvas.height),a.translate(y.x+w.x/2,0),this.flipped&&a.scale(-1,1),a.drawImage(b.canvas,0,0,S,R,-w.x/2,y.y,w.x,w.y),a.restore()},getScaleForEdgeSmoothing:function(){var a;if(this.cacheImageRecord)a=this.cacheImageRecord.getRenderedContext();else if(this.context2D)a=this.context2D;else return r.console.warn("[Tile.drawCanvas] attempting to get tile scale %s when tile's not cached",this.toString()),1;return a.canvas.width/(this.size.x*r.pixelDensityRatio)},getTranslationForEdgeSmoothing:function(a,c,f){var g=Math.max(1,Math.ceil((f.x-c.x)/2)),y=Math.max(1,Math.ceil((f.y-c.y)/2));return new r.Point(g,y).minus(this.position.times(r.pixelDensityRatio).times(a||1).apply(function(w){return w%1}))},unload:function(){this.imgElement&&this.imgElement.parentNode&&this.imgElement.parentNode.removeChild(this.imgElement),this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=null,this.imgElement=null,this.loaded=!1,this.loading=!1}}}(l),function(r){r.OverlayPlacement=r.Placement,r.OverlayRotationMode=r.freezeObject({NO_ROTATION:1,EXACT:2,BOUNDING_BOX:3}),r.Overlay=function(a,c,f){var g;r.isPlainObject(a)?g=a:g={element:a,location:c,placement:f},this.element=g.element,this.style=g.element.style,this._init(g)},r.Overlay.prototype={_init:function(a){this.location=a.location,this.placement=a.placement===void 0?r.Placement.TOP_LEFT:a.placement,this.onDraw=a.onDraw,this.checkResize=a.checkResize===void 0?!0:a.checkResize,this.width=a.width===void 0?null:a.width,this.height=a.height===void 0?null:a.height,this.rotationMode=a.rotationMode||r.OverlayRotationMode.EXACT,this.location instanceof r.Rect&&(this.width=this.location.width,this.height=this.location.height,this.location=this.location.getTopLeft(),this.placement=r.Placement.TOP_LEFT),this.scales=this.width!==null&&this.height!==null,this.bounds=new r.Rect(this.location.x,this.location.y,this.width,this.height),this.position=this.location},adjust:function(a,c){var f=r.Placement.properties[this.placement];!f||(f.isHorizontallyCentered?a.x-=c.x/2:f.isRight&&(a.x-=c.x),f.isVerticallyCentered?a.y-=c.y/2:f.isBottom&&(a.y-=c.y))},destroy:function(){var a=this.element,c=this.style;a.parentNode&&(a.parentNode.removeChild(a),a.prevElementParent&&(c.display="none",document.body.appendChild(a))),this.onDraw=null,c.top="",c.left="",c.position="",this.width!==null&&(c.width=""),this.height!==null&&(c.height="");var f=r.getCssPropertyWithVendorPrefix("transformOrigin"),g=r.getCssPropertyWithVendorPrefix("transform");f&&g&&(c[f]="",c[g]="")},drawHTML:function(a,c){var f=this.element;f.parentNode!==a&&(f.prevElementParent=f.parentNode,f.prevNextSibling=f.nextSibling,a.appendChild(f),this.style.position="absolute",this.size=r.getElementSize(f));var g=this._getOverlayPositionAndSize(c),y=g.position,w=this.size=g.size,b=g.rotate;if(this.onDraw)this.onDraw(y,w,this.element);else{var S=this.style;S.left=y.x+"px",S.top=y.y+"px",this.width!==null&&(S.width=w.x+"px"),this.height!==null&&(S.height=w.y+"px");var R=r.getCssPropertyWithVendorPrefix("transformOrigin"),A=r.getCssPropertyWithVendorPrefix("transform");R&&A&&(b?(S[R]=this._getTransformOrigin(),S[A]="rotate("+b+"deg)"):(S[R]="",S[A]="")),S.display="block"}},_getOverlayPositionAndSize:function(a){var c=a.pixelFromPoint(this.location,!0),f=this._getSizeInPixels(a);this.adjust(c,f);var g=0;if(a.degrees&&this.rotationMode!==r.OverlayRotationMode.NO_ROTATION)if(this.rotationMode===r.OverlayRotationMode.BOUNDING_BOX&&this.width!==null&&this.height!==null){var y=new r.Rect(c.x,c.y,f.x,f.y),w=this._getBoundingBox(y,a.degrees);c=w.getTopLeft(),f=w.getSize()}else g=a.degrees;return{position:c,size:f,rotate:g}},_getSizeInPixels:function(a){var c=this.size.x,f=this.size.y;if(this.width!==null||this.height!==null){var g=a.deltaPixelsFromPointsNoRotate(new r.Point(this.width||0,this.height||0),!0);this.width!==null&&(c=g.x),this.height!==null&&(f=g.y)}if(this.checkResize&&(this.width===null||this.height===null)){var y=this.size=r.getElementSize(this.element);this.width===null&&(c=y.x),this.height===null&&(f=y.y)}return new r.Point(c,f)},_getBoundingBox:function(a,c){var f=this._getPlacementPoint(a);return a.rotate(c,f).getBoundingBox()},_getPlacementPoint:function(a){var c=new r.Point(a.x,a.y),f=r.Placement.properties[this.placement];return f&&(f.isHorizontallyCentered?c.x+=a.width/2:f.isRight&&(c.x+=a.width),f.isVerticallyCentered?c.y+=a.height/2:f.isBottom&&(c.y+=a.height)),c},_getTransformOrigin:function(){var a="",c=r.Placement.properties[this.placement];return c&&(c.isLeft?a="left":c.isRight&&(a="right"),c.isTop?a+=" top":c.isBottom&&(a+=" bottom")),a},update:function(a,c){var f=r.isPlainObject(a)?a:{location:a,placement:c};this._init({location:f.location||this.location,placement:f.placement!==void 0?f.placement:this.placement,onDraw:f.onDraw||this.onDraw,checkResize:f.checkResize||this.checkResize,width:f.width!==void 0?f.width:this.width,height:f.height!==void 0?f.height:this.height,rotationMode:f.rotationMode||this.rotationMode})},getBounds:function(a){r.console.assert(a,"A viewport must now be passed to Overlay.getBounds.");var c=this.width,f=this.height;if(c===null||f===null){var g=a.deltaPointsFromPixelsNoRotate(this.size,!0);c===null&&(c=g.x),f===null&&(f=g.y)}var y=this.location.clone();return this.adjust(y,new r.Point(c,f)),this._adjustBoundsForRotation(a,new r.Rect(y.x,y.y,c,f))},_adjustBoundsForRotation:function(a,c){if(!a||a.degrees===0||this.rotationMode===r.OverlayRotationMode.EXACT)return c;if(this.rotationMode===r.OverlayRotationMode.BOUNDING_BOX){if(this.width===null||this.height===null)return c;var f=this._getOverlayPositionAndSize(a);return a.viewerElementToViewportRectangle(new r.Rect(f.position.x,f.position.y,f.size.x,f.size.y))}return c.rotate(-a.degrees,this._getPlacementPoint(c))}}}(l),function(r){r.Drawer=function(a){r.console.assert(a.viewer,"[Drawer] options.viewer is required");var c=arguments;if(r.isPlainObject(a)||(a={source:c[0],viewport:c[1],element:c[2]}),r.console.assert(a.viewport,"[Drawer] options.viewport is required"),r.console.assert(a.element,"[Drawer] options.element is required"),a.source&&r.console.error("[Drawer] options.source is no longer accepted; use TiledImage instead"),this.viewer=a.viewer,this.viewport=a.viewport,this.debugGridColor=typeof a.debugGridColor=="string"?[a.debugGridColor]:a.debugGridColor||r.DEFAULT_SETTINGS.debugGridColor,a.opacity&&r.console.error("[Drawer] options.opacity is no longer accepted; set the opacity on the TiledImage instead"),this.useCanvas=r.supportsCanvas&&(this.viewer?this.viewer.useCanvas:!0),this.container=r.getElement(a.element),this.canvas=r.makeNeutralElement(this.useCanvas?"canvas":"div"),this.context=this.useCanvas?this.canvas.getContext("2d"):null,this.sketchCanvas=null,this.sketchContext=null,this.element=this.container,this.container.dir="ltr",this.useCanvas){var f=this._calculateCanvasSize();this.canvas.width=f.x,this.canvas.height=f.y}this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.position="absolute",r.setElementOpacity(this.canvas,this.opacity,!0),r.setElementPointerEventsNone(this.canvas),r.setElementTouchActionNone(this.canvas),this.container.style.textAlign="left",this.container.appendChild(this.canvas),this._imageSmoothingEnabled=!0},r.Drawer.prototype={addOverlay:function(a,c,f,g){return r.console.error("drawer.addOverlay is deprecated. Use viewer.addOverlay instead."),this.viewer.addOverlay(a,c,f,g),this},updateOverlay:function(a,c,f){return r.console.error("drawer.updateOverlay is deprecated. Use viewer.updateOverlay instead."),this.viewer.updateOverlay(a,c,f),this},removeOverlay:function(a){return r.console.error("drawer.removeOverlay is deprecated. Use viewer.removeOverlay instead."),this.viewer.removeOverlay(a),this},clearOverlays:function(){return r.console.error("drawer.clearOverlays is deprecated. Use viewer.clearOverlays instead."),this.viewer.clearOverlays(),this},viewportCoordToDrawerCoord:function(a){var c=this.viewport.pixelFromPointNoRotate(a,!0);return new r.Point(c.x*r.pixelDensityRatio,c.y*r.pixelDensityRatio)},clipWithPolygons:function(a,c){if(this.useCanvas){var f=this._getContext(c);f.beginPath(),a.forEach(function(g){g.forEach(function(y,w){f[w===0?"moveTo":"lineTo"](y.x,y.y)})}),f.clip()}},setOpacity:function(a){r.console.error("drawer.setOpacity is deprecated. Use tiledImage.setOpacity instead.");for(var c=this.viewer.world,f=0;f<c.getItemCount();f++)c.getItemAt(f).setOpacity(a);return this},getOpacity:function(){r.console.error("drawer.getOpacity is deprecated. Use tiledImage.getOpacity instead.");for(var a=this.viewer.world,c=0,f=0;f<a.getItemCount();f++){var g=a.getItemAt(f).getOpacity();g>c&&(c=g)}return c},needsUpdate:function(){return r.console.error("[Drawer.needsUpdate] this function is deprecated. Use World.needsDraw instead."),this.viewer.world.needsDraw()},numTilesLoaded:function(){return r.console.error("[Drawer.numTilesLoaded] this function is deprecated. Use TileCache.numTilesLoaded instead."),this.viewer.tileCache.numTilesLoaded()},reset:function(){return r.console.error("[Drawer.reset] this function is deprecated. Use World.resetItems instead."),this.viewer.world.resetItems(),this},update:function(){return r.console.error("[Drawer.update] this function is deprecated. Use Drawer.clear and World.draw instead."),this.clear(),this.viewer.world.draw(),this},canRotate:function(){return this.useCanvas},destroy:function(){this.canvas.width=1,this.canvas.height=1,this.sketchCanvas=null,this.sketchContext=null},clear:function(){if(this.canvas.innerHTML="",this.useCanvas){var a=this._calculateCanvasSize();if((this.canvas.width!==a.x||this.canvas.height!==a.y)&&(this.canvas.width=a.x,this.canvas.height=a.y,this._updateImageSmoothingEnabled(this.context),this.sketchCanvas!==null)){var c=this._calculateSketchCanvasSize();this.sketchCanvas.width=c.x,this.sketchCanvas.height=c.y,this._updateImageSmoothingEnabled(this.sketchContext)}this._clear()}},_clear:function(a,c){if(this.useCanvas){var f=this._getContext(a);if(c)f.clearRect(c.x,c.y,c.width,c.height);else{var g=f.canvas;f.clearRect(0,0,g.width,g.height)}}},viewportToDrawerRectangle:function(a){var c=this.viewport.pixelFromPointNoRotate(a.getTopLeft(),!0),f=this.viewport.deltaPixelsFromPointsNoRotate(a.getSize(),!0);return new r.Rect(c.x*r.pixelDensityRatio,c.y*r.pixelDensityRatio,f.x*r.pixelDensityRatio,f.y*r.pixelDensityRatio)},drawTile:function(a,c,f,g,y){if(r.console.assert(a,"[Drawer.drawTile] tile is required"),r.console.assert(c,"[Drawer.drawTile] drawingHandler is required"),this.useCanvas){var w=this._getContext(f);g=g||1,a.drawCanvas(w,c,g,y)}else a.drawHTML(this.canvas)},_getContext:function(a){var c=this.context;if(a){if(this.sketchCanvas===null){this.sketchCanvas=document.createElement("canvas");var f=this._calculateSketchCanvasSize();if(this.sketchCanvas.width=f.x,this.sketchCanvas.height=f.y,this.sketchContext=this.sketchCanvas.getContext("2d"),this.viewport.getRotation()===0){var g=this;this.viewer.addHandler("rotate",function y(){if(g.viewport.getRotation()!==0){g.viewer.removeHandler("rotate",y);var w=g._calculateSketchCanvasSize();g.sketchCanvas.width=w.x,g.sketchCanvas.height=w.y}})}this._updateImageSmoothingEnabled(this.sketchContext)}c=this.sketchContext}return c},saveContext:function(a){!this.useCanvas||this._getContext(a).save()},restoreContext:function(a){!this.useCanvas||this._getContext(a).restore()},setClip:function(a,c){if(this.useCanvas){var f=this._getContext(c);f.beginPath(),f.rect(a.x,a.y,a.width,a.height),f.clip()}},drawRectangle:function(a,c,f){if(this.useCanvas){var g=this._getContext(f);g.save(),g.fillStyle=c,g.fillRect(a.x,a.y,a.width,a.height),g.restore()}},blendSketch:function(a,c,f,g){var y=a;if(r.isPlainObject(y)||(y={opacity:a,scale:c,translate:f,compositeOperation:g}),!(!this.useCanvas||!this.sketchCanvas)){a=y.opacity,g=y.compositeOperation;var w=y.bounds;if(this.context.save(),this.context.globalAlpha=a,g&&(this.context.globalCompositeOperation=g),w)w.x<0&&(w.width+=w.x,w.x=0),w.x+w.width>this.canvas.width&&(w.width=this.canvas.width-w.x),w.y<0&&(w.height+=w.y,w.y=0),w.y+w.height>this.canvas.height&&(w.height=this.canvas.height-w.y),this.context.drawImage(this.sketchCanvas,w.x,w.y,w.width,w.height,w.x,w.y,w.width,w.height);else{c=y.scale||1,f=y.translate;var b=f instanceof r.Point?f:new r.Point(0,0),S=0,R=0;if(f){var A=this.sketchCanvas.width-this.canvas.width,H=this.sketchCanvas.height-this.canvas.height;S=Math.round(A/2),R=Math.round(H/2)}this.context.drawImage(this.sketchCanvas,b.x-S*c,b.y-R*c,(this.canvas.width+2*S)*c,(this.canvas.height+2*R)*c,-S,-R,this.canvas.width+2*S,this.canvas.height+2*R)}this.context.restore()}},drawDebugInfo:function(a,c,f,g){if(this.useCanvas){var y=this.viewer.world.getIndexOfItem(g)%this.debugGridColor.length,w=this.context;w.save(),w.lineWidth=2*r.pixelDensityRatio,w.font="small-caps bold "+13*r.pixelDensityRatio+"px arial",w.strokeStyle=this.debugGridColor[y],w.fillStyle=this.debugGridColor[y],this.viewport.degrees!==0&&this._offsetForRotation({degrees:this.viewport.degrees}),g.getRotation(!0)%360!==0&&this._offsetForRotation({degrees:g.getRotation(!0),point:g.viewport.pixelFromPointNoRotate(g._getRotationPoint(!0),!0)}),g.viewport.degrees===0&&g.getRotation(!0)%360===0&&g._drawer.viewer.viewport.getFlip()&&g._drawer._flip(),w.strokeRect(a.position.x*r.pixelDensityRatio,a.position.y*r.pixelDensityRatio,a.size.x*r.pixelDensityRatio,a.size.y*r.pixelDensityRatio);var b=(a.position.x+a.size.x/2)*r.pixelDensityRatio,S=(a.position.y+a.size.y/2)*r.pixelDensityRatio;w.translate(b,S),w.rotate(Math.PI/180*-this.viewport.degrees),w.translate(-b,-S),a.x===0&&a.y===0&&(w.fillText("Zoom: "+this.viewport.getZoom(),a.position.x*r.pixelDensityRatio,(a.position.y-30)*r.pixelDensityRatio),w.fillText("Pan: "+this.viewport.getBounds().toString(),a.position.x*r.pixelDensityRatio,(a.position.y-20)*r.pixelDensityRatio)),w.fillText("Level: "+a.level,(a.position.x+10)*r.pixelDensityRatio,(a.position.y+20)*r.pixelDensityRatio),w.fillText("Column: "+a.x,(a.position.x+10)*r.pixelDensityRatio,(a.position.y+30)*r.pixelDensityRatio),w.fillText("Row: "+a.y,(a.position.x+10)*r.pixelDensityRatio,(a.position.y+40)*r.pixelDensityRatio),w.fillText("Order: "+f+" of "+c,(a.position.x+10)*r.pixelDensityRatio,(a.position.y+50)*r.pixelDensityRatio),w.fillText("Size: "+a.size.toString(),(a.position.x+10)*r.pixelDensityRatio,(a.position.y+60)*r.pixelDensityRatio),w.fillText("Position: "+a.position.toString(),(a.position.x+10)*r.pixelDensityRatio,(a.position.y+70)*r.pixelDensityRatio),this.viewport.degrees!==0&&this._restoreRotationChanges(),g.getRotation(!0)%360!==0&&this._restoreRotationChanges(),g.viewport.degrees===0&&g.getRotation(!0)%360===0&&g._drawer.viewer.viewport.getFlip()&&g._drawer._flip(),w.restore()}},debugRect:function(a){if(this.useCanvas){var c=this.context;c.save(),c.lineWidth=2*r.pixelDensityRatio,c.strokeStyle=this.debugGridColor[0],c.fillStyle=this.debugGridColor[0],c.strokeRect(a.x*r.pixelDensityRatio,a.y*r.pixelDensityRatio,a.width*r.pixelDensityRatio,a.height*r.pixelDensityRatio),c.restore()}},setImageSmoothingEnabled:function(a){this.useCanvas&&(this._imageSmoothingEnabled=a,this._updateImageSmoothingEnabled(this.context),this.viewer.forceRedraw())},_updateImageSmoothingEnabled:function(a){a.msImageSmoothingEnabled=this._imageSmoothingEnabled,a.imageSmoothingEnabled=this._imageSmoothingEnabled},getCanvasSize:function(a){var c=this._getContext(a).canvas;return new r.Point(c.width,c.height)},getCanvasCenter:function(){return new r.Point(this.canvas.width/2,this.canvas.height/2)},_offsetForRotation:function(a){var c=a.point?a.point.times(r.pixelDensityRatio):this.getCanvasCenter(),f=this._getContext(a.useSketch);f.save(),f.translate(c.x,c.y),this.viewer.viewport.flipped?(f.rotate(Math.PI/180*-a.degrees),f.scale(-1,1)):f.rotate(Math.PI/180*a.degrees),f.translate(-c.x,-c.y)},_flip:function(a){a=a||{};var c=a.point?a.point.times(r.pixelDensityRatio):this.getCanvasCenter(),f=this._getContext(a.useSketch);f.translate(c.x,0),f.scale(-1,1),f.translate(-c.x,0)},_restoreRotationChanges:function(a){var c=this._getContext(a);c.restore()},_calculateCanvasSize:function(){var a=r.pixelDensityRatio,c=this.viewport.getContainerSize();return{x:Math.round(c.x*a),y:Math.round(c.y*a)}},_calculateSketchCanvasSize:function(){var a=this._calculateCanvasSize();if(this.viewport.getRotation()===0)return a;var c=Math.ceil(Math.sqrt(a.x*a.x+a.y*a.y));return{x:c,y:c}}}}(l),function(r){r.Viewport=function(a){var c=arguments;c.length&&c[0]instanceof r.Point&&(a={containerSize:c[0],contentSize:c[1],config:c[2]}),a.config&&(r.extend(!0,a,a.config),delete a.config),this._margins=r.extend({left:0,top:0,right:0,bottom:0},a.margins||{}),delete a.margins,r.extend(!0,this,{containerSize:null,contentSize:null,zoomPoint:null,viewer:null,springStiffness:r.DEFAULT_SETTINGS.springStiffness,animationTime:r.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:r.DEFAULT_SETTINGS.minZoomImageRatio,maxZoomPixelRatio:r.DEFAULT_SETTINGS.maxZoomPixelRatio,visibilityRatio:r.DEFAULT_SETTINGS.visibilityRatio,wrapHorizontal:r.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:r.DEFAULT_SETTINGS.wrapVertical,defaultZoomLevel:r.DEFAULT_SETTINGS.defaultZoomLevel,minZoomLevel:r.DEFAULT_SETTINGS.minZoomLevel,maxZoomLevel:r.DEFAULT_SETTINGS.maxZoomLevel,degrees:r.DEFAULT_SETTINGS.degrees,flipped:r.DEFAULT_SETTINGS.flipped,homeFillsViewer:r.DEFAULT_SETTINGS.homeFillsViewer},a),this._updateContainerInnerSize(),this.centerSpringX=new r.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.centerSpringY=new r.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.zoomSpring=new r.Spring({exponential:!0,initial:1,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,this._setContentBounds(new r.Rect(0,0,1,1),1),this.goHome(!0),this.update()},r.Viewport.prototype={resetContentSize:function(a){return r.console.assert(a,"[Viewport.resetContentSize] contentSize is required"),r.console.assert(a instanceof r.Point,"[Viewport.resetContentSize] contentSize must be an OpenSeadragon.Point"),r.console.assert(a.x>0,"[Viewport.resetContentSize] contentSize.x must be greater than 0"),r.console.assert(a.y>0,"[Viewport.resetContentSize] contentSize.y must be greater than 0"),this._setContentBounds(new r.Rect(0,0,1,a.y/a.x),a.x),this},setHomeBounds:function(a,c){r.console.error("[Viewport.setHomeBounds] this function is deprecated; The content bounds should not be set manually."),this._setContentBounds(a,c)},_setContentBounds:function(a,c){r.console.assert(a,"[Viewport._setContentBounds] bounds is required"),r.console.assert(a instanceof r.Rect,"[Viewport._setContentBounds] bounds must be an OpenSeadragon.Rect"),r.console.assert(a.width>0,"[Viewport._setContentBounds] bounds.width must be greater than 0"),r.console.assert(a.height>0,"[Viewport._setContentBounds] bounds.height must be greater than 0"),this._contentBoundsNoRotate=a.clone(),this._contentSizeNoRotate=this._contentBoundsNoRotate.getSize().times(c),this._contentBounds=a.rotate(this.degrees).getBoundingBox(),this._contentSize=this._contentBounds.getSize().times(c),this._contentAspectRatio=this._contentSize.x/this._contentSize.y,this.viewer&&this.viewer.raiseEvent("reset-size",{contentSize:this._contentSizeNoRotate.clone(),contentFactor:c,homeBounds:this._contentBoundsNoRotate.clone(),contentBounds:this._contentBounds.clone()})},getHomeZoom:function(){if(this.defaultZoomLevel)return this.defaultZoomLevel;var a=this._contentAspectRatio/this.getAspectRatio(),c;return this.homeFillsViewer?c=a>=1?a:1:c=a>=1?1:a,c/this._contentBounds.width},getHomeBounds:function(){return this.getHomeBoundsNoRotate().rotate(-this.getRotation())},getHomeBoundsNoRotate:function(){var a=this._contentBounds.getCenter(),c=1/this.getHomeZoom(),f=c/this.getAspectRatio();return new r.Rect(a.x-c/2,a.y-f/2,c,f)},goHome:function(a){return this.viewer&&this.viewer.raiseEvent("home",{immediately:a}),this.fitBounds(this.getHomeBounds(),a)},getMinZoom:function(){var a=this.getHomeZoom(),c=this.minZoomLevel?this.minZoomLevel:this.minZoomImageRatio*a;return c},getMaxZoom:function(){var a=this.maxZoomLevel;return a||(a=this._contentSize.x*this.maxZoomPixelRatio/this._containerInnerSize.x,a/=this._contentBounds.width),Math.max(a,this.getHomeZoom())},getAspectRatio:function(){return this._containerInnerSize.x/this._containerInnerSize.y},getContainerSize:function(){return new r.Point(this.containerSize.x,this.containerSize.y)},getMargins:function(){return r.extend({},this._margins)},setMargins:function(a){r.console.assert(r.type(a)==="object","[Viewport.setMargins] margins must be an object"),this._margins=r.extend({left:0,top:0,right:0,bottom:0},a),this._updateContainerInnerSize(),this.viewer&&this.viewer.forceRedraw()},getBounds:function(a){return this.getBoundsNoRotate(a).rotate(-this.getRotation())},getBoundsNoRotate:function(a){var c=this.getCenter(a),f=1/this.getZoom(a),g=f/this.getAspectRatio();return new r.Rect(c.x-f/2,c.y-g/2,f,g)},getBoundsWithMargins:function(a){return this.getBoundsNoRotateWithMargins(a).rotate(-this.getRotation(),this.getCenter(a))},getBoundsNoRotateWithMargins:function(a){var c=this.getBoundsNoRotate(a),f=this._containerInnerSize.x*this.getZoom(a);return c.x-=this._margins.left/f,c.y-=this._margins.top/f,c.width+=(this._margins.left+this._margins.right)/f,c.height+=(this._margins.top+this._margins.bottom)/f,c},getCenter:function(a){var c=new r.Point(this.centerSpringX.current.value,this.centerSpringY.current.value),f=new r.Point(this.centerSpringX.target.value,this.centerSpringY.target.value),g,y,w,b,S,R,A,H;return a?c:this.zoomPoint?(g=this.pixelFromPoint(this.zoomPoint,!0),y=this.getZoom(),w=1/y,b=w/this.getAspectRatio(),S=new r.Rect(c.x-w/2,c.y-b/2,w,b),R=this._pixelFromPoint(this.zoomPoint,S),A=R.minus(g),H=A.divide(this._containerInnerSize.x*y),f.plus(H)):f},getZoom:function(a){return a?this.zoomSpring.current.value:this.zoomSpring.target.value},_applyZoomConstraints:function(a){return Math.max(Math.min(a,this.getMaxZoom()),this.getMinZoom())},_applyBoundaryConstraints:function(a){var c=new r.Rect(a.x,a.y,a.width,a.height);if(!this.wrapHorizontal){var f=this.visibilityRatio*c.width,g=c.x+c.width,y=this._contentBoundsNoRotate.x+this._contentBoundsNoRotate.width,w=this._contentBoundsNoRotate.x-g+f,b=y-c.x-f;f>this._contentBoundsNoRotate.width?c.x+=(w+b)/2:b<0?c.x+=b:w>0&&(c.x+=w)}if(!this.wrapVertical){var S=this.visibilityRatio*c.height,R=c.y+c.height,A=this._contentBoundsNoRotate.y+this._contentBoundsNoRotate.height,H=this._contentBoundsNoRotate.y-R+S,V=A-c.y-S;S>this._contentBoundsNoRotate.height?c.y+=(H+V)/2:V<0?c.y+=V:H>0&&(c.y+=H)}return c},_raiseConstraintsEvent:function(a){this.viewer&&this.viewer.raiseEvent("constrain",{immediately:a})},applyConstraints:function(a){var c=this.getZoom(),f=this._applyZoomConstraints(c);c!==f&&this.zoomTo(f,this.zoomPoint,a);var g=this.getBoundsNoRotate(),y=this._applyBoundaryConstraints(g);return this._raiseConstraintsEvent(a),(g.x!==y.x||g.y!==y.y||a)&&this.fitBounds(y.rotate(-this.getRotation()),a),this},ensureVisible:function(a){return this.applyConstraints(a)},_fitBounds:function(a,c){c=c||{};var f=c.immediately||!1,g=c.constraints||!1,y=this.getAspectRatio(),w=a.getCenter(),b=new r.Rect(a.x,a.y,a.width,a.height,a.degrees+this.getRotation()).getBoundingBox();b.getAspectRatio()>=y?b.height=b.width/y:b.width=b.height*y,b.x=w.x-b.width/2,b.y=w.y-b.height/2;var S=1/b.width;if(g){var R=b.getAspectRatio(),A=this._applyZoomConstraints(S);S!==A&&(S=A,b.width=1/S,b.x=w.x-b.width/2,b.height=b.width/R,b.y=w.y-b.height/2),b=this._applyBoundaryConstraints(b),w=b.getCenter(),this._raiseConstraintsEvent(f)}if(f)return this.panTo(w,!0),this.zoomTo(S,null,!0);this.panTo(this.getCenter(!0),!0),this.zoomTo(this.getZoom(!0),null,!0);var H=this.getBounds(),V=this.getZoom();if(V===0||Math.abs(S/V-1)<1e-8)return this.zoomTo(S,!0),this.panTo(w,f);b=b.rotate(-this.getRotation());var oe=b.getTopLeft().times(S).minus(H.getTopLeft().times(V)).divide(S-V);return this.zoomTo(S,oe,f)},fitBounds:function(a,c){return this._fitBounds(a,{immediately:c,constraints:!1})},fitBoundsWithConstraints:function(a,c){return this._fitBounds(a,{immediately:c,constraints:!0})},fitVertically:function(a){var c=new r.Rect(this._contentBounds.x+this._contentBounds.width/2,this._contentBounds.y,0,this._contentBounds.height);return this.fitBounds(c,a)},fitHorizontally:function(a){var c=new r.Rect(this._contentBounds.x,this._contentBounds.y+this._contentBounds.height/2,this._contentBounds.width,0);return this.fitBounds(c,a)},getConstrainedBounds:function(a){var c,f;return c=this.getBounds(a),f=this._applyBoundaryConstraints(c),f},panBy:function(a,c){var f=new r.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return this.panTo(f.plus(a),c)},panTo:function(a,c){return c?(this.centerSpringX.resetTo(a.x),this.centerSpringY.resetTo(a.y)):(this.centerSpringX.springTo(a.x),this.centerSpringY.springTo(a.y)),this.viewer&&this.viewer.raiseEvent("pan",{center:a,immediately:c}),this},zoomBy:function(a,c,f){return this.zoomTo(this.zoomSpring.target.value*a,c,f)},zoomTo:function(a,c,f){var g=this;return this.zoomPoint=c instanceof r.Point&&!isNaN(c.x)&&!isNaN(c.y)?c:null,f?this._adjustCenterSpringsForZoomPoint(function(){g.zoomSpring.resetTo(a)}):this.zoomSpring.springTo(a),this.viewer&&this.viewer.raiseEvent("zoom",{zoom:a,refPoint:c,immediately:f}),this},setRotation:function(a){return!this.viewer||!this.viewer.drawer.canRotate()?this:(this.degrees=r.positiveModulo(a,360),this._setContentBounds(this.viewer.world.getHomeBounds(),this.viewer.world.getContentFactor()),this.viewer.forceRedraw(),this.viewer.raiseEvent("rotate",{degrees:a}),this)},getRotation:function(){return this.degrees},resize:function(a,c){var f=this.getBoundsNoRotate(),g=f,y;return this.containerSize.x=a.x,this.containerSize.y=a.y,this._updateContainerInnerSize(),c&&(y=a.x/this.containerSize.x,g.width=f.width*y,g.height=g.width/this.getAspectRatio()),this.viewer&&this.viewer.raiseEvent("resize",{newContainerSize:a,maintain:c}),this.fitBounds(g,!0)},_updateContainerInnerSize:function(){this._containerInnerSize=new r.Point(Math.max(1,this.containerSize.x-(this._margins.left+this._margins.right)),Math.max(1,this.containerSize.y-(this._margins.top+this._margins.bottom)))},update:function(){var a=this;this._adjustCenterSpringsForZoomPoint(function(){a.zoomSpring.update()}),this.centerSpringX.update(),this.centerSpringY.update();var c=this.centerSpringX.current.value!==this._oldCenterX||this.centerSpringY.current.value!==this._oldCenterY||this.zoomSpring.current.value!==this._oldZoom;return this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,c},_adjustCenterSpringsForZoomPoint:function(a){if(this.zoomPoint){var c=this.pixelFromPoint(this.zoomPoint,!0);a();var f=this.pixelFromPoint(this.zoomPoint,!0),g=f.minus(c),y=this.deltaPointsFromPixels(g,!0);this.centerSpringX.shiftBy(y.x),this.centerSpringY.shiftBy(y.y),this.zoomSpring.isAtTargetValue()&&(this.zoomPoint=null)}else a()},deltaPixelsFromPointsNoRotate:function(a,c){return a.times(this._containerInnerSize.x*this.getZoom(c))},deltaPixelsFromPoints:function(a,c){return this.deltaPixelsFromPointsNoRotate(a.rotate(this.getRotation()),c)},deltaPointsFromPixelsNoRotate:function(a,c){return a.divide(this._containerInnerSize.x*this.getZoom(c))},deltaPointsFromPixels:function(a,c){return this.deltaPointsFromPixelsNoRotate(a,c).rotate(-this.getRotation())},pixelFromPointNoRotate:function(a,c){return this._pixelFromPointNoRotate(a,this.getBoundsNoRotate(c))},pixelFromPoint:function(a,c){return this._pixelFromPoint(a,this.getBoundsNoRotate(c))},_pixelFromPointNoRotate:function(a,c){return a.minus(c.getTopLeft()).times(this._containerInnerSize.x/c.width).plus(new r.Point(this._margins.left,this._margins.top))},_pixelFromPoint:function(a,c){return this._pixelFromPointNoRotate(a.rotate(this.getRotation(),this.getCenter(!0)),c)},pointFromPixelNoRotate:function(a,c){var f=this.getBoundsNoRotate(c);return a.minus(new r.Point(this._margins.left,this._margins.top)).divide(this._containerInnerSize.x/f.width).plus(f.getTopLeft())},pointFromPixel:function(a,c){return this.pointFromPixelNoRotate(a,c).rotate(-this.getRotation(),this.getCenter(!0))},_viewportToImageDelta:function(a,c){var f=this._contentBoundsNoRotate.width;return new r.Point(a*this._contentSizeNoRotate.x/f,c*this._contentSizeNoRotate.x/f)},viewportToImageCoordinates:function(a,c){if(a instanceof r.Point)return this.viewportToImageCoordinates(a.x,a.y);if(this.viewer){var f=this.viewer.world.getItemCount();if(f>1)r.console.error("[Viewport.viewportToImageCoordinates] is not accurate with multi-image; use TiledImage.viewportToImageCoordinates instead.");else if(f===1){var g=this.viewer.world.getItemAt(0);return g.viewportToImageCoordinates(a,c,!0)}}return this._viewportToImageDelta(a-this._contentBoundsNoRotate.x,c-this._contentBoundsNoRotate.y)},_imageToViewportDelta:function(a,c){var f=this._contentBoundsNoRotate.width;return new r.Point(a/this._contentSizeNoRotate.x*f,c/this._contentSizeNoRotate.x*f)},imageToViewportCoordinates:function(a,c){if(a instanceof r.Point)return this.imageToViewportCoordinates(a.x,a.y);if(this.viewer){var f=this.viewer.world.getItemCount();if(f>1)r.console.error("[Viewport.imageToViewportCoordinates] is not accurate with multi-image; use TiledImage.imageToViewportCoordinates instead.");else if(f===1){var g=this.viewer.world.getItemAt(0);return g.imageToViewportCoordinates(a,c,!0)}}var y=this._imageToViewportDelta(a,c);return y.x+=this._contentBoundsNoRotate.x,y.y+=this._contentBoundsNoRotate.y,y},imageToViewportRectangle:function(a,c,f,g){var y=a;if(y instanceof r.Rect||(y=new r.Rect(a,c,f,g)),this.viewer){var w=this.viewer.world.getItemCount();if(w>1)r.console.error("[Viewport.imageToViewportRectangle] is not accurate with multi-image; use TiledImage.imageToViewportRectangle instead.");else if(w===1){var b=this.viewer.world.getItemAt(0);return b.imageToViewportRectangle(a,c,f,g,!0)}}var S=this.imageToViewportCoordinates(y.x,y.y),R=this._imageToViewportDelta(y.width,y.height);return new r.Rect(S.x,S.y,R.x,R.y,y.degrees)},viewportToImageRectangle:function(a,c,f,g){var y=a;if(y instanceof r.Rect||(y=new r.Rect(a,c,f,g)),this.viewer){var w=this.viewer.world.getItemCount();if(w>1)r.console.error("[Viewport.viewportToImageRectangle] is not accurate with multi-image; use TiledImage.viewportToImageRectangle instead.");else if(w===1){var b=this.viewer.world.getItemAt(0);return b.viewportToImageRectangle(a,c,f,g,!0)}}var S=this.viewportToImageCoordinates(y.x,y.y),R=this._viewportToImageDelta(y.width,y.height);return new r.Rect(S.x,S.y,R.x,R.y,y.degrees)},viewerElementToImageCoordinates:function(a){var c=this.pointFromPixel(a,!0);return this.viewportToImageCoordinates(c)},imageToViewerElementCoordinates:function(a){var c=this.imageToViewportCoordinates(a);return this.pixelFromPoint(c,!0)},windowToImageCoordinates:function(a){r.console.assert(this.viewer,"[Viewport.windowToImageCoordinates] the viewport must have a viewer.");var c=a.minus(r.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(c)},imageToWindowCoordinates:function(a){r.console.assert(this.viewer,"[Viewport.imageToWindowCoordinates] the viewport must have a viewer.");var c=this.imageToViewerElementCoordinates(a);return c.plus(r.getElementPosition(this.viewer.element))},viewerElementToViewportCoordinates:function(a){return this.pointFromPixel(a,!0)},viewportToViewerElementCoordinates:function(a){return this.pixelFromPoint(a,!0)},viewerElementToViewportRectangle:function(a){return r.Rect.fromSummits(this.pointFromPixel(a.getTopLeft(),!0),this.pointFromPixel(a.getTopRight(),!0),this.pointFromPixel(a.getBottomLeft(),!0))},viewportToViewerElementRectangle:function(a){return r.Rect.fromSummits(this.pixelFromPoint(a.getTopLeft(),!0),this.pixelFromPoint(a.getTopRight(),!0),this.pixelFromPoint(a.getBottomLeft(),!0))},windowToViewportCoordinates:function(a){r.console.assert(this.viewer,"[Viewport.windowToViewportCoordinates] the viewport must have a viewer.");var c=a.minus(r.getElementPosition(this.viewer.element));return this.viewerElementToViewportCoordinates(c)},viewportToWindowCoordinates:function(a){r.console.assert(this.viewer,"[Viewport.viewportToWindowCoordinates] the viewport must have a viewer.");var c=this.viewportToViewerElementCoordinates(a);return c.plus(r.getElementPosition(this.viewer.element))},viewportToImageZoom:function(a){if(this.viewer){var c=this.viewer.world.getItemCount();if(c>1)r.console.error("[Viewport.viewportToImageZoom] is not accurate with multi-image.");else if(c===1){var f=this.viewer.world.getItemAt(0);return f.viewportToImageZoom(a)}}var g=this._contentSizeNoRotate.x,y=this._containerInnerSize.x,w=this._contentBoundsNoRotate.width,b=y/g*w;return a*b},imageToViewportZoom:function(a){if(this.viewer){var c=this.viewer.world.getItemCount();if(c>1)r.console.error("[Viewport.imageToViewportZoom] is not accurate with multi-image.");else if(c===1){var f=this.viewer.world.getItemAt(0);return f.imageToViewportZoom(a)}}var g=this._contentSizeNoRotate.x,y=this._containerInnerSize.x,w=this._contentBoundsNoRotate.width,b=g/y/w;return a*b},toggleFlip:function(){return this.setFlip(!this.getFlip()),this},getFlip:function(){return this.flipped},setFlip:function(a){return this.flipped===a?this:(this.flipped=a,this.viewer.navigator&&this.viewer.navigator.setFlip(this.getFlip()),this.viewer.forceRedraw(),this.viewer.raiseEvent("flip",{flipped:a}),this)}}}(l),function(r){r.TiledImage=function(M){var re=this;r.console.assert(M.tileCache,"[TiledImage] options.tileCache is required"),r.console.assert(M.drawer,"[TiledImage] options.drawer is required"),r.console.assert(M.viewer,"[TiledImage] options.viewer is required"),r.console.assert(M.imageLoader,"[TiledImage] options.imageLoader is required"),r.console.assert(M.source,"[TiledImage] options.source is required"),r.console.assert(!M.clip||M.clip instanceof r.Rect,"[TiledImage] options.clip must be an OpenSeadragon.Rect if present"),r.EventSource.call(this),this._tileCache=M.tileCache,delete M.tileCache,this._drawer=M.drawer,delete M.drawer,this._imageLoader=M.imageLoader,delete M.imageLoader,M.clip instanceof r.Rect&&(this._clip=M.clip.clone()),delete M.clip;var ge=M.x||0;delete M.x;var pe=M.y||0;delete M.y,this.normHeight=M.source.dimensions.y/M.source.dimensions.x,this.contentAspectX=M.source.dimensions.x/M.source.dimensions.y;var Ee=1;M.width?(Ee=M.width,delete M.width,M.height&&(r.console.error("specifying both width and height to a tiledImage is not supported"),delete M.height)):M.height&&(Ee=M.height/this.normHeight,delete M.height);var Ce=M.fitBounds;delete M.fitBounds;var Ze=M.fitBoundsPlacement||l.Placement.CENTER;delete M.fitBoundsPlacement;var Ke=M.degrees||0;delete M.degrees,r.extend(!0,this,{viewer:null,tilesMatrix:{},coverage:{},loadingCoverage:{},lastDrawn:[],lastResetTime:0,_midDraw:!1,_needsDraw:!0,_hasOpaqueTile:!1,_tilesLoading:0,springStiffness:r.DEFAULT_SETTINGS.springStiffness,animationTime:r.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:r.DEFAULT_SETTINGS.minZoomImageRatio,wrapHorizontal:r.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:r.DEFAULT_SETTINGS.wrapVertical,immediateRender:r.DEFAULT_SETTINGS.immediateRender,blendTime:r.DEFAULT_SETTINGS.blendTime,alwaysBlend:r.DEFAULT_SETTINGS.alwaysBlend,minPixelRatio:r.DEFAULT_SETTINGS.minPixelRatio,smoothTileEdgesMinZoom:r.DEFAULT_SETTINGS.smoothTileEdgesMinZoom,iOSDevice:r.DEFAULT_SETTINGS.iOSDevice,debugMode:r.DEFAULT_SETTINGS.debugMode,crossOriginPolicy:r.DEFAULT_SETTINGS.crossOriginPolicy,ajaxWithCredentials:r.DEFAULT_SETTINGS.ajaxWithCredentials,placeholderFillStyle:r.DEFAULT_SETTINGS.placeholderFillStyle,opacity:r.DEFAULT_SETTINGS.opacity,preload:r.DEFAULT_SETTINGS.preload,compositeOperation:r.DEFAULT_SETTINGS.compositeOperation},M),this._preload=this.preload,delete this.preload,this._fullyLoaded=!1,this._xSpring=new r.Spring({initial:ge,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._ySpring=new r.Spring({initial:pe,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._scaleSpring=new r.Spring({initial:Ee,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._degreesSpring=new r.Spring({initial:Ke,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._updateForScale(),Ce&&this.fitBounds(Ce,Ze,!0),this._drawingHandler=function(ut){re.viewer.raiseEvent("tile-drawing",r.extend({tiledImage:re},ut))}},r.extend(r.TiledImage.prototype,r.EventSource.prototype,{needsDraw:function(){return this._needsDraw},getFullyLoaded:function(){return this._fullyLoaded},_setFullyLoaded:function(M){M!==this._fullyLoaded&&(this._fullyLoaded=M,this.raiseEvent("fully-loaded-change",{fullyLoaded:this._fullyLoaded}))},reset:function(){this._tileCache.clearTilesFor(this),this.lastResetTime=r.now(),this._needsDraw=!0},update:function(){var M=this._xSpring.update(),re=this._ySpring.update(),ge=this._scaleSpring.update(),pe=this._degreesSpring.update();return M||re||ge||pe?(this._updateForScale(),this._needsDraw=!0,!0):!1},draw:function(){this.opacity!==0||this._preload?(this._midDraw=!0,this._updateViewport(),this._midDraw=!1):this._needsDraw=!1},destroy:function(){this.reset(),this.source.destroy&&this.source.destroy()},getBounds:function(M){return this.getBoundsNoRotate(M).rotate(this.getRotation(M),this._getRotationPoint(M))},getBoundsNoRotate:function(M){return M?new r.Rect(this._xSpring.current.value,this._ySpring.current.value,this._worldWidthCurrent,this._worldHeightCurrent):new r.Rect(this._xSpring.target.value,this._ySpring.target.value,this._worldWidthTarget,this._worldHeightTarget)},getWorldBounds:function(){return r.console.error("[TiledImage.getWorldBounds] is deprecated; use TiledImage.getBounds instead"),this.getBounds()},getClippedBounds:function(M){var re=this.getBoundsNoRotate(M);if(this._clip){var ge=M?this._worldWidthCurrent:this._worldWidthTarget,pe=ge/this.source.dimensions.x,Ee=this._clip.times(pe);re=new r.Rect(re.x+Ee.x,re.y+Ee.y,Ee.width,Ee.height)}return re.rotate(this.getRotation(M),this._getRotationPoint(M))},getTileBounds:function(M,re,ge){var pe=this.source.getNumTiles(M),Ee=(pe.x+re%pe.x)%pe.x,Ce=(pe.y+ge%pe.y)%pe.y,Ze=this.source.getTileBounds(M,Ee,Ce);return this.getFlip()&&(Ze.x=1-Ze.x-Ze.width),Ze.x+=(re-Ee)/pe.x,Ze.y+=this._worldHeightCurrent/this._worldWidthCurrent*((ge-Ce)/pe.y),Ze},getContentSize:function(){return new r.Point(this.source.dimensions.x,this.source.dimensions.y)},getSizeInWindowCoordinates:function(){var M=this.imageToWindowCoordinates(new r.Point(0,0)),re=this.imageToWindowCoordinates(this.getContentSize());return new r.Point(re.x-M.x,re.y-M.y)},_viewportToImageDelta:function(M,re,ge){var pe=ge?this._scaleSpring.current.value:this._scaleSpring.target.value;return new r.Point(M*(this.source.dimensions.x/pe),re*(this.source.dimensions.y*this.contentAspectX/pe))},viewportToImageCoordinates:function(M,re,ge){var pe;return M instanceof r.Point?(ge=re,pe=M):pe=new r.Point(M,re),pe=pe.rotate(-this.getRotation(ge),this._getRotationPoint(ge)),ge?this._viewportToImageDelta(pe.x-this._xSpring.current.value,pe.y-this._ySpring.current.value):this._viewportToImageDelta(pe.x-this._xSpring.target.value,pe.y-this._ySpring.target.value)},_imageToViewportDelta:function(M,re,ge){var pe=ge?this._scaleSpring.current.value:this._scaleSpring.target.value;return new r.Point(M/this.source.dimensions.x*pe,re/this.source.dimensions.y/this.contentAspectX*pe)},imageToViewportCoordinates:function(M,re,ge){M instanceof r.Point&&(ge=re,re=M.y,M=M.x);var pe=this._imageToViewportDelta(M,re);return ge?(pe.x+=this._xSpring.current.value,pe.y+=this._ySpring.current.value):(pe.x+=this._xSpring.target.value,pe.y+=this._ySpring.target.value),pe.rotate(this.getRotation(ge),this._getRotationPoint(ge))},imageToViewportRectangle:function(M,re,ge,pe,Ee){var Ce=M;Ce instanceof r.Rect?Ee=re:Ce=new r.Rect(M,re,ge,pe);var Ze=this.imageToViewportCoordinates(Ce.getTopLeft(),Ee),Ke=this._imageToViewportDelta(Ce.width,Ce.height,Ee);return new r.Rect(Ze.x,Ze.y,Ke.x,Ke.y,Ce.degrees+this.getRotation(Ee))},viewportToImageRectangle:function(M,re,ge,pe,Ee){var Ce=M;M instanceof r.Rect?Ee=re:Ce=new r.Rect(M,re,ge,pe);var Ze=this.viewportToImageCoordinates(Ce.getTopLeft(),Ee),Ke=this._viewportToImageDelta(Ce.width,Ce.height,Ee);return new r.Rect(Ze.x,Ze.y,Ke.x,Ke.y,Ce.degrees-this.getRotation(Ee))},viewerElementToImageCoordinates:function(M){var re=this.viewport.pointFromPixel(M,!0);return this.viewportToImageCoordinates(re)},imageToViewerElementCoordinates:function(M){var re=this.imageToViewportCoordinates(M);return this.viewport.pixelFromPoint(re,!0)},windowToImageCoordinates:function(M){var re=M.minus(l.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(re)},imageToWindowCoordinates:function(M){var re=this.imageToViewerElementCoordinates(M);return re.plus(l.getElementPosition(this.viewer.element))},_viewportToTiledImageRectangle:function(M){var re=this._scaleSpring.current.value;return M=M.rotate(-this.getRotation(!0),this._getRotationPoint(!0)),new r.Rect((M.x-this._xSpring.current.value)/re,(M.y-this._ySpring.current.value)/re,M.width/re,M.height/re,M.degrees)},viewportToImageZoom:function(M){var re=this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x;return re*M},imageToViewportZoom:function(M){var re=this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x;return M/re},setPosition:function(M,re){var ge=this._xSpring.target.value===M.x&&this._ySpring.target.value===M.y;if(re){if(ge&&this._xSpring.current.value===M.x&&this._ySpring.current.value===M.y)return;this._xSpring.resetTo(M.x),this._ySpring.resetTo(M.y),this._needsDraw=!0}else{if(ge)return;this._xSpring.springTo(M.x),this._ySpring.springTo(M.y),this._needsDraw=!0}ge||this._raiseBoundsChange()},setWidth:function(M,re){this._setScale(M,re)},setHeight:function(M,re){this._setScale(M/this.normHeight,re)},setCroppingPolygons:function(M){var re=function(pe){return pe instanceof r.Point||typeof pe.x=="number"&&typeof pe.y=="number"},ge=function(pe){return pe.map(function(Ee){try{if(re(Ee))return{x:Ee.x,y:Ee.y};throw new Error}catch{throw new Error("A Provided cropping polygon point is not supported")}})};try{if(!r.isArray(M))throw new Error("Provided cropping polygon is not an array");this._croppingPolygons=M.map(function(pe){return ge(pe)})}catch(pe){r.console.error("[TiledImage.setCroppingPolygons] Cropping polygon format not supported"),r.console.error(pe),this._croppingPolygons=null}},resetCroppingPolygons:function(){this._croppingPolygons=null},fitBounds:function(M,re,ge){re=re||r.Placement.CENTER;var pe=r.Placement.properties[re],Ee=this.contentAspectX,Ce=0,Ze=0,Ke=1,ut=1;if(this._clip&&(Ee=this._clip.getAspectRatio(),Ke=this._clip.width/this.source.dimensions.x,ut=this._clip.height/this.source.dimensions.y,M.getAspectRatio()>Ee?(Ce=this._clip.x/this._clip.height*M.height,Ze=this._clip.y/this._clip.height*M.height):(Ce=this._clip.x/this._clip.width*M.width,Ze=this._clip.y/this._clip.width*M.width)),M.getAspectRatio()>Ee){var pt=M.height/ut,ct=0;pe.isHorizontallyCentered?ct=(M.width-M.height*Ee)/2:pe.isRight&&(ct=M.width-M.height*Ee),this.setPosition(new r.Point(M.x-Ce+ct,M.y-Ze),ge),this.setHeight(pt,ge)}else{var _t=M.width/Ke,Ct=0;pe.isVerticallyCentered?Ct=(M.height-M.width/Ee)/2:pe.isBottom&&(Ct=M.height-M.width/Ee),this.setPosition(new r.Point(M.x-Ce,M.y-Ze+Ct),ge),this.setWidth(_t,ge)}},getClip:function(){return this._clip?this._clip.clone():null},setClip:function(M){r.console.assert(!M||M instanceof r.Rect,"[TiledImage.setClip] newClip must be an OpenSeadragon.Rect or null"),M instanceof r.Rect?this._clip=M.clone():this._clip=null,this._needsDraw=!0,this.raiseEvent("clip-change")},getFlip:function(){return!!this.flipped},setFlip:function(M){this.flipped=!!M,this._needsDraw=!0,this._raiseBoundsChange()},getOpacity:function(){return this.opacity},setOpacity:function(M){M!==this.opacity&&(this.opacity=M,this._needsDraw=!0,this.raiseEvent("opacity-change",{opacity:this.opacity}))},getPreload:function(){return this._preload},setPreload:function(M){this._preload=!!M,this._needsDraw=!0},getRotation:function(M){return M?this._degreesSpring.current.value:this._degreesSpring.target.value},setRotation:function(M,re){this._degreesSpring.target.value===M&&this._degreesSpring.isAtTargetValue()||(re?this._degreesSpring.resetTo(M):this._degreesSpring.springTo(M),this._needsDraw=!0,this._raiseBoundsChange())},_getRotationPoint:function(M){return this.getBoundsNoRotate(M).getCenter()},getCompositeOperation:function(){return this.compositeOperation},setCompositeOperation:function(M){M!==this.compositeOperation&&(this.compositeOperation=M,this._needsDraw=!0,this.raiseEvent("composite-operation-change",{compositeOperation:this.compositeOperation}))},_setScale:function(M,re){var ge=this._scaleSpring.target.value===M;if(re){if(ge&&this._scaleSpring.current.value===M)return;this._scaleSpring.resetTo(M),this._updateForScale(),this._needsDraw=!0}else{if(ge)return;this._scaleSpring.springTo(M),this._updateForScale(),this._needsDraw=!0}ge||this._raiseBoundsChange()},_updateForScale:function(){this._worldWidthTarget=this._scaleSpring.target.value,this._worldHeightTarget=this.normHeight*this._scaleSpring.target.value,this._worldWidthCurrent=this._scaleSpring.current.value,this._worldHeightCurrent=this.normHeight*this._scaleSpring.current.value},_raiseBoundsChange:function(){this.raiseEvent("bounds-change")},_isBottomItem:function(){return this.viewer.world.getItemAt(0)===this},_getLevelsInterval:function(){var M=Math.max(this.source.minLevel,Math.floor(Math.log(this.minZoomImageRatio)/Math.log(2))),re=this.viewport.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(0),!0).x*this._scaleSpring.current.value,ge=Math.min(Math.abs(this.source.maxLevel),Math.abs(Math.floor(Math.log(re/this.minPixelRatio)/Math.log(2))));return ge=Math.max(ge,this.source.minLevel||0),M=Math.min(M,ge),{lowestLevel:M,highestLevel:ge}},_updateViewport:function(){for(this._needsDraw=!1,this._tilesLoading=0,this.loadingCoverage={};this.lastDrawn.length>0;){var M=this.lastDrawn.pop();M.beingDrawn=!1}var re=this.viewport,ge=this._viewportToTiledImageRectangle(re.getBoundsWithMargins(!0));if(!this.wrapHorizontal&&!this.wrapVertical){var pe=this._viewportToTiledImageRectangle(this.getClippedBounds(!0));if(ge=ge.intersection(pe),ge===null)return}for(var Ee=this._getLevelsInterval(),Ce=Ee.lowestLevel,Ze=Ee.highestLevel,Ke=null,ut=!1,pt=r.now(),ct=Ze;ct>=Ce;ct--){var _t=!1,Ct=re.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(ct),!0).x*this._scaleSpring.current.value;if(ct===Ce||!ut&&Ct>=this.minPixelRatio)_t=!0,ut=!0;else if(!ut)continue;var Wt=re.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(ct),!1).x*this._scaleSpring.current.value,Ut=re.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(Math.max(this.source.getClosestLevel(),0)),!1).x*this._scaleSpring.current.value,Zt=this.immediateRender?1:Ut,ln=Math.min(1,(Ct-.5)/.5),bn=Zt/Math.abs(Zt-Wt);if(Ke=a(this,ut,_t,ct,ln,bn,ge,pt,Ke),R(this.coverage,ct))break}ne(this,this.lastDrawn),Ke&&!Ke.context2D?(g(this,Ke,pt),this._needsDraw=!0,this._setFullyLoaded(!1)):this._setFullyLoaded(this._tilesLoading===0)},_getCornerTiles:function(M,re,ge){var pe,Ee;this.wrapHorizontal?(pe=r.positiveModulo(re.x,1),Ee=r.positiveModulo(ge.x,1)):(pe=Math.max(0,re.x),Ee=Math.min(1,ge.x));var Ce,Ze,Ke=1/this.source.aspectRatio;this.wrapVertical?(Ce=r.positiveModulo(re.y,Ke),Ze=r.positiveModulo(ge.y,Ke)):(Ce=Math.max(0,re.y),Ze=Math.min(Ke,ge.y));var ut=this.source.getTileAtPoint(M,new r.Point(pe,Ce)),pt=this.source.getTileAtPoint(M,new r.Point(Ee,Ze)),ct=this.source.getNumTiles(M);return this.wrapHorizontal&&(ut.x+=ct.x*Math.floor(re.x),pt.x+=ct.x*Math.floor(ge.x)),this.wrapVertical&&(ut.y+=ct.y*Math.floor(re.y/Ke),pt.y+=ct.y*Math.floor(ge.y/Ke)),{topLeft:ut,bottomRight:pt}}});function a(M,re,ge,pe,Ee,Ce,Ze,Ke,ut){var pt=Ze.getBoundingBox().getTopLeft(),ct=Ze.getBoundingBox().getBottomRight();M.viewer&&M.viewer.raiseEvent("update-level",{tiledImage:M,havedrawn:re,level:pe,opacity:Ee,visibility:Ce,drawArea:Ze,topleft:pt,bottomright:ct,currenttime:Ke,best:ut}),V(M.coverage,pe),V(M.loadingCoverage,pe);var _t=M._getCornerTiles(pe,pt,ct),Ct=_t.topLeft,Wt=_t.bottomRight,Ut=M.source.getNumTiles(pe),Zt=M.viewport.pixelFromPoint(M.viewport.getCenter());M.getFlip()&&(Wt.x+=1,M.wrapHorizontal||(Wt.x=Math.min(Wt.x,Ut.x-1)));for(var ln=Ct.x;ln<=Wt.x;ln++)for(var bn=Ct.y;bn<=Wt.y;bn++){var dt;if(M.getFlip()){var Jt=(Ut.x+ln%Ut.x)%Ut.x;dt=ln+Ut.x-Jt-Jt-1}else dt=ln;Ze.intersection(M.getTileBounds(pe,dt,bn))!==null&&(ut=c(M,ge,re,dt,bn,pe,Ee,Ce,Zt,Ut,Ke,ut))}return ut}function c(M,re,ge,pe,Ee,Ce,Ze,Ke,ut,pt,ct,_t){var Ct=f(pe,Ee,Ce,M,M.source,M.tilesMatrix,ct,pt,M._worldWidthCurrent,M._worldHeightCurrent),Wt=ge;M.viewer&&M.viewer.raiseEvent("update-tile",{tiledImage:M,tile:Ct}),H(M.coverage,Ce,pe,Ee,!1);var Ut=Ct.loaded||Ct.loading||A(M.loadingCoverage,Ce,pe,Ee);if(H(M.loadingCoverage,Ce,pe,Ee,Ut),!Ct.exists||(re&&!Wt&&(A(M.coverage,Ce,pe,Ee)?H(M.coverage,Ce,pe,Ee,!0):Wt=!0),!Wt))return _t;if(b(Ct,M.source.tileOverlap,M.viewport,ut,Ke,M),!Ct.loaded)if(Ct.context2D)w(M,Ct);else{var Zt=M._tileCache.getImageRecord(Ct.cacheKey);if(Zt){var ln=Zt.getImage();w(M,Ct,ln)}}if(Ct.loaded){var bn=S(M,Ct,pe,Ee,Ce,Ze,ct);bn&&(M._needsDraw=!0)}else Ct.loading?M._tilesLoading++:Ut||(_t=oe(_t,Ct));return _t}function f(M,re,ge,pe,Ee,Ce,Ze,Ke,ut,pt){var ct,_t,Ct,Wt,Ut,Zt,ln,bn,dt;return Ce[ge]||(Ce[ge]={}),Ce[ge][M]||(Ce[ge][M]={}),(!Ce[ge][M][re]||!Ce[ge][M][re].flipped!=!pe.flipped)&&(ct=(Ke.x+M%Ke.x)%Ke.x,_t=(Ke.y+re%Ke.y)%Ke.y,Ct=pe.getTileBounds(ge,M,re),Wt=Ee.getTileBounds(ge,ct,_t,!0),Ut=Ee.tileExists(ge,ct,_t),Zt=Ee.getTileUrl(ge,ct,_t),pe.loadTilesWithAjax?(ln=Ee.getTileAjaxHeaders(ge,ct,_t),r.isPlainObject(pe.ajaxHeaders)&&(ln=r.extend({},pe.ajaxHeaders,ln))):ln=null,bn=Ee.getContext2D?Ee.getContext2D(ge,ct,_t):void 0,dt=new r.Tile(ge,M,re,Ct,Ut,Zt,bn,pe.loadTilesWithAjax,ln,Wt),pe.getFlip()?ct===0&&(dt.isRightMost=!0):ct===Ke.x-1&&(dt.isRightMost=!0),_t===Ke.y-1&&(dt.isBottomMost=!0),dt.flipped=pe.flipped,Ce[ge][M][re]=dt),dt=Ce[ge][M][re],dt.lastTouchTime=Ze,dt}function g(M,re,ge){re.loading=!0,M._imageLoader.addJob({src:re.url,loadWithAjax:re.loadWithAjax,ajaxHeaders:re.ajaxHeaders,crossOriginPolicy:M.crossOriginPolicy,ajaxWithCredentials:M.ajaxWithCredentials,callback:function(pe,Ee,Ce){y(M,re,ge,pe,Ee,Ce)},abort:function(){re.loading=!1}})}function y(M,re,ge,pe,Ee,Ce){if(!pe){r.console.log("Tile %s failed to load: %s - error: %s",re,re.url,Ee),M.viewer.raiseEvent("tile-load-failed",{tile:re,tiledImage:M,time:ge,message:Ee,tileRequest:Ce}),re.loading=!1,re.exists=!1;return}if(ge<M.lastResetTime){r.console.log("Ignoring tile %s loaded before reset: %s",re,re.url),re.loading=!1;return}var Ze=function(){var Ke=M.source.getClosestLevel();w(M,re,pe,Ke,Ce)};M._midDraw?window.setTimeout(Ze,1):Ze()}function w(M,re,ge,pe,Ee){var Ce=0;function Ze(){return Ce++,Ke}function Ke(){Ce--,Ce===0&&(re.loading=!1,re.loaded=!0,re.context2D||M._tileCache.cacheTile({image:ge,tile:re,cutoff:pe,tiledImage:M}),M._needsDraw=!0)}M.viewer.raiseEvent("tile-loaded",{tile:re,tiledImage:M,tileRequest:Ee,image:ge,getCompletionCallback:Ze}),Ze()()}function b(M,re,ge,pe,Ee,Ce){var Ze=M.bounds.getTopLeft();Ze.x*=Ce._scaleSpring.current.value,Ze.y*=Ce._scaleSpring.current.value,Ze.x+=Ce._xSpring.current.value,Ze.y+=Ce._ySpring.current.value;var Ke=M.bounds.getSize();Ke.x*=Ce._scaleSpring.current.value,Ke.y*=Ce._scaleSpring.current.value;var ut=ge.pixelFromPointNoRotate(Ze,!0),pt=ge.pixelFromPointNoRotate(Ze,!1),ct=ge.deltaPixelsFromPointsNoRotate(Ke,!0),_t=ge.deltaPixelsFromPointsNoRotate(Ke,!1),Ct=pt.plus(_t.divide(2)),Wt=pe.squaredDistanceTo(Ct);re||(ct=ct.plus(new r.Point(1,1))),M.isRightMost&&Ce.wrapHorizontal&&(ct.x+=.75),M.isBottomMost&&Ce.wrapVertical&&(ct.y+=.75),M.position=ut,M.size=ct,M.squaredDistance=Wt,M.visibility=Ee}function S(M,re,ge,pe,Ee,Ce,Ze){var Ke=1e3*M.blendTime,ut,pt;if(re.blendStart||(re.blendStart=Ze),ut=Ze-re.blendStart,pt=Ke?Math.min(1,ut/Ke):1,M.alwaysBlend&&(pt*=Ce),re.opacity=pt,M.lastDrawn.push(re),pt===1)H(M.coverage,Ee,ge,pe,!0),M._hasOpaqueTile=!0;else if(ut<Ke)return!0;return!1}function R(M,re,ge,pe){var Ee,Ce,Ze,Ke;if(!M[re])return!1;if(ge===void 0||pe===void 0){Ee=M[re];for(Ze in Ee)if(Object.prototype.hasOwnProperty.call(Ee,Ze)){Ce=Ee[Ze];for(Ke in Ce)if(Object.prototype.hasOwnProperty.call(Ce,Ke)&&!Ce[Ke])return!1}return!0}return M[re][ge]===void 0||M[re][ge][pe]===void 0||M[re][ge][pe]===!0}function A(M,re,ge,pe){return ge===void 0||pe===void 0?R(M,re+1):R(M,re+1,2*ge,2*pe)&&R(M,re+1,2*ge,2*pe+1)&&R(M,re+1,2*ge+1,2*pe)&&R(M,re+1,2*ge+1,2*pe+1)}function H(M,re,ge,pe,Ee){if(!M[re]){r.console.warn("Setting coverage for a tile before its level's coverage has been reset: %s",re);return}M[re][ge]||(M[re][ge]={}),M[re][ge][pe]=Ee}function V(M,re){M[re]={}}function oe(M,re){return!M||re.visibility>M.visibility||re.visibility===M.visibility&&re.squaredDistance<M.squaredDistance?re:M}function ne(M,re){if(!(M.opacity===0||re.length===0&&!M.placeholderFillStyle)){var ge=re[0],pe;ge&&(pe=M.opacity<1||M.compositeOperation&&M.compositeOperation!=="source-over"||!M._isBottomItem()&&ge._hasTransparencyChannel());var Ee,Ce,Ze=M.viewport.getZoom(!0),Ke=M.viewportToImageZoom(Ze);re.length>1&&Ke>M.smoothTileEdgesMinZoom&&!M.iOSDevice&&M.getRotation(!0)%360===0&&r.supportsCanvas&&(pe=!0,Ee=ge.getScaleForEdgeSmoothing(),Ce=ge.getTranslationForEdgeSmoothing(Ee,M._drawer.getCanvasSize(!1),M._drawer.getCanvasSize(!0)));var ut;pe&&(Ee||(ut=M.viewport.viewportToViewerElementRectangle(M.getClippedBounds(!0)).getIntegerBoundingBox(),M._drawer.viewer.viewport.getFlip()&&(M.viewport.degrees!==0||M.getRotation(!0)%360!==0)&&(ut.x=M._drawer.viewer.container.clientWidth-(ut.x+ut.width)),ut=ut.times(r.pixelDensityRatio)),M._drawer._clear(!0,ut)),Ee||(M.viewport.degrees!==0&&M._drawer._offsetForRotation({degrees:M.viewport.degrees,useSketch:pe}),M.getRotation(!0)%360!==0&&M._drawer._offsetForRotation({degrees:M.getRotation(!0),point:M.viewport.pixelFromPointNoRotate(M._getRotationPoint(!0),!0),useSketch:pe}),M.viewport.degrees===0&&M.getRotation(!0)%360===0&&M._drawer.viewer.viewport.getFlip()&&M._drawer._flip());var pt=!1;if(M._clip){M._drawer.saveContext(pe);var ct=M.imageToViewportRectangle(M._clip,!0);ct=ct.rotate(-M.getRotation(!0),M._getRotationPoint(!0));var _t=M._drawer.viewportToDrawerRectangle(ct);Ee&&(_t=_t.times(Ee)),Ce&&(_t=_t.translate(Ce)),M._drawer.setClip(_t,pe),pt=!0}if(M._croppingPolygons){M._drawer.saveContext(pe);try{var Ct=M._croppingPolygons.map(function(ln){return ln.map(function(bn){var dt=M.imageToViewportCoordinates(bn.x,bn.y,!0).rotate(-M.getRotation(!0),M._getRotationPoint(!0)),Jt=M._drawer.viewportCoordToDrawerCoord(dt);return Ee&&(Jt=Jt.times(Ee)),Jt})});M._drawer.clipWithPolygons(Ct,pe)}catch(ln){r.console.error(ln)}pt=!0}if(M.placeholderFillStyle&&M._hasOpaqueTile===!1){var Wt=M._drawer.viewportToDrawerRectangle(M.getBounds(!0));Ee&&(Wt=Wt.times(Ee)),Ce&&(Wt=Wt.translate(Ce));var Ut=null;typeof M.placeholderFillStyle=="function"?Ut=M.placeholderFillStyle(M,M._drawer.context):Ut=M.placeholderFillStyle,M._drawer.drawRectangle(Wt,Ut,pe)}for(var Zt=re.length-1;Zt>=0;Zt--)ge=re[Zt],M._drawer.drawTile(ge,M._drawingHandler,pe,Ee,Ce),ge.beingDrawn=!0,M.viewer&&M.viewer.raiseEvent("tile-drawn",{tiledImage:M,tile:ge});pt&&M._drawer.restoreContext(pe),Ee||(M.getRotation(!0)%360!==0&&M._drawer._restoreRotationChanges(pe),M.viewport.degrees!==0&&M._drawer._restoreRotationChanges(pe)),pe&&(Ee&&(M.viewport.degrees!==0&&M._drawer._offsetForRotation({degrees:M.viewport.degrees,useSketch:!1}),M.getRotation(!0)%360!==0&&M._drawer._offsetForRotation({degrees:M.getRotation(!0),point:M.viewport.pixelFromPointNoRotate(M._getRotationPoint(!0),!0),useSketch:!1})),M._drawer.blendSketch({opacity:M.opacity,scale:Ee,translate:Ce,compositeOperation:M.compositeOperation,bounds:ut}),Ee&&(M.getRotation(!0)%360!==0&&M._drawer._restoreRotationChanges(!1),M.viewport.degrees!==0&&M._drawer._restoreRotationChanges(!1))),Ee||M.viewport.degrees===0&&M.getRotation(!0)%360===0&&M._drawer.viewer.viewport.getFlip()&&M._drawer._flip(),ue(M,re)}}function ue(M,re){if(M.debugMode)for(var ge=re.length-1;ge>=0;ge--){var pe=re[ge];try{M._drawer.drawDebugInfo(pe,re.length,ge,M)}catch(Ee){r.console.error(Ee)}}}}(l),function(r){var a=function(f){r.console.assert(f,"[TileCache.cacheTile] options is required"),r.console.assert(f.tile,"[TileCache.cacheTile] options.tile is required"),r.console.assert(f.tiledImage,"[TileCache.cacheTile] options.tiledImage is required"),this.tile=f.tile,this.tiledImage=f.tiledImage},c=function(f){r.console.assert(f,"[ImageRecord] options is required"),r.console.assert(f.image,"[ImageRecord] options.image is required"),this._image=f.image,this._tiles=[]};c.prototype={destroy:function(){this._image=null,this._renderedContext=null,this._tiles=null},getImage:function(){return this._image},getRenderedContext:function(){if(!this._renderedContext){var f=document.createElement("canvas");f.width=this._image.width,f.height=this._image.height,this._renderedContext=f.getContext("2d"),this._renderedContext.drawImage(this._image,0,0),this._image=null}return this._renderedContext},setRenderedContext:function(f){r.console.error("ImageRecord.setRenderedContext is deprecated. The rendered context should be created by the ImageRecord itself when calling ImageRecord.getRenderedContext."),this._renderedContext=f},addTile:function(f){r.console.assert(f,"[ImageRecord.addTile] tile is required"),this._tiles.push(f)},removeTile:function(f){for(var g=0;g<this._tiles.length;g++)if(this._tiles[g]===f){this._tiles.splice(g,1);return}r.console.warn("[ImageRecord.removeTile] trying to remove unknown tile",f)},getTileCount:function(){return this._tiles.length}},r.TileCache=function(f){f=f||{},this._maxImageCacheCount=f.maxImageCacheCount||r.DEFAULT_SETTINGS.maxImageCacheCount,this._tilesLoaded=[],this._imagesLoaded=[],this._imagesLoadedCount=0},r.TileCache.prototype={numTilesLoaded:function(){return this._tilesLoaded.length},cacheTile:function(f){r.console.assert(f,"[TileCache.cacheTile] options is required"),r.console.assert(f.tile,"[TileCache.cacheTile] options.tile is required"),r.console.assert(f.tile.cacheKey,"[TileCache.cacheTile] options.tile.cacheKey is required"),r.console.assert(f.tiledImage,"[TileCache.cacheTile] options.tiledImage is required");var g=f.cutoff||0,y=this._tilesLoaded.length,w=this._imagesLoaded[f.tile.cacheKey];if(w||(r.console.assert(f.image,"[TileCache.cacheTile] options.image is required to create an ImageRecord"),w=this._imagesLoaded[f.tile.cacheKey]=new c({image:f.image}),this._imagesLoadedCount++),w.addTile(f.tile),f.tile.cacheImageRecord=w,this._imagesLoadedCount>this._maxImageCacheCount){for(var b=null,S=-1,R=null,A,H,V,oe,ne,ue,M=this._tilesLoaded.length-1;M>=0;M--)if(ue=this._tilesLoaded[M],A=ue.tile,!(A.level<=g||A.beingDrawn)){if(!b){b=A,S=M,R=ue;continue}oe=A.lastTouchTime,H=b.lastTouchTime,ne=A.level,V=b.level,(oe<H||oe===H&&ne>V)&&(b=A,S=M,R=ue)}b&&S>=0&&(this._unloadTile(R),y=S)}this._tilesLoaded[y]=new a({tile:f.tile,tiledImage:f.tiledImage})},clearTilesFor:function(f){r.console.assert(f,"[TileCache.clearTilesFor] tiledImage is required");for(var g,y=0;y<this._tilesLoaded.length;++y)g=this._tilesLoaded[y],g.tiledImage===f&&(this._unloadTile(g),this._tilesLoaded.splice(y,1),y--)},getImageRecord:function(f){return r.console.assert(f,"[TileCache.getImageRecord] cacheKey is required"),this._imagesLoaded[f]},_unloadTile:function(f){r.console.assert(f,"[TileCache._unloadTile] tileRecord is required");var g=f.tile,y=f.tiledImage;g.unload(),g.cacheImageRecord=null;var w=this._imagesLoaded[g.cacheKey];w.removeTile(g),w.getTileCount()||(w.destroy(),delete this._imagesLoaded[g.cacheKey],this._imagesLoadedCount--),y.viewer.raiseEvent("tile-unloaded",{tile:g,tiledImage:y})}}}(l),function(r){r.World=function(a){var c=this;r.console.assert(a.viewer,"[World] options.viewer is required"),r.EventSource.call(this),this.viewer=a.viewer,this._items=[],this._needsDraw=!1,this._autoRefigureSizes=!0,this._needsSizesFigured=!1,this._delegatedFigureSizes=function(f){c._autoRefigureSizes?c._figureSizes():c._needsSizesFigured=!0},this._figureSizes()},r.extend(r.World.prototype,r.EventSource.prototype,{addItem:function(a,c){if(r.console.assert(a,"[World.addItem] item is required"),r.console.assert(a instanceof r.TiledImage,"[World.addItem] only TiledImages supported at this time"),c=c||{},c.index!==void 0){var f=Math.max(0,Math.min(this._items.length,c.index));this._items.splice(f,0,a)}else this._items.push(a);this._autoRefigureSizes?this._figureSizes():this._needsSizesFigured=!0,this._needsDraw=!0,a.addHandler("bounds-change",this._delegatedFigureSizes),a.addHandler("clip-change",this._delegatedFigureSizes),this.raiseEvent("add-item",{item:a})},getItemAt:function(a){return r.console.assert(a!==void 0,"[World.getItemAt] index is required"),this._items[a]},getIndexOfItem:function(a){return r.console.assert(a,"[World.getIndexOfItem] item is required"),r.indexOf(this._items,a)},getItemCount:function(){return this._items.length},setItemIndex:function(a,c){r.console.assert(a,"[World.setItemIndex] item is required"),r.console.assert(c!==void 0,"[World.setItemIndex] index is required");var f=this.getIndexOfItem(a);if(c>=this._items.length)throw new Error("Index bigger than number of layers.");c===f||f===-1||(this._items.splice(f,1),this._items.splice(c,0,a),this._needsDraw=!0,this.raiseEvent("item-index-change",{item:a,previousIndex:f,newIndex:c}))},removeItem:function(a){r.console.assert(a,"[World.removeItem] item is required");var c=r.indexOf(this._items,a);c!==-1&&(a.removeHandler("bounds-change",this._delegatedFigureSizes),a.removeHandler("clip-change",this._delegatedFigureSizes),a.destroy(),this._items.splice(c,1),this._figureSizes(),this._needsDraw=!0,this._raiseRemoveItem(a))},removeAll:function(){this.viewer._cancelPendingImages();var a,c;for(c=0;c<this._items.length;c++)a=this._items[c],a.removeHandler("bounds-change",this._delegatedFigureSizes),a.removeHandler("clip-change",this._delegatedFigureSizes),a.destroy();var f=this._items;for(this._items=[],this._figureSizes(),this._needsDraw=!0,c=0;c<f.length;c++)a=f[c],this._raiseRemoveItem(a)},resetItems:function(){for(var a=0;a<this._items.length;a++)this._items[a].reset()},update:function(){for(var a=!1,c=0;c<this._items.length;c++)a=this._items[c].update()||a;return a},draw:function(){for(var a=0;a<this._items.length;a++)this._items[a].draw();this._needsDraw=!1},needsDraw:function(){for(var a=0;a<this._items.length;a++)if(this._items[a].needsDraw())return!0;return this._needsDraw},getHomeBounds:function(){return this._homeBounds.clone()},getContentFactor:function(){return this._contentFactor},setAutoRefigureSizes:function(a){this._autoRefigureSizes=a,a&this._needsSizesFigured&&(this._figureSizes(),this._needsSizesFigured=!1)},arrange:function(a){a=a||{};var c=a.immediately||!1,f=a.layout||r.DEFAULT_SETTINGS.collectionLayout,g=a.rows||r.DEFAULT_SETTINGS.collectionRows,y=a.columns||r.DEFAULT_SETTINGS.collectionColumns,w=a.tileSize||r.DEFAULT_SETTINGS.collectionTileSize,b=a.tileMargin||r.DEFAULT_SETTINGS.collectionTileMargin,S=w+b,R;!a.rows&&y?R=y:R=Math.ceil(this._items.length/g);var A=0,H=0,V,oe,ne,ue,M;this.setAutoRefigureSizes(!1);for(var re=0;re<this._items.length;re++)re&&re%R===0&&(f==="horizontal"?(H+=S,A=0):(A+=S,H=0)),V=this._items[re],oe=V.getBounds(),oe.width>oe.height?ne=w:ne=w*(oe.width/oe.height),ue=ne*(oe.height/oe.width),M=new r.Point(A+(w-ne)/2,H+(w-ue)/2),V.setPosition(M,c),V.setWidth(ne,c),f==="horizontal"?A+=S:H+=S;this.setAutoRefigureSizes(!0)},_figureSizes:function(){var a=this._homeBounds?this._homeBounds.clone():null,c=this._contentSize?this._contentSize.clone():null,f=this._contentFactor||0;if(!this._items.length)this._homeBounds=new r.Rect(0,0,1,1),this._contentSize=new r.Point(1,1),this._contentFactor=1;else{var g=this._items[0],y=g.getBounds();this._contentFactor=g.getContentSize().x/y.width;for(var w=g.getClippedBounds().getBoundingBox(),b=w.x,S=w.y,R=w.x+w.width,A=w.y+w.height,H=1;H<this._items.length;H++)g=this._items[H],y=g.getBounds(),this._contentFactor=Math.max(this._contentFactor,g.getContentSize().x/y.width),w=g.getClippedBounds().getBoundingBox(),b=Math.min(b,w.x),S=Math.min(S,w.y),R=Math.max(R,w.x+w.width),A=Math.max(A,w.y+w.height);this._homeBounds=new r.Rect(b,S,R-b,A-S),this._contentSize=new r.Point(this._homeBounds.width*this._contentFactor,this._homeBounds.height*this._contentFactor)}(this._contentFactor!==f||!this._homeBounds.equals(a)||!this._contentSize.equals(c))&&this.raiseEvent("metrics-change",{})},_raiseRemoveItem:function(a){this.raiseEvent("remove-item",{item:a})}})}(l)})(bw);var Wr=bw.exports;const on="http://www.w3.org/2000/svg",Qh=s=>{const l=s.getAttribute("class");return l?new Set(l.split(" ")):new Set},Or=(s,l)=>{const r=Qh(s);r.add(l),s.setAttribute("class",Array.from(r).join(" "))},Bu=(s,l)=>{const r=Qh(s);r.delete(l),r.size===0?s.removeAttribute("class"):s.setAttribute("class",Array.from(r).join(" "))},Jh=(s,l)=>Qh(s).has(l),Vr=(s,l)=>{const r=s.selector("FragmentSelector");if(r!=null&&r.conformsTo.startsWith("http://www.w3.org/TR/media-frags")){const{value:a}=r,c=a.includes(":")?a.substring(a.indexOf("=")+1,a.indexOf(":")):"pixel",f=a.includes(":")?a.substring(a.indexOf(":")+1):a.substring(a.indexOf("=")+1);let[g,y,w,b]=f.split(",").map(parseFloat);return c.toLowerCase()==="percent"&&(g=g*l.naturalWidth/100,y=y*l.naturalHeight/100,w=w*l.naturalWidth/100,b=b*l.naturalHeight/100),{x:g,y,w,h:b}}},tN=(s,l,r,a,c)=>({source:c?.src,selector:{type:"FragmentSelector",conformsTo:"http://www.w3.org/TR/media-frags/",value:`xywh=pixel:${s},${l},${r},${a}`}}),nN=(s,l,r,a,c)=>{const f=s/c.naturalWidth*100,g=l/c.naturalHeight*100,y=r/c.naturalWidth*100,w=a/c.naturalHeight*100;return{source:c.src,selector:{type:"FragmentSelector",conformsTo:"http://www.w3.org/TR/media-frags/",value:`xywh=percent:${f},${g},${y},${w}`}}},Es=(s,l,r,a,c,f)=>f?.toLowerCase()==="percent"?nN(s,l,r,a,c):tN(s,l,r,a,c),Uu=(s,l,r,a,c)=>{s.setAttribute("x",l),s.setAttribute("y",r),s.setAttribute("width",a),s.setAttribute("height",c)},Wu=(s,l,r)=>{s.setAttribute("cx",l),s.setAttribute("cy",r),s.setAttribute("r",7)},xw=(s,l,r,a,c)=>{const f=document.createElementNS(on,"path");f.setAttribute("fill-rule","evenodd");const{naturalWidth:g,naturalHeight:y}=s;return f.setAttribute("d",`M0 0 h${g} v${y} h-${g} z M${l} ${r} h${a} v${c} h-${a} z`),f},Sw=(s,l,r,a,c,f)=>{const{naturalWidth:g,naturalHeight:y}=l;s.setAttribute("d",`M0 0 h${g} v${y} h-${g} z M${r} ${a} h${c} v${f} h-${c} z`)},ep=(s,l,r,a)=>{const{x:c,y:f,w:g,h:y}=s.type==="Annotation"||s.type==="Selection"?Vr(s,l):{x:s,y:l,w:r,h:a},w=document.createElementNS(on,"g");if(g===0&&y===0){Or(w,"a9s-point"),Or(w,"a9s-non-scaling"),w.setAttribute("transform-origin",`${c} ${f}`);const b=document.createElementNS(on,"circle"),S=document.createElementNS(on,"circle");S.setAttribute("class","a9s-inner"),Wu(S,c,f),b.setAttribute("class","a9s-outer"),Wu(b,c,f),w.appendChild(b),w.appendChild(S)}else{const b=document.createElementNS(on,"rect"),S=document.createElementNS(on,"rect");S.setAttribute("class","a9s-inner"),Uu(S,c,f,g,y),b.setAttribute("class","a9s-outer"),Uu(b,c,f,g,y),w.appendChild(b),w.appendChild(S)}return w},tp=s=>{const l=s.querySelector(".a9s-outer");if(l.nodeName==="rect"){const r=parseFloat(l.getAttribute("x")),a=parseFloat(l.getAttribute("y")),c=parseFloat(l.getAttribute("width")),f=parseFloat(l.getAttribute("height"));return{x:r,y:a,w:c,h:f}}else{const r=parseFloat(l.getAttribute("cx")),a=parseFloat(l.getAttribute("cy"));return{x:r,y:a,w:0,h:0}}},Ew=(s,l,r,a,c)=>{const f=s.querySelector(".a9s-inner"),g=s.querySelector(".a9s-outer");g.nodeName==="rect"?(Uu(f,l,r,a,c),Uu(g,l,r,a,c)):(Wu(f,l,r),Wu(g,l,r))},iN=(s,l)=>{const{w:r,h:a}=Vr(s,l);return r*a};class rN{constructor(l,r,a,c,f){o(this,"dragTo",(g,y)=>{this.group.style.display=null,this.opposite=[g,y];const{x:w,y:b,w:S,h:R}=this.bbox;Sw(this.mask,this.env.image,w,b,S,R),Ew(this.rect,w,b,S,R)}),o(this,"getBoundingClientRect",()=>this.rect.getBoundingClientRect()),o(this,"toSelection",()=>{const{x:g,y,w,h:b}=this.bbox;return new La(Es(g,y,w,b,this.env.image,this.config.fragmentUnit))}),o(this,"destroy",()=>{this.group.parentNode.removeChild(this.group),this.mask=null,this.rect=null,this.group=null}),this.anchor=[l,r],this.opposite=[l,r],this.config=c,this.env=f,this.group=document.createElementNS(on,"g"),this.mask=xw(f.image,l,r,2,2),this.mask.setAttribute("class","a9s-selection-mask"),this.rect=ep(l,r,2,2),this.rect.setAttribute("class","a9s-selection"),this.group.style.pointerEvents="none",this.group.style.display="none",this.group.appendChild(this.mask),this.group.appendChild(this.rect),a.appendChild(this.group)}get bbox(){const l=this.opposite[0]-this.anchor[0],r=this.opposite[1]-this.anchor[1];return{x:l>0?this.anchor[0]:this.opposite[0],y:r>0?this.anchor[1]:this.opposite[1],w:Math.max(1,Math.abs(l)),h:Math.max(1,Math.abs(r))}}get element(){return this.rect}}const oN={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup"},np=()=>"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,sN=s=>{let l=null;const r=(c,f)=>new MouseEvent(c,{screenX:f.screenX,screenY:f.screenY,clientX:f.clientX,clientY:f.clientY,pageX:f.pageX,pageY:f.pageY,bubbles:!0}),a=c=>{const f=c.changedTouches[0],g=r(oN[c.type],f);f.target.dispatchEvent(g),c.preventDefault(),(c.type==="touchstart"||c.type==="touchmove")&&(l&&clearTimeout(l),l=setTimeout(()=>{const y=r("dblclick",f);f.target.dispatchEvent(y)},800)),c.type==="touchend"&&l&&clearTimeout(l)};s.addEventListener("touchstart",a,!0),s.addEventListener("touchmove",a,!0),s.addEventListener("touchend",a,!0),s.addEventListener("touchcancel",a,!0)},Vu="An implementation is missing",aN=np();class Tw extends Bi{constructor(l,r,a){super(),o(this,"enableResponsive",()=>{window.ResizeObserver&&(this.resizeObserver=new ResizeObserver(()=>{const f=this.svg.getBoundingClientRect(),{width:g,height:y}=this.svg.viewBox.baseVal;this.scale=Math.max(g/f.width,y/f.height),this.onScaleChanged&&this.onScaleChanged(this.scale)}),this.resizeObserver.observe(this.svg.parentNode))}),o(this,"getSVGPoint",f=>{const g=this.svg.createSVGPoint();if(aN){const y=this.svg.getBoundingClientRect(),w=f.clientX-y.x,b=f.clientY-y.y,{left:S,top:R}=this.svg.getBoundingClientRect();return g.x=w+S,g.y=b+R,g.matrixTransform(this.g.getScreenCTM().inverse())}else return g.x=f.offsetX,g.y=f.offsetY,g.matrixTransform(this.g.getCTM().inverse())}),o(this,"drawHandle",(f,g)=>{const y=document.createElementNS(on,"g");y.setAttribute("class","a9s-handle");const w=document.createElementNS(on,"g"),b=H=>{const V=document.createElementNS(on,"circle");return V.setAttribute("cx",f),V.setAttribute("cy",g),V.setAttribute("r",H),V.setAttribute("transform-origin",`${f} ${g}`),V},S=this.config.handleRadius||6,R=b(S);R.setAttribute("class","a9s-handle-inner");const A=b(S+1);return A.setAttribute("class","a9s-handle-outer"),w.appendChild(A),w.appendChild(R),y.appendChild(w),y}),o(this,"setHandleXY",(f,g,y)=>{const w=f.querySelector(".a9s-handle-inner");w.setAttribute("cx",g),w.setAttribute("cy",y),w.setAttribute("transform-origin",`${g} ${y}`);const b=f.querySelector(".a9s-handle-outer");b.setAttribute("cx",g),b.setAttribute("cy",y),b.setAttribute("transform-origin",`${g} ${y}`)}),o(this,"getHandleXY",f=>{const g=f.querySelector(".a9s-handle-outer");return{x:parseFloat(g.getAttribute("cx")),y:parseFloat(g.getAttribute("cy"))}}),o(this,"scaleHandle",f=>{const g=f.querySelector(".a9s-handle-inner"),y=f.querySelector(".a9s-handle-outer"),w=this.scale*(this.config.handleRadius||6);g.setAttribute("r",w),y.setAttribute("r",w)}),this.svg=l.closest("svg"),this.g=l,this.config=r,this.env=a,this.scale=1;const{image:c}=a;(c instanceof Element||c instanceof HTMLDocument)&&this.enableResponsive()}destroy(){this.resizeObserver&&this.resizeObserver.disconnect(),this.resizeObserver=null}}class ip extends Tw{constructor(l,r,a){super(l,r,a),o(this,"attachListeners",({mouseMove:c,mouseUp:f,dblClick:g})=>{c&&(this.mouseMove=y=>{const{x:w,y:b}=this.getSVGPoint(y);this.started||(this.emit("startSelection",{x:w,y:b}),this.started=!0),c(w,b,y)},this.svg.addEventListener("mousemove",this.mouseMove)),f&&(this.mouseUp=y=>{if(y.button!==0)return;const{x:w,y:b}=this.getSVGPoint(y);f(w,b,y)},document.addEventListener("mouseup",this.mouseUp)),g&&(this.dblClick=y=>{const{x:w,y:b}=this.getSVGPoint(y);g(w,b,y)},document.addEventListener("dblclick",this.dblClick))}),o(this,"detachListeners",()=>{this.mouseMove&&this.svg.removeEventListener("mousemove",this.mouseMove),this.mouseUp&&document.removeEventListener("mouseup",this.mouseUp),this.dblClick&&document.removeEventListener("dblclick",this.dblClick)}),o(this,"start",(c,f)=>{const{x:g,y}=this.getSVGPoint(c);this.startDrawing(g,y,f,c)}),o(this,"startDrawing",c=>{throw new Error(Vu)}),o(this,"createEditableShape",(c,f)=>{throw new Error(Vu)}),this.started=!1}get isDrawing(){throw new Error(Vu)}}ip.supports=s=>{throw new Error(Vu)};const Cw="An implementation is missing";class Pw extends Tw{constructor(l,r,a,c){super(r,a,c),o(this,"updateState",f=>{throw new Error(Cw)}),this.annotation=l}get element(){throw new Error(Cw)}}const lN=/firefox/i.test(navigator.userAgent),_w=(s,l,r,a,c)=>{s.setAttribute("width",a),s.setAttribute("height",c),lN?(s.setAttribute("x",0),s.setAttribute("y",0),s.setAttribute("transform",`translate(${l}, ${r})`)):(s.setAttribute("x",l),s.setAttribute("y",r))},uN=(s,l)=>{const{x:r,y:a,width:c,height:f}=l.getBBox(),g=document.createElementNS(on,"svg");g.setAttribute("class","a9s-formatter-el"),_w(g,r,a,c,f);const y=document.createElementNS(on,"g");y.appendChild(s),g.appendChild(y),l.append(g)},Gu=(s,l,r)=>{if(!r)return s;const a=r.reduce((y,w)=>{const b=w(l);if(!b)return y;if(typeof b=="string"||b instanceof String)y.className=y.className?`${y.className} ${b}`:b;else if(b.nodeType===Node.ELEMENT_NODE)y.elements=y.elements?[...y.elements,b]:[b];else{const{className:S,style:R,element:A}=b;S&&(y.className=y.className?`${y.className} ${S}`:S),R&&(y.style=y.style?`${y.style} ${R}`:R),A&&(y.elements=y.elements?[...y.elements,A]:[A])}for(const S in b)b.hasOwnProperty(S)&&S.startsWith("data-")&&(y[S]=b[S]);return y},{}),{className:c,style:f,elements:g}=a;if(c&&Or(s,c),f){const y=s.querySelector(".a9s-outer"),w=s.querySelector(".a9s-inner");y&&w?(y.setAttribute("style","display:none"),w.setAttribute("style",f)):s.setAttribute("style",f)}g&&g.forEach(y=>uN(y,s));for(const y in a)a.hasOwnProperty(y)&&y.startsWith("data-")&&s.setAttribute(y,a[y])},kw=(s,l,r,a,c)=>{const f=s.querySelector(".a9s-formatter-el");f&&_w(f,l,r,a,c)},Na="corner",qu="edge";class cN extends Pw{constructor(l,r,a,c){super(l,r,a,c),o(this,"onScaleChanged",()=>this.handles.map(this.scaleHandle)),o(this,"setSize",(S,R,A,H)=>{Ew(this.rectangle,S,R,A,H),Sw(this.mask,this.env.image,S,R,A,H),kw(this.elementGroup,S,R,A,H);const[V,oe,ne,ue,M,re,ge,pe]=this.handles;this.setHandleXY(V,S,R),this.setHandleXY(oe,S+A,R),this.setHandleXY(ne,S+A,R+H),this.setHandleXY(ue,S,R+H),this.enableEdgeControls&&(this.setHandleXY(M,S+A/2,R),this.setHandleXY(re,S+A,R+H/2),this.setHandleXY(ge,S+A/2,R+H),this.setHandleXY(pe,S,R+H/2))}),o(this,"stretchCorners",(S,R,A)=>{const H=this.getHandleXY(R),V=A.x-H.x,oe=A.y-H.y,ne=V>0?H.x:A.x,ue=oe>0?H.y:A.y,M=Math.abs(V),re=Math.abs(oe);return this.setSize(ne,ue,M,re),{x:ne,y:ue,w:M,h:re}}),o(this,"stretchEdge",(S,R,A)=>{const H=this.getHandleXY(R),V=tp(this.rectangle),oe=S%2===0,ne=oe?V.w:A.x-H.x,ue=oe?A.y-H.y:V.h,M=oe?V.x:ne>0?H.x:A.x,re=oe?ue>0?H.y:A.y:V.y,ge=Math.abs(ne),pe=Math.abs(ue);return this.setSize(M,re,ge,pe),{x:M,y:re,w:ge,h:pe}}),o(this,"onGrab",(S,R)=>A=>{if(A.button!==0)return;this.grabbedElem=S,this.grabbedType=R;const H=this.getSVGPoint(A),{x:V,y:oe}=tp(this.rectangle);this.mouseOffset={x:H.x-V,y:H.y-oe}}),o(this,"onMouseMove",S=>{if(S.button!==0)return;const R=(A,H)=>A<0?0:A>H?H:A;if(this.grabbedElem){const A=this.getSVGPoint(S);if(this.grabbedElem===this.rectangle){const{w:H,h:V}=tp(this.rectangle),{naturalWidth:oe,naturalHeight:ne}=this.env.image,ue=R(A.x-this.mouseOffset.x,oe-H),M=R(A.y-this.mouseOffset.y,ne-V);this.setSize(ue,M,H,V),this.emit("update",Es(ue,M,H,V,this.env.image,this.config.fragmentUnit))}else{const H=this.handles.indexOf(this.grabbedElem),V=this.handles[H^2],{x:oe,y:ne,w:ue,h:M}=this.grabbedType===Na?this.stretchCorners(H,V,A):this.stretchEdge(H,V,A);this.emit("update",Es(oe,ne,ue,M,this.env.image,this.config.fragmentUnit))}}}),o(this,"onMouseUp",S=>{this.grabbedElem=null,this.grabbedType=null,this.mouseOffset=null}),o(this,"updateState",S=>{const{x:R,y:A,w:H,h:V}=Vr(S,this.env.image);this.setSize(R,A,H,V)}),this.svg.addEventListener("mousemove",this.onMouseMove),this.svg.addEventListener("mouseup",this.onMouseUp);const{x:f,y:g,w:y,h:w}=Vr(l,c.image);this.containerGroup=document.createElementNS(on,"g"),this.mask=xw(c.image,f,g,y,w),this.mask.setAttribute("class","a9s-selection-mask"),this.containerGroup.appendChild(this.mask),this.elementGroup=document.createElementNS(on,"g"),this.elementGroup.setAttribute("class","a9s-annotation editable selected"),this.elementGroup.setAttribute("data-id",l.id),this.rectangle=ep(f,g,y,w),this.rectangle.querySelector(".a9s-inner").addEventListener("mousedown",this.onGrab(this.rectangle)),this.elementGroup.appendChild(this.rectangle),this.enableEdgeControls=a.enableEdgeControls;const b=this.enableEdgeControls?[[f+y/2,g,qu],[f+y,g+w/2,qu],[f+y/2,g+w,qu],[f,g+w/2,qu]]:[];this.handles=[[f,g,Na],[f+y,g,Na],[f+y,g+w,Na],[f,g+w,Na],...b].map(S=>{const[R,A,H]=S,V=this.drawHandle(R,A);return V.addEventListener("mousedown",this.onGrab(V,H)),this.elementGroup.appendChild(V),V}),this.containerGroup.appendChild(this.elementGroup),r.appendChild(this.containerGroup),Gu(this.rectangle,l,a.formatters),this.grabbedElem=null,this.grabbedType=null,this.mouseOffset=null}get element(){return this.elementGroup}destroy(){this.containerGroup.parentNode.removeChild(this.containerGroup),super.destroy()}}class Zu extends ip{constructor(l,r,a){super(l,r,a),o(this,"startDrawing",(c,f)=>{this.attachListeners({mouseMove:this.onMouseMove,mouseUp:this.onMouseUp}),this.rubberband=new rN(c,f,this.g,this.config,this.env)}),o(this,"stop",()=>{this.rubberband&&(this.rubberband.destroy(),this.rubberband=null)}),o(this,"onMouseMove",(c,f)=>this.rubberband.dragTo(c,f)),o(this,"onMouseUp",()=>{this.detachListeners(),this.started=!1;const{width:c,height:f}=this.rubberband.getBoundingClientRect(),g=this.config.minSelectionWidth||4,y=this.config.minSelectionHeight||4;if(c>=g&&f>=y){const{element:w}=this.rubberband;w.annotation=this.rubberband.toSelection(),this.emit("complete",w)}else this.emit("cancel");this.stop()}),o(this,"createEditableShape",(c,f)=>new cN(c,this.g,{...this.config,formatters:f},this.env)),this.rubberband=null}get isDrawing(){return this.rubberband!=null}}Zu.identifier="rect",Zu.supports=s=>{const l=s.selector("FragmentSelector");return l?.conformsTo.startsWith("http://www.w3.org/TR/media-frags")};const Xu=s=>{let l=0,r=s.length-1;for(let a=0;a<s.length;a++)l+=(s[r][0]+s[a][0])*(s[r][1]-s[a][1]),r=a;return Math.abs(.5*l)},dN=(s,l,r,a)=>{const c=s[0]-l,f=s[1]-r;return Math.sqrt(c*c+f*f)<=a},hN=(s,l,r,a,c,f)=>{const g=Math.cos(0),y=Math.sin(0),w=s[0]-l,b=s[1]-r,S=g*w+y*b,R=y*w-g*b;return S*S/(a*a)+R*R/(c*c)<=1},rp=(s,l)=>{const r=s[0],a=s[1];let c=!1;for(let f=0,g=l.length-1;f<l.length;g=f++){const y=l[f][0],w=l[f][1],b=l[g][0],S=l[g][1];w>a!=S>a&&r<(b-y)*(a-w)/(S-w)+y&&(c=!c)}return c},pN=(s,l)=>{for(let r of s)if(!rp(r,l))return!1;return!0},fN=(s,l,r,a,c,f)=>{const g=s[0],y=s[1],w=a-l,b=c-r,S=Math.sqrt(w*w+b*b);return Math.abs((g-l)*b-(y-r)*w)/S<=f},Rw=s=>{const l=s.getAttribute("d").split(/(?=M|m|L|l|H|h|V|v|Z|z)/g).map(c=>c.trim()),r=[];let a=[];for(let c of l){const f=c.substring(0,1);if(f.toLowerCase()==="z")r.push([...a]),a=[];else{const g=c.substring(1).split(" ").map(S=>parseFloat(S.trim())),y=f===f.toUpperCase(),w=y?g[0]:g[0]+a[a.length-1][0],b=y?g[1]:g[1]+a[a.length-1][1];a.push([w,b])}}return a.length>0&&r.push([...a]),r},mN=s=>{const l=new XMLSerializer().serializeToString(s.documentElement).replace("<svg>",`<svg xmlns="${on}">`);return new DOMParser().parseFromString(l,"image/svg+xml").documentElement},Ow=s=>{const l=a=>{Array.from(a.attributes).forEach(c=>{c.name.startsWith("on")&&a.removeAttribute(c.name)})},r=s.getElementsByTagName("script");return Array.from(r).reverse().forEach(a=>a.parentNode.removeChild(a)),l(s),Array.from(s.querySelectorAll("*")).forEach(l),s},Po=s=>{const l=s.selector("SvgSelector");if(l){const r=new DOMParser,{value:a}=l,c=r.parseFromString(a,"image/svg+xml"),f=c.lookupPrefix(on),g=c.lookupNamespaceURI(null);return f||g?Ow(c).firstChild:Ow(mN(c)).firstChild}},Aw=s=>{const l=Po(s),r=document.createElementNS(on,"g"),a=l.cloneNode(!0);a.setAttribute("class","a9s-inner");const c=l.cloneNode(!0);return c.setAttribute("class","a9s-outer"),r.appendChild(c),r.appendChild(a),r},op=(s,l)=>{const r=s.querySelector(".a9s-inner").cloneNode(!0);r.removeAttribute("class"),r.removeAttribute("xmlns");let a=r.outerHTML||new XMLSerializer().serializeToString(r);return a=a.replace(` xmlns="${on}"`,""),{source:l?.src,selector:{type:"SvgSelector",value:`<svg>${a}</svg>`}}},gN=s=>{const l=Po(s),r=l.nodeName.toLowerCase();if(r==="polygon")return vN(l);if(r==="circle")return yN(l);if(r==="ellipse")return wN(l);if(r=="path")return bN(l);if(r=="line")return 0;throw`Unsupported SVG shape type: ${r}`},vN=s=>{const l=s.getAttribute("points").trim().split(" ").map(r=>r.split(",").map(a=>parseFloat(a.trim())));return Xu(l)},yN=s=>{const l=s.getAttribute("r");return l*l*Math.PI},wN=s=>{const l=s.getAttribute("rx"),r=s.getAttribute("ry");return l*r*Math.PI},bN=s=>{const l=Rw(s);if(l.length==1)return Xu(l[0]);{const r=c=>l.find(f=>{if(c!==f)return pN(c,f)});let a=0;for(let c of l)r(c)?a-=Xu(c):a+=Xu(c);return a}};class Dw{constructor(l,r){o(this,"redraw",()=>{this.mask.setAttribute("d",`M0 0 h${this.w} v${this.h} h-${this.w} z M${this.polygon.getAttribute("points")} z`)}),o(this,"destroy",()=>this.mask.parentNode.removeChild(this.mask)),this.w=l.naturalWidth,this.h=l.naturalHeight,this.polygon=r,this.mask=document.createElementNS(on,"path"),this.mask.setAttribute("fill-rule","evenodd"),this.mask.setAttribute("class","a9s-selection-mask"),this.mask.setAttribute("d",`M0 0 h${this.w} v${this.h} h-${this.w} z M${this.polygon.getAttribute("points")} z`)}get element(){return this.mask}}class xN{constructor(l,r,a){o(this,"setPoints",c=>{const f=c.map(g=>`${g[0]},${g[1]}`).join(" ");this.outer.setAttribute("points",f),this.inner.setAttribute("points",f)}),o(this,"getBoundingClientRect",()=>this.outer.getBoundingClientRect()),o(this,"dragTo",c=>{this.group.style.display=null,this.mousepos=c;const f=[...this.points,c];this.setPoints(f),this.mask.redraw()}),o(this,"addPoint",()=>{const[c,f]=this.mousepos,g=this.points[this.points.length-1];Math.pow(c-g[0],2)+Math.pow(f-g[1],2)>4&&(this.points=[...this.points,this.mousepos],this.setPoints(this.points),this.mask.redraw())}),o(this,"destroy",()=>{this.group.parentNode.removeChild(this.group),this.polygon=null,this.group=null}),o(this,"toSelection",()=>new La(op(this.group,this.env.image))),this.points=[l],this.env=a,this.mousepos=l,this.group=document.createElementNS(on,"g"),this.polygon=document.createElementNS(on,"g"),this.polygon.setAttribute("class","a9s-selection"),this.outer=document.createElementNS(on,"polygon"),this.outer.setAttribute("class","a9s-outer"),this.inner=document.createElementNS(on,"polygon"),this.inner.setAttribute("class","a9s-inner"),this.setPoints(this.points),this.mask=new Dw(a.image,this.inner),this.polygon.appendChild(this.outer),this.polygon.appendChild(this.inner),this.group.style.display="none",this.group.appendChild(this.mask.element),this.group.appendChild(this.polygon),r.appendChild(this.group)}get element(){return this.polygon}}const sp=s=>{const l=s.querySelector(".a9s-inner").points,r=[];for(let a=0;a<l.numberOfItems;a++)r.push(l.getItem(a));return r},SN=s=>s.querySelector(".a9s-inner").getBBox();class EN extends Pw{constructor(l,r,a,c){super(l,r,a,c),o(this,"onScaleChanged",()=>this.handles.map(this.scaleHandle)),o(this,"setPoints",f=>{const g=H=>Math.round(10*H)/10,y=f.map(H=>`${g(H.x)},${g(H.y)}`).join(" ");this.shape.querySelector(".a9s-inner").setAttribute("points",y);const w=this.shape.querySelector(".a9s-outer");w.setAttribute("points",y),this.mask.redraw();const{x:b,y:S,width:R,height:A}=w.getBBox();kw(this.elementGroup,b,S,R,A)}),o(this,"onGrab",f=>g=>{g.button===0&&(this.grabbedElem=f,this.grabbedAt=this.getSVGPoint(g))}),o(this,"onMouseMove",f=>{const g=(y,w,b)=>y+w<0?-y:y+w>b?b-y:w;if(this.grabbedElem){const y=this.getSVGPoint(f);if(this.grabbedElem===this.shape){const{x:w,y:b,width:S,height:R}=SN(this.shape),{naturalWidth:A,naturalHeight:H}=this.env.image,V=g(w,y.x-this.grabbedAt.x,A-S),oe=g(b,y.y-this.grabbedAt.y,H-R),ne=sp(this.shape).map(ue=>({x:ue.x+V,y:ue.y+oe}));this.grabbedAt=y,this.setPoints(ne),ne.forEach((ue,M)=>this.setHandleXY(this.handles[M],ue.x,ue.y)),this.emit("update",op(this.shape,this.env.image))}else{const w=this.handles.indexOf(this.grabbedElem),b=sp(this.shape).map((S,R)=>R===w?y:S);this.setPoints(b),this.setHandleXY(this.handles[w],y.x,y.y),this.emit("update",op(this.shape,this.env.image))}}}),o(this,"onMouseUp",f=>{this.grabbedElem=null,this.grabbedAt=null}),o(this,"updateState",f=>{const g=Po(f).getAttribute("points").split(" ").map(y=>{const[w,b]=y.split(",").map(S=>parseFloat(S.trim()));return{x:w,y:b}});this.setPoints(g),g.forEach((y,w)=>this.setHandleXY(this.handles[w],y.x,y.y))}),o(this,"destroy",()=>{this.containerGroup.parentNode.removeChild(this.containerGroup),super.destroy()}),this.svg.addEventListener("mousemove",this.onMouseMove),this.svg.addEventListener("mouseup",this.onMouseUp),this.containerGroup=document.createElementNS(on,"g"),this.shape=Aw(l),this.shape.querySelector(".a9s-inner").addEventListener("mousedown",this.onGrab(this.shape)),this.mask=new Dw(c.image,this.shape.querySelector(".a9s-inner")),this.containerGroup.appendChild(this.mask.element),this.elementGroup=document.createElementNS(on,"g"),this.elementGroup.setAttribute("class","a9s-annotation editable selected"),this.elementGroup.setAttribute("data-id",l.id),this.elementGroup.appendChild(this.shape),this.handles=sp(this.shape).map(f=>{const g=this.drawHandle(f.x,f.y);return g.addEventListener("mousedown",this.onGrab(g)),this.elementGroup.appendChild(g),g}),this.containerGroup.appendChild(this.elementGroup),r.appendChild(this.containerGroup),Gu(this.shape,l,a.formatters),this.grabbedElem=null,this.grabbedAt=null}get element(){return this.elementGroup}}class ap extends ip{constructor(l,r,a){super(l,r,a),o(this,"startDrawing",(c,f,g)=>{this._isDrawing=!0,this._startOnSingleClick=g,this.attachListeners({mouseMove:this.onMouseMove,mouseUp:this.onMouseUp,dblClick:this.onDblClick}),this.rubberband=new xN([c,f],this.g,this.env)}),o(this,"stop",()=>{this.detachListeners(),this._isDrawing=!1,this.rubberband&&(this.rubberband.destroy(),this.rubberband=null)}),o(this,"onMouseMove",(c,f)=>this.rubberband.dragTo([c,f])),o(this,"onMouseUp",()=>{const{width:c,height:f}=this.rubberband.getBoundingClientRect(),g=this.config.minSelectionWidth||4,y=this.config.minSelectionHeight||4;c>=g||f>=y?this.rubberband.addPoint():this._startOnSingleClick||(this.emit("cancel"),this.stop())}),o(this,"onDblClick",()=>{this._isDrawing=!1;const c=this.rubberband.element;c.annotation=this.rubberband.toSelection(),this.emit("complete",c),this.stop()}),o(this,"createEditableShape",(c,f)=>new EN(c,this.g,{...this.config,formatters:f},this.env)),this._isDrawing=!1,this._startOnSingleClick=!1}get isDrawing(){return this._isDrawing}}ap.identifier="polygon",ap.supports=s=>{var l;const r=s.selector("SvgSelector");if(r)return(l=r.value)==null?void 0:l.match(/^<svg.*<polygon/g)};class TN extends Bi{constructor(l,r,a){super(),o(this,"listTools",()=>this._registered.map(c=>c.identifier)),o(this,"registerTool",c=>{const f=c.identifier;this.listTools().includes(f)&&this.unregisterTool(f),this._registered.unshift(c)}),o(this,"unregisterTool",c=>this._registered=this._registered.filter(f=>f.identifier!==c)),o(this,"setCurrent",c=>{this._current&&this._current.destroy();const f=typeof c=="string"||c instanceof String?this._registered.find(g=>g.identifier===c):c;this._current=new f(this._g,this._config,this._env),this._current.on("startSelection",g=>this.emit("startSelection",g)),this._current.on("complete",g=>this.emit("complete",g)),this._current.on("cancel",g=>this.emit("cancel",g))}),o(this,"forAnnotation",c=>{var f;const[g,...y]=c.targets,w=(f=g.renderedVia)==null?void 0:f.name,b=w?this._registered.find(S=>S.identifier===w):this._registered.find(S=>S.supports(c));return b?new b(this._g,this._config,this._env):null}),this._g=l,this._config=r,this._env=a,this._registered=[Zu,ap],this.setCurrent(Zu)}get current(){return this._current}}const CN={FragmentSelector:ep,SvgSelector:Aw},PN={FragmentSelector:iN,SvgSelector:gN},Iw=s=>{const l=s.targets[0];if(l)return Array.isArray(l.selector)?l.selector[0]:l.selector},lp=(s,l)=>CN[Iw(s).type](s,l),Mw=(s,l)=>PN[Iw(s).type](s,l);class _N{constructor(l){const r=document.createElementNS(on,"svg");r.setAttribute("class","a9s-osd-crosshair-container");const a=document.createElementNS(on,"g");a.setAttribute("class","a9s-crosshair"),r.appendChild(a);const c=document.createElementNS(on,"line"),f=document.createElementNS(on,"line");a.appendChild(c),a.appendChild(f),l.parentElement.appendChild(r);const g=y=>{const{offsetX:w,offsetY:b}=y,S=l.parentElement.offsetWidth,R=l.parentElement.offsetHeight;c.setAttribute("x1",0),c.setAttribute("y1",b),c.setAttribute("x2",S),c.setAttribute("y2",b),f.setAttribute("x1",w),f.setAttribute("y1",0),f.setAttribute("x2",w),f.setAttribute("y2",R)};l.addEventListener("pointermove",g),l.parentElement.addEventListener("pointermove",g)}}function kN(s,l,r,a,c){Lw(s,l,r||0,a||s.length-1,c||RN)}function Lw(s,l,r,a,c){for(;a>r;){if(a-r>600){var f=a-r+1,g=l-r+1,y=Math.log(f),w=.5*Math.exp(2*y/3),b=.5*Math.sqrt(y*w*(f-w)/f)*(g-f/2<0?-1:1),S=Math.max(r,Math.floor(l-g*w/f+b)),R=Math.min(a,Math.floor(l+(f-g)*w/f+b));Lw(s,l,S,R,c)}var A=s[l],H=r,V=a;for(za(s,r,l),c(s[a],A)>0&&za(s,r,a);H<V;){for(za(s,H,V),H++,V--;c(s[H],A)<0;)H++;for(;c(s[V],A)>0;)V--}c(s[r],A)===0?za(s,r,V):(V++,za(s,V,a)),V<=l&&(r=V+1),l<=V&&(a=V-1)}}function za(s,l,r){var a=s[l];s[l]=s[r],s[r]=a}function RN(s,l){return s<l?-1:s>l?1:0}class ON{constructor(l=9){this._maxEntries=Math.max(4,l),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(l){let r=this.data;const a=[];if(!$u(l,r))return a;const c=this.toBBox,f=[];for(;r;){for(let g=0;g<r.children.length;g++){const y=r.children[g],w=r.leaf?c(y):y;$u(l,w)&&(r.leaf?a.push(y):cp(l,w)?this._all(y,a):f.push(y))}r=f.pop()}return a}collides(l){let r=this.data;if(!$u(l,r))return!1;const a=[];for(;r;){for(let c=0;c<r.children.length;c++){const f=r.children[c],g=r.leaf?this.toBBox(f):f;if($u(l,g)){if(r.leaf||cp(l,g))return!0;a.push(f)}}r=a.pop()}return!1}load(l){if(!(l&&l.length))return this;if(l.length<this._minEntries){for(let a=0;a<l.length;a++)this.insert(l[a]);return this}let r=this._build(l.slice(),0,l.length-1,0);if(!this.data.children.length)this.data=r;else if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){const a=this.data;this.data=r,r=a}this._insert(r,this.data.height-r.height-1,!0)}return this}insert(l){return l&&this._insert(l,this.data.height-1),this}clear(){return this.data=Cs([]),this}remove(l,r){if(!l)return this;let a=this.data;const c=this.toBBox(l),f=[],g=[];let y,w,b;for(;a||f.length;){if(a||(a=f.pop(),w=f[f.length-1],y=g.pop(),b=!0),a.leaf){const S=AN(l,a.children,r);if(S!==-1)return a.children.splice(S,1),f.push(a),this._condense(f),this}!b&&!a.leaf&&cp(a,c)?(f.push(a),g.push(y),y=0,w=a,a=a.children[0]):w?(y++,a=w.children[y],b=!1):a=null}return this}toBBox(l){return l}compareMinX(l,r){return l.minX-r.minX}compareMinY(l,r){return l.minY-r.minY}toJSON(){return this.data}fromJSON(l){return this.data=l,this}_all(l,r){const a=[];for(;l;)l.leaf?r.push(...l.children):a.push(...l.children),l=a.pop();return r}_build(l,r,a,c){const f=a-r+1;let g=this._maxEntries,y;if(f<=g)return y=Cs(l.slice(r,a+1)),Ts(y,this.toBBox),y;c||(c=Math.ceil(Math.log(f)/Math.log(g)),g=Math.ceil(f/Math.pow(g,c-1))),y=Cs([]),y.leaf=!1,y.height=c;const w=Math.ceil(f/g),b=w*Math.ceil(Math.sqrt(g));Nw(l,r,a,b,this.compareMinX);for(let S=r;S<=a;S+=b){const R=Math.min(S+b-1,a);Nw(l,S,R,w,this.compareMinY);for(let A=S;A<=R;A+=w){const H=Math.min(A+w-1,R);y.children.push(this._build(l,A,H,c-1))}}return Ts(y,this.toBBox),y}_chooseSubtree(l,r,a,c){for(;c.push(r),!(r.leaf||c.length-1===a);){let f=1/0,g=1/0,y;for(let w=0;w<r.children.length;w++){const b=r.children[w],S=up(b),R=MN(l,b)-S;R<g?(g=R,f=S<f?S:f,y=b):R===g&&S<f&&(f=S,y=b)}r=y||r.children[0]}return r}_insert(l,r,a){const c=a?l:this.toBBox(l),f=[],g=this._chooseSubtree(c,this.data,r,f);for(g.children.push(l),Ha(g,c);r>=0&&f[r].children.length>this._maxEntries;)this._split(f,r),r--;this._adjustParentBBoxes(c,f,r)}_split(l,r){const a=l[r],c=a.children.length,f=this._minEntries;this._chooseSplitAxis(a,f,c);const g=this._chooseSplitIndex(a,f,c),y=Cs(a.children.splice(g,a.children.length-g));y.height=a.height,y.leaf=a.leaf,Ts(a,this.toBBox),Ts(y,this.toBBox),r?l[r-1].children.push(y):this._splitRoot(a,y)}_splitRoot(l,r){this.data=Cs([l,r]),this.data.height=l.height+1,this.data.leaf=!1,Ts(this.data,this.toBBox)}_chooseSplitIndex(l,r,a){let c,f=1/0,g=1/0;for(let y=r;y<=a-r;y++){const w=ja(l,0,y,this.toBBox),b=ja(l,y,a,this.toBBox),S=LN(w,b),R=up(w)+up(b);S<f?(f=S,c=y,g=R<g?R:g):S===f&&R<g&&(g=R,c=y)}return c||a-r}_chooseSplitAxis(l,r,a){const c=l.leaf?this.compareMinX:DN,f=l.leaf?this.compareMinY:IN,g=this._allDistMargin(l,r,a,c),y=this._allDistMargin(l,r,a,f);g<y&&l.children.sort(c)}_allDistMargin(l,r,a,c){l.children.sort(c);const f=this.toBBox,g=ja(l,0,r,f),y=ja(l,a-r,a,f);let w=Yu(g)+Yu(y);for(let b=r;b<a-r;b++){const S=l.children[b];Ha(g,l.leaf?f(S):S),w+=Yu(g)}for(let b=a-r-1;b>=r;b--){const S=l.children[b];Ha(y,l.leaf?f(S):S),w+=Yu(y)}return w}_adjustParentBBoxes(l,r,a){for(let c=a;c>=0;c--)Ha(r[c],l)}_condense(l){for(let r=l.length-1,a;r>=0;r--)l[r].children.length===0?r>0?(a=l[r-1].children,a.splice(a.indexOf(l[r]),1)):this.clear():Ts(l[r],this.toBBox)}}function AN(s,l,r){if(!r)return l.indexOf(s);for(let a=0;a<l.length;a++)if(r(s,l[a]))return a;return-1}function Ts(s,l){ja(s,0,s.children.length,l,s)}function ja(s,l,r,a,c){c||(c=Cs(null)),c.minX=1/0,c.minY=1/0,c.maxX=-1/0,c.maxY=-1/0;for(let f=l;f<r;f++){const g=s.children[f];Ha(c,s.leaf?a(g):g)}return c}function Ha(s,l){return s.minX=Math.min(s.minX,l.minX),s.minY=Math.min(s.minY,l.minY),s.maxX=Math.max(s.maxX,l.maxX),s.maxY=Math.max(s.maxY,l.maxY),s}function DN(s,l){return s.minX-l.minX}function IN(s,l){return s.minY-l.minY}function up(s){return(s.maxX-s.minX)*(s.maxY-s.minY)}function Yu(s){return s.maxX-s.minX+(s.maxY-s.minY)}function MN(s,l){return(Math.max(l.maxX,s.maxX)-Math.min(l.minX,s.minX))*(Math.max(l.maxY,s.maxY)-Math.min(l.minY,s.minY))}function LN(s,l){const r=Math.max(s.minX,l.minX),a=Math.max(s.minY,l.minY),c=Math.min(s.maxX,l.maxX),f=Math.min(s.maxY,l.maxY);return Math.max(0,c-r)*Math.max(0,f-a)}function cp(s,l){return s.minX<=l.minX&&s.minY<=l.minY&&l.maxX<=s.maxX&&l.maxY<=s.maxY}function $u(s,l){return l.minX<=s.maxX&&l.minY<=s.maxY&&l.maxX>=s.minX&&l.maxY>=s.minY}function Cs(s){return{children:s,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Nw(s,l,r,a,c){const f=[l,r];for(;f.length;){if(r=f.pop(),l=f.pop(),r-l<=a)continue;const g=l+Math.ceil((r-l)/a/2)*a;kN(s,g,l,r,c),f.push(l,g,g,r)}}const dp=(s,l)=>{if(s.targets[0].selector.type==="FragmentSelector"){const{x:r,y:a,w:c,h:f}=Vr(s);return{minX:r,minY:a,maxX:r+c,maxY:a+f}}else{const r=lp(s,l),a=document.createElementNS(on,"svg");a.style.position="absolute",a.style.opacity=0,a.style.top=0,a.style.left=0,a.appendChild(r),document.body.appendChild(a);const{x:c,y:f,width:g,height:y}=r.getBBox();return document.body.removeChild(a),{minX:c,minY:f,maxX:c+g,maxY:f+y}}},NN=s=>{var l;const r=s.targets[0];return Array.isArray(r.selector)?r.selector[0].type:(l=r.selector)==null?void 0:l.type},zN=(s,l,r,a)=>{const c=Po(r),f=c.nodeName.toLowerCase(),g=[s,l];if(f==="polygon"){const y=Array.from(c.points).map(w=>[w.x,w.y]);return rp(g,y)}else if(f==="circle"){const y=c.getAttribute("cx"),w=c.getAttribute("cy"),b=c.getAttribute("r");return dN(g,y,w,b)}else if(f==="ellipse"){const y=c.getAttribute("cx"),w=c.getAttribute("cy"),b=c.getAttribute("rx"),S=c.getAttribute("ry");return hN(g,y,w,b,S)}else{if(f==="path")return Rw(c).find(y=>rp(g,y));if(f==="line"){const y=parseInt(c.getAttribute("x1")),w=parseInt(c.getAttribute("y1")),b=parseInt(c.getAttribute("x2")),S=parseInt(c.getAttribute("y2"));return fN(g,y,w,b,S,a)}else throw`Unsupported SVG shape type: ${f}`}};class jN{constructor(l){o(this,"clear",()=>this.spatial_index.clear()),o(this,"getAnnotationAt",(r,a,c)=>{const f=c?5/c:5,g=this.spatial_index.search({minX:r-f,minY:a-f,maxX:r+f,maxY:a+f}).map(y=>y.annotation).filter(y=>{const w=NN(y);if(w==="FragmentSelector")return!0;if(w==="SvgSelector")return zN(r,a,y,f);throw`Unsupported selector type: ${w}`});if(g.length>0)return g.sort((y,w)=>Mw(y,this.env.image)-Mw(w,this.env.image)),g[0]}),o(this,"getAnnotationsIntersecting",r=>{const a=r.minX,c=a?r:dp(r,this.env.image),f=this.spatial_index.search(c).map(g=>g.annotation);return a?f:f.filter(g=>!g.isEqual(r))}),o(this,"insert",r=>{(Array.isArray(r)?r:[r]).forEach(a=>{this.spatial_index.insert({...dp(a,this.env.image),annotation:a})})}),o(this,"getBounds",r=>this.getBounds(r,this.env.image)),o(this,"remove",r=>{const a={...dp(r,this.env.image),annotation:r};this.spatial_index.remove(a,(c,f)=>c.annotation.id===f.annotation.id)}),this.env=l,l.store=this,this.spatial_index=new ON}}const zw=(s,l)=>{const r=(Jh(l,".a9s-annotation")?l:l.closest(".a9s-annotation")).querySelector(".a9s-outer").getBoundingClientRect(),{canvas:a}=s.drawer,c=a.getBoundingClientRect(),f=a.width/c.width,g=a.height/c.height,y=r.x-c.x,w=r.y-c.y,{width:b,height:S}=r,R=document.createElement("CANVAS"),A=R.getContext("2d");R.width=b,R.height=S,A.drawImage(a,y*f,w*g,b*f,S*g,0,0,b,S);const H=s.viewport.viewerElementToImageCoordinates(new OpenSeadragon.Point(y,w)),V=s.viewport.viewportToImageZoom(s.viewport.getZoom());return{snippet:R,transform:oe=>{const ne=H.x+oe[0]/f/V,ue=H.y+oe[1]/g/V;return[ne,ue]}}},HN=np();class jw extends Bi{constructor(l){super(),o(this,"_getShapeAt",a=>{const c=w=>{const b=this.svg.createSVGPoint();if(window.TouchEvent&&w instanceof TouchEvent){const S=this.svg.getBoundingClientRect(),R=w.touches[0],A=R.clientX-S.x,H=R.clientY-S.y,{left:V,top:oe}=this.svg.getBoundingClientRect();return b.x=A+V,b.y=H+oe,b.matrixTransform(this.g.getScreenCTM().inverse())}else return b.x=w.offsetX,b.y=w.offsetY,b.matrixTransform(this.g.getCTM().inverse())},{x:f,y:g}=c(a),y=this.store.getAnnotationAt(f,g,this.currentScale());if(y)return this.findShape(y)}),o(this,"_initDrawingTools",a=>{var c;let f=!1,g=!1,y=!1;this.tools=new TN(this.g,this.config,this.env),this.tools.on("complete",S=>{g=!1,this.onDrawingComplete(S)}),this.mouseTracker=new Wr.MouseTracker({element:this.svg,preProcessEventHandler:S=>{this.mouseTracker.enabled||(S.preventDefault=!1,S.preventGesture=!0),this.selectedShape&&S.eventType==="wheel"&&(S.preventDefault=!1,this.viewer.canvas.dispatchEvent(new S.originalEvent.constructor(S.eventType,S.originalEvent)))},pressHandler:S=>{this.tools.current.isDrawing||(this.tools.current.start(S.originalEvent,this.drawOnSingleClick&&!this.hoveredShape),a||this.scaleTool(this.tools.current))},moveHandler:S=>{if(this.tools.current.isDrawing){const{x:R,y:A}=this.tools.current.getSVGPoint(S.originalEvent);!S.buttons||!g?(S.originalEvent.stopPropagation(),this.tools.current.onMouseMove(R,A,S.originalEvent),f||(this.emit("startSelection",{x:R,y:A}),f=!0)):(!y&&this.tools.current.onDragStart&&this.tools.current.onDragStart(R,A,S.originalEvent),y=!0)}},releaseHandler:S=>{if(this.tools.current.isDrawing){g=!0;const{x:R,y:A}=this.tools.current.getSVGPoint(S.originalEvent);f&&this.emit("endSelection",{x:R,y:A}),this.tools.current.onMouseUp(R,A,S.originalEvent),y&&this.tools.current.onDragEnd&&this.tools.current.onDragEnd()}f=!1,y=!1}});const w=this.config.hotkey?this.config.hotkey.key?this.config.hotkey.key.toLowerCase():this.config.hotkey.toLowerCase():"shift",b=(c=this.config.hotkey)==null?void 0:c.inverted;this.mouseTracker.enabled=b,this.onKeyDown&&document.removeEventListener("keydown",this.onKeyDown),this.onKeyUp&&document.removeEventListener("keydown",this.onKeyDown),this.onKeyDown=S=>{if(S.key.toLowerCase()===w&&!this.selectedShape){const R=!this.readOnly&&!b;this.mouseTracker.enabled=R,this.tools.current.enabled=R}},this.onKeyUp=S=>{S.key.toLowerCase()===w&&!this.tools.current.isDrawing&&(this.mouseTracker.enabled=b,this.tools.current.enabled=b)},document.addEventListener("keydown",this.onKeyDown),document.addEventListener("keyup",this.onKeyUp)}),o(this,"_initMouseEvents",()=>{this.svg.addEventListener("mousemove",c=>{var f,g;if(!((f=this.tools)!=null&&f.current.isDrawing)&&!c.target.closest(".a9s-annotation.editable.selected")){const y=this._getShapeAt(c);if(y?.annotation!==((g=this.hoveredShape)==null?void 0:g.annotation)){if(this.hoveredShape){const w=this.hoveredShape.element||this.hoveredShape;Bu(w,"hover"),this.emit("mouseLeaveAnnotation",this.hoveredShape.annotation,this.hoveredShape)}y&&(Or(y,"hover"),this.emit("mouseEnterAnnotation",y.annotation,y))}this.hoveredShape=y}}),this.svg.parentElement.addEventListener("mouseleave",()=>{this.hoveredShape&&(Bu(this.hoveredShape,"hover"),this.emit("mouseLeaveAnnotation",this.hoveredShape.annotation,this.hoveredShape),this.hoveredShape=null)});let a=null;this.viewer.addHandler("canvas-press",()=>a=new Date().getTime()),this.viewer.addHandler("canvas-click",c=>{var f;const{originalEvent:g}=c;if(!((f=this.tools.current)!=null&&f.isDrawing||this.disableSelect)&&new Date().getTime()-a<250){const y=g.target.closest(".a9s-annotation.editable.selected")?this.selectedShape:this._getShapeAt(g);y?(c.preventDefaultAction=!0,this.selectShape(y)):y||(this.deselect(),this.emit("select",{}))}this.disableSelect&&this.hoveredShape&&this.emit("clickAnnotation",this.hoveredShape.annotation,this.hoveredShape)})}),o(this,"_lazy",a=>{if(this.viewer.world.getItemAt(0))a();else{const c=()=>{a(),this.viewer.removeHandler("open",c),this.viewer.world.removeHandler("add-item",c)};this.viewer.addHandler("open",c),this.viewer.world.addHandler("add-item",c)}}),o(this,"_refreshNonScalingAnnotations",()=>{const a=this.currentScale();Array.from(this.svg.querySelectorAll(".a9s-non-scaling")).forEach(c=>c.setAttribute("transform",`scale(${1/a})`))}),o(this,"addAnnotation",(a,c)=>{const f=c||this.g,g=lp(a,this.env.image);return Or(g,"a9s-annotation"),g.setAttribute("data-id",a.id),g.annotation=a,f.appendChild(g),Gu(g,a,this.formatters),this.scaleFormatterElements(g),g}),o(this,"addDrawingTool",a=>this.tools.registerTool(a)),o(this,"addOrUpdateAnnotation",(a,c)=>{var f;const g=(f=this.selectedShape)==null?void 0:f.annotation;(g===a||g!=null&&g.isSelection||g==c)&&this.deselect(),c&&this.removeAnnotation(a),this.removeAnnotation(a);const y=this.addAnnotation(a);Jh(y,"a9s-non-scaling")&&y.setAttribute("transform",`scale(${1/this.currentScale()})`),this.store.insert(a)}),o(this,"currentScale",()=>{const a=this.viewer.viewport.getContainerSize().x;return this.viewer.viewport.getZoom(!0)*a/this.viewer.world.getContentFactor()}),o(this,"deselect",()=>{var a;if((a=this.tools)==null||a.current.stop(),this.selectedShape){const{annotation:c}=this.selectedShape;if(this.selectedShape.destroy){if(this.selectedShape.mouseTracker.destroy(),this.selectedShape.destroy(),!c.isSelection){const f=this.addAnnotation(c);Jh(f,"a9s-non-scaling")&&f.setAttribute("transform",`scale(${1/this.currentScale()})`)}}else Bu(this.selectedShape,"selected");this.selectedShape=null}}),o(this,"destroy",()=>{this.deselect(),this.svg.parentNode.removeChild(this.svg)}),o(this,"findShape",a=>{const c=a!=null&&a.id?a.id:a;return this.g.querySelector(`.a9s-annotation[data-id="${c}"]`)}),o(this,"_fit",(a,c,f)=>{const g=this.findShape(a);if(g){const y=c?typeof c=="boolean"?c:c.immediately:!1,w=c?.padding||0,b=this.viewer.container.getBoundingClientRect(),S=Math.min(2*w/b.width,2*w/b.height),{x:R,y:A,width:H,height:V}=g.getBBox(),oe=R-S*H,ne=A-S*V,ue=H+2*S*H,M=V+2*S*V,re=this.viewer.viewport.imageToViewportRectangle(oe,ne,ue,M);this.viewer.viewport[f](re,y)}}),o(this,"fitBounds",(a,c)=>this._fit(a,c,"fitBounds")),o(this,"fitBoundsWithConstraints",(a,c)=>this._fit(a,c,"fitBoundsWithConstraints")),o(this,"getAnnotations",()=>Array.from(this.g.querySelectorAll(".a9s-annotation")).map(a=>a.annotation)),o(this,"getAnnotationsIntersecting",a=>{const c=a.id?a:this.findShape(a).annotation;return this.store.getAnnotationsIntersecting(c)}),o(this,"getImageSnippetById",a=>{const c=this.findShape(a);if(c)return zw(this.viewer,c)}),o(this,"getSelectedImageSnippet",()=>{var a;if(this.selectedShape){const c=(a=this.selectedShape.element)!=null?a:this.selectedShape;return zw(this.viewer,c)}}),o(this,"init",a=>{this.deselect(),Array.from(this.g.querySelectorAll(".a9s-annotation")).forEach(c=>this.g.removeChild(c)),this.store.clear(),this._lazy(()=>{console.time("Took"),console.log("Drawing..."),this.loaded||(this.g.style.display="none"),a.forEach(c=>this.addAnnotation(c)),console.log("Indexing..."),this.store.insert(a),console.timeEnd("Took"),this.resize()})}),o(this,"listDrawingTools",()=>this.tools.listTools()),o(this,"overrideId",(a,c)=>{const f=this.findShape(a);f.setAttribute("data-id",c);const{annotation:g}=f,y=g.clone({id:c});return f.annotation=y,this.store.remove(g),this.store.insert(y),y}),o(this,"panTo",(a,c)=>{const f=this.findShape(a);if(f){const{top:g,left:y,width:w,height:b}=f.getBoundingClientRect(),S=y+w/2+window.scrollX,R=g+b/2+window.scrollY,A=this.viewer.viewport.windowToViewportCoordinates(new Wr.Point(S,R));this.viewer.viewport.panTo(A,c)}}),o(this,"removeAnnotation",a=>{var c,f;const g=a.type?a.id:a;((c=this.selectedShape)==null?void 0:c.annotation.id)===g&&this.deselect();const y=this.findShape(a);if(y){const{annotation:w}=y;((f=this.selectedShape)==null?void 0:f.annotation)===w&&this.deselect(),y.parentNode.removeChild(y),this.store.remove(w)}}),o(this,"removeDrawingTool",a=>{var c;return(c=this.tools)==null?void 0:c.unregisterTool(a)}),o(this,"scaleFormatterElements",a=>{const c=1/this.currentScale();if(a){const f=a.querySelector(".a9s-formatter-el");f&&f.firstChild.setAttribute("transform",`scale(${c})`)}else Array.from(this.g.querySelectorAll(".a9s-formatter-el")).forEach(f=>f.firstChild.setAttribute("transform",`scale(${c})`))}),o(this,"scaleTool",a=>{if(a){const c=1/this.currentScale();a.scale=c,a.onScaleChanged&&a.onScaleChanged(c)}}),o(this,"selectAnnotation",(a,c)=>{this.selectedShape&&this.deselect();const f=this.findShape(a);if(f){this.selectShape(f,c);const g=this.selectedShape.element?this.selectedShape.element:this.selectedShape;return{annotation:f.annotation,element:g}}else this.deselect()}),o(this,"selectShape",(a,c)=>{var f;if(!c&&!a.annotation.isSelection&&this.emit("clickAnnotation",a.annotation,a),((f=this.selectedShape)==null?void 0:f.annotation)===a.annotation)return;this.selectedShape&&this.selectedShape.annotation!==a.annotation&&this.deselect();const{annotation:g}=a;if(this.readOnly||g.readOnly||this.headless)this.selectedShape=a,Or(a,"selected"),c||this.emit("select",{annotation:g,element:a,skipEvent:c});else{const y=this.tools.forAnnotation(g);if(y){setTimeout(()=>{a.parentNode.removeChild(a),c||this.emit("select",{annotation:g,element:this.selectedShape.element})},1),this.selectedShape=y.createEditableShape(g,this.formatters),this.scaleTool(this.selectedShape),this.scaleFormatterElements(this.selectedShape.element),this.selectedShape.element.annotation=g;const w=new Wr.MouseTracker({element:this.svg,preProcessEventHandler:b=>{b.stopPropagation=!0,b.preventDefault=!1,b.preventGesture=!0}}).setTracking(!1);this.selectedShape.element.addEventListener("mouseenter",()=>{this.hoveredShape=this.selectedShape,w.setTracking(!0)}),this.selectedShape.element.addEventListener("mouseleave",()=>{this.hoveredShape=null,w.setTracking(!1)}),this.selectedShape.mouseTracker=w,this.selectedShape.on("update",b=>this.emit("updateTarget",this.selectedShape.element,b))}else this.selectedShape=a,c||this.emit("select",{annotation:g,element:this.selectedShape})}}),o(this,"setDrawingEnabled",a=>{if(this.mouseTracker){const c=a&&!this.readOnly;this.mouseTracker.enabled=c,this.mouseTracker.setTracking(c),this.tools.current&&(this.tools.current.enabled=c)}}),o(this,"setDrawingTool",a=>{var c;this.tools&&((c=this.tools.current)==null||c.stop(),this.tools.setCurrent(a))}),o(this,"setVisible",a=>{a?this.svg.style.display=null:(this.deselect(),this.svg.style.display="none")}),o(this,"stopDrawing",()=>{var a;(a=this.tools)!=null&&a.current&&(this.tools.current.isDrawing&&this.tools.current.stop(),this.mouseTracker.enabled=!1,this.tools.current.enabled=!1)}),this.viewer=l.viewer,this.config=l.config,this.env=l.env,this.readOnly=l.config.readOnly,this.headless=l.config.headless,l.config.formatter?this.formatters=[l.config.formatter]:l.config.formatters&&(this.formatters=Array.isArray(l.config.formatters)?l.config.formatters:[l.config.formatters]),this.disableSelect=l.config.disableSelect,this.drawOnSingleClick=l.config.drawOnSingleClick,this.svg=document.createElementNS(on,"svg"),HN?(this.svg.setAttribute("class","a9s-annotationlayer a9s-osd-annotationlayer touch"),sN(this.svg)):this.svg.setAttribute("class","a9s-annotationlayer a9s-osd-annotationlayer"),this.g=document.createElementNS(on,"g"),this.svg.appendChild(this.g),this.viewer.canvas.appendChild(this.svg),this.viewer.addHandler("animation",()=>this.resize()),this.viewer.addHandler("rotate",()=>this.resize()),this.viewer.addHandler("resize",()=>this.resize()),this.viewer.addHandler("flip",()=>this.resize()),this.loaded=!1;const r=()=>{const{x:a,y:c}=this.viewer.world.getItemAt(0).source.dimensions,f=this.viewer.world.getItemAt(0).source["@id"]||new URL(this.viewer.world.getItemAt(0).source.url,document.baseURI).href;this.env.image={src:f,naturalWidth:a,naturalHeight:c},l.config.crosshair&&(this.crosshair||(this.crosshair=new _N(this.svg),Or(this.svg,"no-cursor"))),this.loaded||this.emit("load",f),this.loaded=!0,this.g.style.display="inline",this.resize()};this.viewer.addHandler("open",r),this.viewer.world.addHandler("add-item",r),this.viewer.world.getItemAt(0)&&r(),this.store=new jN(this.env),this.selectedShape=null,this.hoveredShape=null,this._initMouseEvents()}resize(){var l;const r=this.viewer.viewport.getFlip(),a=this.viewer.viewport.pixelFromPoint(new Wr.Point(0,0),!0);r&&(a.x=this.viewer.viewport._containerInnerSize.x-a.x);const c=this.currentScale(),f=r?-c:c,g=this.viewer.viewport.getRotation();this.g.setAttribute("transform",`translate(${a.x}, ${a.y}) scale(${f}, ${c}) rotate(${g})`),this._refreshNonScalingAnnotations(),this.scaleFormatterElements(),this.selectedShape&&(this.selectedShape.element?(this.scaleTool(this.selectedShape),this.emit("viewportChange",this.selectedShape.element)):this.emit("viewportChange",this.selectedShape)),(l=this.tools)!=null&&l.current&&this.scaleTool(this.tools.current)}}class FN extends jw{constructor(l){super(l),o(this,"onDrawingComplete",r=>{var a;this.mouseTracker.enabled=(a=this.config.hotkey)==null?void 0:a.inverted,this.selectShape(r),this.emit("createSelection",r.annotation)}),this._initDrawingTools()}}const hp=s=>{const l=s.viewport.viewportToImageRectangle(s.viewport.getBounds(!0)),r=s.viewport.getContainerSize().x,a=s.viewport.getZoom(!0)*r/s.world.getContentFactor();return{extent:l,scale:a}},BN=s=>{var l;const r=s.targets[0];return r?Array.isArray(r.selector)?r.selector[0].type:(l=r.selector)==null?void 0:l.type:null},Hw=(s,l)=>{const{extent:r,scale:a}=hp(s),{selector:c}=l,f=Co.create({target:l});if(c.type==="SvgSelector"){const g=Po(f),y=g.nodeName.toLowerCase();let w=null;if(y==="polygon")w=UN(g,r,a);else if(y==="circle")w=WN(g,r,a);else if(y==="ellipse")w=VN(g,r,a);else if(y==="path")w=GN(g,r,a);else throw`Unsupported SVG shape type: ${y}`;let b=w.outerHTML||new XMLSerializer().serializeToString(w);return b=b.replace(` xmlns="${on}"`,""),{...l,selector:{type:"SvgSelector",value:`<svg>${b}</svg>`}}}else if(c.type==="FragmentSelector"){const{x:g,y,w,h:b}=Vr(f),S=r.x+g/a,R=r.y+y/a,A=w/a,H=b/a;return w===0&&b===0?{...Es(S,R,A,H),renderedVia:{name:"point"}}:Es(S,R,A,H)}else throw`Unsupported selector type: ${c.type}`},UN=(s,l,r)=>{const a=Array.from(s.points).map(c=>{const f=l.x+c.x/r,g=l.y+c.y/r;return f+","+g}).join(" ");return s.setAttribute("points",a),s},WN=(s,l,r)=>{const a=parseFloat(s.getAttribute("cx")),c=parseFloat(s.getAttribute("cy")),f=parseFloat(s.getAttribute("r"));return s.setAttribute("cx",l.x+a/r),s.setAttribute("cy",l.y+c/r),s.setAttribute("r",f/r),s},VN=(s,l,r)=>{const a=parseFloat(s.getAttribute("cx")),c=parseFloat(s.getAttribute("cy")),f=parseFloat(s.getAttribute("rx")),g=parseFloat(s.getAttribute("ry"));return s.setAttribute("cx",l.x+a/r),s.setAttribute("cy",l.y+c/r),s.setAttribute("rx",f/r),s.setAttribute("ry",g/r),s},GN=(s,l,r)=>{const a=s.getAttribute("d").split(/(?=M|m|L|l|H|h|V|v|Z|z)/g).map(c=>c.trim()).map(c=>{const f=c.substring(0,1);if(f.toLowerCase()==="z")return f;{const g=c.substring(1).split(" ").map(S=>parseFloat(S.trim())),y=f===f.toUpperCase(),w=y?l.x+g[0]/r:g[0]/r,b=y?l.y+g[1]/r:g[1]/r;return f+" "+w+" "+b}}).join(" ");return s.setAttribute("d",a),s},Fw=(s,l)=>{const{extent:r,scale:a}=hp(s),c=l.selector("FragmentSelector");if(l.selector("SvgSelector")){const f=Po(l),g=f.nodeName.toLowerCase();let y=null;if(g==="polygon")y=qN(f,r,a);else if(g==="circle")y=ZN(f,r,a);else if(g==="ellipse")y=XN(f,r,a);else if(g==="path")y=YN(f,r,a);else throw`Unsupported SVG shape type: ${g}`;let w=y.outerHTML||new XMLSerializer().serializeToString(y);w=w.replace(` xmlns="${on}"`,"");const b={selector:{type:"SvgSelector",value:`<svg>${w}</svg>`}};return l.clone({target:b})}else if(c){const{x:f,y:g,w:y,h:w}=Vr(l),b=(f-r.x)*a,S=(g-r.y)*a,R=Es(b,S,y*a,w*a);return l.clone({target:R})}},qN=(s,l,r)=>{const a=Array.from(s.points).map(c=>{const f=r*(c.x-l.x),g=r*(c.y-l.y);return f+","+g}).join(" ");return s.setAttribute("points",a),s},ZN=(s,l,r)=>{const a=s.getAttribute("cx"),c=s.getAttribute("cy"),f=s.getAttribute("r");return s.setAttribute("cx",r*(a-l.x)),s.setAttribute("cy",r*(c-l.y)),s.setAttribute("r",f*r),s},XN=(s,l,r)=>{const a=s.getAttribute("cx"),c=s.getAttribute("cy"),f=s.getAttribute("rx"),g=s.getAttribute("ry");return s.setAttribute("cx",r*(a-l.x)),s.setAttribute("cy",r*(c-l.y)),s.setAttribute("rx",f*r),s.setAttribute("ry",g*r),s},YN=(s,l,r)=>{const a=s.getAttribute("d").split(/(?=M|m|L|l|H|h|V|v|Z|z)/g).map(c=>c.trim()).map(c=>{const f=c.substring(0,1);if(f.toLowerCase()==="z")return f;{const g=c.substring(1).split(" ").filter(S=>S).map(S=>parseFloat(S.trim())),y=f===f.toUpperCase(),w=y?r*(g[0]-l.x):r*g[0],b=y?r*(g[1]-l.y):r*g[1];return f+" "+w+" "+b}}).join(" ");return s.setAttribute("d",a),s},Bw=(s,l)=>{const{extent:r,scale:a}=hp(s),c=BN(l.annotation);if(c==="FragmentSelector")$N(l,r,a);else if(c==="SvgSelector")KN(l,r,a);else throw`Unsupported selector type type: ${c}`;const f=l.querySelector(".a9s-formatter-el");if(f){const{x:g,y}=l.querySelector(".a9s-inner").getBBox();f.setAttribute("x",g),f.setAttribute("y",y)}},$N=(s,l,r)=>{const{x:a,y:c,w:f,h:g}=Vr(s.annotation),y=s.querySelector(".a9s-outer"),w=s.querySelector(".a9s-inner"),b=r*(a-l.x),S=r*(c-l.y);f===0&&g===0?[y,w].forEach(R=>{R.setAttribute("cx",b),R.setAttribute("cy",S)}):[y,w].forEach(R=>{R.setAttribute("x",b),R.setAttribute("y",S),R.setAttribute("width",f*r),R.setAttribute("height",g*r)})},KN=(s,l,r)=>{const a=Po(s.annotation),c=a.nodeName.toLowerCase();if(c==="polygon")QN(s,a,l,r);else if(c==="circle")JN(s,a,l,r);else if(c==="ellipse")e9(s,a,l,r);else if(c==="path")t9(s,a,l,r);else throw`Unsupported SVG shape type: ${c}`},QN=(s,l,r,a)=>{const c=Array.from(l.points).map(f=>{const g=a*(f.x-r.x),y=a*(f.y-r.y);return g+","+y}).join(" ");s.querySelector(".a9s-outer").setAttribute("points",c),s.querySelector(".a9s-inner").setAttribute("points",c)},JN=(s,l,r,a)=>{const c=a*(l.getAttribute("cx")-r.x),f=a*(l.getAttribute("cy")-r.y),g=a*l.getAttribute("r"),y=s.querySelector(".a9s-outer");y.setAttribute("cx",c),y.setAttribute("cy",f),y.setAttribute("r",g);const w=s.querySelector(".a9s-inner");w.setAttribute("cx",c),w.setAttribute("cy",f),w.setAttribute("r",g)},e9=(s,l,r,a)=>{const c=a*(l.getAttribute("cx")-r.x),f=a*(l.getAttribute("cy")-r.y),g=a*l.getAttribute("rx"),y=a*l.getAttribute("ry"),w=s.querySelector(".a9s-outer");w.setAttribute("cx",c),w.setAttribute("cy",f),w.setAttribute("rx",g),w.setAttribute("ry",y);const b=s.querySelector(".a9s-inner");b.setAttribute("cx",c),b.setAttribute("cy",f),b.setAttribute("rx",g),b.setAttribute("ry",y)},t9=(s,l,r,a)=>{const c=l.getAttribute("d").split(/(?=M|m|L|l|H|h|V|v|Z|z)/g).map(f=>f.trim()).map(f=>{const g=f.substring(0,1);if(g.toLowerCase()==="z")return g;{const y=f.substring(1).split(" ").filter(R=>R).map(R=>parseFloat(R.trim())),w=g===g.toUpperCase(),b=w?a*(y[0]-r.x):a*y[0],S=w?a*(y[1]-r.y):a*y[1];return g+" "+b+" "+S}}).join(" ");s.querySelector(".a9s-inner").setAttribute("d",c),s.querySelector(".a9s-outer").setAttribute("d",c)},n9=np();class i9 extends jw{constructor(l){super(l),o(this,"_fit",(r,a,c)=>{const f=a?typeof a=="boolean"?a:a.immediately:!1,g=a?.padding||0,y=this.findShape(r);if(y){const w=this.viewer.container.getBoundingClientRect(),b=y.getBoundingClientRect(),S=b.x-w.x,R=b.y-w.y,{width:A,height:H}=b,V=S-g,oe=R-g,ne=A+2*g,ue=H+2*g,M=this.viewer.viewport.viewerElementToViewportRectangle(new Wr.Rect(V,oe,ne,ue));this.viewer.viewport[c](M,f)}}),o(this,"_getShapeAt",r=>{const a=w=>{if(n9){const b=this.svg.getBoundingClientRect(),S=w.clientX-b.x,R=w.clientY-b.y;return new Wr.Point(S,R)}else return new Wr.Point(w.offsetX,w.offsetY)},c=this.viewer.viewport.viewerElementToViewportCoordinates(a(r)),{x:f,y:g}=this.viewer.viewport.viewportToImageCoordinates(c.x,c.y),y=this.store.getAnnotationAt(f,g,this.currentScale());if(y)return this.findShape(y)}),o(this,"_refreshNonScalingAnnotations",()=>{}),o(this,"addAnnotation",(r,a)=>{const c=a||this.g,f=lp(r,this.env.image);return Or(f,"a9s-annotation"),f.setAttribute("data-id",r.id),f.annotation=r,Bw(this.viewer,f),c.appendChild(f),Gu(f,r,this.formatters),f}),o(this,"addOrUpdateAnnotation",(r,a)=>{var c;const f=(c=this.selectedShape)==null?void 0:c.annotation;(f===r||f!=null&&f.isSelection||f==a)&&this.deselect(),a&&this.removeAnnotation(r),this.removeAnnotation(r),this.addAnnotation(r),this.store.insert(r)}),o(this,"deselect",()=>{var r;if((r=this.tools)==null||r.current.stop(),this.selectedShape){const{annotation:a}=this.selectedShape;this.selectedShape.destroy?(this.selectedShape.mouseTracker.destroy(),this.selectedShape.destroy(),a.isSelection||this.addAnnotation(a)):Bu(this.selectedShape,"selected"),this.selectedShape=null}}),o(this,"onDrawingComplete",r=>{const a=r.annotation.clone({target:Hw(this.viewer,r.annotation.target)});r.annotation=a,this.selectShape(r),this.emit("createSelection",r.annotation),this.mouseTracker.enabled=!1}),o(this,"selectShape",(r,a)=>{var c;if(!a&&!r.annotation.isSelection&&this.emit("clickAnnotation",r.annotation,r),((c=this.selectedShape)==null?void 0:c.annotation)===r.annotation)return;this.selectedShape&&this.selectedShape.annotation!==r.annotation&&this.deselect(!0);const{annotation:f}=r;if(this.readOnly||f.readOnly||this.headless)this.selectedShape=r,Or(r,"selected"),a||this.emit("select",{annotation:f,element:r,skipEvent:a});else{setTimeout(()=>{r.parentNode.removeChild(r),a||this.emit("select",{annotation:f,element:this.selectedShape.element})},1);const g=this.tools.forAnnotation(f);this.selectedShape=g.createEditableShape(f),this.selectedShape.element.annotation=f;const y=Fw(this.viewer,f);this.selectedShape.updateState(y);const w=new Wr.MouseTracker({element:this.svg,preProcessEventHandler:b=>{b.stopPropagation=!0,b.preventDefault=!1,b.preventGesture=!0}}).setTracking(!1);this.selectedShape.element.addEventListener("mouseenter",()=>{this.hoveredShape=this.selectedShape,w.setTracking(!0)}),this.selectedShape.element.addEventListener("mouseleave",()=>{this.hoveredShape=null,w.setTracking(!1)}),this.selectedShape.mouseTracker=w,this.selectedShape.on("update",b=>{const S=Hw(this.viewer,b);this.selectedShape.element.annotation=this.selectedShape.annotation.clone({target:S}),this.emit("updateTarget",this.selectedShape.element,S)})}}),this._initDrawingTools(!0)}resize(){if(this.store&&(Array.from(this.g.querySelectorAll(".a9s-annotation:not(.selected)")).forEach(l=>Bw(this.viewer,l)),this.selectedShape))if(this.selectedShape.element){const l=Fw(this.viewer,this.selectedShape.element.annotation);this.selectedShape.updateState&&this.selectedShape.updateState(l),this.emit("viewportChange",this.selectedShape.element)}else this.emit("viewportChange",this.selectedShape)}}var r9=0;function Uw(s,l,r,a,c){var f,g,y={};for(g in l)g=="ref"?f=l[g]:y[g]=l[g];var w={type:s,props:y,key:r,ref:f,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--r9,__source:a,__self:c};if(typeof s=="function"&&(f=s.defaultProps))for(g in f)y[g]===void 0&&(y[g]=f[g]);return h.vnode&&h.vnode(w),w}class o9 extends te{constructor(l){super(l),o(this,"clearState",r=>this.setState({selectedAnnotation:null,selectedDOMElement:null,modifiedTarget:null,beforeHeadlessModify:null},r)),o(this,"forwardEvent",(r,a)=>{this.annotationLayer.on(r,(c,f)=>{this.props[a](c.clone(),f)})}),o(this,"onKeyUp",r=>{if(r.which===27){this.annotationLayer.stopDrawing();const{selectedAnnotation:a}=this.state;a&&(this.cancelSelected(),this.props.onCancelSelected(a))}else if(r.which===46){const{disableDeleteKey:a}=this.props.config;if(!a){const{selectedAnnotation:c}=this.state;c&&(c.isSelection?this.onCancelAnnotation(c):this.onDeleteAnnotation(c))}}}),o(this,"handleStartSelect",r=>this.props.onSelectionStarted(r)),o(this,"handleEndSelect",r=>this.props.onSelectionEnded(r)),o(this,"handleSelect",(r,a)=>{this.state.editorDisabled?this.onHeadlessSelect(r,a):this.onNormalSelect(r,a)}),o(this,"onNormalSelect",(r,a)=>{const{annotation:c,element:f}=r;if(c){const g=()=>{this.setState({selectedAnnotation:c,selectedDOMElement:f,modifiedTarget:null},()=>{a||(c.isSelection?this.props.onSelectionCreated(c.clone()):this.props.onAnnotationSelected(c.clone(),f))})},{selectedAnnotation:y}=this.state;y&&!y.isEqual(c)?this.clearState(()=>{this.props.onCancelSelected(y),g()}):g()}else{const{selectedAnnotation:g}=this.state;g?this.clearState(()=>this.props.onCancelSelected(g)):this.clearState()}}),o(this,"onHeadlessSelect",(r,a)=>{this.saveSelected().then(()=>{this.onNormalSelect(r,a)})}),o(this,"handleUpdateTarget",(r,a)=>{this.setState({selectedDOMElement:r,modifiedTarget:a});const c=JSON.parse(JSON.stringify(a));this.props.onSelectionTargetChanged(c)}),o(this,"handleViewportChange",r=>this.setState({selectedDOMElement:r})),o(this,"overrideAnnotationId",r=>a=>{const{id:c}=r;this.state.selectedAnnotation?this.setState({selectedAnnotation:null,selectedDOMElement:null,modifiedTarget:null},()=>{this.annotationLayer.overrideId(c,a)}):this.annotationLayer.overrideId(c,a)}),o(this,"onCreateOrUpdateAnnotation",(r,a)=>(c,f)=>{let g=c.isSelection?c.toAnnotation():c;g=this.state.modifiedTarget?g.clone({target:this.state.modifiedTarget}):g.clone(),this.clearState(()=>{this.annotationLayer.addOrUpdateAnnotation(g,f),f?this.props[r](g,f.clone()):this.props[r](g,this.overrideAnnotationId(g)),a&&a()})}),o(this,"onDeleteAnnotation",r=>{this.clearState(),this.annotationLayer.removeAnnotation(r),this.props.onAnnotationDeleted(r)}),o(this,"onCancelAnnotation",(r,a)=>{this.state.editorDisabled||this.annotationLayer.deselect(),this.props.onCancelSelected(r),this.clearState(a)}),o(this,"addAnnotation",r=>{var a;r.id===((a=this.state.selectedAnnotation)==null?void 0:a.id)&&(this.annotationLayer.deselect(),this.clearState()),this.annotationLayer.addOrUpdateAnnotation(r.clone())}),o(this,"addDrawingTool",r=>this.annotationLayer.addDrawingTool(r)),o(this,"cancelSelected",()=>new Promise(r=>{this.annotationLayer.deselect(),this.state.selectedAnnotation?this.clearState(r):r()})),o(this,"fitBounds",(r,a)=>this.annotationLayer.fitBounds(r,a)),o(this,"fitBoundsWithConstraints",(r,a)=>this.annotationLayer.fitBoundsWithConstraints(r,a)),o(this,"getAnnotationById",r=>{var a;return(a=this.annotationLayer.findShape(r))==null?void 0:a.annotation}),o(this,"getAnnotations",()=>this.annotationLayer.getAnnotations().map(r=>r.clone())),o(this,"getAnnotationsIntersecting",r=>this.annotationLayer.getAnnotationsIntersecting(r)),o(this,"getImageSnippetById",r=>this.annotationLayer.getImageSnippetById(r)),o(this,"getSelected",()=>{var r;if(this.state.selectedAnnotation)return this.state.editorDisabled?this.state.selectedAnnotation:(r=this._editor.current)==null?void 0:r.getCurrentAnnotation()}),o(this,"getSelectedImageSnippet",()=>this.annotationLayer.getSelectedImageSnippet()),o(this,"listDrawingTools",()=>this.annotationLayer.listDrawingTools()),o(this,"panTo",(r,a)=>this.annotationLayer.panTo(r,a)),o(this,"removeAnnotation",r=>this.annotationLayer.removeAnnotation(r)),o(this,"removeDrawingTool",r=>this.annotationLayer.removeDrawingTool(r)),o(this,"saveSelected",()=>new Promise(r=>{const a=this.state.selectedAnnotation;if(a)if(this._editor.current)this._editor.current.onOk(),r();else if(a.isSelection)a.bodies.length>0||this.props.config.allowEmpty?this.onCreateOrUpdateAnnotation("onAnnotationCreated",r)(a):(this.annotationLayer.deselect(),r());else{const{beforeHeadlessModify:c,modifiedTarget:f}=this.state;c?this.onCreateOrUpdateAnnotation("onAnnotationUpdated",r)(a,c):f?this.onCreateOrUpdateAnnotation("onAnnotationUpdated",r)(a,a):this.onCancelAnnotation(a,r)}else r()})),o(this,"selectAnnotation",r=>{const a=this.annotationLayer.selectAnnotation(r,!0);if(a)return this.handleSelect(a,!0),a.annotation.clone();this.clearState()}),o(this,"setAnnotations",r=>this.annotationLayer.init(r.map(a=>a.clone()))),o(this,"setDrawingEnabled",r=>this.annotationLayer.setDrawingEnabled(r)),o(this,"setDrawingTool",r=>this.annotationLayer.setDrawingTool(r)),o(this,"setVisible",r=>{this.annotationLayer.setVisible(r),r||this.clearState()}),o(this,"updateSelected",(r,a)=>new Promise(c=>{this.state.selectedAnnotation&&(a?this.state.selectedAnnotation.isSelection?this.onCreateOrUpdateAnnotation("onAnnotationCreated",c)(r):this.onCreateOrUpdateAnnotation("onAnnotationUpdated",c)(r,this.state.selectedAnnotation):this.setState({selectedAnnotation:r,beforeHeadlessModify:this.state.beforeHeadlessModify||this.state.selectedAnnotation},c))})),this.state={selectedAnnotation:null,selectedDOMElement:null,modifiedTarget:null,readOnly:l.config.readOnly,editorDisabled:l.config.disableEditor,widgets:l.config.widgets,beforeHeadlessModify:null},this._editor=Me.createRef()}componentDidMount(){this.annotationLayer=this.props.config.gigapixelMode?new i9(this.props):new FN(this.props),this.annotationLayer.on("load",this.props.onLoad),this.annotationLayer.on("startSelection",this.handleStartSelect),this.annotationLayer.on("endSelection",this.handleEndSelect),this.annotationLayer.on("select",this.handleSelect),this.annotationLayer.on("updateTarget",this.handleUpdateTarget),this.annotationLayer.on("viewportChange",this.handleViewportChange),this.forwardEvent("clickAnnotation","onClickAnnotation"),this.forwardEvent("mouseEnterAnnotation","onMouseEnterAnnotation"),this.forwardEvent("mouseLeaveAnnotation","onMouseLeaveAnnotation"),document.addEventListener("keyup",this.onKeyUp)}componentWillUnmount(){this.annotationLayer.destroy(),document.removeEventListener("keyup",this.onKeyUp)}get disableEditor(){return this.state.editorDisabled}set disableEditor(l){this.setState({editorDisabled:l})}get disableSelect(){return this.annotationLayer.disableSelect}set disableSelect(l){this.annotationLayer.disableSelect=l}get formatters(){return this.annotationLayer.formatters}set formatters(l){this.annotationLayer.formatters=l}get readOnly(){return this.state.readOnly}set readOnly(l){this.annotationLayer.readOnly=l,this.setState({readOnly:l})}get widgets(){return this.state.widgets}set widgets(l){this.setState({widgets:l})}render(){var l;const r=this.state.selectedAnnotation&&!this.state.editorDisabled,a=this.state.readOnly||((l=this.state.selectedAnnotation)==null?void 0:l.readOnly);return r&&Uw(qL,{ref:this._editor,detachable:!0,wrapperEl:this.props.wrapperEl,annotation:this.state.selectedAnnotation,modifiedTarget:this.state.modifiedTarget,selectedElement:this.state.selectedDOMElement,readOnly:a,allowEmpty:this.props.config.allowEmpty,widgets:this.state.widgets,env:this.props.env,onAnnotationCreated:this.onCreateOrUpdateAnnotation("onAnnotationCreated"),onAnnotationUpdated:this.onCreateOrUpdateAnnotation("onAnnotationUpdated"),onAnnotationDeleted:this.onDeleteAnnotation,onCancel:this.onCancelAnnotation})}}class s9{constructor(l,r){o(this,"handleAnnotationCreated",(c,f)=>this._emitter.emit("createAnnotation",c.underlying,f)),o(this,"handleAnnotationDeleted",c=>this._emitter.emit("deleteAnnotation",c.underlying)),o(this,"handleAnnotationSelected",(c,f)=>this._emitter.emit("selectAnnotation",c.underlying,f)),o(this,"handleAnnotationUpdated",(c,f)=>this._emitter.emit("updateAnnotation",c.underlying,f.underlying)),o(this,"handleCancelSelected",c=>this._emitter.emit("cancelSelected",c.underlying)),o(this,"handleClickAnnotation",(c,f)=>this._emitter.emit("clickAnnotation",c.underlying,f)),o(this,"handleLoad",c=>this._emitter.emit("load",c)),o(this,"handleSelectionCreated",c=>this._emitter.emit("createSelection",c.underlying)),o(this,"handleSelectionStarted",c=>this._emitter.emit("startSelection",c)),o(this,"handleSelectionEnded",c=>this._emitter.emit("endSelection",c)),o(this,"handleSelectionTargetChanged",c=>this._emitter.emit("changeSelectionTarget",c)),o(this,"handleMouseEnterAnnotation",(c,f)=>this._emitter.emit("mouseEnterAnnotation",c.underlying,f)),o(this,"handleMouseLeaveAnnotation",(c,f)=>this._emitter.emit("mouseLeaveAnnotation",c.underlying,f)),o(this,"_wrap",c=>c?.type==="Annotation"?new Co(c):c),o(this,"addAnnotation",c=>this._app.current.addAnnotation(new Co(c))),o(this,"addDrawingTool",c=>this._app.current.addDrawingTool(c)),o(this,"cancelSelected",()=>this._app.current.cancelSelected()),o(this,"clearAnnotations",()=>this.setAnnotations([])),o(this,"clearAuthInfo",()=>this._env.user=null),o(this,"destroy",()=>Me.unmountComponentAtNode(this.appContainerEl)),o(this,"fitBounds",(c,f)=>this._app.current.fitBounds(this._wrap(c),f)),o(this,"fitBoundsWithConstraints",(c,f)=>this._app.current.fitBoundsWithConstraints(this._wrap(c),f)),o(this,"getAnnotationById",c=>{const f=this._app.current.getAnnotationById(c);return f?.underlying}),o(this,"getAnnotations",()=>this._app.current.getAnnotations().map(c=>c.underlying)),o(this,"getAnnotationsIntersecting",c=>this._app.current.getAnnotationsIntersecting(this._wrap(c))),o(this,"getImageSnippetById",c=>this._app.current.getImageSnippetById(c)),o(this,"getSelected",()=>{const c=this._app.current.getSelected();return c?.underlying}),o(this,"getSelectedImageSnippet",()=>this._app.current.getSelectedImageSnippet()),o(this,"listDrawingTools",()=>this._app.current.listDrawingTools()),o(this,"loadAnnotations",c=>fetch(c).then(f=>f.json()).then(f=>(this.setAnnotations(f),f))),o(this,"off",(c,f)=>this._emitter.off(c,f)),o(this,"on",(c,f)=>this._emitter.on(c,f)),o(this,"once",(c,f)=>this._emitter.once(c,f)),o(this,"panTo",(c,f)=>this._app.current.panTo(this._wrap(c),f)),o(this,"removeAnnotation",c=>this._app.current.removeAnnotation(this._wrap(c))),o(this,"removeDrawingTool",c=>this._app.current.removeDrawingTool(c)),o(this,"saveSelected",()=>this._app.current.saveSelected()),o(this,"selectAnnotation",c=>{const f=this._app.current.selectAnnotation(this._wrap(c));return f?.underlying}),o(this,"setAnnotations",c=>{const f=(c||[]).map(g=>new Co(g));this._app.current.setAnnotations(f)}),o(this,"setAuthInfo",c=>this._env.user=c),o(this,"setDrawingEnabled",c=>this._app.current.setDrawingEnabled(c)),o(this,"setDrawingTool",c=>this._app.current.setDrawingTool(c)),o(this,"setServerTime",c=>this._env.setServerTime(c)),o(this,"setVisible",c=>this._app.current.setVisible(c)),o(this,"updateSelected",(c,f)=>{let g=null;c.type==="Annotation"?g=new Co(c):c.type==="Selection"&&(g=new La(c.target,c.body)),g&&this._app.current.updateSelected(g,f)});const a=r||{};this._app=Me.createRef(),this._emitter=new Bi,this._env=JL(),this._element=l.element,window.getComputedStyle(this._element).getPropertyValue("position")==="static"&&(this._element.style.position="relative"),eN(a.locale,a.messages),this.appContainerEl=document.createElement("DIV"),this._element.appendChild(this.appContainerEl),Me.render(Uw(o9,{ref:this._app,viewer:l,wrapperEl:this._element,config:a,env:this._env,onSelectionStarted:this.handleSelectionStarted,onSelectionEnded:this.handleSelectionEnded,onSelectionCreated:this.handleSelectionCreated,onSelectionTargetChanged:this.handleSelectionTargetChanged,onAnnotationCreated:this.handleAnnotationCreated,onAnnotationSelected:this.handleAnnotationSelected,onAnnotationUpdated:this.handleAnnotationUpdated,onAnnotationDeleted:this.handleAnnotationDeleted,onCancelSelected:this.handleCancelSelected,onClickAnnotation:this.handleClickAnnotation,onLoad:this.handleLoad,onMouseEnterAnnotation:this.handleMouseEnterAnnotation,onMouseLeaveAnnotation:this.handleMouseLeaveAnnotation}),this.appContainerEl)}get disableEditor(){return this._app.current.disableEditor}set disableEditor(l){this._app.current.disableEditor=l}get disableSelect(){return this._app.current.disableSelect}set disableSelect(l){this._app.current.disableSelect=l}get formatters(){return this._app.current.formatters||[]}set formatters(l){if(l){const r=Array.isArray(l)?l:[l];this._app.current.formatters=r}else this._app.current.formatters=null}get readOnly(){return this._app.current.readOnly}set readOnly(l){this._app.current.readOnly=l}get widgets(){return this._app.current.widgets}set widgets(l){this._app.current.widgets=l}}var a9=(s,l)=>new s9(s,l);return a9})})(VP);var qG=VP.exports;const ZG=gr(qG);function XG(e){const i=`os-zoom-in ${e.side}`,t=`os-zoom-out ${e.side}`,n=e.documentView.bookMode?null:e.onZoomGrid;return q.jsxs("ul",{className:"ImageZoomControl",children:[q.jsx("li",{children:q.jsx("i",{title:"Zoom In",id:i,onClick:e.onZoomIn,className:"zoom-in fas fa-plus-circle fa-2x"})}),q.jsx("li",{children:q.jsx("i",{title:"Fixed Zoom 1",onClick:e.onZoomFixed_1,className:"zoom-3 fas fa-circle fa-2x"})}),q.jsx("li",{children:q.jsx("i",{title:"Fixed Zoom 2",onClick:e.onZoomFixed_2,className:"zoom-2 fas fa-circle fa-lg"})}),q.jsx("li",{children:q.jsx("i",{title:"Fixed Zoom 3",onClick:e.onZoomFixed_3,className:"zoom-1 fas fa-circle"})}),q.jsx("li",{children:q.jsx("i",{title:"Zoom Out",id:t,onClick:e.onZoomOut,className:"zoom-out fas fa-minus-circle fa-2x"})}),q.jsx("li",{className:e.documentView.bookMode?"disabled":"",children:q.jsx("i",{title:"Return to grid mode (not available in book mode)",onClick:n,className:"zoom-grid fas fa-th fa-2x"})})]})}function yg(e){const{delay:i=0,color:t="dark"}=e,[n,o]=B.useState(i===0);return B.useEffect(()=>{if(i>0){const u=setTimeout(()=>{o(!0)},i);return()=>clearTimeout(u)}},[]),n?q.jsxs("div",{className:`big-ring-spinner ${t}`,children:[q.jsx("div",{}),q.jsx("div",{}),q.jsx("div",{}),q.jsx("div",{})]}):q.jsx("div",{})}function YG(e){const{side:i,initViewer:t,tileSource:n}=e,[o,u]=B.useState(!0),h=B.useRef(null);return B.useEffect(()=>{(async()=>h.current&&await t(h.current,n).then(()=>u(!1)))()},[]),B.useMemo(()=>q.jsx("div",{id:`image-view-seadragon-${i}`,ref:h,children:o&&q.jsx(yg,{color:"light",delay:1e3})}),[o])}function $G(e){const[i,t]=B.useState(null),[n,o]=B.useState(null),u=no(),h=vl(),[d]=Sm(),[p,m]=B.useState(!1);B.useEffect(()=>{n&&d.get("zone")&&setTimeout(()=>n.selectAnnotation(d.get("zone")),50)},[n]);const v=G=>{e.documentViewActions.changeTranscriptionType(e.side,"g")},x=G=>{i.viewport.zoomTo(i.viewport.getMaxZoom())},E=G=>{i.viewport.zoomTo(i.viewport.getMaxZoom()/2)},C=G=>{i.viewport.fitVertically()},O=G=>{i.viewport.zoomBy(2)},_=G=>{i.viewport.zoomBy(.5)};B.useEffect(()=>{n&&(n.off("selectAnnotation"),n.off("cancelSelected"),n.on("selectAnnotation",G=>{d.set("zone",G.id),h(`${u.pathname}?${Vs(d.toString())}`)}),n.on("cancelSelected",()=>{h(u.pathname)}))},[u.pathname,n]);const k=async(G,Z)=>{if(!G)t(null),o(null);else{const ae=zf({element:G,showNavigationControl:!1,zoomPerClick:2,gestureSettingsMouse:{clickToZoom:!1}});t(ae);const te=ZG(ae,{});te.disableEditor=!0,te.readOnly=!0,o(te),ae.addTiledImage({tileSource:Z})}};B.useEffect(()=>()=>{i&&i.destroy()},[]);const{tileSource:I}=e.document.folioIndex[e.folioID];return B.useEffect(()=>{const G=e.document.folioIndex[e.folioID];G.loading&&m(!0),G.tileSource&&i&&(i.open(G.tileSource),G.annotations&&n&&n.setAnnotations(G.annotations)),G.loading||m(!1)},[n,i,e.folioID,e.document.folioIndex]),q.jsx("div",{children:I?q.jsxs("div",{className:`image-view imageViewComponent ${e.side}`,style:{position:"relative"},children:[q.jsx($s,{side:e.side,documentView:e.documentView,documentViewActions:e.documentViewActions,documentName:e.document.variorum&&e.document.folioIndex[e.folioID].doc_id}),q.jsx(XG,{side:e.side,documentView:e.documentView,onZoomFixed_1:x,onZoomFixed_2:E,onZoomFixed_3:C,onZoomGrid:v,onZoomIn:O,onZoomOut:_,viewer:i}),q.jsx(YG,{side:e.side,tileSource:I,initViewer:k,loading:p},e.folioID)]}):q.jsx(yg,{color:"dark",delay:300})})}function KG(e){return{document:e.document}}const QG=Yi(KG)($G);class JG extends B.Component{render(){return q.jsx("div",{className:"single-pane-view",children:this.props.singlePane})}}function eq(e){return{document:e.document}}const tq=Yi(eq)(JG);class nq extends B.Component{constructor(i){super(),ji(this,"onDrag",t=>{if(this.dragging){const n=window.innerWidth-2*this.dividerWidth;let o,u,h;this.activeDivider===1?(o=t.clientX-this.dividerWidth/2,h=n*this.splitFractionRight,u=n-o-h):(h=n-t.clientX-this.dividerWidth/2,o=n*this.splitFraction,u=n-o-h),o>=this.leftPaneMinWidth&&u>=this.rightPaneMinWidth&&h>=this.thirdPaneMinWidth&&(this.splitFraction=n===0?0:o/n,this.splitFractionRight=n===0?0:h/n,this.updateUI()),this.updatePaneSize()}}),ji(this,"onStartDrag",t=>{this.dragging=!0,this.activeDivider=t==="first"?1:2}),ji(this,"onEndDrag",t=>{this.dragging=!1,this.activeDivider=0}),ji(this,"onResize",t=>{this.updatePaneSize()}),this.firstFolio=i.document.folios[0],this.rightPaneMinWidth=i.rightPane.props.documentView.right.transcriptionType==="glossary"?450:200,this.leftPaneMinWidth=i.leftPane.props.documentView.left.transcriptionType==="glossary"?450:200,this.thirdPaneMinWidth=i.thirdPane.props.documentView.third.transcriptionType==="glossary"?450:i.thirdPane.props.documentView.third.transcriptionType==="g"?0:200,this.splitFraction=i.threePanel?.49:.5,this.splitFractionRight=i.threePanel?.01:0,this.dividerWidth=16,this.state={style:{gridTemplateColumns:`${this.splitFraction}fr ${this.dividerWidth}px ${1-this.splitFraction-this.splitFractionRight}fr ${this.dividerWidth}px ${this.splitFractionRight}fr`}},this.dragging=!1,this.activeDivider=0,this.onDrag=this.onDrag.bind(this),this.onResize=this.onResize.bind(this),this.onEndDrag=this.onEndDrag.bind(this),this.updatePaneSize=this.updatePaneSize.bind(this),this.updatePaneSize=this.updatePaneSize.bind(this)}updateUI(){const i=this.splitFraction,t=this.splitFractionRight,n=1-i-t;this.setState({...this.state,style:{...this.state.style,gridTemplateColumns:`${i}fr ${this.dividerWidth}px ${n}fr ${this.dividerWidth}px ${t}fr`}})}updatePaneSize(){const i=Math.floor(Math.abs(window.innerWidth*this.splitFraction)),t=Math.floor(Math.abs(window.innerWidth*this.splitFractionRight)),n=Math.floor(window.innerWidth*(1-this.splitFraction-this.splitFractionRight));this.props.onWidth&&i>=this.leftPaneMinWidth&&n>=this.rightPaneMinWidth&&t>=this.thirdPaneMinWidth&&this.props.onWidth(i,n,t)}componentDidMount(){if(this.updateUI(),window.addEventListener("pointermove",this.onDrag),window.addEventListener("pointerup",this.onEndDrag),window.addEventListener("resize",this.onResize),this.props.onWidth){const i=Math.floor(Math.abs(window.innerWidth*this.splitFraction)),t=Math.floor(window.innerWidth*(1-this.splitFraction)),n=Math.floor(window.innerWidth*(1-this.splitFraction));this.props.onWidth(i,t,n)}}componentDidUpdate(i){this.rightPaneMinWidth=this.props.rightPane.props.documentView.right.transcriptionType==="glossary"?450:200,this.leftPaneMinWidth=this.props.leftPane.props.documentView.left.transcriptionType==="glossary"?450:200,this.thirdPaneMinWidth=this.props.thirdPane.props.documentView.third.transcriptionType==="glossary"?450:this.props.thirdPane.props.documentView.third.transcriptionType==="g"?0:200}componentWillUnmount(){window.removeEventListener("pointermove",this.onDrag),window.removeEventListener("pointerup",this.onEndDrag),window.removeEventListener("resize",this.onResize)}renderDivider(i){return q.jsx("div",{className:`divider ${i}_divider`,onPointerDown:()=>this.onStartDrag(i),children:q.jsx("div",{className:"drawer-button hidden",onClick:this.onDrawerButton,children:q.jsx("i",{className:"drawer-icon fas fa-caret-left fa-2x",children:" "})})})}render(){return q.jsxs("div",{className:"split-pane-view three-pane",style:{...this.state.style},children:[this.props.leftPane,this.renderDivider("first"),this.props.rightPane,this.props.threePanel&&this.renderDivider("second"),this.props.threePanel&&this.props.thirdPane]})}}function iq(e){return{document:e.document}}const rq=Yi(iq)(nq);function oq(e){const[i,t]=B.useState(null),[n,o]=B.useState(!1),u=v=>{t(v.currentTarget),o(!0)},h=v=>{o(!1)},d=()=>{const v=Hi(e.text)||`ERROR: Could not find comment for id: ${e.commentID}.`,x={maxWidth:200,padding:"25px 15px 15px 15px"},E={float:"right",padding:5,fontStyle:"bold"};return q.jsx(cC,{id:e.commentID,open:n,anchorEl:i,children:q.jsx(DT,{in:n,children:q.jsxs(zm,{className:"editor-comment-content",children:[q.jsx("div",{onClick:h,style:E,children:q.jsx("span",{className:"fa fa-window-close"})}),q.jsx(Qn,{style:x,children:v})]})})})},p={display:"inline"},m={fontStyle:"bold",fontSize:"18pt",color:"red"};return q.jsxs("div",{style:p,children:[q.jsx("span",{onClick:v=>u(v),style:m,children:"*"}),d()]})}class VS extends B.Component{constructor(i){super(i),this.state={error:null,errorInfo:null}}static getDerivedStateFromError(i){return{error:!0}}componentDidCatch(i,t){this.setState({error:i,errorInfo:t})}render(){return this.state.errorInfo?q.jsxs("div",{style:{height:"350px",overflowY:"scroll"},children:[q.jsx("h2",{children:"Something went wrong."}),q.jsxs("details",{style:{whiteSpace:"pre-wrap"},children:["There has been an error rendering a comment",q.jsx("br",{}),this.state.error&&this.state.error.toString(),q.jsx("br",{}),this.state.errorInfo.componentStack]})]}):this.props.children}}class sq extends xt.Component{constructor(i,t){super(i,t),ji(this,"changeCurrentFolio",n=>{const{side:o,documentView:u,documentViewActions:h}=this.props,{dataset:d}=n.currentTarget;if(typeof d.id>"u"||d.id.length===0)return;const p=d.id;h.changeCurrentFolio(p,o,u[o].transcriptionType)}),this.changeCurrentFolio=this.changeCurrentFolio.bind(this)}render(){const{side:i,document:t,documentView:n,bottom:o=!1}=this.props;if(n[i].iiifShortID==="-1")return null;const u=t.folioIndex[n[i].iiifShortID].name;return q.jsx("div",{className:o?"paginationComponent bottom":"paginationComponent",children:q.jsxs("div",{className:"paginationControl",children:[q.jsx("span",{title:"Go back",onClick:this.changeCurrentFolio,"data-id":n[i].previousFolioShortID,className:n[i].hasPrevious?"arrow":"arrow disabled",children:q.jsx(BP,{})}),q.jsx("span",{className:"folioName",children:u}),q.jsxs("span",{title:"Go forward",onClick:this.changeCurrentFolio,"data-id":n[i].nextFolioShortID,className:n[i].hasNext?"arrow":"arrow disabled",children:[" ",q.jsx(UP,{})]})]})})}}function aq(e){return{document:e.document}}const Ns=Yi(aq)(sq);class lq extends xt.Component{render(){const{html:i,htmlToReactParserOptionsSide:t}=this.props;return Hi(i,t)}}function Ka({side:e,documentView:i,documentViewActions:t}){return q.jsxs("div",{style:{position:"relative"},className:"watermarkContainer",children:[i.left.iiifShortID!=="-1"&&i.right.iiifShortID!=="-1"?q.jsx($s,{side:e,documentView:i,documentViewActions:t}):null,q.jsxs("div",{className:"transcriptContent",children:[q.jsx(Ns,{side:e,className:"pagination_upper",documentView:i,documentViewActions:t}),q.jsx("div",{className:"watermark",children:q.jsx("div",{className:e!=="third"?"watermark_contents":"third_pane_blank"})})]})]})}function uq(e,i,t){return t.includes(e)&&(i.attribs.classname?i.attribs.classname+=" selected-zone":i.attribs.classname="selected-zone"),i}function yf(e,i){if(e&&i.attribs["data-facs"]){const t=i.attribs["data-facs"].split(" ");return uq(e,i,t)}return i}function GS(e,i){var t;const n=(t=e.attribs)==null?void 0:t.ana;return n&&n.split(" ").map(o=>o.slice(1)).some(o=>i.includes(o))&&(e.attribs.class="active"),e}function cq(e,i){return{replace(t){var n,o,u;switch(t.name){case"div":return t=GS(t,i),yf(e,t);case"tei-seg":return GS(t,i);case"tei-line":return yf(e,t);case"tei-surface":return yf(e,t);case"tei-note":{const h=((n=t.children[0])==null?void 0:n.data)||"",d=t.attribs.n||t.attribs.id;return d?q.jsx(oq,{commentID:d,text:h}):t}case"tei-figure":{const h=t.children.find(v=>v.name==="tei-graphic"),d=(o=h?.attribs)==null?void 0:o.url;if(!d)return t;const p=t.children.find(v=>v.name==="tei-figdesc"),m=(u=p?.children[0])==null?void 0:u.data;return q.jsxs("figure",{className:"inline-figure",children:[q.jsx("img",{src:d,alt:m||"",className:"inline-image"}),m?q.jsx("figcaption",{children:m}):null]})}default:return t}}}}function dq(e){const[i]=Sm(),{tags:t}=B.useContext(Em),{side:n,folioID:o,transcriptionType:u,document:h,documentView:d,documentViewActions:p}=e;if(o==="-1")return q.jsx(Ka,{documentView:d,documentViewActions:p,side:n});const m=h.folioIndex[o];if(m&&!m.loading&&!m.transcription)return q.jsx(Ka,{documentView:d,documentViewActions:p,side:n});const v=m&&m.transcription&&m.transcription[u];if(m&&!m.loading&&!v)return q.jsx(Ka,{documentView:d,documentViewActions:p,side:n});const x=cq(i.get("zone"),t),E=v&&v.html,C=v&&v.layout;return m&&!m.loading&&!E?q.jsx(Ka,{documentView:d,documentViewActions:p,side:n}):m&&m.loading?q.jsxs("div",{children:[q.jsx($s,{side:n,documentView:d,documentViewActions:p,documentName:h.variorum&&m.doc_id}),q.jsx(Ns,{side:n,documentView:d,documentViewActions:p}),q.jsx("div",{className:"transcriptionViewComponent",children:q.jsx("div",{className:"transcriptContent",children:q.jsx(VS,{children:q.jsx(yg,{delay:3e3,color:"dark"})})})}),q.jsx(Ns,{side:n,documentView:d,documentViewActions:p,bottom:!0})]}):q.jsxs("div",{style:{position:"relative",overflow:"auto"},children:[q.jsx($s,{side:n,documentView:d,documentViewActions:p,documentName:h.variorum&&m.doc_id}),q.jsx(Ns,{side:n,documentView:d,documentViewActions:p}),q.jsx("div",{className:"transcriptionViewComponent",children:q.jsx("div",{className:"transcriptContent",children:q.jsx(VS,{children:q.jsx("div",{className:"surface grid-mode",style:{gridTemplateAreas:C},children:q.jsx(lq,{html:E,htmlToReactParserOptionsSide:x})})})})}),q.jsx(Ns,{side:n,documentView:d,documentViewActions:p,bottom:!0})]})}function hq(e){return{annotations:e.annotations,document:e.document}}const pq=Yi(hq)(dq);class fq extends B.Component{render(){const{side:i,document:t,documentView:n,documentViewActions:o}=this.props,u=`xmlViewComponent ${i}`,h=`xmlViewComponent_${i}`,d=n[i].iiifShortID;if(d==="-1")return q.jsx("div",{className:"watermark",children:q.jsx("div",{className:"watermark_contents"})});const p=t.folioIndex[d];if(!p.transcription)return q.jsx(Ka,{documentView:n,documentViewActions:o,side:i});const{transcriptionType:m}=n[i],v=p.transcription[m],{xml:x}=v;return q.jsxs("div",{id:h,className:u,style:{position:"relative",overflow:"auto"},children:[q.jsx($s,{side:i,documentView:n,documentViewActions:o,documentName:t.variorum&&p.doc_id}),q.jsx(Ns,{side:i,className:"pagination_upper",documentView:n,documentViewActions:o}),q.jsx("div",{className:"xmlContentInner",children:q.jsx("pre",{children:x})})]})}}function mq(e){return{document:e.document}}const gq=Yi(mq)(fq),wf={isXMLMode:!1,width:0};function vq(e){const[i,t]=B.useState(!e.document.variorum),[n,o]=B.useState(!1),[u,h]=B.useState(wf),[d,p]=B.useState(wf),[m,v]=B.useState(wf),[x,E]=B.useState(e.containerWidth<960),C=sH(),O=vl(),_=no();B.useEffect(()=>{jf(e,"RouteListenerSaga.userNavigation",_.pathname)},[e.config]),B.useEffect(()=>{E(e.containerWidth<960)},[e.containerWidth]);const k=Te=>{O(Te+_.search)},I=()=>{const{folioID:Te,transcriptionType:ye,folioID2:ke,transcriptionType2:_e,folioID3:$,transcriptionType3:Le}=C,{document:st}=e,J=st.variorum?Object.keys(st.transcriptionTypes[Object.keys(st.transcriptionTypes)[0]])[0]:Object.keys(st.transcriptionTypes)[0];if(!Te)return{left:{folioID:"-1",transcriptionType:"g"},right:{folioID:"-1",transcriptionType:st.variorum?"g":J},third:{folioID:"-1",transcriptionType:"g"}};const Et=Object.keys(st.folioIndex).includes(Te),yt=Et?Te:"-1";let mt,Tt,Bt,At,at;if(ke){const $e=Object.keys(st.folioIndex).includes(ke);if(mt=Et?ye:"g",Tt=$e?ke:"-1",Bt=$e?_e||J:"g",$){const wt=Object.keys(st.folioIndex).includes($);At=wt?$:"-1",at=wt?Le||J:"g"}else At="-1",at="g"}else mt="f",Tt=Et?Te:"-1",Bt=Et?ye||J:"g",At="-1",at="g";return{left:{folioID:yt,transcriptionType:mt},right:{folioID:Tt,transcriptionType:Bt},third:{folioID:At,transcriptionType:at}}};B.useEffect(()=>{jf(e,"DiplomaticActions.setFixedFrameMode",!0)},[]);const G=(Te,ye)=>{Te==="left"?h({...u,isXMLMode:ye}):Te==="right"?p({...d,isXMLMode:ye}):v({...m,isXMLMode:ye})},Z=(Te,ye)=>{if(o(ye),ye){const[ke,_e]=te(Te);ce(ke,"f",_e,"f")}},ae=(Te,ye)=>{var ke;const{document:_e}=e;if(_e.folioByName[Te]){const $=(ke=_e.folioByName[Te])==null?void 0:ke.id;me($,ye,I()[ye].transcriptionType)}},te=Te=>{const{document:ye}=e,ke=ye.folioIndex[Te],{name:_e,pageNumber:$}=ke,Le=ye.variorum?ye.folios.filter(st=>st.doc_id===ke.doc_id):ye.folios;return!_e.endsWith("v")&&_e.endsWith("r")?[Le[$-1].id,Le[$].id]:Le[$+1]?[Le[$].id,Le[$+1].id]:[Le[$].id,null]},Q=(Te,ye,ke)=>{h({...u,width:Te}),p({...d,width:ye}),v({...m,width:ke})},le=(Te,ye)=>{const ke=I();if(Te==="left"){const{folioID:_e}=ke.left,$=ke.right;ce(_e,ye,$.folioID,$.transcriptionType,ke.third.folioID,ke.third.transcriptionType)}else if(Te==="right"){const{folioID:_e}=ke.right,$=ke.left;ce($.folioID,$.transcriptionType,_e,ye,ke.third.folioID,ke.third.transcriptionType)}else{const{folioID:_e}=ke.third;ce(ke.left.folioID,ke.left.transcriptionType,ke.right.folioID,ke.right.transcriptionType,_e,ye)}},ce=(Te,ye,ke,_e,$,Le)=>{if(!Te){k("/ec");return}if(!ye){k(`/ec/${Te}`);return}if(!ke){k(`/ec/${Te}/${ye}`);return}if(!_e){k(`/ec/${Te}/${ye}/${ke}/tc`);return}if(!$){k(`/ec/${Te}/${ye}/${ke}/${_e}`);return}if(!Le){k(`/ec/${Te}/${ye}/${ke}/${_e}/${$}/f`);return}k(`/ec/${Te}/${ye}/${ke}/${_e}/${$}/${Le}`)},me=(Te,ye,ke)=>{const _e=I();if(n){const[$,Le]=te(Te);$&&ce($,"f",Le,"f")}else if(i)if(ye==="left"){const $=_e.right;ce(Te,ke,Te,$.transcriptionType)}else if(ye==="right"){const $=_e.left;ce(Te,$.transcriptionType,Te,ke)}else ce(_e.left.folioID,_e.left.transcriptionType,_e.right.folioID,_e.right.transcriptionType,Te,ke);else if(ye==="left"){const $=_e.right,Le=_e.third;ce(Te,ke,$.folioID,$.transcriptionType,Le.folioID,Le.transcriptionType)}else if(ye==="right"){const $=_e.left,Le=_e.third;ce($.folioID,$.transcriptionType,Te,ke,Le.folioID,Le.transcriptionType)}else ce(_e.left.folioID,_e.left.transcriptionType,_e.right.folioID,_e.right.transcriptionType,Te,ke)},Pe=Te=>{const{transcriptionType:ye}=I()[Te],ke=Te==="left"?u.isXMLMode:Te==="right"?d.isXMLMode:m.isXMLMode;return ye==="g"?"ImageGridView":ye==="f"?"ImageView":ye==="glossary"?"GlossaryView":ke?"XMLView":"TranscriptionView"},be=Te=>{const{document:ye}=e,ke=I()[Te];if(ke.folioID==="-1")return{...Te==="left"?u:Te==="right"?d:m,iiifShortID:ke.folioID,transcriptionType:ke.transcriptionType};const _e=ke.folioID,$=ye.variorum?ye.folios.filter(mt=>mt.doc_id===ye.folioIndex[_e].doc_id):ye.folios,Le=$.length;let st="",J="",Et=!1,yt=!1;if(n){const[mt]=te(_e),Tt=ye.folioIndex[mt].pageNumber;Tt>-1&&(yt=Tt<Le-2,st=yt?$[Tt+2].id:"",Et=Tt>1&&Le>1,J=Et?$[Tt-2].id:"")}else{const mt=ye.folioIndex[_e].pageNumber;mt>-1&&(yt=mt<Le-1,st=yt?$[mt+1].id:"",Et=mt>0&&Le>1,J=Et?$[mt-1].id:"")}return{...Te==="left"?u:Te==="right"?d:m,iiifShortID:_e,transcriptionType:ke.transcriptionType,hasPrevious:Et,hasNext:yt,previousFolioShortID:J,nextFolioShortID:st,documentID:ye.variorum?ye.folioIndex[_e].doc_id:ye.documentName}},fe={setXMLMode:G,setLinkedMode:t,setBookMode:Z,changeTranscriptionType:le,changeCurrentFolio:me,jumpToFolio:ae},ve=(Te,ye)=>{const ke=Pe(Te),_e=Fe(Te),$=ye[Te].iiifShortID,Le=ye[Te].documentID,{transcriptionType:st}=ye[Te];return ke==="ImageView"?q.jsx(QG,{folioID:$,documentView:ye,documentViewActions:fe,side:Te},_e):ke==="TranscriptionView"?q.jsx(pq,{documentView:ye,documentViewActions:fe,side:Te,folioID:$,transcriptionType:st},_e):ke==="XMLView"?q.jsx(gq,{folioID:$,transcriptionType:st,documentView:ye,documentViewActions:fe,side:Te},_e):ke==="ImageGridView"?q.jsx(GG,{documentView:ye,documentViewActions:fe,side:Te,selectedDoc:Le||e.document.variorum&&Object.keys(e.document.derivativeNames)[Te==="left"?0:Te==="right"?1:Object.keys(e.document.derivativeNames).length>2?2:1]},_e):ke==="GlossaryView"?q.jsx(UG,{documentView:ye,documentViewActions:fe,side:Te},_e):q.jsx("div",{children:"ERROR: Unrecognized viewType."})},Fe=Te=>{const ye=Te==="left"?u:Te==="right"?d:m;return ye.viewType==="ImageGridView"?`${Te}-${ye.viewType}`:typeof ye.folio<"u"?`${Te}-${ye.viewType}-${ye.folio.id}`:`${Te}-${ye.viewType}`};if(!e.document.loaded)return null;const Ge={linkedMode:i,bookMode:n,left:be("left"),right:be("right"),third:be("third")};return{...be("right")},J6("md",e.width)&&!x?q.jsx("div",{style:{height:"100%"},children:q.jsx(rq,{leftPane:ve("left",Ge),rightPane:ve("right",Ge),thirdPane:ve("third",Ge),onWidth:Q,threePanel:e.document.threePanel})}):q.jsx("div",{style:{height:"100%"},children:q.jsx(tq,{singlePane:ve(be("left").iiifShortID==="-1"?"left":"right",Ge)})})}function yq(e){return{document:e.document,glossary:e.glossary}}const Va=CE()(Yi(yq)(vq));function wq(e){const i=B.useRef(!1),{pathname:t}=no(),n=()=>{jf(e,"RouteListenerSaga.userNavigation",t)};return B.useEffect(()=>{i.current||(n(),i.current=!0)},[]),B.useEffect(()=>{n()},[t]),null}function bq(e){return{}}const xq=Yi(bq)(wq);function GP(e){const[i,t]=B.useState(0),[n,o]=B.useState("min(100%, 100dvh"),u=B.useRef(null);B.useEffect(()=>{nj().listen(()=>{window.scrollTo(0,0)})},[]),B.useEffect(()=>{u.current&&(t(u.current.offsetWidth),u.current.clientHeight===0&&o("100dvh"))},[u]);const{fixedFrameMode:h}=e.diplomatic,d=h?"editioncrafter":"editioncrafter sticky";return q.jsx(Dj,{store:e.store,children:q.jsx(EH,{children:q.jsx(TH,{children:q.jsxs("div",{id:"diplomatic",className:d,ref:u,style:{height:n},children:[q.jsx(xq,{}),q.jsx("div",{id:"content",style:{height:"100%"},children:q.jsxs(xH,{children:[q.jsx(ko,{path:"/ec/:folioID/:transcriptionType/:folioID2/:transcriptionType2/:folioID3/:transcriptionType3",element:q.jsx(Va,{...e,containerWidth:i}),exact:!0}),q.jsx(ko,{path:"/ec/:folioID/:transcriptionType/:folioID2/:transcriptionType2",element:q.jsx(Va,{...e,containerWidth:i}),exact:!0}),q.jsx(ko,{path:"/ec/:folioID/:transcriptionType",element:q.jsx(Va,{...e,containerWidth:i}),exact:!0}),q.jsx(ko,{path:"/ec/:folioID",element:q.jsx(Va,{...e,containerWidth:i}),exact:!0}),q.jsx(ko,{path:"/ec",element:q.jsx(Va,{...e,containerWidth:i}),exact:!0}),q.jsx(ko,{path:"/",element:q.jsx(wH,{to:"/ec"}),exact:!0})]})})]})})})})}GP.propTypes={store:vt.object.isRequired,config:vt.object.isRequired};function Sq(e){return{diplomatic:e.diplomatic,documentView:e.documentView}}const Eq=CE()(Yi(Sq)(GP));var qP={exports:{}};const Tq={},Cq=Object.freeze(Object.defineProperty({__proto__:null,default:Tq},Symbol.toStringTag,{value:"Module"})),bf=YS(Cq);(function(e,i){var t=void 0,n=function(o){return t||(t=new Promise(function(u,h){var d=typeof o<"u"?o:{},p=d.onAbort;d.onAbort=function(T){h(new Error(T)),p&&p(T)},d.postRun=d.postRun||[],d.postRun.push(function(){u(d)}),e=void 0;var m;m||(m=typeof d<"u"?d:{});var v=typeof window=="object",x=typeof importScripts=="function",E=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";m.onRuntimeInitialized=function(){function T(xe,qe){switch(typeof qe){case"boolean":va(xe,qe?1:0);break;case"number":rs(xe,qe);break;case"string":Pd(xe,qe,-1,-1);break;case"object":if(qe===null)vo(xe);else if(qe.length!=null){var gt=es(qe,mo);os(xe,gt,qe.length,-1),Ui(gt)}else Xn(xe,"Wrong API use : tried to return a value of an unknown type ("+qe+").",-1);break;default:vo(xe)}}function P(xe,qe){for(var gt=[],Nt=0;Nt<xe;Nt+=1){var $t=tn(qe+4*Nt,"i32"),Sn=Sd($t);if(Sn===1||Sn===2)$t=ga($t);else if(Sn===3)$t=Td($t);else if(Sn===4){Sn=$t,$t=Ed(Sn),Sn=Cd(Sn);for(var xi=new Uint8Array($t),Si=0;Si<$t;Si+=1)xi[Si]=me[Sn+Si];$t=xi}else $t=null;gt.push($t)}return gt}function j(xe,qe){this.Ka=xe,this.db=qe,this.Ia=1,this.eb=[]}function Y(xe,qe){if(this.db=qe,qe=he(xe)+1,this.Xa=pa(qe),this.Xa===null)throw Error("Unable to allocate memory for the SQL string");Ae(xe,Pe,this.Xa,qe),this.cb=this.Xa,this.Ta=this.hb=null}function de(xe){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),xe!=null){var qe=this.filename,gt="/",Nt=qe;if(gt&&(gt=typeof gt=="string"?gt:lo(gt),Nt=qe?ze(gt+"/"+qe):gt),qe=rt(!0,!0),Nt=Yo(Nt,(qe!==void 0?qe:438)&4095|32768,0),xe){if(typeof xe=="string"){gt=Array(xe.length);for(var $t=0,Sn=xe.length;$t<Sn;++$t)gt[$t]=xe.charCodeAt($t);xe=gt}co(Nt,qe|146),gt=Sr(Nt,577),Me(gt,xe,0,xe.length,0),Qo(gt),co(Nt,qe)}}this.handleError(Ht(this.filename,Re)),this.db=tn(Re,"i32"),Gn(this.db),this.Ya={},this.Ma={}}var Re=nr(4),Be=m.cwrap,Ht=Be("sqlite3_open","number",["string","number"]),rn=Be("sqlite3_close_v2","number",["number"]),qt=Be("sqlite3_exec","number",["number","string","number","number","number"]),jn=Be("sqlite3_changes","number",["number"]),Vn=Be("sqlite3_prepare_v2","number",["number","string","number","number","number"]),ud=Be("sqlite3_sql","string",["number"]),cd=Be("sqlite3_normalized_sql","string",["number"]),Ul=Be("sqlite3_prepare_v2","number",["number","number","number","number","number"]),dd=Be("sqlite3_bind_text","number",["number","number","number","number","number"]),Wl=Be("sqlite3_bind_blob","number",["number","number","number","number","number"]),hd=Be("sqlite3_bind_double","number",["number","number","number"]),pd=Be("sqlite3_bind_int","number",["number","number","number"]),fd=Be("sqlite3_bind_parameter_index","number",["number","string"]),fa=Be("sqlite3_step","number",["number"]),md=Be("sqlite3_errmsg","string",["number"]),gd=Be("sqlite3_column_count","number",["number"]),vd=Be("sqlite3_data_count","number",["number"]),yd=Be("sqlite3_column_double","number",["number","number"]),ma=Be("sqlite3_column_text","string",["number","number"]),Vl=Be("sqlite3_column_blob","number",["number","number"]),Wi=Be("sqlite3_column_bytes","number",["number","number"]),vi=Be("sqlite3_column_type","number",["number","number"]),jr=Be("sqlite3_column_name","string",["number","number"]),wd=Be("sqlite3_reset","number",["number"]),bd=Be("sqlite3_clear_bindings","number",["number"]),xd=Be("sqlite3_finalize","number",["number"]),Gl=Be("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),Sd=Be("sqlite3_value_type","number",["number"]),Ed=Be("sqlite3_value_bytes","number",["number"]),Td=Be("sqlite3_value_text","string",["number"]),Cd=Be("sqlite3_value_blob","number",["number"]),ga=Be("sqlite3_value_double","number",["number"]),rs=Be("sqlite3_result_double","",["number","number"]),vo=Be("sqlite3_result_null","",["number"]),Pd=Be("sqlite3_result_text","",["number","string","number","number"]),os=Be("sqlite3_result_blob","",["number","number","number","number"]),va=Be("sqlite3_result_int","",["number","number"]),Xn=Be("sqlite3_result_error","",["number","string","number"]),ql=Be("sqlite3_aggregate_context","number",["number","number"]),Gn=Be("RegisterExtensionFunctions","number",["number"]);j.prototype.bind=function(xe){if(!this.Ka)throw"Statement closed";return this.reset(),Array.isArray(xe)?this.vb(xe):xe!=null&&typeof xe=="object"?this.wb(xe):!0},j.prototype.step=function(){if(!this.Ka)throw"Statement closed";this.Ia=1;var xe=fa(this.Ka);switch(xe){case 100:return!0;case 101:return!1;default:throw this.db.handleError(xe)}},j.prototype.qb=function(xe){return xe==null&&(xe=this.Ia,this.Ia+=1),yd(this.Ka,xe)},j.prototype.zb=function(xe){if(xe==null&&(xe=this.Ia,this.Ia+=1),xe=ma(this.Ka,xe),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(xe)},j.prototype.Ab=function(xe){return xe==null&&(xe=this.Ia,this.Ia+=1),ma(this.Ka,xe)},j.prototype.getBlob=function(xe){xe==null&&(xe=this.Ia,this.Ia+=1);var qe=Wi(this.Ka,xe);xe=Vl(this.Ka,xe);for(var gt=new Uint8Array(qe),Nt=0;Nt<qe;Nt+=1)gt[Nt]=me[xe+Nt];return gt},j.prototype.get=function(xe,qe){qe=qe||{},xe!=null&&this.bind(xe)&&this.step(),xe=[];for(var gt=vd(this.Ka),Nt=0;Nt<gt;Nt+=1)switch(vi(this.Ka,Nt)){case 1:var $t=qe.useBigInt?this.zb(Nt):this.qb(Nt);xe.push($t);break;case 2:xe.push(this.qb(Nt));break;case 3:xe.push(this.Ab(Nt));break;case 4:xe.push(this.getBlob(Nt));break;default:xe.push(null)}return xe},j.prototype.getColumnNames=function(){for(var xe=[],qe=gd(this.Ka),gt=0;gt<qe;gt+=1)xe.push(jr(this.Ka,gt));return xe},j.prototype.getAsObject=function(xe,qe){xe=this.get(xe,qe),qe=this.getColumnNames();for(var gt={},Nt=0;Nt<qe.length;Nt+=1)gt[qe[Nt]]=xe[Nt];return gt},j.prototype.getSQL=function(){return ud(this.Ka)},j.prototype.getNormalizedSQL=function(){return cd(this.Ka)},j.prototype.run=function(xe){return xe!=null&&this.bind(xe),this.step(),this.reset()},j.prototype.mb=function(xe,qe){qe==null&&(qe=this.Ia,this.Ia+=1),xe=L(xe);var gt=es(xe,mo);this.eb.push(gt),this.db.handleError(dd(this.Ka,qe,gt,xe.length-1,0))},j.prototype.ub=function(xe,qe){qe==null&&(qe=this.Ia,this.Ia+=1);var gt=es(xe,mo);this.eb.push(gt),this.db.handleError(Wl(this.Ka,qe,gt,xe.length,0))},j.prototype.lb=function(xe,qe){qe==null&&(qe=this.Ia,this.Ia+=1),this.db.handleError((xe===(xe|0)?pd:hd)(this.Ka,qe,xe))},j.prototype.xb=function(xe){xe==null&&(xe=this.Ia,this.Ia+=1),Wl(this.Ka,xe,0,0,0)},j.prototype.nb=function(xe,qe){switch(qe==null&&(qe=this.Ia,this.Ia+=1),typeof xe){case"string":this.mb(xe,qe);return;case"number":this.lb(xe,qe);return;case"bigint":this.mb(xe.toString(),qe);return;case"boolean":this.lb(xe+0,qe);return;case"object":if(xe===null){this.xb(qe);return}if(xe.length!=null){this.ub(xe,qe);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+xe+")."},j.prototype.wb=function(xe){var qe=this;return Object.keys(xe).forEach(function(gt){var Nt=fd(qe.Ka,gt);Nt!==0&&qe.nb(xe[gt],Nt)}),!0},j.prototype.vb=function(xe){for(var qe=0;qe<xe.length;qe+=1)this.nb(xe[qe],qe+1);return!0},j.prototype.reset=function(){return this.freemem(),bd(this.Ka)===0&&wd(this.Ka)===0},j.prototype.freemem=function(){for(var xe;(xe=this.eb.pop())!==void 0;)Ui(xe)},j.prototype.free=function(){this.freemem();var xe=xd(this.Ka)===0;return delete this.db.Ya[this.Ka],this.Ka=0,xe},Y.prototype.next=function(){if(this.Xa===null)return{done:!0};if(this.Ta!==null&&(this.Ta.free(),this.Ta=null),!this.db.db)throw this.fb(),Error("Database closed");var xe=go(),qe=nr(4);kt(Re),kt(qe);try{this.db.handleError(Ul(this.db.db,this.cb,-1,Re,qe)),this.cb=tn(qe,"i32");var gt=tn(Re,"i32");return gt===0?(this.fb(),{done:!0}):(this.Ta=new j(gt,this.db),this.db.Ya[gt]=this.Ta,{value:this.Ta,done:!1})}catch(Nt){throw this.hb=K(this.cb),this.fb(),Nt}finally{zr(xe)}},Y.prototype.fb=function(){Ui(this.Xa),this.Xa=null},Y.prototype.getRemainingSQL=function(){return this.hb!==null?this.hb:K(this.cb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(Y.prototype[Symbol.iterator]=function(){return this}),de.prototype.run=function(xe,qe){if(!this.db)throw"Database closed";if(qe){xe=this.prepare(xe,qe);try{xe.step()}finally{xe.free()}}else this.handleError(qt(this.db,xe,0,0,Re));return this},de.prototype.exec=function(xe,qe,gt){if(!this.db)throw"Database closed";var Nt=go(),$t=null;try{var Sn=ha(xe),xi=nr(4);for(xe=[];tn(Sn,"i8")!==0;){kt(Re),kt(xi),this.handleError(Ul(this.db,Sn,-1,Re,xi));var Si=tn(Re,"i32");if(Sn=tn(xi,"i32"),Si!==0){var yi=null;for($t=new j(Si,this),qe!=null&&$t.bind(qe);$t.step();)yi===null&&(yi={columns:$t.getColumnNames(),values:[]},xe.push(yi)),yi.values.push($t.get(null,gt));$t.free()}}return xe}catch(Ei){throw $t&&$t.free(),Ei}finally{zr(Nt)}},de.prototype.each=function(xe,qe,gt,Nt,$t){typeof qe=="function"&&(Nt=gt,gt=qe,qe=void 0),xe=this.prepare(xe,qe);try{for(;xe.step();)gt(xe.getAsObject(null,$t))}finally{xe.free()}if(typeof Nt=="function")return Nt()},de.prototype.prepare=function(xe,qe){if(kt(Re),this.handleError(Vn(this.db,xe,-1,Re,0)),xe=tn(Re,"i32"),xe===0)throw"Nothing to prepare";var gt=new j(xe,this);return qe!=null&&gt.bind(qe),this.Ya[xe]=gt},de.prototype.iterateStatements=function(xe){return new Y(xe,this)},de.prototype.export=function(){Object.values(this.Ya).forEach(function(qe){qe.free()}),Object.values(this.Ma).forEach(Nr),this.Ma={},this.handleError(rn(this.db));var xe=ua(this.filename);return this.handleError(Ht(this.filename,Re)),this.db=tn(Re,"i32"),Gn(this.db),xe},de.prototype.close=function(){this.db!==null&&(Object.values(this.Ya).forEach(function(xe){xe.free()}),Object.values(this.Ma).forEach(Nr),this.Ma={},this.handleError(rn(this.db)),sa("/"+this.filename),this.db=null)},de.prototype.handleError=function(xe){if(xe===0)return null;throw xe=md(this.db),Error(xe)},de.prototype.getRowsModified=function(){return jn(this.db)},de.prototype.create_function=function(xe,qe){Object.prototype.hasOwnProperty.call(this.Ma,xe)&&(Nr(this.Ma[xe]),delete this.Ma[xe]);var gt=ts(function(Nt,$t,Sn){$t=P($t,Sn);try{var xi=qe.apply(null,$t)}catch(Si){Xn(Nt,Si,-1);return}T(Nt,xi)},"viii");return this.Ma[xe]=gt,this.handleError(Gl(this.db,xe,qe.length,1,0,gt,0,0,0)),this},de.prototype.create_aggregate=function(xe,qe){var gt=qe.init||function(){return null},Nt=qe.finalize||function(yi){return yi},$t=qe.step;if(!$t)throw"An aggregate function must have a step function in "+xe;var Sn={};Object.hasOwnProperty.call(this.Ma,xe)&&(Nr(this.Ma[xe]),delete this.Ma[xe]),qe=xe+"__finalize",Object.hasOwnProperty.call(this.Ma,qe)&&(Nr(this.Ma[qe]),delete this.Ma[qe]);var xi=ts(function(yi,Ei,ya){var Cr=ql(yi,1);Object.hasOwnProperty.call(Sn,Cr)||(Sn[Cr]=gt()),Ei=P(Ei,ya),Ei=[Sn[Cr]].concat(Ei);try{Sn[Cr]=$t.apply(null,Ei)}catch(_d){delete Sn[Cr],Xn(yi,_d,-1)}},"viii"),Si=ts(function(yi){var Ei=ql(yi,1);try{var ya=Nt(Sn[Ei])}catch(Cr){delete Sn[Ei],Xn(yi,Cr,-1);return}T(yi,ya),delete Sn[Ei]},"vi");return this.Ma[xe]=xi,this.Ma[qe]=Si,this.handleError(Gl(this.db,xe,$t.length-1,1,0,0,xi,Si,0)),this},m.Database=de};var C=Object.assign({},m),O="./this.program",_="",k,I;if(E){var G=bf,Z=bf;_=__dirname+"/",I=T=>(T=yt(T)?new URL(T):Z.normalize(T),G.readFileSync(T)),k=T=>(T=yt(T)?new URL(T):Z.normalize(T),new Promise((P,j)=>{G.readFile(T,void 0,(Y,de)=>{Y?j(Y):P(de.buffer)})})),!m.thisProgram&&1<process.argv.length&&(O=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),e.exports=m}else(v||x)&&(x?_=self.location.href:typeof document<"u"&&document.currentScript&&(_=document.currentScript.src),_=_.startsWith("blob:")?"":_.substr(0,_.replace(/[?#].*/,"").lastIndexOf("/")+1),x&&(I=T=>{var P=new XMLHttpRequest;return P.open("GET",T,!1),P.responseType="arraybuffer",P.send(null),new Uint8Array(P.response)}),k=T=>yt(T)?new Promise((P,j)=>{var Y=new XMLHttpRequest;Y.open("GET",T,!0),Y.responseType="arraybuffer",Y.onload=()=>{(Y.status==200||Y.status==0&&Y.response)&&j(Y.response),P(Y.status)},Y.onerror=P,Y.send(null)}):fetch(T,{credentials:"same-origin"}).then(P=>P.ok?P.arrayBuffer():Promise.reject(Error(P.status+" : "+P.url))));var ae=m.print||console.log.bind(console),te=m.printErr||console.error.bind(console);Object.assign(m,C),C=null,m.thisProgram&&(O=m.thisProgram);var Q;m.wasmBinary&&(Q=m.wasmBinary);var le,ce=!1,me,Pe,be,fe,ve,Fe,Ge;function Te(){var T=le.buffer;m.HEAP8=me=new Int8Array(T),m.HEAP16=be=new Int16Array(T),m.HEAPU8=Pe=new Uint8Array(T),m.HEAPU16=new Uint16Array(T),m.HEAP32=fe=new Int32Array(T),m.HEAPU32=ve=new Uint32Array(T),m.HEAPF32=Fe=new Float32Array(T),m.HEAPF64=Ge=new Float64Array(T)}var ye=[],ke=[],_e=[];function $(){var T=m.preRun.shift();ye.unshift(T)}var Le=0,st=null;function J(T){var P;throw(P=m.onAbort)==null||P.call(m,T),T="Aborted("+T+")",te(T),ce=!0,new WebAssembly.RuntimeError(T+". Build with -sASSERTIONS for more info.")}var Et=T=>T.startsWith("data:application/octet-stream;base64,"),yt=T=>T.startsWith("file://"),mt;function Tt(T){if(T==mt&&Q)return new Uint8Array(Q);if(I)return I(T);throw"both async and sync fetching of the wasm failed"}function Bt(T){return Q?Promise.resolve().then(()=>Tt(T)):k(T).then(P=>new Uint8Array(P),()=>Tt(T))}function At(T,P,j){return Bt(T).then(Y=>WebAssembly.instantiate(Y,P)).then(j,Y=>{te(`failed to asynchronously prepare wasm: ${Y}`),J(Y)})}function at(T,P){var j=mt;Q||typeof WebAssembly.instantiateStreaming!="function"||Et(j)||yt(j)||E||typeof fetch!="function"?At(j,T,P):fetch(j,{credentials:"same-origin"}).then(Y=>WebAssembly.instantiateStreaming(Y,T).then(P,function(de){return te(`wasm streaming compile failed: ${de}`),te("falling back to ArrayBuffer instantiation"),At(j,T,P)}))}var $e,wt,Lt=T=>{for(;0<T.length;)T.shift()(m)};function tn(T,P="i8"){switch(P.endsWith("*")&&(P="*"),P){case"i1":return me[T];case"i8":return me[T];case"i16":return be[T>>1];case"i32":return fe[T>>2];case"i64":J("to do getValue(i64) use WASM_BIGINT");case"float":return Fe[T>>2];case"double":return Ge[T>>3];case"*":return ve[T>>2];default:J(`invalid type for getValue: ${P}`)}}function kt(T){var P="i32";switch(P.endsWith("*")&&(P="*"),P){case"i1":me[T]=0;break;case"i8":me[T]=0;break;case"i16":be[T>>1]=0;break;case"i32":fe[T>>2]=0;break;case"i64":J("to do setValue(i64) use WASM_BIGINT");case"float":Fe[T>>2]=0;break;case"double":Ge[T>>3]=0;break;case"*":ve[T>>2]=0;break;default:J(`invalid type for setValue: ${P}`)}}var Gt=typeof TextDecoder<"u"?new TextDecoder:void 0,D=(T,P,j)=>{var Y=P+j;for(j=P;T[j]&&!(j>=Y);)++j;if(16<j-P&&T.buffer&&Gt)return Gt.decode(T.subarray(P,j));for(Y="";P<j;){var de=T[P++];if(de&128){var Re=T[P++]&63;if((de&224)==192)Y+=String.fromCharCode((de&31)<<6|Re);else{var Be=T[P++]&63;de=(de&240)==224?(de&15)<<12|Re<<6|Be:(de&7)<<18|Re<<12|Be<<6|T[P++]&63,65536>de?Y+=String.fromCharCode(de):(de-=65536,Y+=String.fromCharCode(55296|de>>10,56320|de&1023))}}else Y+=String.fromCharCode(de)}return Y},K=(T,P)=>T?D(Pe,T,P):"",we=(T,P)=>{for(var j=0,Y=T.length-1;0<=Y;Y--){var de=T[Y];de==="."?T.splice(Y,1):de===".."?(T.splice(Y,1),j++):j&&(T.splice(Y,1),j--)}if(P)for(;j;j--)T.unshift("..");return T},ze=T=>{var P=T.charAt(0)==="/",j=T.substr(-1)==="/";return(T=we(T.split("/").filter(Y=>!!Y),!P).join("/"))||P||(T="."),T&&j&&(T+="/"),(P?"/":"")+T},Ne=T=>{var P=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(T).slice(1);return T=P[0],P=P[1],!T&&!P?".":(P&&(P=P.substr(0,P.length-1)),T+P)},Qe=T=>{if(T==="/")return"/";T=ze(T),T=T.replace(/\/$/,"");var P=T.lastIndexOf("/");return P===-1?T:T.substr(P+1)},Xe=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return j=>crypto.getRandomValues(j);if(E)try{var T=bf;if(T.randomFillSync)return j=>T.randomFillSync(j);var P=T.randomBytes;return j=>(j.set(P(j.byteLength)),j)}catch{}J("initRandomDevice")},bt=T=>(bt=Xe())(T),Rt=(...T)=>{for(var P="",j=!1,Y=T.length-1;-1<=Y&&!j;Y--){if(j=0<=Y?T[Y]:"/",typeof j!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!j)return"";P=j+"/"+P,j=j.charAt(0)==="/"}return P=we(P.split("/").filter(de=>!!de),!j).join("/"),(j?"/":"")+P||"."},Dt=[],he=T=>{for(var P=0,j=0;j<T.length;++j){var Y=T.charCodeAt(j);127>=Y?P++:2047>=Y?P+=2:55296<=Y&&57343>=Y?(P+=4,++j):P+=3}return P},Ae=(T,P,j,Y)=>{if(!(0<Y))return 0;var de=j;Y=j+Y-1;for(var Re=0;Re<T.length;++Re){var Be=T.charCodeAt(Re);if(55296<=Be&&57343>=Be){var Ht=T.charCodeAt(++Re);Be=65536+((Be&1023)<<10)|Ht&1023}if(127>=Be){if(j>=Y)break;P[j++]=Be}else{if(2047>=Be){if(j+1>=Y)break;P[j++]=192|Be>>6}else{if(65535>=Be){if(j+2>=Y)break;P[j++]=224|Be>>12}else{if(j+3>=Y)break;P[j++]=240|Be>>18,P[j++]=128|Be>>12&63}P[j++]=128|Be>>6&63}P[j++]=128|Be&63}}return P[j]=0,j-de};function L(T,P){var j=Array(he(T)+1);return T=Ae(T,j,0,j.length),P&&(j.length=T),j}var z=[];function W(T,P){z[T]={input:[],output:[],Wa:P},ra(T,X)}var X={open(T){var P=z[T.node.rdev];if(!P)throw new ot(43);T.tty=P,T.seekable=!1},close(T){T.tty.Wa.fsync(T.tty)},fsync(T){T.tty.Wa.fsync(T.tty)},read(T,P,j,Y){if(!T.tty||!T.tty.Wa.rb)throw new ot(60);for(var de=0,Re=0;Re<Y;Re++){try{var Be=T.tty.Wa.rb(T.tty)}catch{throw new ot(29)}if(Be===void 0&&de===0)throw new ot(6);if(Be==null)break;de++,P[j+Re]=Be}return de&&(T.node.timestamp=Date.now()),de},write(T,P,j,Y){if(!T.tty||!T.tty.Wa.ib)throw new ot(60);try{for(var de=0;de<Y;de++)T.tty.Wa.ib(T.tty,P[j+de])}catch{throw new ot(29)}return Y&&(T.node.timestamp=Date.now()),de}},Se={rb(){e:{if(!Dt.length){var T=null;if(E){var P=Buffer.alloc(256),j=0,Y=process.stdin.fd;try{j=G.readSync(Y,P,0,256)}catch(de){if(de.toString().includes("EOF"))j=0;else throw de}0<j&&(T=P.slice(0,j).toString("utf-8"))}else typeof window<"u"&&typeof window.prompt=="function"&&(T=window.prompt("Input: "),T!==null&&(T+=`
`));if(!T){T=null;break e}Dt=L(T,!0)}T=Dt.shift()}return T},ib(T,P){P===null||P===10?(ae(D(T.output,0)),T.output=[]):P!=0&&T.output.push(P)},fsync(T){T.output&&0<T.output.length&&(ae(D(T.output,0)),T.output=[])},Lb(){return{Gb:25856,Ib:5,Fb:191,Hb:35387,Eb:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},Mb(){return 0},Nb(){return[24,80]}},Ue={ib(T,P){P===null||P===10?(te(D(T.output,0)),T.output=[]):P!=0&&T.output.push(P)},fsync(T){T.output&&0<T.output.length&&(te(D(T.output,0)),T.output=[])}};function ft(T,P){var j=T.Ha?T.Ha.length:0;j>=P||(P=Math.max(P,j*(1048576>j?2:1.125)>>>0),j!=0&&(P=Math.max(P,256)),j=T.Ha,T.Ha=new Uint8Array(P),0<T.La&&T.Ha.set(j.subarray(0,T.La),0))}var je={Pa:null,Qa(){return je.createNode(null,"/",16895,0)},createNode(T,P,j,Y){if((j&61440)===24576||(j&61440)===4096)throw new ot(63);return je.Pa||(je.Pa={dir:{node:{Oa:je.Fa.Oa,Na:je.Fa.Na,lookup:je.Fa.lookup,$a:je.Fa.$a,rename:je.Fa.rename,unlink:je.Fa.unlink,rmdir:je.Fa.rmdir,readdir:je.Fa.readdir,symlink:je.Fa.symlink},stream:{Sa:je.Ga.Sa}},file:{node:{Oa:je.Fa.Oa,Na:je.Fa.Na},stream:{Sa:je.Ga.Sa,read:je.Ga.read,write:je.Ga.write,kb:je.Ga.kb,ab:je.Ga.ab,bb:je.Ga.bb}},link:{node:{Oa:je.Fa.Oa,Na:je.Fa.Na,readlink:je.Fa.readlink},stream:{}},ob:{node:{Oa:je.Fa.Oa,Na:je.Fa.Na},stream:Nl}}),j=Dl(T,P,j,Y),gi(j.mode)?(j.Fa=je.Pa.dir.node,j.Ga=je.Pa.dir.stream,j.Ha={}):(j.mode&61440)===32768?(j.Fa=je.Pa.file.node,j.Ga=je.Pa.file.stream,j.La=0,j.Ha=null):(j.mode&61440)===40960?(j.Fa=je.Pa.link.node,j.Ga=je.Pa.link.stream):(j.mode&61440)===8192&&(j.Fa=je.Pa.ob.node,j.Ga=je.Pa.ob.stream),j.timestamp=Date.now(),T&&(T.Ha[P]=j,T.timestamp=j.timestamp),j},Kb(T){return T.Ha?T.Ha.subarray?T.Ha.subarray(0,T.La):new Uint8Array(T.Ha):new Uint8Array(0)},Fa:{Oa(T){var P={};return P.dev=(T.mode&61440)===8192?T.id:1,P.ino=T.id,P.mode=T.mode,P.nlink=1,P.uid=0,P.gid=0,P.rdev=T.rdev,gi(T.mode)?P.size=4096:(T.mode&61440)===32768?P.size=T.La:(T.mode&61440)===40960?P.size=T.link.length:P.size=0,P.atime=new Date(T.timestamp),P.mtime=new Date(T.timestamp),P.ctime=new Date(T.timestamp),P.yb=4096,P.blocks=Math.ceil(P.size/P.yb),P},Na(T,P){if(P.mode!==void 0&&(T.mode=P.mode),P.timestamp!==void 0&&(T.timestamp=P.timestamp),P.size!==void 0&&(P=P.size,T.La!=P))if(P==0)T.Ha=null,T.La=0;else{var j=T.Ha;T.Ha=new Uint8Array(P),j&&T.Ha.set(j.subarray(0,Math.min(P,T.La))),T.La=P}},lookup(){throw qo[44]},$a(T,P,j,Y){return je.createNode(T,P,j,Y)},rename(T,P,j){if(gi(T.mode)){try{var Y=sr(P,j)}catch{}if(Y)for(var de in Y.Ha)throw new ot(55)}delete T.parent.Ha[T.name],T.parent.timestamp=Date.now(),T.name=j,P.Ha[j]=T,P.timestamp=T.parent.timestamp},unlink(T,P){delete T.Ha[P],T.timestamp=Date.now()},rmdir(T,P){var j=sr(T,P),Y;for(Y in j.Ha)throw new ot(55);delete T.Ha[P],T.timestamp=Date.now()},readdir(T){var P=[".",".."],j;for(j of Object.keys(T.Ha))P.push(j);return P},symlink(T,P,j){return T=je.createNode(T,P,41471,0),T.link=j,T},readlink(T){if((T.mode&61440)!==40960)throw new ot(28);return T.link}},Ga:{read(T,P,j,Y,de){var Re=T.node.Ha;if(de>=T.node.La)return 0;if(T=Math.min(T.node.La-de,Y),8<T&&Re.subarray)P.set(Re.subarray(de,de+T),j);else for(Y=0;Y<T;Y++)P[j+Y]=Re[de+Y];return T},write(T,P,j,Y,de,Re){if(P.buffer===me.buffer&&(Re=!1),!Y)return 0;if(T=T.node,T.timestamp=Date.now(),P.subarray&&(!T.Ha||T.Ha.subarray)){if(Re)return T.Ha=P.subarray(j,j+Y),T.La=Y;if(T.La===0&&de===0)return T.Ha=P.slice(j,j+Y),T.La=Y;if(de+Y<=T.La)return T.Ha.set(P.subarray(j,j+Y),de),Y}if(ft(T,de+Y),T.Ha.subarray&&P.subarray)T.Ha.set(P.subarray(j,j+Y),de);else for(Re=0;Re<Y;Re++)T.Ha[de+Re]=P[j+Re];return T.La=Math.max(T.La,de+Y),Y},Sa(T,P,j){if(j===1?P+=T.position:j===2&&(T.node.mode&61440)===32768&&(P+=T.node.La),0>P)throw new ot(28);return P},kb(T,P,j){ft(T.node,P+j),T.node.La=Math.max(T.node.La,P+j)},ab(T,P,j,Y,de){if((T.node.mode&61440)!==32768)throw new ot(43);if(T=T.node.Ha,de&2||T.buffer!==me.buffer){if((0<j||j+P<T.length)&&(T.subarray?T=T.subarray(j,j+P):T=Array.prototype.slice.call(T,j,j+P)),j=!0,P=65536*Math.ceil(P/65536),(de=ns(65536,P))?(Pe.fill(0,de,de+P),P=de):P=0,!P)throw new ot(48);me.set(T,P)}else j=!1,P=T.byteOffset;return{Cb:P,tb:j}},bb(T,P,j,Y){return je.Ga.write(T,P,0,Y,j,!1),0}}},rt=(T,P)=>{var j=0;return T&&(j|=365),P&&(j|=146),j},Cn=null,Kt={},ti=[],ao=1,Oi=null,wr=!0,ot=class{constructor(T){this.name="ErrnoError",this.Ja=T}},qo={},od=class{constructor(){this.Za={},this.node=null}get flags(){return this.Za.flags}set flags(T){this.Za.flags=T}get position(){return this.Za.position}set position(T){this.Za.position=T}},Al=class{constructor(T,P,j,Y){T||(T=this),this.parent=T,this.Qa=T.Qa,this.Ua=null,this.id=ao++,this.name=P,this.mode=j,this.Fa={},this.Ga={},this.rdev=Y}get read(){return(this.mode&365)===365}set read(T){T?this.mode|=365:this.mode&=-366}get write(){return(this.mode&146)===146}set write(T){T?this.mode|=146:this.mode&=-147}};function Hn(T,P={}){if(T=Rt(T),!T)return{path:"",node:null};if(P=Object.assign({pb:!0,jb:0},P),8<P.jb)throw new ot(32);T=T.split("/").filter(Be=>!!Be);for(var j=Cn,Y="/",de=0;de<T.length;de++){var Re=de===T.length-1;if(Re&&P.parent)break;if(j=sr(j,T[de]),Y=ze(Y+"/"+T[de]),j.Ua&&(!Re||Re&&P.pb)&&(j=j.Ua.root),!Re||P.Ra){for(Re=0;(j.mode&61440)===40960;)if(j=jl(Y),Y=Rt(Ne(Y),j),j=Hn(Y,{jb:P.jb+1}).node,40<Re++)throw new ot(32)}}return{path:Y,node:j}}function lo(T){for(var P;;){if(T===T.parent)return T=T.Qa.sb,P?T[T.length-1]!=="/"?`${T}/${P}`:T+P:T;P=P?`${T.name}/${P}`:T.name,T=T.parent}}function Zo(T,P){for(var j=0,Y=0;Y<P.length;Y++)j=(j<<5)-j+P.charCodeAt(Y)|0;return(T+j>>>0)%Oi.length}function br(T){var P=Zo(T.parent.id,T.name);if(Oi[P]===T)Oi[P]=T.Va;else for(P=Oi[P];P;){if(P.Va===T){P.Va=T.Va;break}P=P.Va}}function sr(T,P){var j=gi(T.mode)?(j=xr(T,"x"))?j:T.Fa.lookup?0:2:54;if(j)throw new ot(j);for(j=Oi[Zo(T.id,P)];j;j=j.Va){var Y=j.name;if(j.parent.id===T.id&&Y===P)return j}return T.Fa.lookup(T,P)}function Dl(T,P,j,Y){return T=new Al(T,P,j,Y),P=Zo(T.parent.id,T.name),T.Va=Oi[P],Oi[P]=T}function gi(T){return(T&61440)===16384}function Xo(T){var P=["r","w","rw"][T&3];return T&512&&(P+="w"),P}function xr(T,P){if(wr)return 0;if(!P.includes("r")||T.mode&292){if(P.includes("w")&&!(T.mode&146)||P.includes("x")&&!(T.mode&73))return 2}else return 2;return 0}function Il(T,P){try{return sr(T,P),20}catch{}return xr(T,"wx")}function Ml(T,P,j){try{var Y=sr(T,P)}catch(de){return de.Ja}if(T=xr(T,"wx"))return T;if(j){if(!gi(Y.mode))return 54;if(Y===Y.parent||lo(Y)==="/")return 10}else if(gi(Y.mode))return 31;return 0}function ni(T){if(T=ti[T],!T)throw new ot(8);return T}function ia(T,P=-1){if(T=Object.assign(new od,T),P==-1)e:{for(P=0;4096>=P;P++)if(!ti[P])break e;throw new ot(33)}return T.fd=P,ti[P]=T}function Ll(T,P=-1){var j,Y;return T=ia(T,P),(Y=(j=T.Ga)==null?void 0:j.Jb)==null||Y.call(j,T),T}var Nl={open(T){var P,j;T.Ga=Kt[T.node.rdev].Ga,(j=(P=T.Ga).open)==null||j.call(P,T)},Sa(){throw new ot(70)}};function ra(T,P){Kt[T]={Ga:P}}function zl(T,P){var j=P==="/";if(j&&Cn)throw new ot(10);if(!j&&P){var Y=Hn(P,{pb:!1});if(P=Y.path,Y=Y.node,Y.Ua)throw new ot(10);if(!gi(Y.mode))throw new ot(54)}P={type:T,Ob:{},sb:P,Bb:[]},T=T.Qa(P),T.Qa=P,P.root=T,j?Cn=T:Y&&(Y.Ua=P,Y.Qa&&Y.Qa.Bb.push(P))}function Yo(T,P,j){var Y=Hn(T,{parent:!0}).node;if(T=Qe(T),!T||T==="."||T==="..")throw new ot(28);var de=Il(Y,T);if(de)throw new ot(de);if(!Y.Fa.$a)throw new ot(63);return Y.Fa.$a(Y,T,P,j)}function Ai(T,P){return Yo(T,(P!==void 0?P:511)&1023|16384,0)}function uo(T,P,j){typeof j>"u"&&(j=P,P=438),Yo(T,P|8192,j)}function $o(T,P){if(!Rt(T))throw new ot(44);var j=Hn(P,{parent:!0}).node;if(!j)throw new ot(44);P=Qe(P);var Y=Il(j,P);if(Y)throw new ot(Y);if(!j.Fa.symlink)throw new ot(63);j.Fa.symlink(j,P,T)}function oa(T){var P=Hn(T,{parent:!0}).node;T=Qe(T);var j=sr(P,T),Y=Ml(P,T,!0);if(Y)throw new ot(Y);if(!P.Fa.rmdir)throw new ot(63);if(j.Ua)throw new ot(10);P.Fa.rmdir(P,T),br(j)}function sa(T){var P=Hn(T,{parent:!0}).node;if(!P)throw new ot(44);T=Qe(T);var j=sr(P,T),Y=Ml(P,T,!1);if(Y)throw new ot(Y);if(!P.Fa.unlink)throw new ot(63);if(j.Ua)throw new ot(10);P.Fa.unlink(P,T),br(j)}function jl(T){if(T=Hn(T).node,!T)throw new ot(44);if(!T.Fa.readlink)throw new ot(28);return Rt(lo(T.parent),T.Fa.readlink(T))}function Mr(T,P){if(T=Hn(T,{Ra:!P}).node,!T)throw new ot(44);if(!T.Fa.Oa)throw new ot(63);return T.Fa.Oa(T)}function Ko(T){return Mr(T,!0)}function co(T,P){if(T=typeof T=="string"?Hn(T,{Ra:!0}).node:T,!T.Fa.Na)throw new ot(63);T.Fa.Na(T,{mode:P&4095|T.mode&-4096,timestamp:Date.now()})}function aa(T,P){if(0>P)throw new ot(28);if(T=typeof T=="string"?Hn(T,{Ra:!0}).node:T,!T.Fa.Na)throw new ot(63);if(gi(T.mode))throw new ot(31);if((T.mode&61440)!==32768)throw new ot(28);var j=xr(T,"w");if(j)throw new ot(j);T.Fa.Na(T,{size:P,timestamp:Date.now()})}function Sr(T,P,j){if(T==="")throw new ot(44);if(typeof P=="string"){var Y={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[P];if(typeof Y>"u")throw Error(`Unknown file open mode: ${P}`);P=Y}if(j=P&64?(typeof j>"u"?438:j)&4095|32768:0,typeof T=="object")var de=T;else{T=ze(T);try{de=Hn(T,{Ra:!(P&131072)}).node}catch{}}if(Y=!1,P&64)if(de){if(P&128)throw new ot(20)}else de=Yo(T,j,0),Y=!0;if(!de)throw new ot(44);if((de.mode&61440)===8192&&(P&=-513),P&65536&&!gi(de.mode))throw new ot(54);if(!Y&&(j=de?(de.mode&61440)===40960?32:gi(de.mode)&&(Xo(P)!=="r"||P&512)?31:xr(de,Xo(P)):44))throw new ot(j);return P&512&&!Y&&aa(de,0),P&=-131713,de=ia({node:de,path:lo(de),flags:P,seekable:!0,position:0,Ga:de.Ga,Db:[],error:!1}),de.Ga.open&&de.Ga.open(de),!m.logReadFiles||P&1||(Lr||(Lr={}),T in Lr||(Lr[T]=1)),de}function Qo(T){if(T.fd===null)throw new ot(8);T.gb&&(T.gb=null);try{T.Ga.close&&T.Ga.close(T)}catch(P){throw P}finally{ti[T.fd]=null}T.fd=null}function la(T,P,j){if(T.fd===null)throw new ot(8);if(!T.seekable||!T.Ga.Sa)throw new ot(70);if(j!=0&&j!=1&&j!=2)throw new ot(28);T.position=T.Ga.Sa(T,P,j),T.Db=[]}function Hl(T,P,j,Y,de){if(0>Y||0>de)throw new ot(28);if(T.fd===null)throw new ot(8);if((T.flags&2097155)===1)throw new ot(8);if(gi(T.node.mode))throw new ot(31);if(!T.Ga.read)throw new ot(28);var Re=typeof de<"u";if(!Re)de=T.position;else if(!T.seekable)throw new ot(70);return P=T.Ga.read(T,P,j,Y,de),Re||(T.position+=P),P}function Me(T,P,j,Y,de){if(0>Y||0>de)throw new ot(28);if(T.fd===null)throw new ot(8);if(!(T.flags&2097155))throw new ot(8);if(gi(T.node.mode))throw new ot(31);if(!T.Ga.write)throw new ot(28);T.seekable&&T.flags&1024&&la(T,0,2);var Re=typeof de<"u";if(!Re)de=T.position;else if(!T.seekable)throw new ot(70);return P=T.Ga.write(T,P,j,Y,de,void 0),Re||(T.position+=P),P}function ua(T){var P,j=Sr(T,j||0);T=Mr(T).size;var Y=new Uint8Array(T);return Hl(j,Y,0,T,0),P=Y,Qo(j),P}var Ji;function ho(T,P,j){T=ze("/dev/"+T);var Y=rt(!!P,!!j);po||(po=64);var de=po++<<8|0;ra(de,{open(Re){Re.seekable=!1},close(){var Re;(Re=j?.buffer)!=null&&Re.length&&j(10)},read(Re,Be,Ht,rn){for(var qt=0,jn=0;jn<rn;jn++){try{var Vn=P()}catch{throw new ot(29)}if(Vn===void 0&&qt===0)throw new ot(6);if(Vn==null)break;qt++,Be[Ht+jn]=Vn}return qt&&(Re.node.timestamp=Date.now()),qt},write(Re,Be,Ht,rn){for(var qt=0;qt<rn;qt++)try{j(Be[Ht+qt])}catch{throw new ot(29)}return rn&&(Re.node.timestamp=Date.now()),qt}}),uo(T,Y,de)}var po,yn={},Lr;function Bi(T,P,j){if(P.charAt(0)==="/")return P;if(T=T===-100?"/":ni(T).path,P.length==0){if(!j)throw new ot(44);return T}return ze(T+"/"+P)}function Er(T,P,j){T=T(P),fe[j>>2]=T.dev,fe[j+4>>2]=T.mode,ve[j+8>>2]=T.nlink,fe[j+12>>2]=T.uid,fe[j+16>>2]=T.gid,fe[j+20>>2]=T.rdev,wt=[T.size>>>0,($e=T.size,1<=+Math.abs($e)?0<$e?+Math.floor($e/4294967296)>>>0:~~+Math.ceil(($e-+(~~$e>>>0))/4294967296)>>>0:0)],fe[j+24>>2]=wt[0],fe[j+28>>2]=wt[1],fe[j+32>>2]=4096,fe[j+36>>2]=T.blocks,P=T.atime.getTime();var Y=T.mtime.getTime(),de=T.ctime.getTime();return wt=[Math.floor(P/1e3)>>>0,($e=Math.floor(P/1e3),1<=+Math.abs($e)?0<$e?+Math.floor($e/4294967296)>>>0:~~+Math.ceil(($e-+(~~$e>>>0))/4294967296)>>>0:0)],fe[j+40>>2]=wt[0],fe[j+44>>2]=wt[1],ve[j+48>>2]=P%1e3*1e3,wt=[Math.floor(Y/1e3)>>>0,($e=Math.floor(Y/1e3),1<=+Math.abs($e)?0<$e?+Math.floor($e/4294967296)>>>0:~~+Math.ceil(($e-+(~~$e>>>0))/4294967296)>>>0:0)],fe[j+56>>2]=wt[0],fe[j+60>>2]=wt[1],ve[j+64>>2]=Y%1e3*1e3,wt=[Math.floor(de/1e3)>>>0,($e=Math.floor(de/1e3),1<=+Math.abs($e)?0<$e?+Math.floor($e/4294967296)>>>0:~~+Math.ceil(($e-+(~~$e>>>0))/4294967296)>>>0:0)],fe[j+72>>2]=wt[0],fe[j+76>>2]=wt[1],ve[j+80>>2]=de%1e3*1e3,wt=[T.ino>>>0,($e=T.ino,1<=+Math.abs($e)?0<$e?+Math.floor($e/4294967296)>>>0:~~+Math.ceil(($e-+(~~$e>>>0))/4294967296)>>>0:0)],fe[j+88>>2]=wt[0],fe[j+92>>2]=wt[1],0}var fo=void 0;function er(){var T=fe[+fo>>2];return fo+=4,T}var tr=(T,P)=>P+2097152>>>0<4194305-!!T?(T>>>0)+4294967296*P:NaN,sd=[0,31,60,91,121,152,182,213,244,274,305,335],ad=[0,31,59,90,120,151,181,212,243,273,304,334],ca={},da=()=>{if(!Jo){var T={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:O||"./this.program"},P;for(P in ca)ca[P]===void 0?delete T[P]:T[P]=ca[P];var j=[];for(P in T)j.push(`${P}=${T[P]}`);Jo=j}return Jo},Jo,ha=T=>{var P=he(T)+1,j=nr(P);return Ae(T,Pe,j,P),j},Fl=(T,P,j,Y)=>{var de={string:qt=>{var jn=0;return qt!=null&&qt!==0&&(jn=ha(qt)),jn},array:qt=>{var jn=nr(qt.length);return me.set(qt,jn),jn}};T=m["_"+T];var Re=[],Be=0;if(Y)for(var Ht=0;Ht<Y.length;Ht++){var rn=de[j[Ht]];rn?(Be===0&&(Be=go()),Re[Ht]=rn(Y[Ht])):Re[Ht]=Y[Ht]}return j=T(...Re),j=function(qt){return Be!==0&&zr(Be),P==="string"?qt?D(Pe,qt):"":P==="boolean"?!!qt:qt}(j)},mo=0,es=(T,P)=>(P=P==1?nr(T.length):pa(T.length),T.subarray||T.slice||(T=new Uint8Array(T)),Pe.set(T,P),P),Tr,Pn=[],Fn,Nr=T=>{Tr.delete(Fn.get(T)),Fn.set(T,null),Pn.push(T)},ts=(T,P)=>{if(!Tr){Tr=new WeakMap;var j=Fn.length;if(Tr)for(var Y=0;Y<0+j;Y++){var de=Fn.get(Y);de&&Tr.set(de,Y)}}if(j=Tr.get(T)||0)return j;if(Pn.length)j=Pn.pop();else{try{Fn.grow(1)}catch(Ht){throw Ht instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":Ht}j=Fn.length-1}try{Fn.set(j,T)}catch(Ht){if(!(Ht instanceof TypeError))throw Ht;if(typeof WebAssembly.Function=="function"){Y=WebAssembly.Function,de={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"};for(var Re={parameters:[],results:P[0]=="v"?[]:[de[P[0]]]},Be=1;Be<P.length;++Be)Re.parameters.push(de[P[Be]]);P=new Y(Re,T)}else{for(Y=[1],de=P.slice(0,1),P=P.slice(1),Re={i:127,p:127,j:126,f:125,d:124,e:111},Y.push(96),Be=P.length,128>Be?Y.push(Be):Y.push(Be%128|128,Be>>7),Be=0;Be<P.length;++Be)Y.push(Re[P[Be]]);de=="v"?Y.push(0):Y.push(1,Re[de]),P=[0,97,115,109,1,0,0,0,1],de=Y.length,128>de?P.push(de):P.push(de%128|128,de>>7),P.push(...Y),P.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),P=new WebAssembly.Module(new Uint8Array(P)),P=new WebAssembly.Instance(P,{e:{f:T}}).exports.f}Fn.set(j,P)}return Tr.set(T,j),j};[44].forEach(T=>{qo[T]=new ot(T),qo[T].stack="<generic error, no stack>"}),Oi=Array(4096),zl(je,"/"),Ai("/tmp"),Ai("/home"),Ai("/home/web_user"),function(){Ai("/dev"),ra(259,{read:()=>0,write:(Y,de,Re,Be)=>Be}),uo("/dev/null",259),W(1280,Se),W(1536,Ue),uo("/dev/tty",1280),uo("/dev/tty1",1536);var T=new Uint8Array(1024),P=0,j=()=>(P===0&&(P=bt(T).byteLength),T[--P]);ho("random",j),ho("urandom",j),Ai("/dev/shm"),Ai("/dev/shm/tmp")}(),function(){Ai("/proc");var T=Ai("/proc/self");Ai("/proc/self/fd"),zl({Qa(){var P=Dl(T,"fd",16895,73);return P.Fa={lookup(j,Y){var de=ni(+Y);return j={parent:null,Qa:{sb:"fake"},Fa:{readlink:()=>de.path}},j.parent=j}},P}},"/proc/self/fd")}();var ld={a:(T,P,j,Y)=>{J(`Assertion failed: ${T?D(Pe,T):""}, at: `+[P?P?D(Pe,P):"":"unknown filename",j,Y?Y?D(Pe,Y):"":"unknown function"])},h:function(T,P){try{return T=T?D(Pe,T):"",co(T,P),0}catch(j){if(typeof yn>"u"||j.name!=="ErrnoError")throw j;return-j.Ja}},H:function(T,P,j){try{if(P=P?D(Pe,P):"",P=Bi(T,P),j&-8)return-28;var Y=Hn(P,{Ra:!0}).node;return Y?(T="",j&4&&(T+="r"),j&2&&(T+="w"),j&1&&(T+="x"),T&&xr(Y,T)?-2:0):-44}catch(de){if(typeof yn>"u"||de.name!=="ErrnoError")throw de;return-de.Ja}},i:function(T,P){try{var j=ni(T);return co(j.node,P),0}catch(Y){if(typeof yn>"u"||Y.name!=="ErrnoError")throw Y;return-Y.Ja}},g:function(T){try{var P=ni(T).node,j=typeof P=="string"?Hn(P,{Ra:!0}).node:P;if(!j.Fa.Na)throw new ot(63);return j.Fa.Na(j,{timestamp:Date.now()}),0}catch(Y){if(typeof yn>"u"||Y.name!=="ErrnoError")throw Y;return-Y.Ja}},b:function(T,P,j){fo=j;try{var Y=ni(T);switch(P){case 0:var de=er();if(0>de)break;for(;ti[de];)de++;return Ll(Y,de).fd;case 1:case 2:return 0;case 3:return Y.flags;case 4:return de=er(),Y.flags|=de,0;case 12:return de=er(),be[de+0>>1]=2,0;case 13:case 14:return 0}return-28}catch(Re){if(typeof yn>"u"||Re.name!=="ErrnoError")throw Re;return-Re.Ja}},f:function(T,P){try{var j=ni(T);return Er(Mr,j.path,P)}catch(Y){if(typeof yn>"u"||Y.name!=="ErrnoError")throw Y;return-Y.Ja}},n:function(T,P,j){P=tr(P,j);try{if(isNaN(P))return 61;var Y=ni(T);if(!(Y.flags&2097155))throw new ot(28);return aa(Y.node,P),0}catch(de){if(typeof yn>"u"||de.name!=="ErrnoError")throw de;return-de.Ja}},C:function(T,P){try{if(P===0)return-28;var j=he("/")+1;return P<j?-68:(Ae("/",Pe,T,P),j)}catch(Y){if(typeof yn>"u"||Y.name!=="ErrnoError")throw Y;return-Y.Ja}},F:function(T,P){try{return T=T?D(Pe,T):"",Er(Ko,T,P)}catch(j){if(typeof yn>"u"||j.name!=="ErrnoError")throw j;return-j.Ja}},z:function(T,P,j){try{return P=P?D(Pe,P):"",P=Bi(T,P),P=ze(P),P[P.length-1]==="/"&&(P=P.substr(0,P.length-1)),Ai(P,j),0}catch(Y){if(typeof yn>"u"||Y.name!=="ErrnoError")throw Y;return-Y.Ja}},E:function(T,P,j,Y){try{P=P?D(Pe,P):"";var de=Y&256;return P=Bi(T,P,Y&4096),Er(de?Ko:Mr,P,j)}catch(Re){if(typeof yn>"u"||Re.name!=="ErrnoError")throw Re;return-Re.Ja}},x:function(T,P,j,Y){fo=Y;try{P=P?D(Pe,P):"",P=Bi(T,P);var de=Y?er():0;return Sr(P,j,de).fd}catch(Re){if(typeof yn>"u"||Re.name!=="ErrnoError")throw Re;return-Re.Ja}},v:function(T,P,j,Y){try{if(P=P?D(Pe,P):"",P=Bi(T,P),0>=Y)return-28;var de=jl(P),Re=Math.min(Y,he(de)),Be=me[j+Re];return Ae(de,Pe,j,Y+1),me[j+Re]=Be,Re}catch(Ht){if(typeof yn>"u"||Ht.name!=="ErrnoError")throw Ht;return-Ht.Ja}},u:function(T){try{return T=T?D(Pe,T):"",oa(T),0}catch(P){if(typeof yn>"u"||P.name!=="ErrnoError")throw P;return-P.Ja}},G:function(T,P){try{return T=T?D(Pe,T):"",Er(Mr,T,P)}catch(j){if(typeof yn>"u"||j.name!=="ErrnoError")throw j;return-j.Ja}},r:function(T,P,j){try{return P=P?D(Pe,P):"",P=Bi(T,P),j===0?sa(P):j===512?oa(P):J("Invalid flags passed to unlinkat"),0}catch(Y){if(typeof yn>"u"||Y.name!=="ErrnoError")throw Y;return-Y.Ja}},q:function(T,P,j){try{if(P=P?D(Pe,P):"",P=Bi(T,P,!0),j){var Y=ve[j>>2]+4294967296*fe[j+4>>2],de=fe[j+8>>2];Re=1e3*Y+de/1e6,j+=16,Y=ve[j>>2]+4294967296*fe[j+4>>2],de=fe[j+8>>2],Be=1e3*Y+de/1e6}else var Re=Date.now(),Be=Re;T=Re;var Ht=Hn(P,{Ra:!0}).node;return Ht.Fa.Na(Ht,{timestamp:Math.max(T,Be)}),0}catch(rn){if(typeof yn>"u"||rn.name!=="ErrnoError")throw rn;return-rn.Ja}},l:function(T,P,j){T=new Date(1e3*tr(T,P)),fe[j>>2]=T.getSeconds(),fe[j+4>>2]=T.getMinutes(),fe[j+8>>2]=T.getHours(),fe[j+12>>2]=T.getDate(),fe[j+16>>2]=T.getMonth(),fe[j+20>>2]=T.getFullYear()-1900,fe[j+24>>2]=T.getDay(),P=T.getFullYear(),fe[j+28>>2]=(P%4!==0||P%100===0&&P%400!==0?ad:sd)[T.getMonth()]+T.getDate()-1|0,fe[j+36>>2]=-(60*T.getTimezoneOffset()),P=new Date(T.getFullYear(),6,1).getTimezoneOffset();var Y=new Date(T.getFullYear(),0,1).getTimezoneOffset();fe[j+32>>2]=(P!=Y&&T.getTimezoneOffset()==Math.min(Y,P))|0},j:function(T,P,j,Y,de,Re,Be,Ht){de=tr(de,Re);try{if(isNaN(de))return 61;var rn=ni(Y);if(P&2&&!(j&2)&&(rn.flags&2097155)!==2)throw new ot(2);if((rn.flags&2097155)===1)throw new ot(2);if(!rn.Ga.ab)throw new ot(43);var qt=rn.Ga.ab(rn,T,de,P,j),jn=qt.Cb;return fe[Be>>2]=qt.tb,ve[Ht>>2]=jn,0}catch(Vn){if(typeof yn>"u"||Vn.name!=="ErrnoError")throw Vn;return-Vn.Ja}},k:function(T,P,j,Y,de,Re,Be){Re=tr(Re,Be);try{var Ht=ni(de);if(j&2){if((Ht.node.mode&61440)!==32768)throw new ot(43);if(!(Y&2)){var rn=Pe.slice(T,T+P);Ht.Ga.bb&&Ht.Ga.bb(Ht,rn,Re,P,Y)}}}catch(qt){if(typeof yn>"u"||qt.name!=="ErrnoError")throw qt;return-qt.Ja}},y:(T,P,j,Y)=>{var de=new Date().getFullYear(),Re=new Date(de,0,1).getTimezoneOffset();de=new Date(de,6,1).getTimezoneOffset(),ve[T>>2]=60*Math.max(Re,de),fe[P>>2]=+(Re!=de),P=Be=>{var Ht=Math.abs(Be);return`UTC${0<=Be?"-":"+"}${String(Math.floor(Ht/60)).padStart(2,"0")}${String(Ht%60).padStart(2,"0")}`},T=P(Re),P=P(de),de<Re?(Ae(T,Pe,j,17),Ae(P,Pe,Y,17)):(Ae(T,Pe,Y,17),Ae(P,Pe,j,17))},d:()=>Date.now(),s:()=>2147483648,c:()=>performance.now(),o:T=>{var P=Pe.length;if(T>>>=0,2147483648<T)return!1;for(var j=1;4>=j;j*=2){var Y=P*(1+.2/j);Y=Math.min(Y,T+100663296);var de=Math;Y=Math.max(T,Y);e:{de=(de.min.call(de,2147483648,Y+(65536-Y%65536)%65536)-le.buffer.byteLength+65535)/65536;try{le.grow(de),Te();var Re=1;break e}catch{}Re=void 0}if(Re)return!0}return!1},A:(T,P)=>{var j=0;return da().forEach((Y,de)=>{var Re=P+j;for(de=ve[T+4*de>>2]=Re,Re=0;Re<Y.length;++Re)me[de++]=Y.charCodeAt(Re);me[de]=0,j+=Y.length+1}),0},B:(T,P)=>{var j=da();ve[T>>2]=j.length;var Y=0;return j.forEach(de=>Y+=de.length+1),ve[P>>2]=Y,0},e:function(T){try{var P=ni(T);return Qo(P),0}catch(j){if(typeof yn>"u"||j.name!=="ErrnoError")throw j;return j.Ja}},p:function(T,P){try{var j=ni(T);return me[P]=j.tty?2:gi(j.mode)?3:(j.mode&61440)===40960?7:4,be[P+2>>1]=0,wt=[0,($e=0,1<=+Math.abs($e)?0<$e?+Math.floor($e/4294967296)>>>0:~~+Math.ceil(($e-+(~~$e>>>0))/4294967296)>>>0:0)],fe[P+8>>2]=wt[0],fe[P+12>>2]=wt[1],wt=[0,($e=0,1<=+Math.abs($e)?0<$e?+Math.floor($e/4294967296)>>>0:~~+Math.ceil(($e-+(~~$e>>>0))/4294967296)>>>0:0)],fe[P+16>>2]=wt[0],fe[P+20>>2]=wt[1],0}catch(Y){if(typeof yn>"u"||Y.name!=="ErrnoError")throw Y;return Y.Ja}},w:function(T,P,j,Y){try{e:{var de=ni(T);T=P;for(var Re,Be=P=0;Be<j;Be++){var Ht=ve[T>>2],rn=ve[T+4>>2];T+=8;var qt=Hl(de,me,Ht,rn,Re);if(0>qt){var jn=-1;break e}if(P+=qt,qt<rn)break;typeof Re<"u"&&(Re+=qt)}jn=P}return ve[Y>>2]=jn,0}catch(Vn){if(typeof yn>"u"||Vn.name!=="ErrnoError")throw Vn;return Vn.Ja}},m:function(T,P,j,Y,de){P=tr(P,j);try{if(isNaN(P))return 61;var Re=ni(T);return la(Re,P,Y),wt=[Re.position>>>0,($e=Re.position,1<=+Math.abs($e)?0<$e?+Math.floor($e/4294967296)>>>0:~~+Math.ceil(($e-+(~~$e>>>0))/4294967296)>>>0:0)],fe[de>>2]=wt[0],fe[de+4>>2]=wt[1],Re.gb&&P===0&&Y===0&&(Re.gb=null),0}catch(Be){if(typeof yn>"u"||Be.name!=="ErrnoError")throw Be;return Be.Ja}},D:function(T){var P;try{var j=ni(T);return(P=j.Ga)!=null&&P.fsync?j.Ga.fsync(j):0}catch(Y){if(typeof yn>"u"||Y.name!=="ErrnoError")throw Y;return Y.Ja}},t:function(T,P,j,Y){try{e:{var de=ni(T);T=P;for(var Re,Be=P=0;Be<j;Be++){var Ht=ve[T>>2],rn=ve[T+4>>2];T+=8;var qt=Me(de,me,Ht,rn,Re);if(0>qt){var jn=-1;break e}P+=qt,typeof Re<"u"&&(Re+=qt)}jn=P}return ve[Y>>2]=jn,0}catch(Vn){if(typeof yn>"u"||Vn.name!=="ErrnoError")throw Vn;return Vn.Ja}}},Pt=function(){var T;function P(Y){var de;return Pt=Y.exports,le=Pt.I,Te(),Fn=Pt.K,ke.unshift(Pt.J),Le--,(de=m.monitorRunDependencies)==null||de.call(m,Le),Le==0&&st&&(Y=st,st=null,Y()),Pt}var j={a:ld};if(Le++,(T=m.monitorRunDependencies)==null||T.call(m,Le),m.instantiateWasm)try{return m.instantiateWasm(j,P)}catch(Y){return te(`Module.instantiateWasm callback failed with error: ${Y}`),!1}return mt||(mt=Et("sql-wasm.wasm")?"sql-wasm.wasm":m.locateFile?m.locateFile("sql-wasm.wasm",_):_+"sql-wasm.wasm"),at(j,function(Y){P(Y.instance)}),{}}();m._sqlite3_free=T=>(m._sqlite3_free=Pt.L)(T),m._sqlite3_value_text=T=>(m._sqlite3_value_text=Pt.M)(T),m._sqlite3_prepare_v2=(T,P,j,Y,de)=>(m._sqlite3_prepare_v2=Pt.N)(T,P,j,Y,de),m._sqlite3_step=T=>(m._sqlite3_step=Pt.O)(T),m._sqlite3_reset=T=>(m._sqlite3_reset=Pt.P)(T),m._sqlite3_exec=(T,P,j,Y,de)=>(m._sqlite3_exec=Pt.Q)(T,P,j,Y,de),m._sqlite3_finalize=T=>(m._sqlite3_finalize=Pt.R)(T),m._sqlite3_column_name=(T,P)=>(m._sqlite3_column_name=Pt.S)(T,P),m._sqlite3_column_text=(T,P)=>(m._sqlite3_column_text=Pt.T)(T,P),m._sqlite3_column_type=(T,P)=>(m._sqlite3_column_type=Pt.U)(T,P),m._sqlite3_errmsg=T=>(m._sqlite3_errmsg=Pt.V)(T),m._sqlite3_clear_bindings=T=>(m._sqlite3_clear_bindings=Pt.W)(T),m._sqlite3_value_blob=T=>(m._sqlite3_value_blob=Pt.X)(T),m._sqlite3_value_bytes=T=>(m._sqlite3_value_bytes=Pt.Y)(T),m._sqlite3_value_double=T=>(m._sqlite3_value_double=Pt.Z)(T),m._sqlite3_value_int=T=>(m._sqlite3_value_int=Pt._)(T),m._sqlite3_value_type=T=>(m._sqlite3_value_type=Pt.$)(T),m._sqlite3_result_blob=(T,P,j,Y)=>(m._sqlite3_result_blob=Pt.aa)(T,P,j,Y),m._sqlite3_result_double=(T,P)=>(m._sqlite3_result_double=Pt.ba)(T,P),m._sqlite3_result_error=(T,P,j)=>(m._sqlite3_result_error=Pt.ca)(T,P,j),m._sqlite3_result_int=(T,P)=>(m._sqlite3_result_int=Pt.da)(T,P),m._sqlite3_result_int64=(T,P,j)=>(m._sqlite3_result_int64=Pt.ea)(T,P,j),m._sqlite3_result_null=T=>(m._sqlite3_result_null=Pt.fa)(T),m._sqlite3_result_text=(T,P,j,Y)=>(m._sqlite3_result_text=Pt.ga)(T,P,j,Y),m._sqlite3_aggregate_context=(T,P)=>(m._sqlite3_aggregate_context=Pt.ha)(T,P),m._sqlite3_column_count=T=>(m._sqlite3_column_count=Pt.ia)(T),m._sqlite3_data_count=T=>(m._sqlite3_data_count=Pt.ja)(T),m._sqlite3_column_blob=(T,P)=>(m._sqlite3_column_blob=Pt.ka)(T,P),m._sqlite3_column_bytes=(T,P)=>(m._sqlite3_column_bytes=Pt.la)(T,P),m._sqlite3_column_double=(T,P)=>(m._sqlite3_column_double=Pt.ma)(T,P),m._sqlite3_bind_blob=(T,P,j,Y,de)=>(m._sqlite3_bind_blob=Pt.na)(T,P,j,Y,de),m._sqlite3_bind_double=(T,P,j)=>(m._sqlite3_bind_double=Pt.oa)(T,P,j),m._sqlite3_bind_int=(T,P,j)=>(m._sqlite3_bind_int=Pt.pa)(T,P,j),m._sqlite3_bind_text=(T,P,j,Y,de)=>(m._sqlite3_bind_text=Pt.qa)(T,P,j,Y,de),m._sqlite3_bind_parameter_index=(T,P)=>(m._sqlite3_bind_parameter_index=Pt.ra)(T,P),m._sqlite3_sql=T=>(m._sqlite3_sql=Pt.sa)(T),m._sqlite3_normalized_sql=T=>(m._sqlite3_normalized_sql=Pt.ta)(T),m._sqlite3_changes=T=>(m._sqlite3_changes=Pt.ua)(T),m._sqlite3_close_v2=T=>(m._sqlite3_close_v2=Pt.va)(T),m._sqlite3_create_function_v2=(T,P,j,Y,de,Re,Be,Ht,rn)=>(m._sqlite3_create_function_v2=Pt.wa)(T,P,j,Y,de,Re,Be,Ht,rn),m._sqlite3_open=(T,P)=>(m._sqlite3_open=Pt.xa)(T,P);var pa=m._malloc=T=>(pa=m._malloc=Pt.ya)(T),Ui=m._free=T=>(Ui=m._free=Pt.za)(T);m._RegisterExtensionFunctions=T=>(m._RegisterExtensionFunctions=Pt.Aa)(T);var ns=(T,P)=>(ns=Pt.Ba)(T,P),zr=T=>(zr=Pt.Ca)(T),nr=T=>(nr=Pt.Da)(T),go=()=>(go=Pt.Ea)();m.stackSave=()=>go(),m.stackRestore=T=>zr(T),m.stackAlloc=T=>nr(T),m.cwrap=(T,P,j,Y)=>{var de=!j||j.every(Re=>Re==="number"||Re==="boolean");return P!=="string"&&de&&!Y?m["_"+T]:(...Re)=>Fl(T,P,j,Re)},m.addFunction=ts,m.removeFunction=Nr,m.UTF8ToString=K,m.ALLOC_NORMAL=mo,m.allocate=es,m.allocateUTF8OnStack=ha;var is;st=function T(){is||Bl(),is||(st=T)};function Bl(){function T(){var P;if(!is&&(is=!0,m.calledRun=!0,!ce)){if(m.noFSInit||Ji||(Ji=!0,m.stdin=m.stdin,m.stdout=m.stdout,m.stderr=m.stderr,m.stdin?ho("stdin",m.stdin):$o("/dev/tty","/dev/stdin"),m.stdout?ho("stdout",null,m.stdout):$o("/dev/tty","/dev/stdout"),m.stderr?ho("stderr",null,m.stderr):$o("/dev/tty1","/dev/stderr"),Sr("/dev/stdin",0),Sr("/dev/stdout",1),Sr("/dev/stderr",1)),wr=!1,Lt(ke),(P=m.onRuntimeInitialized)==null||P.call(m),m.postRun)for(typeof m.postRun=="function"&&(m.postRun=[m.postRun]);m.postRun.length;){var j=m.postRun.shift();_e.unshift(j)}Lt(_e)}}if(!(0<Le)){if(m.preRun)for(typeof m.preRun=="function"&&(m.preRun=[m.preRun]);m.preRun.length;)$();Lt(ye),0<Le||(m.setStatus?(m.setStatus("Running..."),setTimeout(function(){setTimeout(function(){m.setStatus("")},1),T()},1)):T())}}if(m.preInit)for(typeof m.preInit=="function"&&(m.preInit=[m.preInit]);0<m.preInit.length;)m.preInit.pop()();return Bl(),d}),t)};e.exports=n,e.exports.default=n})(qP);var Pq=qP.exports;const _q=gr(Pq);function kq(e){return mi({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"}}]})(e)}function Rq(){return q.jsxs("div",{className:"loading",children:[q.jsx(kq,{}),q.jsx("span",{children:"Loading"})]})}const rd=B.createContext({categories:[],tags:[]});function ll(e){const i=[];for(;e.step();)i.push(e.getAsObject());return i}function lm(e){return q.jsxs("button",{className:e.isActive?"active pill":"pill",onClick:e.onClick,type:"button",children:[e.children,e.label]})}function Oq(e){return e.element_name?`${e.element_name} - ${e.surface_name}`:e.surface_name}function qS(e,i){return e.map(t=>i.find(n=>n.xml_id===t)).filter(Boolean)}function Aq(e,i,t,n){return`${e}#/ec/${i.surface_xml_id}/f/${i.surface_xml_id}/${i.layer_xml_id}?tags=${[...t,...n].join(",")}`}function Dq(e){const i=B.useContext(rd),t=B.useMemo(()=>qS(e.div.tagging_ids,e.tags),[e.div.tagging_ids,e.tags]),n=B.useMemo(()=>{const o={};return e.childElements.forEach(u=>{qS(u.tagging_ids,e.tags).forEach(h=>{o[h.name]?o[h.name].count++:o[h.name]={id:h.xml_id,count:1}})}),o},[e.childElements,e.tags]);return q.jsxs("div",{className:"record-box",children:[q.jsx("p",{children:q.jsx("a",{href:Aq(e.viewerUrl,e.div,i.categories,i.tags),target:"_blank",rel:"noopener noreferrer",children:Oq(e.div)})}),q.jsx("div",{className:"category-list",children:t.map(o=>q.jsx(lm,{label:o.name,isActive:i.categories.includes(o.xml_id)},o.id))}),q.jsxs("div",{className:"tag-list",children:[q.jsx("span",{className:"tag-list-label",children:"Tags"}),Object.keys(n).map(o=>q.jsx(lm,{label:o,isActive:i.tags.includes(n[o].id),children:q.jsx("span",{className:"tag-count",children:n[o].count})},o))]})]})}function Iq(e){return{...e,tagging_ids:e.tagging_ids.split(",")}}function Mq(e){const i=e.prepare(`
  SELECT
    elements.id AS id,
    elements.name AS element_name,
    elements.type AS element_type,
    elements.parent_id AS parent_id,
    surfaces.name AS surface_name,
    surfaces.xml_id AS surface_xml_id,
    layers.xml_id AS layer_xml_id,
    GROUP_CONCAT(tags.xml_id) as tagging_ids
  FROM
    taggings
  INNER JOIN elements
    ON elements.id = taggings.element_id
  INNER JOIN tags
    ON tags.id = taggings.tag_id
  INNER JOIN surfaces
    ON surfaces.id = elements.surface_id
  INNER JOIN layers
    ON layers.id = elements.layer_id
  GROUP BY elements.id`),t=e.prepare("SELECT * from tags");return{elements:ll(i).map(Iq),tags:ll(t)}}function Lq(e,i){const t=e.categories.length===0||i.element.tagging_ids.some(o=>e.categories.includes(o)),n=e.tags.length===0||i.childTags.some(o=>e.tags.includes(o));return t&&n}function Nq(e){const i=B.useContext(rd),{elements:t,tags:n}=B.useMemo(()=>Mq(e.db),[e.db]),o=B.useMemo(()=>{const u=[];for(const h of t){if(h.element_type!=="div")continue;const d=t.filter(m=>m.parent_id===h.id),p=d.flatMap(m=>m.tagging_ids);u.push({element:h,children:d,childTags:p})}return u},[t]);return q.jsxs("div",{className:"record-list-view",children:[q.jsxs("h1",{className:"entries-header",children:[e.recordLabel||"Records"," ","(",o.length,")"]}),o.map(u=>Lq(i,u)?q.jsx(Dq,{childElements:t.filter(h=>h.parent_id===u.element.id),div:u.element,tags:n,viewerUrl:e.viewerUrl},u.element.id):null)]})}function ZS(e){const[i,t]=B.useState(!0);return q.jsxs(q.Fragment,{children:[q.jsx("div",{className:"collapsible-menu",children:q.jsxs("button",{className:"collapsible-menu-toggle",onClick:()=>t(!i),type:"button",children:[q.jsx("p",{className:"collapsible-menu-title",children:e.title}),i?q.jsx(SG,{}):q.jsx(xG,{})]})}),i&&e.children]})}function zq(e){const{categories:i,toggleCategoryFilter:t,tags:n,toggleTagFilter:o}=B.useContext(rd),u=e.type==="categories"?t:o,h=B.useMemo(()=>e.type==="categories"?i.includes(e.tag.xml_id):n.includes(e.tag.xml_id),[e.type,e.tag.xml_id,i,n]);return q.jsx(lm,{isActive:h,onClick:()=>u(e.tag.xml_id),label:e.tag.name,children:h&&q.jsx(PG,{})})}function XS(e){return q.jsx("div",{className:"sidebar-tag-list",children:e.tags.map(i=>q.jsx(zq,{type:e.type,tag:i},i.id))})}function jq(e){const i=e.prepare(`
    SELECT
      tags.id AS id,
      tags.name AS name,
      tags.xml_id AS xml_id
    FROM
      tags
    INNER JOIN taggings
      ON taggings.tag_id = tags.id
    INNER JOIN elements
      ON elements.id = taggings.element_id
    WHERE
      elements.type = 'seg'
    GROUP BY
      tags.xml_id`),t=ll(i),n=e.prepare(`
    SELECT
      tags.id AS id,
      tags.name AS name,
      tags.xml_id AS xml_id
    FROM
      tags
    INNER JOIN taggings
      ON taggings.tag_id = tags.id
    INNER JOIN elements
      ON elements.id = taggings.element_id
    WHERE
      elements.type = 'div'
    GROUP BY
      tags.xml_id`),o=ll(n),u=e.prepare("SELECT * FROM taggings"),h=ll(u);return{tags:t.map(d=>{if(d.parent_id){const p=t.find(m=>m.id===d.parent_id);return{...d,name:`${p.name} - ${d.name}`}}return d}),categories:o,taggings:h}}function Hq(e){const i=B.useMemo(()=>jq(e.db),[e.db]);return q.jsxs("div",{className:"ec-sidebar",children:[q.jsx("h2",{children:"Filters"}),q.jsx("div",{className:"h-separator"}),q.jsx(ZS,{title:"Categories",children:q.jsx(XS,{tags:i.categories,type:"categories"})}),q.jsx("div",{className:"h-separator"}),q.jsx(ZS,{title:"Tags",children:q.jsx(XS,{tags:i.tags,type:"tags"})})]})}const Fq={categories:[],tags:[]};async function Bq(e){const i=await fetch(e);if(!i.ok)throw new Error("Failed fetching SQLite file.");const t=await i.arrayBuffer(),n=new Uint8Array(t),o=await _q({locateFile:u=>`https://sql.js.org/dist/${u}`});return new o.Database(n)}function Wq(e){const[i,t]=B.useState(null),[n,o]=B.useState(Fq),u=B.useCallback(p=>o({...n,categories:n.categories.includes(p)?n.categories.filter(m=>m!==p):[...n.categories,p]}),[n]),h=B.useCallback(p=>o({...n,tags:n.tags.includes(p)?n.tags.filter(m=>m!==p):[...n.tags,p]}),[n]),d=B.useMemo(()=>({...n,toggleCategoryFilter:u,toggleTagFilter:h}),[n,u,h]);return B.useEffect(()=>(i||(async()=>{const p=await Bq(e.dbUrl);t(p)})(),()=>{i&&i.close()}),[e.dbUrl,i]),i?q.jsx(rd.Provider,{value:d,children:q.jsxs("div",{className:"editioncrafter-record-list",children:[q.jsx(Hq,{db:i}),q.jsx(Nq,{db:i,recordLabel:e.recordLabel,viewerUrl:e.viewerUrl})]})}):q.jsx(Rq,{})}function Vq(e){const i=iE({palette:{primary:{main:"#792421"},secondary:{main:"#EBE3DD"}}});return q.jsx($6,{theme:i,children:q.jsx(Eq,{config:e,store:S4(e)})})}export{Wq as RecordList,Vq as default};
